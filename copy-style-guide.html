<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"d1c752d9869f8138c73723f77d88ace28021ab9b7df498a39c5819905927ea68f1597de73c0acd9471940c6b9ce487bfdefe7cd4bd655cf654640bf809ca616bd399547d6f528f75364471530bf1e63e8ee2baaa6cfa247d84d00616dbb464a24af29c03fd347ab37facf91cf41aab431e7153ed1c91ba4fe5e013b19920504a0f4ddd3b30d450c93927b5f09e0f0027705f63f4ac111d457f683f36913249f62661935e1e7d8dbd6b4a8e7c11f1ead5fe0712705c646e958d540d2d3f7ff42be7a6cab3e799ec17e82dbb52b31394643ef8d87ac6cf72097534b55a10f28ebf02773147b4593c116d1db76e253113152e5f604add493cb88fe16566c2b7652c578653f72c131a2d59f783cd3857edf1502b3edc259c953b67cb1f6fac5b2247321e0a2c5378b0cb181f20ddbffc2fb1b9c3e6d19f28ffa8cdbcca70821f99d8b09af971408a1bc34cfaa99d36f618fd59ea3546cfe97ca4bf9784c59033d572f559a335581b6351b339f421a94e2b81ee365d11d5daf0384d5036f61917639a944aecabd7d95f00915e29548b60fdedabeeb0881aeae9dca30e4fdba5f0febcba0aa3d151677bb553b894ffface424b7c4c04aca640910a714597c77ede7202311ad07458ff7803c03ac83824e97d432633bf16dab337f97e89a44222c3845549ce4791a7319d4955924de0ee47577ab91f3cc38c7385c5b572be0d4b1d8dabd75a5958f89a9ace5d36c1e08fb9efd8f594b0398fc257ea9d79adde6e1bdee0c392538f62bfb2f325cd48d15faa0361e7a8ddcab3a8923b87b4dc591fac52f393c42927e45dfca7eac7cb4bb27294e32892ebd7995621275a15082b8c763c8801b48da4e6a0e3791daf25e3fad7b8e7812af403e08ce876a65baee1e5413b6eaec5c318c22f4bbd379153f0cfa894f6f80383b1d3a2f1cd66017249c5b026a787022d34915c77e99701bb4cb2ea874fac48928b63a71a3704896b5416cadd953e3ffab7d2dcf001ba66cb41ab8ee40651ee888da7f96006c3b940e7fdfcbeb4780a3b96e5b14d9bfbd8a41d5fff88035fed97cce18fa1b1ebf1cdafdb4558e9ea7f3c1966294011ee41ceb3670aff01fc04f424053cade011e13a633b21f16e1caaced76f58de53dce06f16303f3cfa13c86cfac260b34fdb66a7c98d93ad0ce33751f6535ab80eaaee803f32870fbfe967a1e681bb3ef82e1b8f72c33abd85845a1b1cbcfc88781786ef50d6051bc786a4697bbf48d24028a102c8b2185f01935f7430c8a3567d4c08d8afdac109f03ed241b8d9c0fb63e64e7acdea8b3bc4e896f9bb157b9fe218d1f9674edab49aa81fdeb6570e7389f513016a6c40d7906e401635a0fb27cd298d4fd691a047eaff000b4ee10a05951c0844d9cba70eb345ee381fa0f908a1f81e37aad0ff4b8633221f6fd27abd237f0226a1a2dd6e9680570f27d7ed9f2ebe79e8878fb0e01de58104ca2c1c7285a3975dcfcf8515e30b9f2306bbc89e5a584c8c6ae65322245e63a1e1dbd35f85d36626116216b64eb4985e864dd04d4bb3cd7a2414d831ddd8671e931cd9880865515f01976dc570ff3c83d3777e372af78e298a635575fb2d19555ca0decb989d0ee1cf7b30d4e6412c7da18a420087adf9ae4a6ad55df061907db20f696e9e555d644c8265f5c62896d3f428adef73543d810b7dbb3dd42a9a2c263cd4eec159840e0e040d9f3adb270f9cdd1cda286aed27c341a74ea30e6ebee064c3c9bccdddebcbfd6e658908ef06487696cb642afee20388186c4ccecc1239f77b8550be80585cfb7f44477ae7203673876b6d3fac7fdd3eac4fda8a089474db692849463f789b1254ee3e63721fbd9b4ee135eed76ffa05961406e4197a0eb7aba7925452a9324b740415f055874ad150134d08f9fbd61dc7715bd123f2de9dac681fff44946a3b0fde34f18519cd22f84e3c96dc4ae6eb35d2ddf597e3ccad27a048f5c83711c0568e6e6a7f622ee9a3c331851883df9a59ea49aa698a716c0d820b3ee2a82cab377af1b84b3d8555173335a5ecb1dac22100f2be84ccf93e47da2074d203a62441e8fb0c94e46dc47f59085856df47e6609c254d25ec7efb30c66187204c34bdd346ebd9fe2e1e255238674ee44464a32c36e963542a44755921d162d9b0f9ab26282170b63cdb54d15ca89bfe4fcc2b6f9790d54a923d683e15531aabe1cdc55b177d2d159dcf51c5fd92d84b2fdbab3072873e54305fcb9cd7b90997d62539cd3521d86cb60cefe9ec715427f8c195819e047f9b6361487973b8547a1ac7a2b09b6880f5fd3495d3fbacc53ad9fa56f0199cfcb5c738abeb005b57700c52d9449b145a530a684c45654d2aee089a4829e5e53e6596bea7fd4de5840de3dee4f10c252629bf4ce14aabaf2eec0335cbbf8874d25cef5e54a8d604daf559c760ee04f0bf86e628aeb355bf6c7e46d9f9dbb5c912e45b9d4689dc3101bf0f03558534210f0b69a3296f9b1880963e9ffacd1844becbd673ea0212a42894d08644d2a8d414babe8483007a944bece2fe8bcd9290a96e44ab44645dc96ab92bfda3ea160c0afe07fa6d13868fee8fa1e43538157af0ba3740ebf40eca46e598dec31797de1c83530d46692f7384a6b9cb7774f422bf2b6ca9ce84989db5d2cc06c23000e8ee4b3376c72c5e4f148819ff84f4abc1ff84a65005e6f28de5a909a5109e887e8c4540c8242425b6c5f290d92db8558b0b5c9554944c376fb86fa9daa485b4d123f68588f7b40a9439b5cf77184a30a41288173657e3f836d298f266123a6da034ed863b77bf9f7309a539f67207c2ba8898cdd583d0e564137b10c4a0cc75d82451ee8333caf2f8779471facd59a25094fcd7b9f05c674cd2feb3cfd57792f83c629d8b6a663741e2f3d300ec687836d9ef875c655136ae094abce132dcff52d1011364b2e256cf1d3dc7fa43052308e8b3bf3701ae6080829e7d1d798ebf0ec086d84f4da9c8affe4877f75a85c56975c3faa23d20bec458768c4fd5c251c6fe6cf8c917957e4dba36d9679b66a400aa6999d9f16c6a1fc28ea076569a07459558e7402ee1ed1a80e8a8058543d7ee36c68aae30ece8a3617712e8c4bd6f9d61caffead4b05ea99c71e90d3543f6c43f7721d1d95b7b03eb9c92f282550b3637f2e4a2587a5f6f363bcd31f4ad53ffc96432d385244cd35ec60b0d4bfa78c8d92b62e43272738a413212379e024792096474d0eb819e3129ed41cb681c4abcf2e5e7456601c0dc4511d3b7d3703569a71455ac8df8d456f935789cad4a5a0f79f2635a9b0d5e834391de597aab2b32a54cb0d94008979431920aae9498e7bab17532efd37e6757d2f546e153d415461837e55b070d1b3776583987837dbdd6cb77170161992d6bb65c3668ab2b3d05f172aa4bfa4bbf236196103515c42e510e4734ea374e66a061260309f0f4cf08674746cbe1fae998390ab3fab4a345ffe00528d185b84760dadae80aaf19cb32b1afa6044b5484065da52dd9be996595988dd5210eedae71ada1c0ddec01666fce1127984eedef1c1c7bc5f0ab2ca1c88d9c719dfcb54576f019fe5d0769b0b3cb758aa553166b369c3b91eea34ec01521ce287f67d01f403ea1dd330e4b9252a9538c2fc48710a9a4db98adf9cc55f4cc5528a35f15399e31916e16a6af6b55c62e7be2231e87d58b17e4e82398b19ecdc63339f0a427a49fb4f8ac2cb47d34cb55f7ec414a142f4b7b11dc24113165a10d1ce3b4145196f69f5dfd3bacf1098d04712faffc5a55e49709ce7a9dfd77e71d7c4b35423f731a7817654a478f09e3116bb47bc06dcc337c5a5f81c8b4d27d0dac20f6f668969d25e75ad19bd07afa779351bb77f1a72369f038755828c954b51c996b68718750532cbd2091c3c9defe35180df17d0b33a437074c2f3736da2575a138ba6e00683b090d35b209f0bcf61cb60e715fb2a1a62aafd566eb2591c57cb08f72477e07cdee154ec1585dc72181bdc228293dc783a366e4a243b5e035d0734fc6ab4b29f5d44ea4e5b4f6985d3339a62c726a053b31d44134eb1c40c5234a7bfc8d7696c830a73adb0b747853269eec62f8f31588f76af524e966e016097deb6d66079459ca27a8b524dca95861b324319c8e05349e491f9a0bc5dec6efe18bb7987bb4ec2ab9b9af6a94365fbdbdce3cbea0a55fed835ad03fd34243bf8033e055ec1ba3bffdeecde5d09b9269933ec4c5c88bdf4aa267639c2f2f486686b1ae15e4217ec24a813c840d8e6c49ba4c458f79954d31b76a2a9c954b01a1c0710cd18c85309789288b1eb0f25229589bf2be04e57ed4280cd23d7c30a8129406918cc0d747a77ae04dca0ba25327d6513f36a1a73737d2afd9e4ac4d4a8c557f6dd9d5fd53b1fcbfbe48e36cde1306685cde3c5ea31f66b7992f31761780460ec322f3e6ab3087d7139912501fe73248362b1948b2183075afa6a0208c8ce4db091672bbe6b96b4348c29da2964bad715119cc192ed7af342f1e0586fb9bd65c026399020cb0cd79f63a9b17140bee068efbed32cefcf846f35f1b148a4b9526284f0cd259407fdc416133e1660c8f58573d4c87340a29c6f0a45a9d3b5f224c1737fe9d537e48a4fe09640fa3c15183cf4a9af38b3d25b658c84bf12b864a98c35c0171fb3e09d0b03259254a58a83aab8a2d8eb3c73864dc328eeccb41110d3b718fa9e093c339568cbe7977ceb864c25b80c54bee28b75f875700cae15d985187a21065d0dd9cf06245a919ccff5dedf7fc2fa4b05457e24c2cffc09b0ce46c3e9e9eef8d9119d4a4ef032f9d5a3dca76a8e554d7d9a8d1b6bdab6c6c88667150db825691e4c9e2b862383f65c97dca2eccb3698dc5f61c91001d7d97a95a1ea6b16a29972333339ac8767a3b4a020c7240c1740402daa5f0268a53654434c94d540fb529e9b55f3c6362c85091aaabcfbe20f0ab138b3bb6d5332bf0bc67845d01927813d37b9bf839406c97b019aaa178fc8215635edacbbf508441c133563d53d945ac704783557f8197d2f3d03be8d9bafac52b93d969e13a57bb97e32d72fca92fd25eb38afb0421f40310aa1556fb34fd63fad64f594c241cc73bad71e8237b295e5121db443765923050f003666735784ba2232159480715c2646233d048aaf2415058e4edb21b1a5083ba141f696a7b185aeea88123e7ad8ee575a3002db2147b488e7302428fd3332824d226b781d87563dc0df06b5cc57bce941ee084dd7df0f98e345ae5275fed5bc56bde0f6b43f50691b3c5ff8d63704d4bf123d27894e5f31f5db02a4627cfa096b15a2d21c38ca7270e45d6e51c6dbf066dfadb780de31ce7e62cca56dfab232c4a7d7c8dd1ede629a7ca07f351aaa06e55e2d7f2087914f5a1c7567f6d26a10b5a9d2287f713d3e7b848fb16d2d6f94def4616e6d3cfebde9e5603d00b5593a4f238478cd8792825ebde1a2bb8b420f83cbc4cf1372e263b72e063b14dbfd3527ee4819e622f166bea8a19b66accd0bdd364dc9d869051933b1ed15433146bcc1e37dd79c2a360eec9d0b91243abe3f250c70d2e56dc2b392b316d1af0fc8c3df867092ab59631eb74efd979b5632743e5e595a6ac74d7380998104ed1af0d448f75db998edb76e7baf299a1bc97300c5451c637ecfbe6942f2432802d82779843d952dea0fa4e182610c03da191a105d81cf5b0efc8bbab922bca70281493f671326d82cb2c9fe65703aa6785676edcd98efd39fc0d8cb05ca14585f3dc206ee18fc15754d166e4f16b230307f15e5ec5189b50c4c92d0f84dfc973e591b19a7a75845795f116fd5b0e37303ffacb96bf93da17d77b0b7fc6ceb1cf3dfbb8cce651969a36ec2b5f1e623e34086e92718acf6f64f0da4542d678142994ee7ce3c83525abd05596847f85b03ef04c1129e28865b470bb423f970c190aa6c3afc60baee3a3c7c8b42fe9ef30091b52cfffdfef07490824afd98e85d387e881d85a3ce2552e12d15f38e68e0dd9d01138701e932a61daa576834b90a2451d06d6589852ed74ca2e43c54b8b67de4a27f41818dfee5f3f3c2210c8cf9ab6d1fa1b63ee213ad84ff98e65084861d4f7deb6143948028094e93beb0f337c87a153944d860ff4c921fc01a51046a13f4255c9d7732cf0b8cc91973efdc8c0c47ea6eaa1c23af3d4da4781b9c405993180604b7e114f2d7c52650cc71c0f3b2c6ce2eb981c16e3fdebeb1cc8252c9ed266360ca824a8aa6ac8f2074fc6551e19f336607326dc9a9980ad3fb39951d2a8963636229d424a503c035ddbe1cd3a1ecdbcc1de602e9b1d535c5962f9672315de71744be47670b10031f95535aae345266e771a9bf6ec7eeea0e6ca10b76a9a9aa4b839e0fa0301ff150d898ca8a5b6cf59bd762df2b80d59c822717f5aeb1afbb6ba3bfcac008f4e619b3fc1ac246fb7be65a8ab1ac407de4ea866690b097d120dde042ed445d5e88e3cfb78794f004f7bcb1a8004c09370ac65995276b726381959eaef6f7b34eedbdecd88e71201f9579178e59cee894cc568f17eb93a4e04c722e4216dff88a6cf5d50afcbeda316c45db7962ec96c09c0296b706aaafef962f85419c040ae8afcd24cc765015a34b0aff01befad3ce37dae27f24e30fadaa2d05b9769bc8794363240caf50e9685504cf806d42fe0d91d5ee61e4dfe495a36d768220305b529a460162e9d80451393b0a01f4f58e5204d619f28491c8b90b0602c615ac201e40ef893a104dada66e8f1e310ce7cfea401723a840a7b97a90861f051b3ffb25ad5e754fe3089d71049d6d4996009f144ba3c096236a610d44f81b1bf81593db4340911b1dc1b604a4e5834e91386d240dcb3c39e94488d567c0ac05c74aafb5e2f9d2ef70c6926c3da8c24c2d8695378dc628638da39849afe00c34c62ab97437e948512b184934ddec5ac3785c37ffd6a5b668aa4838ba7860a58a09280f38d30ebd66ac0ac3d802801eab1131446e4933bba5afad13ebfab23064b3c33ed25557d7aa130799c5acb6d760d086aa4f2402a9310d408365e84fe72feaa1be3faea79d4130f646dac5587a9790808bd4b58ba56274a1175f38a62ccdd0f0c85d3cd70090a246aa705c9a63fa403a8730f23470d7ad58e73d770d46bd2463aee7be47e08452ed0d78c2e3c47bab2caff618bc27a71c8def3099db7ae91aeb632ce50fbac1300f7143c97b06ed4b92161ea16695fe5ff8c6c4106347fd9f03a43ef353b0a6ffc61edda42205b5b4e2406eef4abaa6957b4903378a937ab75c0b8590f75e59787565666375acf6a80dc9d3f496bad65846a87203a2463cf620dfb6b086f19c95ff7b55bfc2cad0cfc9e2fb06c47734d3471c330c95df05902efa8f44d7d3689bbecf99b963dd28a32ed772f45694264eafbdf1e525ecf43fd345f0f0148dec456ac7fa76f19632d7ce15d438a3366799fd8f73085fe1c70d94773debc2d01119628e50d8570b81452b17f3cd2687dad6f82baa3dc663b706e2b9030e6e0dac35d3962978ff9745c0094ae23a86ecf2ccbde2276c01b6513c2b01a114d2ac16afc3637a577cdb444ac732e2cc5142f9bf74b1605bf2167916ebefc2ba58454896dae6de8c1c279964c4e75964aebb4aa2590d2791802bedc2c61e127b51b6d7567263425ac17649e2472c50dfcef6909a234dbf278c7269222eb4e5081b8771add5ee72d12a4e2c4b22857b56f1701188540f7ce1fd6999519eb3afbdf14472df545cf34f03c5da5f36f717671a7c66559bd9aa0adf256bbdf34d9a071a12506a370153b2054d02436284a72f627c7d2f418f4fe22f94431cd9c79d15f2c6e25b1ecb6ee4b7f8a3dafe8e821808a0fc4e4846735d22aff0580bb5df556619fecfe6df8fb0526ea52711db5f2fbfb23b712105ecf853e7c4f95b6505d856fff4d6fec3ec5bf51eb25c28789ce0ca3b0b185d0b4e802cafe01cebbdaa5dcdd46fedf6f699daaa600c306f5b2863322abf8ed7984035e111e6622e8db80d324eb7ee187db7c48804dd7525afd977c76ef4a92e2df1e188b489569034c02df111ab18a86ec21c697dabc6c4c43661d158c498f8fe64c20e7e600aedc72d9e886562481415258e9fa2bd915f33c041ab0f6a1603cccca9eecff413fe26729543b856236d48a348df369958638e08d2419d7c19af9f4063d5f000d1e2c56f04b47e5c610ee09ce1541f105dbeab2eef7cbc089e7c092a5ef0bbfea0ab881936aff5ebc69b0bce9ead82e2167d7b4b8a121c6899faae12506830b1456a2a292c8213f88b59c51ae15fe710ab967bfa3f986e17997351f29e930110e3ad90c310cdafe50bf6720de7ebf5b895a9a1b28038bab087eb3bd740b319bb81f9c1192e92c7364d13d531c02032c03f3feec9b6fa3321b6fd114d3080e8bb0de36436d963eb0195bda8311365b580bbe96ad623c29c8c99299000e4355d2602fc8e83c7b2da6c8856aad58bbea34ee3f6931672f4c7c91c03441a74c2eac19a7df178fff62a36f87366444657eea4355b4d85908fda808efa1c163d6ec2504b71e7ccabae4b90a36cb57c0d351b584dc543936801fe0f5c1e954387f27add10ed168a5e92b874b75e3904da0ca69db472321dd30e7099668b4a2a1b2e3d6c4d7ab98a2214dedadf016dd5018c843e249a8ba33bcc07eb110a19312f737c7735eaf914da80cf7e8574dd938569f18737a7af7ed54b3e72c18d63b2399e71eae8c0bc4f2d87fcfbf338587dacae8b0ef7ef7e87c305ee1596094644152ebf12a45a01ac509806968cd0c9408b2876286a88b490059aace66340681d6a3fafff1c0b5470231edf1b3f3f59f722dc12eceb0eae573f301597fc162be4f021b974dc24f44a88c5811e1d373fbabe5e30826c0babd23c651ce330f39325958b18ef0d9948480ed92e0ae9814deb62bdde80cae8e56186b3bc6a459dada32d6f3367aad8221fa76f6a83a63ebe40e724559d2552c684f6cc8986a074d85abf20d4813405de892eda29fac6d82e60ffb1bfc0a74a8246da2dc6e9cf6cbb96ea1c5bad8389f3dd28699a1b0c58d87df51f17be6e5ae70c841d7d0f67dc6714e0852b8d837ed52678534bf4a487bfbc7f015fe2d5aefd2536d07331ec7279b8024e881e8a6b8d1e12a4b021f7a3393a8f88bbae552a478d9f1503b2f2f086dff8684a205bc9f08a44955f724ab716fce6f26fe52240b2fd7fd1750b5a36aa541ddd106a3b1b70202fb8b3c41c6022ee458a4aa042ed3ab955f0e474987c61c72d383545b13c88bab62fb732a4840c676db6b8ebc1fa7c5db73b4837cf877a2ceda90be19eaf4cde2122d3cad55887146fe519468a9057d802dbf082b56191afa1f629e41f4a7022315c4a25ab9d3c5b66bd6b0333b047e61136f0268c402957812d819d79ee1cb3bc7502ce139197eedb2f943ef8d6f8ff9c36b3de48664e0a4955012e7f859fd547d4a8ab209253bd575ca6cf5ec6dc38afd17f5334b4dd20ae0e9f33188799b787edefc880e8d7a74951b4d77e200d1d424918db9c20e83c5b42d7802f49c89f537d67e441d1c2681c9feb566cb387833e9df30156f834b72a2b2b4f985d7ca8d22c4e4db8eebbc29a6f6dce34abf1c50272eca3a372b35e26b5ed09bdadc6e3d73114dc1c14cc26ac9ac0afd9f748ffed9ac687f935fa16c0ae3ae3e7255d4dcf3959c4ad726df52c9b917aa0a7a9bcf501c82491da92328579f4748d8f46450796c10d6f36330de0f82e6d547c89465a9f15db48ae4d12af77109c3904b0a08d0471370deea726ff63ef6f05146c265774a7a2644a5415dae6f46811193cfb7bbbf6c2181e0e9ee372d7e314429e55841233b1871e8fb8c74f6dfb65e4c38607450c1c8f2ced901f989034900b0c6f8830f17832f244f43a1096acfa89b7b0d1bc3880eb637048e9590079eef3a5db436ac58e82a8547cca1107679aa6f997ccca0aadece329f6d473262ece02e4faae40900ab53a87411fc6140f1e8425167a07705eaaf1e707ef7ef5612dcdabde73c8e8a6adfc31b8b1ae086cb373ac6cf0340d3e55d32e3b66d70d7ee4a83c14f8015ea7df795a1d5aee5d71fb95d7f91f40b159cddc4b849601624980ff1f3179d7f6e17c1a782d11da1328e1abb06d7006f8403889ab98db14e996f080376bdb7c18c6e75240288044f31c8cb48f02032c982c2a3926e4ab07c56dc721ebbf92d19dd5d46181411700528b92fbaa55c8ff74c7742ff5dc104e399ee4e78c6b921a93d36abb002bc67fe7ad674e03ea8ab967fc32c86f9f1232f5d316a50dc069a01eafa6135e3685dd7983ff834822275da752e31527633b42a8aec8e85a0fdf03d3d5c084ee83660c8d8739b6cc7c21742da883b29c357827df2faa9f661e451c179dee2fe8509e7a8ca085cf31c111262fe3ebf5d8fd19811f25da4adef9ff4fd5d244b807f6afab95e27cb16f6ba100050a4052511637cc1bfea7074f74d505ce945db1a39e3f0c59edfdc4f85ad6d0380200dab24085318485e304d3a496875784dc26d03c39723360bb14e19b08379b05f8e827fa153de72a2b68d7dafd374c54b426c1f68bfea697d492ad9f4c9da2c0bd9811d64c315fb215b2718c5595d6256e3fa0de84d382c8e6bb000aa8ad064d94dfd480fa5b9dbebce98699c6fa09af4b8bb56c76669c84459315211ece3e02dd229cf85daf246777d3a79248296ab709930385baf60c8acfd652016ea5b5683586a85b882bcc52a4ef2a024c8fb880c18fe13ad455db6dc2ed4a54467f6a90a953bbfe438821aaef3d4bea94bbb19a0648e3383b23ea46669369331f01c2919ae98112dfd485c281ebefed56fc6f78c0461c6e4375aecc5f5ca46ca50a413de1c9b600d31890501947a3f1cf042e8591ce0af5916e986e9e4ccd64cb2c6ffa4779818f5f29aac61614bacef77a33fabff0c9342b73f5c0223f82520ffc0d61c99d0ef874ded79a06b8521b474499a56551b45a325ef069e3ab356002ec1ddf57158a8732d718b91ebed982b3d55ddf11533039d1f5b43848e2f518c1b2e7e28bc5f937382d43262d6733d3bb0abeee7db5c21d639c0111abc4729cc74475526735f3ef8a4162583f14c561fb86cea3e0413efd21c3ba1bc27897b479a68fbf819dcf8bf57e0203b614896aca1dbff709e64922c1911b0af3d9ff42e3d98eb2372fb2c7c9bde891e0dedd7a99a79d5115cdc664165fab22ba17e162c0757dc7e7c28840f8ce486e8033e9a1f9ebf12c6dbe8803b19a331d1b15b4dfdb91cf5fd1fb7591227979597af19bdde6b0fc8ece15ac1fa2dcb97ea69472c49c873d766a6723053073272212ccedf476c6e8436b271c286a1d3ecff19a9b09759cd6d731ebb72394867cea727cce9bb66b5fbbc996017a261be29da89e9207be1cf29251adae19b2ba2d8460f53759aa5144924411afe7348fab24066ab4a3fffc49bfddcebe6294e3479cfed994a949f909568f4b6d039f7fe2bc2d4c4e4ac5e8038acfe58b3ff1846c1962dd30f3b23ed0b54d2526a4e2afa53003c6a7dece506c0908b8c071d06c480a1e41f403d24d35a794748aec7289d92f8902a69b7e8c2eae33a84f14b9f46ca1ed7c93ec8043e65a1357413bc6d18c7468401d5759322d1de46dcd8225f215925f9e60dccdab276afac72e435b6fa297e22bcdced89751aa092121a1a8aac38e370e6ba64a81ce9ec7826336888cfa257732b1dfabc1cd3c62f6fb121838b7b6c3b5faadee6f2aeb38b5225867a96401b77ac27060b17fdd5a4c602b43546c547820292ed60d69caabd0e6cde39dfe9de802e292995ea684f86731c5a97fbc336ff39f6a30e67b9221fa1c5ecb9f17e0883d52def4b284c9403f1b17544f813067800c7f1eff699f6a30ad17fbaf41c9e8aee62f96c4a93bd0e28676e2172dc26acf1937057f1645bc81e0f2e18e9e66945f92fcb7655bbf5b5c2643e8faa8499acf5db372a69b9648df88e5ddd4c187e37f291fbc62dc75bb8de2f22b1d475ca185ed66f47a833efedb711d573f61fb0c78bbb915bf74aa04ccf3fa0e32f7e5abc1939c49ad300323607a56124fe3085988431ee6c07be00c46718e92b2ca3c94b0c1ae4c2965e75f1c2e4a0cfb643b8b594cf5848d857217d5ca94d9ef596c8354f5dbc09b99b61f178bee352a89d072d8b731639a7ab7b1e1409d69698f35011878940f7a20123a3cb574aa44324efd9ca580471f26210dec63ba1661978669853993afc088c4f36a2ef86ccc7e76563ad9db4e7072f479b52f7adc379ff4e06934519dd1a56db569aa6b8374cad0d2dd943628f627b39990381917a9b8681ef0079e25e1f891300f3652f2b3330c5c9f9972fa196e0f5bcf408e07821394be1556f13c687d40b8c6ec94c0d3e3b2127e2af697ca02bc59e14f1c22ea197d4e946ff6f60d0fe1e240942a16bfa38ed03085a71c5d905ba30d496632f798f707198953274a42bc7ac832fbb5d4ed2754f8bdf0d00359ba66dcf67541b3ff139b11b6148e8d7abda63e4d2304e2f5147d0492531e7879e747c13308de07f0862c7d16559c61618068811fae6fdcee0721446bd4b8c5776b119d1fc7978133eb5821386b38039bbdac380e994aeb69b2c054a349489e63e1a14b49bacfa707725d1cf1d13382bbd45d558aa9596fe79fbc6901a37045f3e8fa0fb055e5f6e58da29c162043b85bf29571983121b7a99579cc78f58c36595f1e862e2a136008046edcbabc2d9539d2d59781eb15885a97a6ea4018a7ece3cf93d0d02a333fdcc70d556552ff26b109178c2d3a462e5c73fb6fe7462ded3498064aee2dbe612a02d568ea9479d592938083164ff4b95e75f2120fda0a250bfdd898123ccbc16ff2b994e514c31fa85bbd92625531a3bcc0d76892af35887f49e6616a08ae1199bf3340bc6adcb4699008cefd3f6260382bf12fda58f6b621a609ced434861a910869b92fc49fc984e3d6d53e28f7ea54a5e3c9e3537e05d3c53676b80fe7ff05bf11e383ed0f94db8228bddea02521a9918a9fb7b7f1aaba52b5ed8d37f5e90d568e68ce3b4be8f129d574fb6f7e132a29b7a555a8fc80ac43a873d53c34ee22f026e6386d3cc98a1689465d03459892e8d67fda1b30b405e7c7be7d72caf1f11690ae2ce90832802c8748278362e65da178bf39ab2bee1a1010f922dbd17a0a32235f0012583224fa46972c53399960161e74f60dcf107b0a34affe6b0fb890be9e8415c78df9a80a058b6689ded812a12345d81a8a4e590c86f824196039d1e63e1651d143dca19fc5f19120e5ad1d73215b73bdf88102fa48e6a640d54bd131ede0f76a4e8fb1768d200621704bc98bf79929812e16cd713f83108ace02a4186a3637ff4cd4b177d0277c3cac741e62de8a48127a5f8ec269fd9c4cee5012c758111b57be31362ea7cc1e1fb5decd81b29aa2506bf4140788fd72d7333ba1e3df8fa3e0bebd6085b0e6b19012b86962fe141fd865fd838b1d075028b0a2fb2e9b03bf93e7394113b5c1912d5ab999fe6634d3e979e731796c843c7aa81816f4a604ee2cb4b1d5ac88b0b4d474923c16d6c423a8c6781236e1a3f41f0f34ed745e9e86f1ec6a444fbcd017fc1a6dfcdff63bd5f208e6dbf6b7004c8ba7c9e52d5901620e2d8e4b6880b75fa6b8644c49d1e69525c9c54ff61a2ea17f3405a8740ec70b9545f6aa3a923731fcabed643eefe6dac3eeb810c7e6906d225b638c3302c7787826143d9f4727d61c9c46c82452a33a855b51806f178246ac890ae6e379d000cad930af64bde775690253d40c780660e30f83045db6b14b8f44e68c09af8b363435db2dad8d881506f30721a54d407f16e1dc02b45d1b22d978cce9f2e1feccd4482c755b2363890b8296fabeda047bb84b5ea75aaeaa2e07469cb57fa7f8d5c3084996591e005f8a4115d24ff1eb260058633e70cf25cd2fb1682af5b0b57b5bc2d5366a523d2e5b83da65d9e529adca9b38a7e2de49516a2c866eadf3a6421057c4310b5af38794fd579b698f48bca087c49071b52378ed6acb14d702300285ac7afe31ae4edf2f07b4d4f91faeb74162180fc2719b4e609a7b2ebad1229748e01177def7194185e23e1c122633a90c579c08a8fbd3aa16612e3c91d6d112bbddb561175aabadf1ccdb724dc302fdde20df1f9b5143b0370c10c639e8819732e1aff34c2b42ed43c32eb47a34508107baae5edad7e1c1126d19aba1508097d2f90e6bf13a42457ef961331347fc65ea2974dd7cd900f4282ba258fe3a194d95a076e62dec94a1f6f491058376c2429ec01b34047796eaa3a8c181ca352c2a9046c6b2327e58f3f812ef6b7e95694cd06d6fb5d1a0c0f34f830d1666cb48ea592bb78ad19d6d0216464e7bb6c6613c4c1c512c3a776e1d96a2a55dd959942c7cfac1395d4e0f3afe278d398755c77f78ce136fd60239a71a65cbffb8712525f584c91facaece48dcc88454bee5bd3bad9f24b26f8322d4b0929686191cb4cd637f396fd050caa7d379ba18ae55fc855c7a115272d533ea603f6af978116f2d93a8d3bc7c6473a106bb312218249d3d369654e64046d3b4c38b96f3cbaa0d7b5d18957fc74c73885978ebd09d448c00dd6063935bd6dc1258913eca1e122b21e4a22ba159f92b9d81d8f4c008244aa2e6fc812f8ae36e1f20489fdb6d7823cd0ae4797b26fa4d7532dc4f7316f04ea7ec668e4419ce1474806d74d117157c6da7efa9a74557f6f53560dd69273fba72018fc20d969429493754a9018d69512e1cb4991db50f06a6d74123180fbbfc818314c7ebe913695524cda8ed616f51080efe0547bba8f6dc79f1f9dc7e6dd031c5f6782e6579912cdf7df7323968d67a0c4545fdcb07d0e42b602dca07d024d9079e8ef19afa24cfc6b00329b275265b69431333ef386e237c0e33c111925b137b0714643722aef015a4e96425bf96275310caea9d8fca5600873a280934640873b81cf7aec9ca87c3d14cdf3a0aba6f782474c401c62f03ba282e3db0a45efa2285bd9bccf7f88db94c664cc0fa0a9ea9de3dd17805d73b9728cd0478857d735e7cc70dec6e2e1cb9737f4d2413bfcd7a0cdcb205bd05a717c1504f97fcd72806875ae4fce64b6277cd9f5c38b6ae64940c0e1316b52f979a957df823cf7d98c66deeb65e839151431b3624a089f2a4c7975a7865513c9bea390db3b16cc8174a6385bc44956caff923ad35c3bfa5512ac0c5d1db38a5df658b076b6ae7313b1685e8ef02be7dacc7b117ec6f946f34f7f7e408dd644cadd2a4eb45a79a38e23a4065d174a2e909c13f569e6d8c1885d5fd502cfffc12bfea78aa0d6107a87c4ecf59e3b7c8b61fc3495f1e3c0bdc2a33ee2c8606d8990985bb1a0e94f6c3910f30685b28f676bf6ce62d7abd853f57e35ce186eaa3b8f1618a4729fa326f200856b40f9e37889286b9ab962f79b1c993f289a5fc41054e89eb7e27075cf69c9f9cb1b5eb506fb8033b1635ec95864c049335a638d5c5c0b4c01192a1c40d9fd8c075fdb710146071dbd38aafb63f4c12b892439979af954b04951ccb5fa2bf301b6ddf58b42c467d68bacd878cf37792814179b0964a67accfbe1bc691c520f9c01ee9c7926a56a9c2e4e04cefe81bda930a4076c75e6317a09befc4ec1b8a20e83e16ca0c2c853cd4c0c1afa00caba6cfd5f23038a7d77f943d35da8e0c2fc5a971783981ef89fccd335274adbb2e90a0acc22a88f3c260574a3dc429cdf25b0c64a11d097735dbea86b057c4b26eda02f93f4ee02f70cc18a11c428212ecbc14a513f27200c634649f86d47820715a2658e0e4bd496d44f118a22b0f3e2e75d7fde7e6e0cc194d6b9bf01acd4f5ac0c232be692faaa64ccc20f4b9d43f180c5482893b82bae425b5450f78559f0aaf912a716647b5f594331e7f6be1a9c1fedcd3c702b7ed171346f9fe86fddf0aad536709e3a38e0fd568824b0461654ea00637556cb3221e04ae5de1c110c9fe851069d5689ffcc578f53d2031d7e40246e6444f46388882728719679ea3e803f856a3e4887ea0ef977840f819bad05e50cbd99e4ddb0a66438139a8b12f3195e122094964e143e0c9b710d82bb07e6bb6281328a3fdda6adfb71ca0c7eb060e6c8b6a7b811c2f42cdf329bc5fca8782f8a260313929bc4b9cf15d38ed8894ade38a684d7fd8c39ed920ae400b53ebbf15ea18db3f946272c8ec3efc58ba0b62944b93fe7c3a9ed4e53ab65c1f5e67a23e180357f64798ce011d3fcc49c7682266235f77d802a35d3afc91c6c7af10318e293ff72dfa01565f3d0a3027c2936eb9db0b9a542de13c37a6c323ac55f3ba6387226c8eb3bdbc13dc1d8e297b7586563dbc9bccf3de344cfb39c0b395bf9f5f36566a2f9be00584616996b25a31121639f507b5d3eb721275c73c2d211de0a2f71907dc1490d73642934e16ae9ccc53ca4ee06986ab3ee0b7f6c64d3d32630446582c073ed1c5e2ceb7ffe1edeb1b13926c4331fec9a86a8142c89426395ddf1bbae49a6bd735c74072836a6abc1cf8afd30ce1516bf74b911b221df6812bfc0bdac2f39cb73c66518e568d68c11771e321c543b93904635b81a09605c075734f0e001a56b9d73fbc725ea5611ed9ca290b7fd7656b96ef765b9b9d0638b5a1aef0ec47c718466d40764c0b15d81ba3788f5be1e771710d22cecd45f61a513ced661c8d3205bf61b2711b187bb0622a13d868dbf83ece44c8b0d69dbca9f9a460f74f1d6d876b14810a345e98ac52e35c97d72238c0aa4804fc597fd0ec47fe2037deea16f590636cdf8c641bb164bc26d1f1af429035a16d916d3f6029a9d17225b246c073c4addc011ec7cc7e3ca4237fc8a47e4daf834cfe23d2d65c18cbb8065f08a8cba22c31e402fcca55b22221a0fdb2d824c9dbce39b37da64676bf9064265e4ae953868258f13be70f72ff8eba8d7a8d55f684282ba29e420b921b723626c845c9eca9d721adb44110ba948ef94d7400cba41b801960fae4c40fc09b1f8501c1846e54376d438caad2b0a68c3d1181e03014754fd8912eabd85025841a313008f49e1734be40c9bd090ac3d2207c107b1d918a50c2329d237a521f9cb92bdb834ffedc00edb1f107ee48ea0c5f709d0d939231e4930595b5e3f83be695fc2171ba1f06a42aa0ab4b7e03ad2a180d349e8da17583a174110d21d608f1aba41f7a4d485b46b3a511300f511c63c2b3b5b7e27874042797d60da93940e2bad4173905c0bfbe0ce52316f31605c8fa756f7c6e9578309c70146d6c5bfca46aaf508102749622028e0c6cafffab15082e0ca986349d3074faca712b72ac0e5730333a65e22a037f2e0704caabb45c7307dcea07668c55d476a2f0a78af9957d3b51e1a2c8c8b3fcf8c6950e2fd63635baab79b6d81c5024255dce09a4baf69a2e1c4abfd86ee1beff357298f1ca99ab4a3373e29eb46248f06f2020d2f44bd112ab201c3b439c587e281fed96ec630cce5b54033bedcbc0ecc64e9a82007e19545a9912ebd319a0d35e3c32898f92962e1701b01fb36d01479570f474901731a92cea2137482d8792cebd3e2ab611f85dd7a0cf09fb041120da1796955befa5de72fc6c726f08f3233984ed48abedfec30cf14183d54e92403f6d0192055f14323cd0562832e80a227437e152b3454a2297b63e9bdffa6158725a715548e85638b77e331f7b5b76b81e703193242668a47f3ce9af11748315c0e5e899461e8d05ace6c7d898e590dac0cf1deec2871155faca75c4933e20a75f75c42a2d45e0c24df87d2a1facb3dcf6643c0f072ba2bf25193f355495dba4e86adfae78c970398b1b5e5628bb76da264435838c4c4890747492be06f1059cb4fdcff8ca9127bee4991c1ebffbb053e7bd204438b0ee87e428fda01e85dd91eb0f3bcb0693ec00a103aede672e894bc14da9c1b9cf6587b69b3369dad2704e2db5a34acfe00151090076baef56486c85462864b94c0423fbb28faa34691256009faa60203db678a2687d54cd9ec7e69942d63cdafab04b1b1420ce40f46c7512b315be3a303b1a756474ecba687cb6057e40ae16fb02d75f2484bfb39b10fa5700208eff26321c8c7432063c2750cfa7420accb6acc06d9881950763362c6d8df15301245e83a913bb1aecc113209466732660c3bd449514e1dfafc12e66786aa49a2bec5dd392f10b1e213e296d0aa26f2f4ff6f0564d9275063e112cbcdb868769d9172834f5573075b4fce82cbfc43ed24940e6ee33b480d46d23d756ed09b7601866a9bf92323ff77e73cef16652fd7098a57a7512da4d109bbaf3a0efa6ea9327ef0e75f710fbcc73886707a3a77bca92e1cbda2b73a362cbf4f9b2d1a7892f7ac9fe9f5b3e0cdb2bcbe9cab4090ffda298568c4c17f3fc07654fc316eab8b2d30d1e47bae42d8660f27fe0793856651ad0f249e50972ad021740d8041010a57b6c70d2d0b7772391776a36efb563775a297c6bfdc86b61a24084147ebf16f3acf09c7a06ef744255dc8c03cd8713ac4fdc2b924b32f431b8b45a511aadb6689fa8d21d3ac814a2de231a6ea45c768071a2ef79e1328af6634fc2f164ec3f10d1bd9476b58be0e0f50559bded54451d2329f97b87a528f174fe993e489c70d214134b94df709c9f4e86de1b2bcc1b105eb28948d4e99d5851e127a17fefe97ad53fbf761125dbaf84ba1230cc694918dcd39e230212c944c256256819459fa87965dc7ec15277f98e3105982180246e36a0fb0f16fbfc8e86ca39c6be0e6205e986f5153b2eeadc0a502640d5d044425afdce86f3e7c833d53ef16053a4e93d4cbd194ae08beab3dd202a856b94913d10a2df8b1c7cd42641565478f987b8e3a56e8a0467812c3f10094e26fc97293114172970e39d7ec37f0ef5d28daee3e6cefd0fbf18732898dfb234e4a0425dbec86dbfeb921119c45c6cccebf54cb3bec8d0ba761fbff878f26069bbb1369921666e0295532ad161e21d7e79323241a68c73eff90306f479e","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
