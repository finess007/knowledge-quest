<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"5f9a1d82a289fd8a088a2f954b00e0f25029eb1f920f96259a9addff33b5a0f0c1f79c30d317e93b5331f6b325be4a675b186889998fbe25142f40a27d7571a86b6139dc9310f242a01f439ba8c1650613915aef865a5d5419778074f4f251dd53ff36896b426103e9282f2a3fbdbe5091285d50a563be84f97b1799f04328b9a263b808c708e0d7baef2afaa163b280561aa666016bd7abc160d46ff338281568c388ec59ecaf1bbcb41bad1bef0722a21e5c256abc0a1dccaec2df93c35ab7e13c270eecaf0f732363d0aa230689dddadcee12f0d0db16cdc346ebe6a64ebe5808cead5632df436b02b7190ce7a8efd4d75f0d7a0aa59292ddc48a215048d7010fc03987c09681e393d965fb45d3bbd1413c16f8e2ae7db62290d6f3a462a07772b217b32f48d5207098538954eecf86ec636e4bedc5407863fb701a26491ae92d53c465204cf0eb748cb3e12c0631305e27eae2394a2b3b8c9f7b3115c66c6e25f26682f9119a1eb9b5cd1fcb910cc67ac7d22f42e408e70dfcb03065b311eacb1a89be66cddacde0ebd9a2e03ce89e866b13d5684d3e272e67f57501b06a97b937a8671cfff39dfe6752498240e2c67d508ee2018ab4745dcb4e4bc023ccb7a7feb54a5b200bfea69698f6ff553014af58b73a6dd0ba0774c1bfb0afb32419f34682dd4d65a98a9baa60d6974ea873cd2096efc17c0cc6f813cfd22c99e83f2683261088ab11d27e6a22efc765f458ca422da46b6b5bf1837c6964f2f6d303cb32b76777e807a8313a779d7b02fde8286b15b101790b4bfbc137e52904d4232edb1da4d2b0b9164913db4bbcbe9f737580be29834c87290d0c4bd7f4b14023d2db7aceb4a0438c3188a6123df283240a31457b41a1d6064599e8dd1d5b5c209972140f9ffdf001953a039e4cb98fd5e15fa7368928c64e77448431dcd40a5a43c371533f39bf0e1240ae90553e5ef866c1794c4a868b332d59cfa8e4127d52dcb01fdce1168e2ad075623bd66f725cfcc93d78e84b63181aff1dcd70d3f0ff5705989974840ef189df774980a1e1d4a17704bd757df0f536eeef273f58855b52bb16b8d9ae889647e86a2b50f25918e8001b3920c5776ee8035e776b4ce93d8aeead77ae7ca2e19d9a7e0aaf49bb9e9bb188a2d899bc1eeffd9a3ca852f11ed2d83b325059c3b1e60cebceb893cdda76fcc534fb0f9189641695775860f1e0808bc8f737a55721828cb85a201df7f781fa37dd14379a152e20350ffddd429c132e7d3e46fc68ea31ca8b18ca0826b464a7802fefe33164f1c4d956a0da0c64ef63cc5e7caa8260e706b49b441a17c189ecea8e119e044c6d6752613ed3b4b61082609e9a062929c26003dc62f36e276c24d4e42619d2e519e05724f5f1ba797386d29042fad4506d290edd46660f9e7e3deebc6c193e3eb8e0081af625123a37723a62aeee4350ca1208215c107b7355b93382cc2592e7172bafe2828df70c71e96b443ed036540eeb39277b10adf1af3a148117c735c79fc6d23863e52b11d902cae2c6eb56474f9c858caa51cf2ada621674cad806d95f767c57ec84d0a997d5db71ba5b6e19fb6cf0f9e35c2b3787f9f058606b5e43d05f6c4c4c26ed74c815ee2aa47997115caaadf773d16deea053627b07ebdebd389881395fd2dfdfd37a6029bfd07c536671a48b71f6113c18e1409e1f52c7b374b7bc77df7c8565e6afb687be2d4ca7472ce01c5e1bc56b2b1988d1fabe27000846d7bd6e46df3f9569b866913000576fd7736a0cbaaa657e0820264a507b110682ed73215f51d62962ccc169c052e78a658b798bb1afceac320b549297006026f7a89e802b586c23a6bbc9aaf1146086c630dd07e83a2647cc7d02cc004e8eb1b1cd22096d44e3be5c8963cabde87ef5d8bfe54595f6a8b2bb212b5b902b1fc6d092dc93ab48a80f3fd03cf574d9fadc72c2debe55cd09a6d08f258cd8d3b62c4c84a1d1b862ce7c94e250a9b9f50d5898dde8f2b711b07b26f15e5791f0a86a81000eb0ce762010fa963400c3061b779d28a749b0d32a50361c00a7215762ee4d357740831be6fd20412a3f2f16b0df7673e909b6183a6780c49624780fbff55bd5ec0725fb38909cc8d2f62c2c59b9cf57cc9a971422fc2b7bed309287da8eb55ac4cf278f286410d206682aec15447443862a6478077c560eb08e14c460b15826f3ddba8123bb4e3ace4f7b179e721b9a5581c3d0d198da0e3883a48939112e6a22ecdf3877b7c0a7fb933aa6be87107d1a9c71ae48fbf0612a48827a75b6d3dea42fd80879a3fda27f5f7d379137cfa7ca851c2bea61b61cff2cfc30e0c2b6e3371865057ee15e3d18827f4173313991f599a20f801ea741c406cb6efa2a63c4326e641f277c82188ef5b9a0edd84afdd60fd39b7c3349210adacad082fffe891b4c0525ef9a1d36baae1872dd010193bac4e281da78343245e9b78e4cca7fd68299d97f110fcc700a970815e5333283289c330b27f54ec1e984ec1900cbfdc35bd253e22b93ce7ff65b3d11be619a6894a28ffb9908ecb4545d6319ec1e91258d65d613e1a4f91d25e3ee79331368f6cadd3024f23fa227f8fa343580300d0ba9251843deadc96902a341e79c8ecae47dc9891b8647495839238ba70a8b8a95adee14039ad5c6181cce8d223b4a371234d80b49aab6bdec737be81827d5d9bed337b5d98e7ceacb54c43e4781b3e216065b499102bbcf463464413616478e315e2db84e0a1817727ca5a6b77ecd0dbb9de8a29923f06726f23803b392cdd2bb162f190405a9c034fa5a88dd6ec23956a85cc5b25ab9598512719cc7e5a2370befdee7c79b2844c9f93a09cde790b9a50dd6d7cd64e35454c5987017c26a9e76d17b48afc0ec8a0fe44dba40bc74ff56ccccf89c6c3841efc147d8b447e5a067ec02ebd85ad9807109bb3758abc2283814c8ced00c28a3bfbf69a9fdcf1d3573941001644093b44c15405cfc79d812a76fefc37e7b08e4ca4728bad0633ca97631bbf95a45fd5849c0ed0f8a0b0268402ce18e8ddeeb09471394549903c11484ec6a1017d5a32ed7228fb246d7f36419bbdfe0a7555227040167238adbc23f608398382ad0cd19761773bb29202bd6f1b98c7e4278b53deb0462ccba1d77e55310722ba0461ce186a778df2bf1c363328d56d7d02278feb8dc49420975ba99184bd61a4ee80349f73c9b6ff0ee969c396c60c67d28bd86f5ca72c01688f5368f199064909fb74c9813b80d0ffc84538ab76e733e72bd8ec3d24723c6868496a7b403dbdd3f08afcdce477b7146401334fd1f8120fa6d65a00deb4ac81a3bac08df210078daacfd9976268f6c12db5100991dc9ed9d1f7d6e0b2f3a721f0f2d4032ba04051a11a20681695536aa2d30cdb46cf6501c20e16eac8f8fc82d8ee20f54113ec6fbf66e4e910b43e400818b138ef1791b6e02bd7ae63416bca444a6e7d0e5dd510a7103b5caf96ffaa28d660730c5777c1bcacf6ea9c293af01f40d0d352a2fd8ae4c08ae4d8c63c69af523c3ba81a768aa6aa9531a764576c57aa5ad657cef3f6a7ee78e5171f593d0fd0dbd744f606e4bd0e7ca827b70996f0759887339d0c0a04a55580d24c65a411f940f9f54943129292c413c60fa7f886e9f50729a6ab2f7a152516bf2b24231756ad4d64c18548be4195bb1659740a0569b8f3e5f2f1de94a233e82fd95cc6a860d28f5795c881a998464c5864a8dad0b4e618141bfe4d3fca79374d544d760dbb09385ff1e462c69a605e6204274e38e123b79aadea53424bfcc1d3f451958fa7e97fa5fce3cb3a061ecc82ad34786be4b8f6a8910b7816629554ab736c2239a77bfbe6d403f1a290134fb6058bc3af7e2088e289fc331f4668a111dbbd17d3255f31341aa2ce976e70dab4d3aaf277507b86a35e02f24f68bedac5bf497719265d9fad0fe1e853a30ff7276ddc90d0ae8a71265c00a58aa937ae61b562f810172ede894ac8e1a78b0ba056a67dee36191db04f6e56ecdb32a6ad7c85b577f380fedb5e2b75447297b75e8c96457a7c9655686d8d59e764ae2a2365d7efe490003eda17a32e2bb1a6370da3730c9f6b58c8dc1423a7b613b76ff62bfac74ac9be080cec7177a25556d8fb1e8499e942d86ea0bc0068fa083cc9495bd118b7aaca7613618855ad305365ead59021726d89556c493c4a5e41c426ebaa2f2eba670132364b1b130c9535dc3a0879a92945433bfff32b95bb5fd7f0d9304e34aff311602e81eba75aff8f5ceb087e168cbea695265a5b967c79528ef815bf6cdd2eddbda4dbbdd4884227cff6e82ecb45d83834c2c347feca3b4bc057a86202353fd2b2206bdc214e20bb78c78b78bb1febc3c51d7cdae6fa9604d0e763dda873786ad8b7fc3fcf5c86149354ab340b86ec9c4592658da8cd69be06c083a861b3921d2bedef060918e4c698d21a4670eb704d0131e7317dd4ed6a7037e661c0f5565f1df9c5981d52943b01a5038d7a59e385e2e6325649ff549a1d95245bf59ffd0bf86f40f3c4889ff7e448d090612a01eac9b2aa9d5fa76a8aa5619ec90086cee4ad227f2805312223df553a1687711f8cc6ae8ec7872d8a98cc063bfda213ada85d39073991b895f567ace47530089348397e1d3ef8d31429f98133c8143b62e1b617446c8db64de8fb6e560116ba66d6ad7c71e506febb76e8be4df6941e1ad40b5096b13d45e8a83b71fd965bc10a6a8481115818e3aaebdcf029bfb537eb840e87a34a688a0868c9a0ecad013fdd59f30fc723d0e9346f7831b708d07c7f5f053c581a9aaa09a8be0e6a1bb1afd577acf2def0bff85240caed626a3d163e52720de3d1174bce86463c5d32b69c0ac7c7215a775ba7cb1cc0064586671738cd0bd490f0aeb81ee7eb9244c675a3f6000454a55969268a3675e0e51d68bd965229989dee692413e5b2da5d1372953c08cad34599653ab627952b4a4d887f8c5621878c2351c8ecf8de0ff5ef8edcf96ccac365d8367283750207ab4ff8c46c4ec9adbbbd53d67d7befe7b6ce38cf36721136f443f255e8460f8a12657862e6722eedcd5cc775f72e966aaac7833c601ff70aabc7f2851b011c118cd604d2f815fcd9e63e528ef6014c53fcc640866bcf784c69388ec5fc10eeb23437ac9a30a08a19e2f7c47edf1b409bf646784e1f7870e7719dd5f7f95ebee2f698b8363a1bb33c59db8a8c842c9337af71fe2cdb34418587a2187f7b1282f64a78049373771cb180737a73613832cc85a3fcc49a8823084d7eeead071dd181e541db6b992446836ccc0b98f26fd3087928df6b72acb29ae638ac0ab049b6fa61c1b194af96c9364b4d14d40ae7979e1499eada0d28ca77ae32dcb47685d3ab9a17d6a14e9a55308c7dfba348dfc0e897552e73ef4c73217f5a1c9fbeda88e9615abde597ff3ba12392015bd4caf7ecd21d8210c978df93cdfaaa542b697f69c2bfe96330c63478c8b452cec163cc27bc23e75786d0f9c044edd462234339d24e1e91c50f55c1ae561b68f90c7ac1f66825a6953b0fbdf9567384ae20d9bc499da48610973702beb9c99b2891719e66a58d102e8a6384b54927ac5bc7786bd42e5ef5ce226608f832b0af5d09be96a0ac309406644a007a22720e27547bc0d113804fe2abf56bb7488e072f20e354eed6251084166fe8c20fe00fa2739a5b48a2f5f84563334e12cf8e79225b9fd3c2c8b8a1a6f9c8f99fa6031c009d55a402eb24d945e98cdf3a844bbd5d5e476701e1e21dd356aeea979dd2b0e1f8869ca9ebf16a487f07cec3371acd0979488c053ccc9bf8384ff7ba18b930214b97b0994dec1b5f3c70309e67ad73ff96d48defc50e44b1aff765842109ad826896e5df322a65d32a0c789d3d9bd36082745dc2cf0b2efd4db42ea5ac6a4bf53d0f24cffb6ba2166a7bf79fb006027e401baff1107521f829fb95b4357d06b9110159fc5ac933ac3472b63eb5ef7192afca0e5f32d1b59f115ec07ed50c302b37bb2bc6889299e45634332e62a834d997560c5f16d8dc026ca399b31c9b34671041ef8fdf47a763febceae65d77a98cad51bc35b5935f9cffe171db18a674afb2b39a3c86a5dad384303e8c0484bdb794b9fd1980c60d1c294cc49e2d243b790d0c5b978d330bf6b25a94a9b1d01465dcc4fd2c8c6593adc0c7452c668051e44423b8bf5192e33c0502436a230d7d3dc5b4d7294a59dac3f4d4c68490fb670f1c66c351d0e1d4a9c857014cc2681716c8804ca24b97a0ee73cdd4b7acc779f61586022891e600e8ae3ad3d3b4c085e94c81019b82cc0a5f4c8224a3db75d17b145860531af4670c79f4c0bd2dcbf6bb04203ad0a0c3b5fa0c30fcdfad0550af317c75952b7702c8938868533ed8b2603d5c1c499508f449884723f95599b981855f989201d700300b8f49e8c26b3a8de413eb608fd6b9c965cb556bf9d7354d688f3ea1f120dc32ac95143b508c314d198e48e0cf736ccca96a686782c042fb6a30f698c7f5afca9cddb5ba3c8c691e918edc3faedc2a09dd3b3bd1c680e0d57e44444da81ae972ba024137f75b9156b1a721d964a943a8bc33a1aacca1f51d5021b5cfad646083a3561e927869421d9c82014d4865045606287a419369646443426029b0e925b939dcc4b84b0dc7e3c5377dcf5114adc220a8571d95f8dd5acce58d83285a3807f556f9b1de3e9b484480aa575554466466610a001e53387b848f92ab8c6cef7fa9391997365fc902f1baa62fb5c34f6cb91935ce4bb046ac34d6f3c8a2cf0369762a21b725d1c4ea75c4f488e5a7be501674f1cea1302c5a048c06b733e0e8ff79abfaa217c718ba3d3458043ddfa2678d67804680c686d62ed5b6d745eaab207553311fcbff8cd68e19ca344dca19b1ecdd84e23c94ab323866bde1ca6f336d2e8d3a468099e98fd78f04f7c242fa55c5fbf33c111d32bc9d8071444ec5f92f79f002e2fa5fe975db66cf512ec80d1b73ec1a032b8731ad2ae72b2097a2b2339d077d5210d80302e05bf9f442496c4b6765cafe57a0d9d277a442a4bd2cf5da7a4c8ac8303d251d2e29cdc516268309211fc5d76475f23906aa364630dafa50b53f1ceef92e153f5fd6ee80b6818c67b80c962399bd41d4767da6b16a3c8ec86af8f201b6ed8ef78d5c495a5353cf9530d530920c668d02428ce5e47249d59383a2ff0d7715085050d322758e968c83287ab262b6028301e5fbd1ecb3543dc99814185a1d2fcaa48735c90ba3ce5dedc22d67598903926bac5324dcb7e1535e2beaaa563743c1fe6f6a9ac6b55ed3e55ad90bf921db9280e74a53bb9a3d5dc6a752741caaf8c620245e6a7be738edde631e5cd7a9d0ee16ff87808d57fe36da1cfada53c84463dd1db62b5eb9693671be261543a518e6a33725424aa4c101c5d727277b416c6726d2951f509f7b5cd30de706f1898191663cfba7e4eae29c52e31c4af9ed5b4044da2022804c49b19402937c6399ad1e699add3a37ac6a787fc5ae18e94b0937cce592890ae4d79f2d9e1995e8f1081778bfb46d00e72390e3d45359391268241625ec81d801832814e6c012785d1ff240ee51d7fbd11057c7bb72ec6bb19169f8db30885b49d099f3e2a2e31128f34494890c2e00f96a8e638c3a5580fc97f858ec5f6515d0b733c1d0dd6185e12dce743c861f7b87cb4454ebe9f9dc3dcb91b41228396b94bae9f028991841f9074e2d679cdfdf788199f1a2a16f0a0fbbb17875916e2841207f3e838029581c32f94e699641d08b7cd634e3b2ef9feabc7247db01937e56ee9f8a815c0746b31690f3b9f0df3eb02a01b8f4b48e5ba2b5e717417203ae0ec450c619109dc6c31219c8a3e30b448567ee43a80d00896c6adf268252ca5e6021542f00106e88ceadf04c7a9e3369637fe007003456ec207c418c6eb4a244a74151fc2bdadd6f694c4f1cdaa12341467c4f77b9b1100d9c30640e3f5eaba1dd0cbe42febcdd8e8141f46cd37fdeb380b9e3d48ad701759f070f7135b4e7805af28df1df877f76aaa179894c511f3953a765d768865fe1f6f4fd27d57823fd0ec63eaefc719bc8f62274a7414579a48dc4c1eeb62c79d171939d34715687a0c74b6398d2ad44b83aa5364e95127c33607be3b02a67b4d37fe5f7313bb4bd6d876b525f4ba43913990088e4cbd95263554ab2bfdc134f9d14cf35d12c84a4d972aa6d9788677611a514ea0e795f4c91ff25388cfb215209bf937021c86817ea6d526da9977c8053bf20a4fdc0602fdb04787b1ed0eebbbdd5bf4163e8862d9a57f6b5b891e9dcfe140a9615ea76ced3d595ee46432b68be278810a217be7c403edb5e7644794a38b68b66d17cfbdff67096b5ca79e193eb662e076f194553901c4cbda14ec05f2b66a01e94792ce6c09eaa06d367713ea1b77179dc54b5ab9a77c712fa898f223402fb1319c09ba83eaa5133d2f0a61f778fb29500036076f808be0b99a1e160a62aec75b37b3a13d3747092c346c51e562237d11be5e70dfac94449930e9384e4376b48acb84bccb035168cdd3ec238110aaf1412b5e162000b0bee0e884f6499d450cde6d6764a64eb876b20511068c4f153200e4701bcbe672539ac034342350992e37cb7b407602a4a9608393802d43d07fc46f445e61da31aa4be5d95fcbcdedef188859b516f77b18772a23e228498db8feb3945e19cd22729898e29a61d1df8cb082afe1f245678c2141d3a20bcb23380c84d762304c9994c17da9bc36a7c41ac7315d242dd0d353f2e822b4ef9e8e265c307b18aa2b3ee7a3e12796b9b5832e2a5f38a980058750e9e08b979eead57dba352f765b97f5df03969e825c667db482d23a23c263f51e603a7c163049d251c7f1e82ce7d6b9ce063eaa6f3fbe9b451fe1073d4a9e3bd3cf8fd86d637ac9b54a669a5b4bbbc0d6c8c0f8fb2770a876649c79d12b776539845e072d7495ccaba222992352c1e3451ae63515c829da61e8b4d18b32ef987552ad7d480276f872a041b294cea11a452bff50ab1a9a7f5e9a03b67c47e4779a51b03ea2db223f5f6d2c8c5221a47507a820f813db286be650082bccc0a65ab91291a5dc5789143a32ceaed2ca0b35fe8b75eb587f593f720b933db9d369d1ce06ec5a066a69acc89a7774ab3f997b310eb6f45f274f138ec1766625f1bf9d8d30b7669985e69f3b447976a1c797fffa20adc57438cac0ecca49453d59c1d152bf3817629867273654b5175e0fa422f591d821f8407f61ddadfe6a1db96433710186630fb55fbbd9265ad7cc7aa728eb97005d36608c00aa312eb7a93906e77400ca4aa96dc8a558063657277aa352486da9400bafdb979d48628a94d48f708fc095e94cff8967fb3fd890897b8ee97048a2c988efe6bc79a90f95ae09f80ed9acfdb9a54a4089b83d1fb5c663ff089d573069c818454214966bc0c57f1ca906a9420e9e0d01baa5e7b69b2766255a198daf8a8cee8c46453de8738d629891d2eed7d9a3d60cbe552089cf967830daf8fdab51a7e03bf1a26ebd319b990babb62e28eb8cf8175160ca11bbfff41144f70ae6f579d2528f6af857b48b6127d3a18c2c7af77b2152f0978c1f9377dde3a453ac34dc751b176284472d85d3e6b9fd67be6b2f2b5d71612ab5dc19a00881db19c0e7c9f5ed30e18171c275c1c2d90c98010a277fe958a1dd81339dc2f20685f06b292b6e384d46b63f91320134e4ff9e92723e2ef4d0e1251f4b80c388ea19f02a33861c001cd45d2f412b785facd0193b4f3d2a83f52b1fee5f39add042a19a3452d4b7942897f757d399fc1108b5a00465df20276c82c19e6d05bb0c5b69207832c743a634ae70f9da8332c85e03ec66a9dd10ee6cca5c66df566563dfe901b8cee0a313926c5f6ba881df0d55aa9eda1e1b1780474d0a5b178dbe41fbe90c6ae70501161253a98963eba17566707416ceddb39bb752407f56972efdde9dac99b4f30f5771e3751855fe47cd80c7c86690f07bb0274e6382c557b5b461b21cee3067de0fb9bb65935df88f808cd051245e09657482d30a35188da953c3a3c3bda3a1b35a429a899cb06f0243eff40dacf18016f3d0f335b1fae633a56be0f2e355f060b95871a507e8b3f102482b86de0596a65f63175fca2deb6d6971bcb0e11d3f6941897c07fcfeec6da43e164ac6c157b5691d461b55bb02551ccffdb8e7020e874d919b6ce03db2e2d3347df573f183513f757e6551042773969cf6331c21e9ce9f7aed102abb47e94cc28bf98a841688151a9da3ceae3ec4a5cd98346e5f38b2450f43d81ae432ec37ac269d963fad22ece845c7c81a9f7aa110b759097cf05421e02b716fbf9b68673c325e776f9e206b14e092e07bc518848264705fec8ec170964c21ea3f3cd4bf03a3673415650a8100dafbad97556440a3d8a4cbe602519f5f0750166055588175fa4b61a1c231e601fd2dbe616de9f955f2617358a9bf05186b8efc17910207ef31a734a4f4d9a113e2b82f229bd28da1605172bb61b97616d04d0cc7e8e5dbbaae220ef3043502da6ed5b3d97914f19f9f0fc26a7e4f156e1a740e54a48cba4b79ed57868a0fc59dd09c23e1ac9029e2ab4bf890ffad1881cdf1b83664a8554cf13610635fafdb96f15366514b0b9b33a08dbc532f1bc3d8e4df6da7bcde04686db7b242111ce38733ec0b20c21206d093ab48197ecaaadb921368dcdbd54dc9e7f5d83d33d6f90209202a796f6b3a5ce4a855934935b3b0931994b31dd163ff2c05ee1c9b03b55a6d633c9630a8e326b6d7597bb44f83f715dcd914ad239d4fad18662c84707cdda7441914b0f6ff09374013448241b4493a12772c2c74ba5272ce4fcda19aedb970b03b36059f299740563cf1e5e7d0c21b2d3e144ee06d3f311c6e4353cd4963d93cf60bdfe858714f9b87078f37f87ae77a9cd9cee1a57e80863cf58e67fd3a63ec7cc8f57ebe3c5566997c5ea0b1169abca82161a6da87ab5a15eb8ee1d2af0a0729d1361cef3839dd2f9461adcb97f362337c63b6a1069295add04df34da10d65baca2222cf0478d3be71400a38f94c1818bd50c3b2ebde58535b7c4217b9b6724b864e727e369d70d7e0508e1818390d96bf47613f4178a53ee870faa0743bff89b30e2933aeeb23a5842ea6fb8af8e18a2b6c858dd3480e76c5c8ed82bea07de85bc0e13c0730216c78e8a2dce699dd5eaba143b43c368804e1a23596aa55c9115941c9172f4f355664511178546ea654a61f71df30ab5baabe50693cf672b5bce68746315f399038c7fe9303cff434abe1ba88aadd8ce1337ecb1044611207caba15451c62d2a46d21bb30e72b8c2bf0b27ad1568bd594387095328ff030eeef7acefe302a51ede5f3b771948006f01b4cabbd143564b9adf741770267bcb06d57241d46c8ac5cc18ffc80cfc8a5987998eae50bb0fd2c83ea1b596a9ba487850710e4e5bdcea1b5665404191e6ea92e304d49949a5a74829cdc2ff597ef2841c3a6c4cee432cab8c1fd49bca96be59fb258a5d637d68e2561d7431760d8c52e2209a03c422f8a55de80aa30ae57fa9431c565b7401dc827e332246a06be7103b18003ad8422bfdbd92baea7aea815c6774c750537963c693b7e0e214bd6be4279c4b3ae289605bc24ef429ac66641c6fc342b53669b89264aa00b0afbd370a5b35e154d572f1078f423ebfa9b82031a82928d25555830bcd5f5b0eef61e861bdc00f7c91995fb318a8fa550b1930f0f6c3fc6d97e3b647d2c1bea3b478628155096c1fee69bfd3c1a2b39d198ba32cbb0d0ebc409f009ba337e97e6a2c1b32f89097817ea4427d097d79c3147554735ede6f124b5b35f03fdd23cf26772c2bf5f3827b8cb20f9772ae43b852a7063409b8344bc2fc76c8d3d8239c8989f96d6cf12f056d9b9ee4dbcbf45dd62fa74787a829920703c6f8654874529c295b4ffcceeea7fb7d660d7832fa1a603cf695f4b46b5c0ca55af844ad43d3cabc65d9a497b09794a72921d3c9a04f69d98d38ed39340a36f7fdbcc266a341e85baf03526a03674b797a21af50036a7c445810527c57d0f6fbc016e25f0344706ecb542d942fc07b216d1d16d6e92ce55dc6b315502df3144b9e3ca9e816021f648be298f7647cf0e02442daef69545640eccb64d128f86d6362f73b68aa94be0c9d522cc03a6c69ea5d1f400ef3326de2e1a878b2f311a6a663f5cd192f6a2daeb6a9068cf9c0d48487fcf949a1fcebdcac7ee0af63fa9009c51703f709d2c0b3b1f359cbbf99c8a1ae1605134ee5938b5560862522e0888ecd2ec0c85e8d7b6f6ca5af00ad5fa763ebdf3424d8ef93a94d55bdf9cf02732018be7c30ad360e8c2ca73e58ec881772b262454f721ea3dab38c951a9b4b951dc90a3e967d99958c65bdcd1a540824a1c91200b7ac3ecd514dcc424838d5ab750db02b46248bbb719132f19154a6b24c84210d4cd83f4e1149acc28b92df074ca26eff33293f93d01480bb184bcfc6edc0f6ce547555525e8887309bad93955c79f9e65d0487381f9681a6c23a101d486f9947ddc351eddef054407fe0de58179f418a0faad4ac528e085c02e0555cf6fa402fe360ac9435545381498f3e52a40b1f20ff39d18728e193663d2f32f54293a894bbb35b69bcbb871f4c095516080df621b59c24c56d1c1ee973a6fbccbe67f5d5f704a63cc91c0455cf971c5dff1a517536536b8c151b4075ab45d21a9a2f860f1d875b764f8f439faef73172623d0d770235263961dbed97cf44650e3d47bdd7c6e31df29e6006e76295bb3a0b0b73dcd703dbd8f8153755b2d8fcd4deb699f93b09f79c686b8f43abbaab0a6961bb06e7ce085ffb9ba7a69317e45ead190a9b8c99c17863c24ee60d2d77b137aa8a16c5f1428724f6bd31b453faad99c59ad177cb47ef3a98ace2bc51349398ca9f6017385e6df1682413091a968d36c32c09571886be4e315753c26af12c7ea29d608ccee70ad5646222512ad69c383ad7a30a3262699725e60bc3d131f2c9cdd71fe2a701030ec44b66526d52d4a3651ef6c2398de75f480abfe1f26b7e243c673ba0025f7427657050821e4591c970114bf537313a56164b6dd528c4489782bc961ca20f8f02fb49c879b450e077740fd6ef2173273d0f1b4b3876fdeab6e7bc5b04cc715c33cd8456cbec10c3ca19f12746d8c0765e4d8595c3bbb2847c446b466fdf909d88215de3836c67ff0fdac0dc344e4f8865e2a022403022920aad4162efa91bd54bdd395bdd841f72f1c98c688fdf5f070262af82ba0bc4a53a7fedc34c85b450c45bec3fc181197fa370f2d210964a86acb4dc611e9350d4c5c18301a6565dbba8ef2defe4c954558f9ec2c7340febf2b71077821c7f2d3ce4c521b5a6d6299422c1847ff37171807b094dd7b9fe651074ea45a5416d1e8ce459c619a573c9770246c578fa43a553b7fad17aa78ac4d1505c3321896eecf61069b32898f2f68ec2a9dba1896dfe9782dab4878f4503b974336ea398168726e139da0458222ae3bff7212f8a3e3be5ac86c144b880917ef1c92fd43b12e599dd10d028b0edaa674341093131d28b67888678e8cd6fdb7860fb2621a0bd95bd9069893950d8642cec83f2bbd15ee6e9d3d19a546623349272f567d2dd66a67196d813e48e2a78dd7c39a8498eb3ed8045f3aaa70e53123fc736d9b905ebcf7aa58ea43ae0cb43cd6eb8ffaa14612995a94f3d12f78a042ceb1119358825e7d120bac92f832bc41b83597b704f6a672ef176008a882ad02c6479161bbe1c20c227b7f372c3aa960ffc1ab12029dbd4e0f162b42b0210783935ef615f49c44dae619f98283735d40050542b64503bd1d0ce2f18596361c69204b0969ac9aac43c900161fb43e26d63178b73d0198c2e2655ea46447e05682eee70bc9e98937c4090c658c804602ac4dd29a22c563f042dec0613bc574f0038fe5da7f35c9cebf70d8ca5bbe920635b02e14085007624da784b4ced11c8bad5f4c0d5ed13ba7fa841a000a7b7713319a76f3069df0aacf23c26ac1e6a43b7e06a63d6a81f41a92d6d6367e34726ebf999e3828a01370bc073456b1b4fc53e300ff58b34a1f24beb9919717fc31282f931feced7a7e9ec016ce8bb923eeb35170741772e206f92d717349ac04e79c9856d7e83d95023a5236ad8c9b78eaeff2d1e78c4d050ccc7a707528f786d8fcf5bdc82144c0ecb420294629d764610a44aae417569718ed09d752a2e64a413cb79ad9bddb1493c2b7bf19a09f84998d22d6ac494b5929c81ccb499a4034e3399ae7e0301eee3bcca6e09c9cbcb9789d78ecd236d0081a06d3df841fb6baa1e6108fd8d5dbcbbc09731f163b882d8f8d253f1afc53672c6c821d867f9816d505e37d735313fafef142f21abde279b07710d14a57b1d7a94a9f9b71de259aea20e753ea7f738f5df475a6d3ff918cc8394eb668b9326ce9202f478b93eda25c3cd4ad6f1146048bceb0bfa7f328fd2b47ca40a36050073af0b18f4e76a4c569142a32588e5e731a3bfd8cc7554c6481b3add5d02f46ecad42cab2c5e4521c080e5627735c35b3c16aa243fb7466ffc2edcb9bbf93c67c8015c965fc96da510fcd66a26343992f274ca3092e05c7814b15b593261a60627ab18c7d8d71918bc6a3724ae107ca7a4d1995c2cd1e173c68efd720d30e2bd45fd8b9f605671a447287f76a42571dfcdee97900bd1811361d58de6547ff4c9fbda27d8b8a438ecb42f6b3f775323bf42ed6b5d7be8321321e85bd7dda1c62e99f660183035d91ab65fd9c483d59b0e17c50e018a0a3f489128bd56544fe591dcb5ac2598620aea19c485341048341f1b45026e4ce8ebd34907c223496c7282e5562a25881ca9cc922b55bf4324c3828e7bf205f4307d42eee7a0806e2815519b7aad0bbff5fe6411e749588e96c1855b873e950ea8d11fdf34558c5bb0a9ba8da44292c132700fc7f2225d9f231c6d24c16a14b2ac4e95722d8430c8d0b50e4885817106a9a561e4cacfaf0855a334efd1cb75c7cdc36534f946c0258a5e40db90990305e624a99acbd8fb518424548e631cd5f1345ed941e4b4b1e502a917d9aa0af3b77b0b4cf53e54a536e08616c64dc389ac8dfc8d1bddc34766c492d594845fca54907bb77f408c6c01e0e206aedf20f5993b4e5dac2ebe94690f741ee5e7663a59712db61d14a48a3577a3af003ab6f989c6b4191f55d85258dfcb74ccde69fb631d0804c6a8e3a695b99763ca6d831d2d22fc98da192f1a7fe4ff93ef75b3acd197757230469a8c9ff8388ee1abb3c75e8b7b694025948a1c544bcaf3a2f2ff0df8447aef317d13278a8c038b2f280aefd62721ea43f169d24f18b2af7c5085afeac336a27a97097fa46941fa3ca94d6d16dcc0e1665202f56955d24e61781c658cf3cc57e3e6585d48bc959076f5f904fb8a57e52f19d2a31aa64eeab06994f96ccb5936a5d98100d2dccf020a1390aaa0140e65567225bb934958bbd16555ff0664eab5f52f4617803250a520fc1754c2d83bbd96409922c3779edc8fa2fa92dd98bea2aa82980e39d00deded63ef4e4cc1e51b27e1b122ab0e6d8cb45f224e6043c77871d63a52a8e390acf29c23c5ddbab78552b7c256c5beebdecf983e7808422272194abc6266046cae5c921010a44150e6eb2c5f2d30fcc13011aea4fe5260a752f0159969be657f83cfe6c511b8dd966f6235360fae9cf4ac1368d9baea428520dc0d18d6594761781db9adcbf53623300f53e34c3288f81309659f0042746ed0506a56d484530d2b81770e8e04c1346d8e31d004db81a0a25b0d30bd375d0b13dc0bd4b28a814adb57e1610ec705c82027de701d8e44916ebfaad53ba0c8b98291e7d61b5a62729e10bb4da3f17e93e1f57f9f07b35594c629da55384929b48e8e64ca3a25dd50be0fd7aa747f875ace80f17abae94df5937179e3368a6709519e80455227498156af9403ebbd5d3feda3a8c026e2df48365c154e6e02a563365d03194fea03ed21b5304e1d4409de324d9ebdf4dbec54d9e9ff05e42f5024da52d14616bf75c48832ca70fc60d41f524502f3f5ada04a49a56e3ae3b0e14a9a1d246a7644a44a1b23ca28d90f3f49a9a60db7912abac4f009bbe3e9e62eb0bc7f6e2f9c32739c66960bcc14bd3eb3b43c6f17093bce38f2db83bb974779d340a7fdea9c97565b299626011a7193a466b39f5352c2bfe4770cc0973decbd534d08f955218ebf9e76065f3fbfcdaa6f301d06e9e2de7e3ba8db792ac28aeb40fe2dcba6db7e426f81c3bbeb6bb6c04f35efb88678ee9be2dfd6e3da49c8b0eb4d2151cf9ec4644918fc36862ea88b4ad8ad6a15f8feb4e3d6a74741d599f8eac31ae25237365c2d2c09a1a0d2905371c00e05b2afadc0e5d75ea495a3fa642e720257e8654307f401d14e67f7eb8a5fae9ba6234957c24cb4f8166c2341753db71a5c5ab1b21328a4118c5353d80d324536d0a621996b5b1e1c247359be85280a37acbd768b4cc4f30bdbfbb641716160a4237360eb05f91722f8027ac2ea92f1c72d5d1276ac62b4a459380d3b3ef74c2f27d4698e1a9ef643b5558cd01b3f29e0aeb28eceb8e7352c4de11872aff0263d9781ae5e6eae5e78b232072f831404b7d93374dfc628da5e50ce8faf459d038192aa23954b7fa9bb577c0b63e61844118a2ba7077c08dabb9dad9db3d1ff9b0aa198644f8b84ca2096a3f8a59682e83bb9e18cc9ad41887b54a5de33fac9b97fd0d8c7236da81bb081d0d1477bf2581144689260fe33c6a72611f55718f7814e62b3b4fdf41bf74d598a327a00b3ce2a8821d9ad795851728dc35294a522ba7353e1c240cb2fa310d75e851bcac97cabc92f60e92470e716aa5948d2ad736854fb389f6d337fcff4714f4900acea8f05918f9637c29fe4929977accffd4d598192bb233cc94b75eac27e8fcbc58b5c769bb1b79c74e4782c8f0ac3e4653fd6850d6193574f730f76381ec1c462167303a6d63fd44a420d577d3fcba81cd0f5fb6d09f69ab6913bcd2661d9ded16fd5dd97f889f3b3576962dd9009fdfe6b3f5c2895890f141d768a3c167a825fa0627f929f83d28bf6efe0fb3c98f82fadb6b65b2b1eeba2513bff5c9ae79cf619227a2b06b93faf8de5d23417426bd9cafbd33cfb938c36c2ff529e9e62f9732535706dde8a532014576b21beb6e0393aafcb15666752d7aa82ca527d65cf468353115e82390e8d1a359278948d48c6a756d4776304725805aa5b5aca49a449d2f68728a0996a15762031b7df94f9dc4fb9d541c0f324d109d816096f9fe693eaf34778a40208794b7a96059b456cc742470b5086acf51e7b298f4387f8af9d8a8168aee971f047843e7801dcadb36979975e4669dbcebbbcae20981de426c5bb61c983367dca7840847feee38a270c683aab7c8c5856971c9b10fa762f9c6de5f975f56b8c315faae4b743cf880fe06f5e0edf74baf01f52f8c20ad821c8ed64b1a9f55f8c6805f4a96cf7fbcacbe40d61c74e2f4cdb97e6ffb4ed31f7bace2c0d892be82057c89faa22a204eeb2ce7de76844ea2cd759f3b788dc5a8988127703d0bac3192a5967fff6a27565b410a14f77f8f43e51594d1b05748340a8ff1a3f320d9ca4ac338cd668327163140489ffcafaef29ef86ddfbca576dcdf11a2a545a57470b1892d0a7885e9c4bb240fcadaddc65b01ab1be622d7e72e3b0be764b715a434530c5e4bb640f8f3e6a94e41fe31ea4096d060aa17ef57e6d70a7a5c042b35d3d30b33da6c4d15d48ec3d5f2702cff2ddf59e8dcb54ee225ad0a7a0886dbdeec6cdce95adb48a5dfec89835f49d1a3b54a38d815de041443e0e154f8250a1ef441ca39041589a5094861667089b23aa177b76c3e06b15f4c7e6107dd7d01188cebdbf0e9548ab8d4d14afd8679ba28d57ba59429f6f60f6fe9838e8af2f5b7c8f13b1abe1de4748fa9520dc3ac9520cc11cd709f535ef65bc8665652c73df2ac181598b0fac8502750eee35659f822061398a5adc9e4e5f9cefce2b4c5ed77655f162bb6309e3b7cbf007f3c6dd23d80cd06709137941fc260ce6eea724f57722425c45284d72d07b10e3d8761b405bdb3fed310326301ff21d3e290e46a8a73ab6ac7b9826e7efc18c7bca022668193ace13dd11fcd2916cd041e352f8293e5d54b189cdfb76ed7b27dd04a7073be67d2a223a87e56cb9857458a460a04b0952d53d670c91dc6a9c46f9efc09f6639425fde69463fb5fb25185b348e1cbf49b6320e2b6ddad95efe34aae274357f19aca34e783ae8ffcddf99600affb2411ceefcf8faf3306cbc45e97a634a38ab36a44bc85a57c953f07cbb6be81a1ab124584af193ad0f4a80972aa2249c80a7d66aa0fe932c3d40462534adceab0fd919301f81283d2aaeed0201ab92a827db0c65884a20f7474bfbf8790bf084966458f19b853a1abccfb0249e9fcdc73225109e67b8a6deb977ea9946b7228a4426091ae82cf3ea84cba8fba61d975b7621b95c856c39849d853c60f8bad782c5b69c30f56d0414d2bad098d748c491ebdd080a4d9586b7c88d5dbf2cb25ce2c0868d38ac592d809493ae530e64c64ac0b3496c18411bf9def51ce395b21062f4c63497f1b5968ccc6cef40f0e98f7aad057e226ef9c4ff3e39b01032737e195ea777244e55385554e8600ed45427f304544b399873cee90a16e6a51fb6b9d96681b5d080682b71490e5d6b6b22a78b2c18cecca1b0bf7cd384dd06ef8588c47d60e4f4c75b15564f362c05d8463663cc51d0968c7d9cdb0d4bb888c9344240f013d6b8289587af1e9f88d9ebc34691ba628987bcc6b4a2987d6338b8653708639cce20bd90497cd2af77b26b94eebf2cf6916de67c1d047c378070b33e988a3b72315b88c3e9124514f6465fad8aab7f3e7ac1bab7e4667567ec4a345cbc4d0ca432ae6557d8f06292cd29e68efd2d1f4ad167d25cbe153e3c9a4c5132aec8082e6a678b3","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
