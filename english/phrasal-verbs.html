<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"e86708d89bd0a6eb5c8c6fd58b782018acb341fc90dc028a630ed2e183020f16075e624b2bffdac25e4eab595b34a17190168a24f97027c03570182c2aef6ed5cc6a1c1b3f367e7b728fac99e1c8b413710d3d203e0d21db02149f9d2714f2c76213db54808c5036dfe62c4d55ae0c5479112be42ece75d76861e7a45ba1384016e1abeea6e4b284db6c5ced82f876c8ca657a8b026a34c1ed76c19f649ed8194850f399127dd6036f2b4e2d3900ccf6ac2c083d6fab80c29e85b22379aa36e1346ffe4f6e8b84297f7ea8118695ad814d0bd065343887f5361912d3db661d2dc20dae5c8ed39048174b39b1cdabc28851ad1538e531323b3ba491e1cb94f90fd9632cfb2654ebdc51dce4d8e6e04405f797be0d7f1feeaa2135b5c2ce1cda9c20791b475b55e9d00cc7d32ac3a428618b016ec23ba7446c440eab904a30aba9d246b146fa128d01f23160f82c080b2bca69dc89bf340978425f1f34bfb54fc47439b563dfe45ccfaf9fdd20fb1c112977c75e7a08c094eb19288e3019b7f1b236b4f3773a47520983fe59c7ad080c028b1c5ea9ea9648f0917f077473ac1830025cb210222305ceab33de66aded1085fc4ebe4887bc55d1e7068dd061eca9fd07f5995dff5544f637cc83e9e3205c38b9486c25aef91f2b79ed388da5b914108e9a0f95572e9a20acab5c8d8d70bf04f0dcd826959c33c787b284a970c255b06b1ae0d02eef97834f66e910ad73002c7f3a066f9f78a49a69908a0f82ebb6102d6c966d16f41759358d23d248cea478ef9af5537d0ec1669c47392a51a5f21eb966c1c4de818df6f620b7b7ed55bd557fa099e3c06959a87f525b30f7b917619500cb25c0707ce773ce49ca4c8017ad69c760fa84efd1a758a0c5856a7fea94b07ac23fb4673fa0394b4d07914eeec0503db1fd53aa04e4921c534a70f5a8defa3e68c23b764f73db7f52aa21ca2d0d6540c6a93169476bea9729f24decba48fa49be91183150f832897f272705ccdfebdee9afae696eb0d12a5be96bf285300d596e6ba79c78aebcdd84d7a03db61b55c00db9d1d447c1bd08f6e70ebfe37c83221dd1e78430612548e3b2c3a5e1437b2464928a701740410d579ca08f406369b729fdf1c22271d1ccf4e120383f041d2270b2528c64f049720a11f88b425eaafba7ced24b3e99ac984235a9f24de03fcb89d94e30ffdaf1d46aea6d5a4be3da6824b580610bd3a1e019599728494c4df812e2383dae00f833316bc100ae03b92c7c35187e713dd29ecf3de910ccd3f47152cd28c455ef402882f8617e5d4c9303ad3ffdf82c4b31f2374bb8c0e0044053601fb288f6e1dc9eaccdecf886e88eeabe9fd39532b425caff8b8d1456b0a47c98f1fa3af6498589c41fd3e07fddcc8a91c2c9ac1dcd36182eca199350e53d89974c7ff1e63beff152bde4db5ddb94f456f08c48c9972c01f00da3d62fd348f070c36b5c1ea0ef6471aac7b8e1f08909c3589709c124a080b3acd984b2e29c4bafc832260c1d3869498ab00363dcffbca6f2aac84c4003aba8f3e6bbdea6fca6dc6b7380fa2a5cd49dcb4a9efb2c0b0df8e1486d097c29e44e6288c9ab975e5e3d46e3d426952cecb2b090d64971260c076aa47215156067507581476c3afedaa6efe790ee7fb24f9f5468d22c1d07d813a96da06299a77d1cb676dd73698078242725d5fe0be8fed7c4a4064a5ac95f1a9050a945a8c1ef3cbad30ab1802dc4a5d38703cc66339ed86324574a477b327679c7ccc0afa4c64fbe2816c98dcdc25e80d2b2848eba7cd1de6427f04775655b7a42dc2a79d9a6b8d41ca80d814ac70a0612c059587bb503323662a45eaf3adeaf26af4ccca49e107dde634cf4f106f358a250a1b39eac216710111297912431f17ed028d51b27854435b84a1289c64f2534164e5ba9891819920255eaad22b35fdbf54b8e8cc1b0762be025801a4e99fdb24662adb7ea3e53ea6f7cde793f24dfb1801690ef90c94a962ed4207bcc2a5fa72ded6048cdc22760bda6928aad7797cba956244bdd323ed0ecac725e4750f062656f0b7ed85bb216ac3a2a0936e8aa1f0351734a38a05c35c4b7754395e2836aa1f1eb6f930d96bf609c67a8c7e3f017f1a66c5e77f0aa9b0da524093068d3cb4419c8e2f88b5ae7da54b624eacf41b5b4bb0afe7920f1342c40b1de82159446940d6da6b5171e188b186f77d33e53d3de001f059d805a744df2ac51c0103eacf75974847b8efbfcbb43023da23fbeee522a259ddfd2ae7d8c78606d4d02c17c94e77b55f1e54f1f3cc712508eaa5d8be074f224b0031f632eaadaba54ebc43b76781c9fe1a33dc705a729cb1f5c410264e9e7818d5b039d8e1957eda3c56791b069a8d2caec3e818ccd1af6ba7de97a39920e8f5603b57cc189493f3eb7820388f71eda5794135badc4ce51cb77d408f12e5506917390fb84b75a5a068585e1486e1a29cf91d41d089512044864d0fa21e7ad67d5c7a16368356d7ee77bd8d99ca6555d26055e88b7a85e7810aeb09bf82a133b7048a5a88050226c106b45aac0645fdaa059027ae863d7570eea5642c4bef8102cfe5b3e602b1a4dfc431b4d118bebe2a6bc680068871d8e818b52a09faab4d57dca98244773b3c4955ea1ed639e9d837772aaafa37f65fb3a633ef17d6e7392479f373f6fe806ec611ba04916d41a043b36aeea4ad78c398120186d3f8e435a89d0ddca53a720bb944df5d3daac7afb5b13d3b1cb6fbf7e5f22146a87faa63b2be1fbad06c5012f9cf171a0cfe56d9ea5817d3c892f578bc390bb989dd62b7b168bbe2adb958d7a45d016b051f49a80669c556522104eeaa35db1da5fbe871c43e7ce7861089efa2f09d97c0b0ee33e43ae79577572aa9698373550551e2b2de9a6f63db9d6c4d9af883421dea8a92e26da2c25bc8fe196a182778f06087b3979baecc610b15012289e72f4bea7ae3a48684e8e51b30545f84e19cd61793781ee1aa8298c6332ee5a1a02089147e7613fc153e897cbebd24b684b90fb62e4e187d2abf22723f489998de566e4aa48c9aecd054fa66cbdbdc3d7677315031cdb8bde88de6366a4b0861372c468cdebaa50b13887a1f3047a8625f2e8212a344bdef41c8f51a7d3a931d213178466fccf7962e6fa0285564c54d1e9dfcc9d9c0b204f09be08cbd04e8f3e07f194a666d7c6b7cd2e49b18ee8c327f303711524a6c2a7e26d1d91c992c47c27c56a60bafb8285fa120a34ac6a1ca37abcb160e18f373f4ae43bea04042800dcdb638aceea1b5c3a327554da0a7a8f8ccac4a2dbdc95557c7cccccfd03cd736ecc3d56544cfe349dc554e0771edd86d848f1e1006131194941ad3b35cc3fd05f16553df44e03e3ca6a3b5a3b1a22d887112bb886e71bb2a4930ffec6d7db97b7fa8b2899f8163542918ae78ce4ca0a3ef71e1e3fb7e6a31cbe4f2d9b3c29ac7533eb1e2de072202cc79d3b02316689522068bdb6e46796477565375f688bdf62f4353b080c81316c0a2613b8e0775490ab6fa63e4d06cde4fb060367c7978a1fe002e0ad4ccce9e8ed5964eaecae0476c30c289d9add15fd3fa8ea0b14bd95230419a485b1ad86366939f87778b6e015b3be3507104bee04f2ab63c4d9ac8b963d9984360389121d1b3f846c55a69a6d2e62bc01494c33da5d176edf7fb9ec48d67809dba14bd8c732841f854d5a4d3f3427ba81da38ac157a02a268b17ae146592341e74b63a28ad48c31d0bfd160edef4f2799afc405e33931585301c9b13b3b48f04015901a1c0f93b34ae50a5f72065328cc414ccb8e3fb78c058439c637b8cdf54e3d05486b330d272f732e987aa41ebd8c2f9b5355a7aeabd8b8a437e22706fd5406687955a6f58b3aa2ebc3c6073457b637a4867f595cc8a993a6ce6ac4903971bda8044d9767b48efecd480548322bdc6abf2b2edc77ecc14002f6860bdf246c755f6f224854a09c508bd63fc8191a5a7f1fb3d5fc4986ab6b4473c18fe7cffb2ffff411f2e5da1808fdfcc525c879f6e5311a4eb6c4aab7679080299ad29dcb56dc9993b04866b5c335e36e7e49ee6175330fc652977f92bbebcfe237b015c92a3dccca8df3fb9a0d79a902717a5e20ff83af4f6a0a2df4d7eb42ebf93115df924a8ac682db29a606590cee4843f9c8b214bd0ed996e5c0933cf22de4fee60ab8c7ef1a51965ccf0afc87269de6f0cb7cad71656b23ad04bbdb90480d164fa5a54066ee8f83794f6e76d8ac8a828f68ca414b5bc543f526269cf1fbbe9f544eeb3565886604319ab3896194bb9c673bd0cb6dafc397c18096d97b16d087fd50d98d61a3df9badb24edfe67f9cabe10259e1f34b2f411e2842338648ac49932b4896f3a9cea8e325a4758af961133e01a9c310d8cfd5707aa65bf1db81b31e81d2719cc4e8ec5fc253ab2568841d85d0b87af00a1e8b2ab05666bd895fe98ba7d5cd90a06979419256aaddec2373ae0159b3557d31784cdfa832d29824e74a7c6e77e5eeb38de011ed70f6685fa24c401539d06c30c6362222b01751adacb9c69b563edcbf5ffef6e2b00bccffd178e3b3588ef12cad7dd89fff96334d521ba6730a049dc814e954c81f4546a1b82073e601bd4a21896dbf774c7382256d8ac480e98035d3d4e6f96b7867d0aca37f6d109e5edb9e9c457d9ddd7cafc80c5141ac54b306ad2888f4703762e1d4429d907c48ab2faac285c1e86ee95fe527877e5eb1fbc0e417929a09009361b0e62b90492af46456880520263f139cd942f4564a01b4759c5d1fe77f41ec830d82e06a69d9b624d5896066cd083ef8199949b4dff541d790109f86d606132ccc6aac327437c263e4dac68bc0de089c19157bfb8d918459525f7471efc85a09f57fafb063c053ef9d3f2dfbc100106188850fd15d04c46445ef31ff29099d26ee1e9b530593c08bc62be9e3993434dc1c2db0b67a40059525c10840a74c1013fb761c64d18afe183e0237595803a28874371e94ab607f75ee65a90c4b4419db8fa7146dae6918f0a7126b09f7fb6bec38ad8c8ebdf0a566acd23463b83b2837fad6e9af06dccf69d7157c7364aa4d09227ab9167d459f48f3f1ac9152b41154571bce0bdf197f16a38d531c11881036793347016e9973fe73280f502ccc862bc1ab88822bdfaa943d3062ae0bf0de47734df0d3b0cf7d0513ef2cbd1b6c5babd016d8caa97ccc0282a668b29db40a8a67e523f4e4004ac0437275bb494e56b7b43668fdc255b6adc9f391c6e423e63c63789689f51b689d9a3bee832ac2c6561529766eb554986848b3a9b70bf9cca8f196f914206730282a54e836097bfbe3809fb6ba04173d28ec87e780355c4e5734d4f06f434dd672c1bec1639ab01b52943706991a6d10e1275308fdba3874884e4d6090eae4a42d42b0942a1a68011912cb8b99423fc17a9bd55e52210fd2d54e7aac9f6f6d23fdef3d3dfbda2c64eb713b586fbec5c804eb917353b089cbb3a56031ad9b44c3e0e6e97bd4bc98200b2259b21ccf719e83b444877de878742037d884e393a074e43bd538a02c8e2ba5e53c38c9f0c3dabacf5ed1d9ec5befa46929e96c19830fada7b980555c78c3d0347d8ca1a68ba016d0fd3cc9b0936f9075c2bb1092127567cfb1af1f7756605d091b74fd8a7deb6ea48cefa602dd5556de3d56840f66c2aa0006c5cd08acbb33768c8dc83b5ab5db1e218579d699d3ac000ca126815d9773c8c8caa4d96030123f87e95d2c8c143be2d4bd38d87eabd1b8bcdec96555a020be8c4cae454cf16c2d350a926cab89461367c83b0d93c4d837ea8eaae4b5f0d062b7fb0b57b8c254801b25eeff27a253f668469ac9d9e17d517a30ba0a8229a209c077cea3d14ab91866fc8e8e772152a7b182ec77c7e5649ec2e12efd5db228fc8cb3b50037c3c42abb547890461da7317217f1409ecd321db3363fda96dec513978cb0aba7a50c124d0f6bb2210e5245530978f44b9e7a032965e43e9bbf6bfa0dd3a8de7133e37d196ae22138f0944d087a253d17c14d20e435c2b39be20d6b57bb155249156df1329268e3dbeb02fe04ac84381a02e12612f04f528aa4a4191c52a149570b566e286688fdaa79af893abc52d846ef088c73b25eb20036e9615423c886f33dd82f1cc522e30717005f8df53df47ee301453fc3d58ce44beb2a1e595ea4f65f917d1780e4021b52e0987824e0bc5ff6666a20ab1fc1cf5190e6571c4ce879cb3edfe2f34edf1e6c2f9768fe9186581a12019972dec78a56646987d0ba0b52845762b0ab7fae2c0e4a9391ad50ada55e5c15e6118f89feb735fb43a91c2ea9dfadd6609afff22cb996b01af6a333cf088ae7ee5aca8ff6da50fb538f13cc90204b0271a89c738bbd192d74c698d937fbacf18356370aa1a14c5a150b25f2af75ce79219973242e6cdb3c80d76c4e139ab50e018cf1664981d6d3d6fc9d1bf77f8cf0833b3fa052fb1c1ff38bf28f4378006538799f118ac21a3330d8e96d7830d230812c0e949bbd8243752c2542d556731f770e4358a0c880e37b8e4be47d5615687b57f2f68d6130df291ab5918c5e27d4fc745b343f22720e488ff25008fa7806cce6391fa736c4cce4a74979c24a21f5bcdd9cf6444c33ef7481de54d73468ce72b16668690cbf10871fc8fb534d83537bf980b06b778e7b94c3d7cee5829babf9ce889ad36c43e0d6777341af61075b7aa66365b31bb0e4bcaec8ced65121f72b8d641d86e69820d7447c251982205b4511a667fcedd39a812af16444a3c37ffe751da02cde7fc932548aadb1717e1dd58c16f6d2fd40033798a0fc615547df4efe39cbc130a47135247396b3fe588c5be3c555c2942a5dab7e36f98edf4d516ad8ba5d5160594bb57e49376bbfefedc633cc8f5420a3f60ea3167715a50c87d92386b3e3b80839fc30957441284c0cb4687de8b8c818a56fc5b58052be5be8c45f06df42c4e17b8137f916a21fe8e00b959b436dcb212e06c2fb7110583bdf56f4c3c98daf16e0b54625e2b511c22409dd7d978855bb61763be83ea86dbdfcfc249606c79b620cd86752fcf5a0e3d80643e25af5b8f128acc1b714a761960fea1d5aa715760ecb45ee8e506aa0f930d342860e5c16ec9841e7dfc3957aaf1499cd6f067e468b238aff5636293115a27ca1c279ead19710b4f81cdbb53d636f665d4a1994f9ebeabc64f850048fa0de7052a6e36994ad5647bef484f5ea588f77536c78626f7b18c3266ed728e8242e6466ca81609f564bfba814bd2134bde7c07f6424d01823dad623e2e101b7a96c85cfc6801969c361be0f1b4d6ede4edbb0624ff965d216e028cbe09938850aa912cd907d2319927ae4e9d23b24192dc846ecf0e51211ced9d76c91d6ec5ab441f79d2435eed3e9f3666d22bf9225f45659711d8d2571b5108c10894ff8540936beb7096ebba38393b6c312cc9d47982660b76f0559ef69812cdfaa34f7a7b1a846067c765ca82672bfa059182c32b2aa51f8e7222f7b1c95b3e4a4967395787f19c1306f4837167870e0450839c3c449f69e63a9d81624b9b0a2deae10913b6a0bb1e73eac9ef880bd1835a9bc34d61ec9c943b40d63b60f16ae4555b20dabacc977f8b51502e145d33f1d4d5019e09aa96f3bb127d81a4bceaeb77e47f2937d089a78e65a07b24dcea0751b8d27a1a1639ad02c870af875ec4f8d307aa3bca30df59bd2d258128966a5f5b291f5026a2e9f3014259b8496c4d732dfc7ec38a696d5e1b2ec6f858a9f01c434ebd5ef57585ca009f50048e8565e96b039e407c60c58c92b3b4c77185a4707cd97dd33dcff23877e40cbfbeb6e4d7be28ad0824a7918d0a44902f5ac331f98448618f713a236b87cad322dc86c2bcf7e0419f7e2d2a1f447fda37aad79c6ca6d5fbab86a15c34001ccb106523c690fafd520f5a646689f84c15172b09720af8a34e4fb03c06386be4e428e7f20d53f4ad5d4e36abdf3d6a7c784f041a0e384965b4ec7d85b360c483f70d45b60136741754403d51938198e151eaf9f1f6de8c81613df08c0c612436e2cf9227bbc3ed3785c6125beab76a7db39b4fb85b125df9dde25b456422f6eb5abda241612b867189879fe9d3abf8b7cc35dffb9c6d94a9833e7597fff5c6969713a091556152420dd80ade05adabf6fc45dead1f9582a6129a0d4f4a4a185fdaffcb5fbc3268ab1611e6716a0f55d026501152b43c0d2298a441b9f54ccbf81bf688506dfcd18c248d3db0853de23e88999181e2a499689b1be49cd94f34850191e25bf5c5f4645d2f7eecb4ca8e4d9d1391273d66be87240ee2bf20d104a41520e4df8f4f9f198f789aadd5c26c205b750bbecd2bc46958133d2c3623ef7d1a9cce3658c1ae00843c3c6ed833aa5854191b662cc2bcbda30c5b56840b52ac2f089a203b89b6328c8fccb97ea073fe39ecd214ad85a143d40d1b7687c4d50f964f871425367c9fd9fa6c3286b715409290fd805703c05639e68b43592a024e44fa679e3175cf5fa0cc078ee4e1c3b5aa8ed5d75ae548094fe1219870d598694a4b418e90ab1ea4646fc281aded1a94dc47f7a7ae2ad75dcefc4ba01cd385d70f3e635bd780f51c0a23c9c5d29f8ffd454b77c363deb936f97166645afe0a02cd2e405c65e4a860b284e22f6721bd8d14bbd87e1624d927e145ccc818b34996088f6320ca7c549cad16fbfc51129b5c7b8fa57dc92f701c455102d88dbad5a893b5670d2c6db0154944b7751113f442bae3dd4bf53131114670ffd2515f8be4d0b2b12b02748ef33d0c30d4f0cac02e3c7442cb516f1dafc3a7c8d19602cc812cdf2477f3605876e4401ef16d5002512062cf8eb0566ac877c0beaecf334619e33e0f03c8d0279c7160276467eef7134bc4db89193a01265ceaa023fdcfabb28ada255932c05ecc539c782ea72f97ad1def87acf79dd4675ab414d5a57cfff5c1ac07e79ba9c81f2cdeba2d5ccaa6dcf67bf45a6bcae3e01cf038c96ca6c66c145e000fc79359fba1e892538e8137abb856f49246a04ded0ee933ac4de9ab4380b1f586fffc27992cb70ab364ba04571f2fcefbd0cfc1dc48a1c1d5494018eed33031ffdcac37b58912099c1091b28feb3070fee9d166180f67b4f73c8df6ed394dfecdf96f07de292c44e5e73b0f73ca1a309074e397b66ade7b40320561c88c5e88a98e3e26077fde9d1cca72d0c7f1e33cc812421068d1e341188bdfc0a63cf6747ca082058308a9d42d91477c55686c41281213c2116842c14d2d5b2214fd50e3a416b63bdf6626eb1d2d95a66580cc587f82eec6de3edba40a012d6f92e9b7826ec301f25104d403d62ee9f8659b541cbbca1aa7871e726869313e587a818abad1797ae1c80b9ad2c6dc19f5a296b5f04b5e71c73cd0469a64be2c9f08ef94ce78a370c7faa8724138cf9b975edbb68c8c54d9b4134366b48947d650388181d3c1d056b3e558031244cf3db1f7801463658b42dc1f60a7d437f5689e3ec170440f995e601ca102206adc9282f685018d70c89221893bb50bd5c73e3c0bffc9dc6b6bb12e1b0f7fd968bedd6fa87cf828733d4f059723b4cfa5ee5a18fde84a39e00f47e701db3233829650e7fcd9dd2dba756953e4b72e4e7810f5b8902f56de30abfb00a88ce323c6280e7197c7d82562ffeba111afc46d19fd42bd53874e9b98d8899128748b1b50e6df6fe96b30ac414c4992b1ac1a2cd7702db4d0c9812218eafce1c11451657de504c05674301ff6f05e36282c1e67ce4279a8103524f0bafbca4b41bae12e9dcdefe3b79e2964f481a9f02734eb1a2446920420a8d0d367fa60c70f273dd7033942271ee174bae1e62c11c1f80ac24b493fd6c669b577706888c663538e19ae38b35041eb4751cf7091c6e3f8202f44b28fc8a85b8100f68aab36560387064c6885906ddb83aad69d03d249f0288967795dcce43dd722c4330d5b8d23b4f03402364d6d38567b87983843b17729a32a9ad0ff755b4fcd522877356772b221f948f6d96b1bf3ec26939f71cb846387876388fd4208ffc9b9cdb345d6643282cccf7727514b872eb50c5d85e0956106d8d015473f81fe48967b38e02710f624000fe94549005ea90df4df75823a26aa936a42658c3ebe1eab741720c3524196712c4f40477d104861c318edfa1385ffe49309442ae061fc45bee680ba60f1af2d4399044a8c2ba1a3fc0f75baa8e9b09feeaa0c8a63e5b900495e8712592638f82261a1ca4499c0d50a5fa08ed1445869e6ba279b2b7d8ef741652dc67d2f9778543c4b22943bba548af56cb8b27119b3a8d67e21e80089c2d48e85c000af425c20d0d135ee06b7f5b1d22373682f1e8a7ebd549b1dcbb410ab5f9de9af3494d7eca9463d0c5d8dd75046a94efabc512b979169f5b130e8de1cee8f40947bb10ffe1ebf02d022d9bf4c9fbb7cf6a4af87a002aa7869933590a5a0c02f86535c48254537b19b0c61ad77bc8ef6ccbbf51a3de5d2073709b2c739d52008cfd864abea5cabb5a866fef707a05e1cbd1236c6bf96ecd5f58c97d990969b9375565c81bf27cbd17491161f8b4fd1166457bd64ce1018f11ddb1061b13c72c6e342e217f152bf448653765eec7f76365373110b83ae30546380424647e8aad3948ff8fe5f304eca7f11f4c40ca591265bd9ccb893f16c162e6e4f8d3ed4266d940850e5ebbc8c526a89e01fb82f32ddf8abb495a44e376c9eeb60b76d8a19a1a8a7d9024fd2a7f939835903590e4a710f483d8603f6d542bba368c81dd7f82d3a39c863b9137ce7cd478743e13a0f296ccc7105ef50700b2b2b77eba121c8774bf5920814077410e10cf9adff56d2dc50d22b8a6da21381949241dfe9b88232850a4e24ab4b817d39e72ce29de0bb2fdef6f29ae9ae6967f11bbbbd87603c21c82019b1ab30f3f55eae07f75c3fdfbe4d270f1c7a508332fdfd5c31d0c26bd5610296ea24960b300e56fa74b44f9f8c0014ac9f9afdd4b3f833b059f7b0e13b2fa3caab0d6c48ff4be55f64f08efabfd233bf7b365d36339ecf71c426327c0502fbcfabb9e2980ed930e7a916617ac33e533fe21f2d3d8e9eacf92404d433a876821c91d2075a37109a3c1d3ae3f2cee3037d08d4ee86a524b066410f4db1179770c6f95fc943b91048010c22cfec4794025ba4082e1c2b24fcfe972d1217bd45cae077b0f66515835742781fe113a4f4227128357006bdb07a5f4a6a47e7f1af8bb01fc66ebb154ce1f0aed9abd191111a212216ef7bedd1982271e94323d62d6fae9c8458e8ec0a93c9847eb2524534a0296f89c2fcd5ad4052ee5d216971555ab946bf8a3ed7607a7641096124cd18fdd61826c86d2ef6c7aa1c489fec0313084882c757d57fd614c8d24759a3366a50abed4dd42a11aa31b524afa7aa085168329f41588bbd5d69334b7b6fe6098bafb77f276d673594c588b8b8ea7210a31689c48652d9fd5b69f578fb8914c75c2a0e57da9a06a9944b937850ea3ac875acce0ddd191f924f39fccc0875f4c8d26120ec842479f5b8f61ccbb73b49cd1a20408033f86acc6ffa209afde045fcd1db9ef0728ded226df8784e5d511f202b367f99fb18d43143a88495ced5e1381601b5fb528df3b760c270a96f6ff38761c36ccee2612e1e852ac069b07425133b1f307c9b344b392619f75d6d1673bddabaaa68417b65375ec779e8c5cbb48475bc689537c30c1735ab7fb38554fc3f353a7874cb072bcc8816db18eaefa2f4f80b48df807e34fe820b2c0cbad4dc43d26bb2ea8724c1dcbb07d55a9b7126f83e9ca7e138b0715932d7f356691f5ce3481a553816f0a34a8d20cf74049e84ccc11ef0829a8c53d4bd7ec8786e15e820f6d29543f7bda5dafad4102652b6821f2eba7e41dbf5b57f2818a537d4a8aaffd404bdc9a000178d9932f950a205056dfc371a52cf59c0d643aab04e1af19ba94e59f266c95814f301e31f10872f0dc803ee96042c7cf00713f981bd073b4858512cd776860ee9bf93eebdeef66d8f351bdb2875713e91848569950cfc47510acbb19ec724ed497770e26252dd96ed626a8c0f536bf11867417d96dfa43639dd2cf30f63d4cfdd4ce2e1ea20e5e2eb198fbf649a9ea95d5d7ff19f611e2bd9c5c5016bad1fd9c06cc45e2bbc7cb25dbe3702f820e5052a787eaf32d1459ee045dc0e756ed86d623761ecd60e114b6d83154c2e3440e32b90af3ba737c8b55c17197c46638a544f2558eb5f2bf7a19e3d0c432baaa68e4885fd99b68ba9057e847f22cf316650d5f21f17500e14361e21c4ae03b2e83cb8e0314bfc060fd9b2e06a5017df14512612c3a41a834968e3843871ebf6110b304e52d2da741149b3cfca6a14e28a5de7a7f0469135198822b8adfb181a5f74ca56a581b16c5ef29912be2e6b20573113c28be181494e3a351cf5996c8cb7e0bf18b8f0f53bd83b40b9f16546b310f39b28040348fe3b7b76a8758a5108c4220db129d81b75cd2fa58c08527f174e0116e7ec5b95f6ade4a6308ca5c00a80b48920756d664125f348d865c050f1f1c3b5b2816359ca507f4544d671d18e9faca53e9d9b3ff1faa532abf25253785d64f09240a49591b26ea8a6752bc946c452d4e38702c40b4ade8a408f5a42a7ed919c769a7d43ef3b0d72bd7716cb67a2b118f633123c12683f86d5ec51489af4e23fea28722ca5ee98ea8144ba8d89c30c453f9cb1e0d1fd361a05b491a3a5807fe6feac9ba0fa017ad138e7460da4b9dffe4d62804fd69068aee031c7c00384dc337aa54bf51cd0e9448ff397d9ec3730666939053e2e22d41056415fbff6716da532636c76b4fa4db698280a6e44581028c6c9ad848da525fb5ada33c9a5c5735833726eea84ae284cf99d08094b9661dcd42c55d7035c5da7a9e7c37c3678974ee8eb47a3736967c2e9cf75bda9461c155abdff484fba7eca8fa61cc28fbc8cf6073a3b1055c149b33b828ad103c12a7d99bd6602a85fe848058ed33b4494f90f3827b8d74dd0ab1a023b3fa29b837283073f754d5378ccb3b09e8e227a40b4e9a02674fcadacc665ffb0892bc62f1612dbd520ba525fdcfc37f419beb3a87fc615824b62e03b3bea092813b46fbe4f8d26279c68b252d6dc27d8da32f3d442a66c0c93fa3c9aa6aeeafa127237f01a87b97032ebad2f149c5cb410db53b39930edd90a7931c9e88e38d49c1afaf055d17f61ae54aa060fdb2162908ddd6b548eae8b77a63faaae28f98db8479419dd4d4856bfd39d5933ca79cca85cfc9694f76a459a02a9e284a24de5e1f9792e3ce45e2aef439d7c347a2a55a8d3a123b1a4f5a71ab1c800add7ea96ce9d8a9a666677288e061515d41d55d7ca5fef54bd65ef388721312bf66ccbb0914ed872a86b04ba2ce6f8ea863977569b17cb36e27d7447ef66a88d15bd0da66af056bedc05df966004a3778b3afd2a22812d9086c1ed4099691c26efb5d17ee90b5b28c5b191103dfe21a371e4076ed575057c851f6c0e58958302db41b7d49e57f09711bcbda07a94d70b5b9c3413e940430379d773334567a46c72a62876490ba79a0b6374a17b16270e3fae502d4e60a2f129883c32958db7830ee200e59bb53ee705877d433064fee72290ad5256d340c925edbaabbeed4d037d8971bbeeb601d56e3bbecb382d724ed399ed6fe157018b13d3f3f286b0e60b8feeb8b85c68b6c0fecb0f3cda8a22323b6cfdbd227be5aebfa3696ff47e0a808ff7893009fa4cc79a9e77bf91f7fe57f39b9214f1c2c25cdd6c84711f5c28b0c7101bddd85a7fba37d83a00e06450e8705d0e16e7d77ae38849f92bcceb292f42a0d6e0e630f160e8e774769421c4c1949ae537fad684645ac9eb1da4a03b114b48d21057a3b418e2105d5a2eecd402913f4cebad437170df759ad135eeb433e03ac74c8105f988bb0d3afb250073ec2166964fa4253bd88d0b4b4c89ad53e648ffc28c7bc445945b5cf4a606fe617ea8b35740e064faa30847e0b7e1fb0938eeb828926bed3afd1021f914d067b433cb33045b38d613097e9008809f8d8815c4e1547fb89563542fe4cc1901fb2ac4fb2f6614b0f2d2e70cabfe2b771cd1c54bb1ac531cd6a8b6d2ef872822de545b68fc6619922bb624001181973422fed1e8a49bc319019fe9a72d64f629f308215365e1924e5de9e8b57dececfd94a44e8521b32fb5a6c9fe9201849c8840a29cd0166dd883416f913748a033ff764b563936e88902a48f64e1799cf72ea5fb120328e9fede0b8a679f1a102e05d0790e6e16cc1c1c750f270041e4ab945f2a4147e315adbf87795adc5cb521e57c14b1ec49d5f2987f1a3cdb8f9b8431ec83d3a86d9eb15ffc2a5304089a2ce710eeb92fe24fd0394b98d8c50b13bb15eaea0ed3e6a5e52d1a266f2bfbdb070f8e18e8673372581a19a7164d599a62d53efb04b01228682961164d2b0226ac50dbfc825b76a1d141c8558280a898145a3c2de6e265a55a54424b1573f7ec6353897fd2fd476a3d8a9d83ece6eb25e189ca7c4032828937ee00d69a067d0db7d1bf93162d0ca8946c96b2fcd9181ea193d9bb9b33bdadca40567aa3ff371d7a4d43e7456354e4c4f688c0e2a77ccc1dd4de9f7e4a2214646ec86621d75cd97a94d0a568eaf86be43c477450d3b406ac86b5445ab191f275eea3b50ada72ccf82d19f3ee5f3696da0e433645bb04630add95327254beb5c46c9f15070e2005f5b89f692dc0eb3610109e82baf278ac7adf914bb626385128cb14369d9d778265ade6dee0c23e5862250be30b5f09fdb4ff0c8cf7439f9d43a415f7092d739212d3f397f531e5f985a542bd93497fbe062ceb539a81914ab0f7090502932823b12b3cf5a02606f56ac7d62dd7e18ccaf13905aa3d539a8d1bacef0bd663a792897727d6c17f132a2b83be537218fd4caf3892a9cbbae4c34208107bb57523c3c1b8e7c1bb9c4ce4a721c53ee86b53788899869dfbb89690640ab8874c971c6423f55b3d2b56cad493f97b965fa5042dd5ddfbb2467c4defa94737744a968718bd172042d69605a1fa5b3dc3e9917813b5b3bfe481226a14dc0ab0349dd595562ae56fb8107b6532fa22764557c50a3b4965838acb62323e409b10a6a9540e87ba7e8db9b9067a41fdcdeb2063ca9772e9ce6f5bbd7d458d89a8d8facfffe24e9f1e12f0a05fc3623577bd9b4177d76920bf27640f563ed516b25d01b33c91f6bd4a236049e59a231a3a8f548cc528be147c1baed5d70193e8c08a07a4e3b19afb548a5bb684149f7b8b42d129f6574dad0815907c76e50e770a7baf401de9fa01a06192ce97038d5bb9de6680aeb15dfdd03bbaee4a2ca25ebeb20c29fc8ca08b2231f1f7837da965e85cf12208c22ff33c0cef5d0c58e56e0a1145c2cfe3e6f65e8d4387471e9f31ca3f85b0e536b08868d7a85e48c525a31aaa2ecd68a169fc2731c1201802e6ee1c76cb7566b644634cb15358d32e8caf60549b89dffbaf8a295d6d5f7c17b7f0128f43366b3223cf79dd7c7095487c8593439934f15b6717ad55af1e90e3586819d3ee8cd9c994ad3794ee6bb9ed41f5430616fc2ba92406339d381096b413d722047b19b4215f781716ba48d5237bec0ca15c4f37ec62910d3455698d7215d2dc4b5411eb21824441ef5c7c10bcab09928910b88e076eb4ec1cf4785d627ec30a6da4bbd3e497d34a1401194b559383fd1328fd9b9b77fdbc4ca990078b624cca6acc242738606cbe632aa4e7e31b1c86dd94abf6c1457c4b75252dd0cd455d19c067504449c0c89f0288465588c6343a6011f553c7a0d427c5afd203c6412f00cc9745dd815e9cc3a74a3007f312a99d195a38013a402f4648ace799296a85b5054a4cfc38084e8df7514d7abb2b712fc1d89a4479b9c1f7aadd9fe9c249ce29f5c48cfdddbc54415b4c0f305d304e59360073f446f0cd84863b2195730815084b2f97d7640e7b24f398092ef9aa5886c923b524f146e8780c08dae4eb10eccae7416c5783b16237646a44bba428947e6c309640565a0e9c5ac2b9261a130a716f108d4886655bca24e701cc36a4f266929c72f8ebbff8340b9fc81d02fa5a9119558c8887ff337e8022ca5c607821c5e469a14b128ad498b4dd3525523cbf908d9dc1da0d6af76f423d8a8bce1dfd5cfb0f64da130db7085346b56eac55a495c6a2d3caa360e7fe000739fa67ab20bcf7d1f1e903ac07f6e4583156a2cef7f42785f99b338c52555a6f4d22c57ad602b5e7e48143289219ef72e33279668da985161ec36ac0944078241d5a34c5b7f959f9fee8976d32ba050f9f916e44db66335fb0d5a5f88dc6303fd5510082834515655eca2810ba88f67e51b74e99c707d27516a85fc46e100ba70e1a0fa13ce03789768195a0e6bde82602d8e73e523a18b36e5ea4892175a8fc1ace25ff0ad8fd5fe72c1b394244d090e07cbae317606347a2c4fe1eddb0243d72050ca0cf2941e958fbbf2d3cad5adc2db7bfcb680702834e9f79e4411b4448d7f0af1bb912509523138f2dc74f8ee7077c72e0f674e81d4b65b607c8b71ebb7708a88823435d73194714285d5b8fad9a1270ea128a9878d08fa859ee5cf56e7c53d168ff0216ef28e0b2c13e0e7b06de23f5c4090cf0db860fd712b3daeba434ef79dfea8338588d2a59afa31fc68da7272fcd3cc1c340b6359ff904f71b8b65e12b1f0833a3ec01ab788921d4e4f78d472e97061a666138bb2c447340c51a99afa1f8e893f79d6b806352f2170330664119f4f9ddb639ae8de1abf9db92228d7c90227a3169741f3c1e40de4b30790239aacbb70fe8f3e0bb27a689a4c9cee354658f79088e04f56a49085d7aa2e923256fba0cfe4cee2a809c96b62aa581907eec9a42339758f1e96af56036ddf069f607a1e0a92a6341700153ecff39fea20e4ea897c67df78eb926451f42d615ad4ec4361cff23ba6b609db9c53cd9658c46c85c6cc4470973dde7bde679ab07412e0bcf76edf2ba7d1419225a5e22502caee38fd005f0e334ff4edc7e1e821117bc0493b6f00c81667bf70877ed1c0e2c7cf11051ccfa1a70b7979059033e3ffedc981df684d5def500c5a88b77e25ff3d1b69d553311d029baa4567f2d8028edd3814f015dde6119cb24c3ff1428a66ec2e3b4fb26e567aeb9ad31c99eb20c9b66c7bf898f90119b1a8c0fca1e989af230bd0b2d4e2b1704e9a49cd344bb5596abbe437716e621c0e50d0d013f9c713529fd0e3bcd92dc151f5ced5e40d0af3079d381b0fc134bdbaa7a302fb043a306780a73871c3b9cc6dbbb706d8fa5d2219eb3ed40b6bc20851e6f15027bbebf45d8dbf6b3bbda1778946ecb42c36d520361645b7d6fc92a79d1bacb82bf34f43dc728af0e7138422030237e4c017cb4cf47b96cc9e9d982ebd3bd09c0ff4bd5bc78e76ecccbd9f3988d99d61cf18cec5126579b9dd13d49f96af3f75335071734df5458eb93010a62913ef3d1e9a21f5414b00c028fda6d3e90b5fa5e28434ac2334cc0df8cb5b379a695ac070777af3037abd2413ca2f88b7f125406e35017b3164479f3381061a4055945173b388ab7eafea4759d9194215b4a04ab4c1a703c844cf42f69a2fcfe91a51185e30b8d8793fb98b3943dd1a596a087f9fa43cd7759957a15d39c39b6c6ebc7b2c79863258df4ebb0e9dc4b2efda1a8f9f47b4b664ba2bdb4f6326eef91fbb2d397f8542124843a1681c4d4ff0d27f13c0f812d197b1d990238b4b2704b64c770d6b587505ffd6c563e607c2fa9a9d4a76fdc8dada671044e0abf141c67e3b54e7d28aaf030f6822ca6bacee3fbe21700438cc6926af9d20aa423fee035375192f3b34fdfaec895abb5980da7190f85b1bb3d0e3aa5726ee159ab0bc25e1646ec3f88694aad922870cbc24ffa07ff6859229b583f5c7ddabf763db6209ea9857bb02fe94d88392a2cc49217519216e17ac51bee7eae8676d52fa1fa74c61f59148cff9a0103bb855328855c66a8b313e1f8b4df296fdd7990f345614ff0d3c51310d33ca381af6646fbfb4d3e9c3278f577897cc4d126afec77f163767ae3e5c67d5b776f53f649ca4a05f72fc5c3e1650fe49447f297b930aefd505dca871e84ef245b7fc5fadb3ea81275e160a344ddba2ced99ef889cc309fe0e700a1a3e9d037f220b39484fe2bddabc77aedecc6ccfd5a8a54c07b4f043a3c841c23312cbfb3c19192287f0bae50930645be7127a551d6ce6b91cf477a714c0f1d6afbae21da93c56efc4e5f2c0fdb62487ed0a020c966b30a20ee2af4dafd88364cbbfebe780e2ac6a0c5f4a8d1abc000ee1a62a1f8817a5b5e2c00a6b11358c253b954d58f9ce9e7812197be9769dd2d1a4649afc680cf66b62149128b599ab85fed66d208581c562b0f8469f3d04ed834ce8bbf93a6e933fc5605271a3491198b40644c874e92e9f43655f83ea21c515a4795cc7c42af7d64612de06fa1fd07ab6bcae1589fdbf703d85413d2d64eefaf2417707cb663f5278aca1902f81a319b3dc8e65a88f6a29d69be75d1f2a93f40a78d0acf4abbe3931a0152247e670b4dcefe327e714b86fc9f52c38087d45bae8ab38ea988f605f28bebf28fea78aba89208b41d4dee30ff0cc172e57981df53c6ab193c547e73cf151906969ced88fe546af23e75285090131faf2c637062b142e3b6b100cc7a688be4f57d03620044cbbb1b54427314b8779066e1fce111e3f7e0a10ce2c328c48eacc36b70bcda18b0a51f44bfec60f579cafc8dc24d96c9d7df2bfc419e4707d12493cbcbd8146f324d54b5946ce1e4d4c54fa2828358d5254a957f4e4c222b7f8a9d9a0f0ef5bb0539f98f546170ea9f39980fb998fbc1e632550c9216d28be9d7e027acd2e34dfcbd8ad79030e11be2cc3bb0afc973effc59569d466b62b8d75f7ff807377b1c25a144aa6bd7b8d45c828cd539295dfabfd091e852dd7d7942db44693c3d0fd36f2aa971e20dfa3c8d30c1116cd1196f92dd8b476c9b8fbdf2bc939343b4d3d5286a64ad50f8095699848be6462e5c6f5e9b380005b677129c2cdaaf2524de7c2080ad779359724f07415cf4453b6d11cb5a3e60703cf90311902980a966adad2ffdf5c95a22dc1ba6bb26df5a5fe690e084553f89fd70201f4262946e26ae9b57af0b971f498177c454c0f2c433b33bb7faefc6ddc4dfa3d14cfdef98cb24c48b591cc92ae5026b88677bc1eb8277002951e0de770cabae04b28b1d74de43caca0783ed691cbbeef1cc339d9dfe841ecec4a3944c56af3d48fd8105365fe14a81de8d0d1f800fdea3c24f2797bcd748c15bce438e8788b7ea1d99ecee5909992ed5e8f7f29f23076dbac593a1089186f516e692e7286fa2304c01b62a0a12a37e29f5f4883326b75a1c09e2030df6e50c0ac986b140b59167de076314f5c011a2f9fbcb9c8d5864fadfbe41ebb7ec345a505fd5d0529098f55595b5fb87e83ea61b2340c4ea6b894c4b644dd3ffede08ac3823000a93a20836c1a9f3458c04cca33aa2c7a90ea6957aa7472a5b6417b92efb5a6610e4baef070b59c1ae60b18c3db0f7910881f6217ff9a2be687585abbc0ebe02d08c6e664ce4eb2a7026ad8f8d6d68f0c3896ccec5d1ee3cbbfd5558a2086c0d2494a2bd794542fb5007d1c350ae462a990e11a4c8837dab2b74d7a9fb49a9e1e9943844a5190de79c712bc2851552fd86dd448536bff7e495ffdc4e3f2276c0f68b10935712f0df89f50bb600f972d4860fcb1092557253f057a34840ce8f1241418163448be92cfcf1762547a1682628876492d3c7c70140dc778e5e90bc840e74eac9d4a144ead054ddd411f9f9d7e12917ad71ff9462fdc6ff84dafd146bff28004659f35b85f23665df80a1b4ce6c22cd2f7b8cb467f42fd1894671136b8aa13a40517d6b698f825b457db2856f6219da9315865d039728c870dbcaa0e17d1297ebbfa327a692249a1295b42c9f7291528705177452099272bf1b78f7a6e70b155b7488d919765876ac3aaff467f449aecfbaf08e2699385f9ff4675d0e5f68865d127632a3580ef16100f7544488a6f3f1d429b2d6ad8de1aa1605d7a996c2730e5e15a3ba90f42dcdcf54559a6188c49e883dc20e29e8294aef5b17dbd84377335ce4409b78529cbd489a4a5e1edcd7b8921ba2813a166f9a159c7baa0baae479826455af446e70ced4ca7569787ecdcb8726b45552a788adf6a256f6edfa111e2c33dd1aa2af7b349fde56759a5de771412bb74081f536ceef8acffa0820207dcf7cc4687efdfe64d497c97cea7e3fffcfc03ad6aaf2ac9425445a26e15e9807d602b27d2590acac88dd2b7cb646e5a","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"e06b548b27a7e7d8dcac8c756dd3f2bc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
