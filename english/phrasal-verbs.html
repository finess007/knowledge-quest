<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"9bfccd9b388a2774aa94cf7b1206a3be686827eb84aaf5e1a8c203a8aabe50096cc0d37d1ba3c59005bf56339fc6777e8a34b263428a98d2d3e319f86090f786ec05c48116b86a047096ff8087837efe8b0aa9f9cd1d97898fe60dfc47abaf27afa1502a8a5b9b0a5b3ba34910a54e1777528d612406450198f553bac2e4ed23ba8c8359ea5a000a5c10291c10b45f47870c42a7b6aaacb7105f770f02a5176dbc7592371775cd42fcd760875a4f0520da327a5831b84a7cc7c41b1230e561d52a41919a41e13ffb853b4b16f226bb0138d8a134dfb633e24e9e8700af8ac2d3b6bea2e455a52ee5f1d9cc3eb8c1027830a897242aa2bcef5294fcf2efc6611ce32e196011ed9b9dea03eee3e2bca125b96a1dd5eaa80a17ff762297a061c50482c74e8a4db263758832fa7f01041d231e1fcf8aaaea360cf7013febff2cd3c08bbf272ab335f2074872148d4dd0c528dd608b42fa0fb068b18b9cd37e8e4179326737263074d8b751f5304b0aafa25dad1d61bee8df8a5aec1715e2bc2b67e4b161e56a6f29c4a7d2f9586071e21b68986b9e7d6d5e0d06e585a2683c4024afab8f8b7b8e251d0d1eec0ef89789d2207711cfcf6ae425a148602f29bc04369cd805cff897a1cabc04ca994a1b90f36e8931ac782ea62fb32e4c91540653963847a52d2a43cad99a3ac9d21a0232709afbb39896fa59a51dc46582f60488f8d23fc534b147fb9ea3f43724dd86a867d079631b3c8075e8b8bf638b1b34b967be3abefc7a1ebc0edcff41e8e5c0e2c8d333879555a370d3109c50dfab1563866a46e6811953e475ec129a95523b72db5ac1e3d55cf90595e0fd64e882573646c40a83c1962d51ffbc46a20d89b766332aef81b60d330bae4dcddb46bdbe22202da9aa8903c42fdb01fcd3300de89f5e2adb3035bbd03207996793930404e710a7dcaf708321a35ca02624fec3143135026c4958f17045f29f38fdfa6c6a080278671d3f69edfaafdbfd0251d35e83642cb5717032e60c3e3c508aad313e437aa76e9a4af2613b548dd99366ab4a4347e9a4a188971fee155eb691005974b85422865b07a3fe01a1e94cfb679c7e3c83ee4ec624038ca9147d0364114626c0616c624809943db7ca04a56628ef624b2f3ef4596ce201f688a7a33a6a4e2f06411ffc1dbbc2447900adf77ebd97f9d9b3743eea4a227eca69d1814ae7444f3e02032fff06e7298cb824cbac3db3c2b0db7f885252ae7b5051e0922515ccc2b9ec3d6b70e742b91cc255fd3ddb6855a1705d15a0000abb163dec2e9761f00733472f1ff434dc8402b57286ead290e4f0d060f9dacd36528c9e11905f53bd6703c8e6c25dcc5ab4c7bd359b97a42a2d766daf8bf7f4959a0a8f6160e89e371dc462a5abad79048ae10bef1aaebb0d379ca824403c8d4c5bc911259114063be4612d4a389be5fe3b267feffdcd505b6306d95bcc9566bec70a8e122df9f2522b448f7d1264da97bc98df1c49332e3543feef376359ffbb1747244f93d4e4e2efd10daa602a2bb044d6145a8285ed8af88b024874b1e4ca00fda200429ccf85ef0df0f249eea06a0e9f5b75bedd2e8b5b99c68b4a87fd82d27add63352446ea85396b644fe15ac605585890344bf13b38063ad8dffec3c59ca99cb76d3e74749bc340f93184848733f805d2c0a9012a634d04aec546ec3e914fe188e085193ec5a40c10dd956751e03894d2d60bfecd605732bd8a520489052ee72edc781990748016a04ffa2778ad160e7d8c8b3d6686e3ecf16f7795d02ecfdede47a24301bb6e296d0209c6e14a44c745d115c8f3d84c12fd348968e5f2b892543cdccb12e90ffc922ff40b1c28dc9e0fd6f41ba963f498c4254929d4374fba34ddab266204d62a2064715aee9f247d17abe0904991469d7500b326457e33810cbe0a4e336b8b2732d361959adaa4991a897e7305732ff63be26b9b344456640d75abdb46dde7f6afbdea76d98167edff4f8cfd3416f59ec07fc7d7c4bf60ed1db8349530c3f6a537ca37c789e70fc3e83039cd89027cd33810a346071322f113830e2cca2bfdfde215d269b5dbcb5033906ec1e26aa978e978f9f818c6dfa35396f3cf12cad54ccf999bd5c250fe5338d1d3c7dab8d5e5e1ea8a64eda288fcfb6baec6d1130776a3bd20aed41b6df76e3ab271e7ec8f836ffff6a86007fd93cd74c48801d1db30f02d2028c0725bcb2a2fed5d0f910607487e02bd792df7f1b01fe8ae269c552df8b5fa5640a2f7088bfc898c5e7df2159b0c652a4fe38dcca96fa729fad261a345b1cbacf09fe975e03676faacf1931e47ad742a483116ea3ef108b82c26f351b777d06301e6236b946376cee839927178abbb0c7a0584207faa731ff794feb901e902514cf5daa10dd41002d1623fd69d6c16daa1bc750fa249ecfc56750030f1c02cb8f815d610da9858a85039b2edb75b57523acdfbd44b8f199d84ec9c05a11e5f74651c118361a45df505a44712f769e33c7f82619d1cd2475780a0a78079b70dbe5903f9b373307d57a63941e105327709ed4692efd5e5020336610a731515a956a3ebcce54c6b4e6dd475a74396dd51195b3207d8c7d3572103273700ed89820c4772feed7f82c8c63826d711bb45ec57afa2f386e5dfa369c8abcb6af4c4ce58b9144b29d6511bf19cbdfb5fcded7b7494b57e0e543b907de1069ee9b37dcb280eb870886b446c438fb9ae1f715ab2c40b21738b856f4629abc6998446269fc51f4f5cb8c051d24de3d05eaef1709eca888d2875989b045c05bed379fd7b9459a5afcee4de8f9a6a109e16a6760a35ae2f9336de7ba2a3f850252eec50bf4821551ceb772418758629f7161e44edc42b0356585e355f7e8a0421d1df780ff8432e581874604d799d5f93b79caa98d4db4a7fe7ae25c1864553c15afe14d0f4e9a0dff57206a378853539a6ff8ed3dacfce3b51f70da6809866eed1e1224582f004046a7a4669f70ee84519a3403018aa77181d3cffd4f6a2d5a1276b75389da59ca38641b20fefb70f8ed207d9e3ed44d8e042ab7039f55854c0033f705101fe9ef9c3df054ae5dc608b8847925c5312174d5a7272c5aff98494f20258b3e14ad17b17dfef3aa4dd786c271698763c67fc0a36cc31a5183da13afffa797b8c7ded7e8ad91d4ce9b6c6325e4799f8cb2657a6c3afbd25f2623129bd0113c69b2e0f1791f5e63d714d4580132eb241073f0d96746d4586987db29f55ecf4b92ec19d51f06d6d4ebb7fa93bbc9bc9d28dff7ae96e5ab4d6022bc8b59c933ce64d6a0f92f206ee36ef8f431baebe97994c77b18a40e2b93ec758225006719c7d17526611fe31b53a9ae4fcce53a1384672254ca897710a94c3108d46af36b28631347390be992fce850e2360abeaf7319f9970f3f0bfdec92be4ad2b80ff3045938eb22e279fdae9d6487e36245dcae2ea5a4b7d4d46478863d2a6b149950d4fad40d82f5025fb48dcb18f96b90c6720569c457dfb7eb4ca56b3c2cbd2794833fe85817444f0de459cb39261bfac74a1a63e01145b2cc3dfc55d4ce458770902aa9e2d2ce98d75941a10510a16c6681600eb1d6bcb4ba36ca94dc7d98ff9357fe96f22d30c0385264246414aa8be9426cae70556bf05985e6117b0daeea1fe9705aa5ac4eaa9375950e752686f0cbaf942a93e37da2f6c9bbd847e4a86f402030802be8cbf77d6b26004c6adacb1798483bb003d91073107b77c036c3a73d23ad6fd3d963f483a5640d87c71ee0a24053f394a0767bf32fba1eafe3ee712b503305953adb97404e78ac633b983f4afd1f1a03bff4d3982f9515c778c5b711de572a2747bf97115ccdb7317597434f82559080f7c384c92870e66336c62947f234ac06670dab987453b3c085029ec8c69075f15e02f03f723ae18d955219d7cfef4bc45747dfa01b263f91bcf2efe0902fecb3d51b8b2686e536642fd5178f192d6de17fc3c507219051010b1ed3a999935485bdac53b3b766de9d14e985509b13a3ab49826189c10d158ae0ede55f99753f800baad901839be0b6a7eb0633cf4d1c119931042dbb936e3baa1a9eba465e724fa38107786119caf143fa63dc0b43eea42e4008fa893ff0e674f4c4eb5ddfed85d6ecae9f06f4bef70030a427f92a7bed5e197110719e472d54af741072aa1add5e34a42e47e520c66a7d6e2565ae4116b80a648940e2ce3ddf37790798b63f4c1da6c946810943f63cb71f6e47c7372aa8d31d6489657ae036c35a4ac3f4ec781ec3b340d11970128c664cf2e06a64c2da79396d05cdee2bfae2900a15f7057d0672ddc5ceca3b54100552e74703652817b3f8481b7ad912925f3ad59d4c226312dee47f34238346814902934b1ebcca29be8a246e126f9f6db9842faf137de9db993f324f9932e410c455a16172e61f0518ce0dcc6eecd85e05d137b8a27e9357de282990a326b2a0036fe61a3affdd60213f39e20251dd6be45b0caba7d673bd664be33437fc2ac31e13e2802cf60a968a623df727a6d205734c40f4775c65bcd7a50b48473b1912c6e56e48f02c37968128bbc65398478116b567f7b624e6a4aa51a36872090730762e77aa10ee2e794986c055c98ea215f607ff76ea7c12a2a56fdd1d427bb25b202313eea6198a3ffc8aa2a1afdb9e22b52dac56a0e113d50434d15387d83c98bde87803029aaddc6855f00ef68e0e6fac680de5fa79d121af273e7a4d7ed376981ed6654d104e24fbeb0e3e804ea2fac7830a2626f0619d33f8c2d4d6eeb5ed13a03f44cc0189ab6e73285dd33cb35c23c4832f8e0f86ad5358c09af7834b4fd950911004cd13d70e986d14f35296c2724d61594c45a041e270659632bbf1bf9faf97d0f8d3c615985554d1a3be2d17f76fad98e0d2982c3baf2000851e6fc9b5f4937224ee27447b001b243583d193b26ecc46484b5e6db13070d52a220d9f2593acd84a5e880211cb71e8ec89c251981af4f5c9f8db100849932b0cae86234f6a93cebfc6a02597474c7b3225af74570aa9f5f483d7bc693d9ec065ed5ae5bab820f78813b89141f362e150ba2b1895dc509e1d0c74dbd494c62353d513d3694d685c4cabfdc265cb2c75784fd2edd5c509dee5d95293060440b1b93a525714d98f7a3669b9025379e7d9766b82a3da3996e2b935aa4a2d86ed71d90adde82c0497d909c36766cae697fe41fc63dc47722d876df59b00a9aa825a8d32d44877d41e4ac75137cdd166b82257838d78f172d7bb85240736711daa0f9930710e693b78f5d1757ba2885256ee7395db2783fc1dc130b1c80186bb362d20e99c3cf71875be4f36c913e26674d9f6a571e4d8e655a358632a851a380781c0f069c5d15ebc2a72ecfe77e3edc557744ab5561788f23591f493a2751ca8df3267a693e66929b7e424266d3a386b75b0ecbaed03838ddb1f9452ffc42b8f780b973b6e1763341878e75dbc5b2f8ed8698a8732059ef0e5abccb6c2e66de2134f9d1fe4cf94e30cf5aee57431cfa9b5595cf3c15241454ff0796d9c9c471ddb1c0baca8e07eef9d66faa752dbc8344d563512bd543baf7204c30c48e76d318c51c196972f704423964e54df74bba08af6d0b96409fa061214e1958ea78dbf50872b8d3bd8ab9582d1b25ee6d266973beb8a54d28425c8e72090c515de2967b9fecd1298e228e6ba5ed29a36b99f147cdff19fc052e298254b1d69f514440e4d7cfa395a808b3541e07f97844b6af099c149e6b7205356dbf661b60927a061b7fa34d20f151a51af0ca7e199ae8833790bd698977104901274b961ab8327e4780d4ed6a3b6522aaf27e28c846ba08d096a6501b7c0d506493d67a6f487093b92c2e4e7a4e0656744cb51a667680ffc50469934e0bc7d5afee7cbed4e1ba53cd0cf6792be61b27ce80de56ba004e363c07763b19667f04de11221278624dc4fd76f4a92c89fc39e97c297e516fd14b86f19274c0aec14f6e7102bf07bd656137fde964674858c787f49118abfaeb53b2506e5a99d4d2b122f54967af9cd278237d85dc0a16d92dd50a8553d1974effdbb1e6be5e1500ce718f420c69f4ce4bee201cd1b07511ecb9597a14185d2350f544250259434c292045b43342677c886eb7081195677892c5609c07409a54c6224adeea0a871da9c3818d9543ac3acee079bf4db53796cbe79f1b2375cd840771765154996352e1670a582fa603d4a9c2a7de1dc535dd6beb0c5da3d6b74ab118a428bfc549e86b3e135efc2ea23dea2d289aa423567debd0558c134a409df84ace562564710eef2f4c1500b7dd5f5f062c1acd85fae7918188b018052d1b9257e5b651f30430cf360c9ff1e044ecfb24d69f538059507a3aa92e616f25171d069c9f9e92896dbdfb5f9d05aa69edf7ce07d9c60b2a9930ded21d53f9d9fc552940e1cc475e8f7b5bf7cea771905a536ac1ad9627fe2c6de386085fdb12cac4ad1856d2c15069baa3a851f1161c2ba7c1d2d65fe08f2da8f00addb177840469b4af76b2e8fcd37f2539d49be2c5b6f3df6eafccec64b164447510bdb056f8d98ff5f5cebc2b9cdadf0fa6205c015d6c7a593f2b93816dc207653273eced9bb73923c631fac8ee70cada6044b22ec5dbac31c085e35714baed77ee6d384a7880fe886abe6d78454987c6c44ab84c0996d44ea44c27e5b4bb95809b815685150ed822e4e8d3505264b8f030bfb8b6555f0c18dcd0edbb437e54bf43d909217d73cbba4b1a3613e2db7898ebde146b98a3b79155eea86b6d4358c9c6963383dc5dddd876e0d102fbd04be8c6d8f7448a6c0235edf560b279235e1b6bcc7b43b1d31dfd3b6352426fa366660a076bc2e9659d580c07efc39434e8c72dce72ed92ed4aecda5036c8de47498cbec156389053b712c05cb57491f339160334c56e6fa0e63ab013bd878495f0d303f092b1889ed86c5bc3fb571134228b55ee6a027152a71dbd5538d687138882c4d3661224674331b69ee28d2cb710a843c3194498b6726116864061e4062816e08950c4d9b153d450f9e7affbe167f4d634e75f01c703f528b80ddfebfdee8ae65832adfab61a8f1d1eda506964ff700feec74715523186960f4660cf5975476f87237d0dbe88b57e351fa0f2261a6c33338b5d0150aa134dfc6bc87137616f192e8b56ff0bd8b898a4f28ee6c1d5a7e660bba994d9feadb6645a5a29c32421f50bbe40b5af6486dad26dc0da6ccea516406acf7c3c389e4fbf8f03389281e7ab4b236eb2e2e146d937ec578d34fb23666b5d86a77ac55c606f06a8cc774ed5d15623ddc34a8fd5716e6008e65c732eec55c7d0ced4347be73a5d21b502046407676a97837ec889bd661fdfe077f41b58fc6a68c6135edd7b4e1c623cf9ac757651dff3007df24a0d714a999ad83d7e3ec9145a4408e3fdf5927862939e77c1c8b0b2caa355757d05bcf3ed65f8026ea642a23a4d0834b107e2c37c47e5d658b414af116fe5449f6160ef8e1e12ac0be55055cc9fc76582bc01e1b7a38cb91b2c0277fd223946c442005da366734c68007fc589c7ff4ff06f43c8d1d1b9244f468e268f57639157aa64b603edffd6b588025c616b6a443c3a5044ef5c5c8f8c88b608cc0f65a8fdfe5da3120c3228565be80f2c1e561214709cf27b03cee55ac3a463deeb5cd0e051b772d14cb9749a53b33b4271ea0558cd88ef28994eacac2f04ce8f8f67b006cae4e815c0eb3125de7f1f64d3a9ddaeb3f0438a89010798226f7ef671e88dbe518e56ac6ff7f1689b1b00a1daf0bee7f87352c1da154c6573d0e9bffaabfe6e33db29fb46af460bb7c737d4e1539e2e458e58e27a59143c149bab113191a855c3f3fa3703461df5887f9afff85a75fa4cb1a3502adaba67f14ecad159b05264309694f2d25f430e288f77e57a1eb406f74822be2b6be9fbf539c81191876dbb4387f7a7e72407d1b198c5e5b0d87c31f67a19bf5b5c01a950a0acd39aac2e55d2a3771e3c2a49032089b542639187879d62eebcf14662e6cd1ccde84d5b634d3dc0e42242d01f31d5c89053e3de93a3d9fd9d8575d19c8b1217ba30846e370ac8bdb40381db6b848a5a6885475c4419987ff9321d1223353dc172e3ff82122b8b80b212991edc232a20b32fd79e3409035eab5522dda04ab85f0f3a8d361c1be6cb6074f47f78475b81e5139e078d4fe2632819b899c8979ac528aecfe97b6edb7421bc07c4e2ee4358d094cc5f8517956c4f73de9549cac65ffc35bf089d82d4a38bf61a0c50d9cb3959ee5c98a6009f5d3bee84f9c59bb16b570b3c6a06ee19b026ee9a54475bfa58fcce1f092c1626a119628ca53b9ab173e3bebe105a14114fcf47ef2bad000d036a909d2ed4175f9f3ce83fc0f5733de058e07f7b39817a19f7c04b2eaa6a31cf591ab8317c601a38d27b8805fd75f65dd49573e79b3efa4cdb04e7df15dc92c70587d55eb7940cd5252ea357e162fd5322f0e0649fdbd71a93ac28035c60b65335c50875e7746537a9661548f609507f36b0622a067d5083afa803ed2869272aa5ff91884d19509fce9519db36bcd353776559f73120402599523270affd449dcc39cd9910d7531e7e1a5b4e97c1e5862a6da2dd58bdbf66b9814f61a2bb87194550924e9ae1faf6a59679b8b6289a53c6f96688e8f33d964bd8bf2cbebc96740ef863dabf0acfcda9f793a9377b71d9d883db4e4b7ec3df4eac42983a7a2047db07e819ed84159baa1d02419c9f78c6647acd3fd1eea4db3469a7e0d20fc42dfc0c582cb93af104d5e9bf0bf55d1a0fb90e1b4fc50ba4ad043dbb294adc97759c7ded82d6901db69d3882d32a617a0ccabe8e1149e650723b9ec1b7c7704cc864c8304e21a09978f62fb3042b12c1fcc260ce8c67706e666837c87171a47798829926df23c87787b2b13866376642b9c43eb06b5c12b2d41bdc459fe36c4891312050fb9be31b400b997efa511f21530fe8ebd039bfd89eed934bd8f98752ce9b8e3796489e45ac728cc8cc3f047915a5b96c38617a17681d0c8296d8b93cd7cc2146a82a730b86a10adc4ee0432f0dac3e1dcc8dea0f01bac7f19f0babdc5b69bf00d7c050f51b3bcdf508f472e5f5a10071a8115f9b8ee6d3b614e21f1894450d90a15327bdaedf3f67e1643b5c647eff9e3c0d325ef05aff810ca8b5938ef95fdc0dd8fa241029fd82e7f8fc5181c2ad9ad58ed17c3bfd1967c54450548ca7afea88e3833cf1f623546dec517840bc297e4b9d5b1f2fa2c1785479ea23894d4e3eaa6d5bc203e5a544763bffb03bb3af980476e5e7ca880ac337e7175f6d463f41dc5dcbcb9105a727a2e445ce79a80a77a0d2d0ec849fd2067f9665ec76305ebfc1162fc1a22988acb9a4965f6c65066e71634f288d59f294bd6b487c72fc2fda3e78e138eaa9b1157f0bfd527d441fcc602ce08b318aab3ba125fd2cb9d165a42895a71845b3ffd3be206feceb98cdf21daf3150090564f8b0347858a05ced1df26e6de983c5cca45f773df850c51488a747d86c1f6d046edd7f45a2b803456f9a7a6b2f1cab80b946d6d79d83f1dc42b5c326d06bf1be2ed8431745f5ba9a82b57f7df2863a45cbbec9b9b3ed7ce18ab51d0e5aed5cd7ef8673b5f6e577976fcb7460c1949d899357819476beed3e88746baea5097c47d657e9c894141d6f73238e120ba48399c785c07db9eba82c61dc2ce253f3577494f63792ed4d57e66d28cc61cc0ae122f7486ae79732ddcc4067bec7ccd3f36b900f62bf182e1f7d40f0bd4c98d743b61baeb2f7e1f0fc60221d6151879da08fac764629254e5cc84a4ee23908a0a2f8195570a26cf336e6ea92231cc023b96d1eb63dd6b8e31ae0d9c6b71b0a49e542259dbab7b56adb8ab0783f0374a5c811f36d4a4aff8c8394e24f7eba146b0b2037abec36fe6636f97603c32f1b3fb801e2c5e1b9d91490f36b2dd80ce987235ac83eb0e80226c8f0cc2e88a33c1d0df1d601397769c6e0d4d50b7c2bb6706adb3ff4304bd48129dfe01f3b237493ac39b44b90701d7641b90e5ace293f39b4116672bc479788162ad933ae9c98ac4c0df032d6f322c827ebf87f9ab79863bc1022555b1878ae50750ae0cd63d5b5083d7c7cd10f275d400b439b9c85e2dd2ef9fbad9a86a50642746cf3fc342f56d9ef532d05f6508705b98b36cc019ed1b45c8e309e43af76f1fc4e4bfef533fc08193e9157a6e1862963361e402ad43469ea0fa4c43817bbb96613b41593ec4746305f850dbf122ac66b0ebcca19c985a02c84e7fca5f184f2bcbceeefbb39a6cfa5f3adba36b9cdcc2f3121e6ca3cf395ad76018c2746bb2921f3cd85aa47695a99342cfb7e3e9f9a91d1f25095566d065e567e4876f489d3f9b22ac367e3415f75e85303ac1471e40ef9e899b7ee9c9a60c799ab32331de9c4f67461fd602cdd1d03c897fcd99e98ed486db8ca397b04b0d1f73eb9a5dfd934733d05180036aed26820f0f561c0122bbb65d6ec4a07b1e9052087027b1557d8ea56dc97c480a8acbcc3e9ecfa3c853444bd0172f6784b52c9cd93dd1eaeeb33cde3def8a2db4b937aa1e88998c56bc9e60913d329ee44b4d620984a0b5e5e70ac6fc9c2d4674aaf6b84f8e76c8138afef7b8ef27df349e468fcfe4a168bd1825ab2433bc71bb2cebe6d47893e8bd75bd03956e4812ff0411cdd01c0a60ab0c3b43fdd5e37b9a55ed904150af02459ab8c5f0b80b5a67ec17343529b8d0810ef53433888ab5607699e4214ba8661bc1c5b190210b2c1735f4c5694cfa5c76e9a5cad5b0722420c6b6d1d7fc185e3efe4f3a2bf74e0c11e792887b6fed5c542f1f851e1c3eda1fc93b385cc47f29f25e3cc82916a583b63c64154550fc133eade397d0387e8ba984f9f69ae5cda6869136fa5989d13477ece9f6ac084adbd480ece2a3c70d07041be6846e4de3da4f124089f6f676f96b5193a5806a09fe233cb44d90fd3c8bd3be32c46346021e5c24627139f39c7fb53c1aab10b0e1d7cf7e23b0f6ef2f1316122c662c65f1ad6ac7cd0e5fded46dc711546fac26191fb2399ad31abbb21426e620d82f9f78278dd3aabcb6d91aa2432cefce98e006cc59fa13e35225735629576af9c5a68c48f91567ceb16a162328abfd19af5c9bd3e0013c25b2b58eccb7d3a40742dbcf3417f9831a7892fb933f176472b96722487bb45d0ff44b121ed90770572a39f5271d5dee3263aae26a0529a91cef678a5d176edcdd05c903d537c342c606140d39fa17cc7f4b51d1b798d60e479ac7fc085ccf86db8d1626db3ad3d6784076f6c1152c45470b6f7b2331cd75fa40098c23aedb56b86da9fb49db0c1863aecad883dd34ae70cddc53e0edae9d24d0932747811c50c53d2c7c1dab837a6a21470b0420b33afa7c1234951eab2eac7fadfb609f2856841ef877e001910e48cac1bb42d8646302ea3b5641fe550a7ac4a43984cb9ccf78bdf0dc59e79a2ae16d7c3476ff18220cc34202e23463887e719bd9616062f3d57b10af27c13a77c5afafa7b3cf612bb81698cbdda6e3e25f72ac2f745e9f7d3df42500dd6166588de3a11b824c65a67c4444d4d91ff7ef235ae439441d4f890b5dade72da23b468da5e3749d69b49c874ef434e8d3740ab4ad06492052df0eaabc7b41a3a8901f88c594a9cb28d45acb0a44d30e8fcc652b1ced1f5f62b5d078578b24afcb7a89ff1f0cd4372482bf02d5937b626048822cb7230530c87a0932fc70254bcfdd09f5e8020041fad2c507b9b605886d06372461fb93a1efb1da5f31767f29d693b6bc6fb30e82f477ab972b302b62e5bb61e20c87d00ee29ef783baa08593c93eeb3f8f10ea9582ce98ca23aac836543bab6b096dfd8291fd16ea7777dc0e4412e445004a70d16b8d9ec1521cff4cf06a1859c76431b7e1a1cb290daffbd99c4f72a34c5d982790c1d94e827f07f9b1f7769b076fbd18424461ab2ee65db926386cd6fa5f1e9a0a0467a870a2b428387c9cf12af11ce94b077ef18f9b155a5d7daabd1f2deb3ec226b1d94023c7a325b5197c7271351e79000a11290f9d955168de206e8155610111814c5cfb464986c9bc148a1dcd9938eef75750fbb1b3d0a1cd2614f80406e8acb6675a41bc621a983bea520ee9aa41ee1c51b3359af57569691a483923a2d6e365ec38d1e636075bcbf4c524529abced6861c16b2ad024517ca1617ccde91bbd101df5ae6576f3c38ab6433252820b2ddadd21e9cd5069f1bc3fe64ee2322bd7d5d853ea069b8d6301b3a076767025eae714a31071b87e66e4bfabf22275a2609cc4ea9b9fd5125b53c3947799fb933c0920abebbd25e1256107154bb1ee1b4857a6625cbc214e7c05c45d32cd8187c8bfc1d0ccc90e7bd069fb29c647220f902187c7a97246ce54b5f0d8b1e862048a089c36bd8f25dd615c670788b1de05d9ec103d743efa993eecdcede76eaf749992f165613598dfb78fc64b713c942782678c05165c7383e13f3ffebcf26c07532652badfa786b11b94821dac3bddf16d503f67048481070980123d367c8fdd9d743623ffa55ec2faa3a707a966cda0b19f05d1f798a8158fdec3826f1182380961d4296a49be36521dfd4ad276f9bc5e622d1277e434a363b99e3041c376b5743a7091bb17cd7356efbe761fcfb13eba22bafed4909d966cefd2de730b85ecc2e083889316a933c391a506d25c4e783dd235efba3d35cade2a7c273f5f37722901804116453f8fef3ecbadb6ac92c2c0df5a8bccb8b49f6fc02ac776c708ee6fc0fda64b77c46a89621be31575c298fae32f39450eef784a01eb3e583f241fec72831bc7d78889d731f36b188586c9168f5daa652362c79c8822449b34f20cbeead314ef023601d6d17a4a984935cb48a7181da685cce037973858c91c42a800bdb01afbb699b040cf767bd22ca603d24bfc8090d14a9bccb0dcfa4f02d6f46bc12c52fb32fec63eefdd20b4124086be54e0be7d4f285e67b89782319ed215546a1fae84a3cb9b9a629605e83eff7a2da4b1c75d5cdfc00b55d7e30b9e009998dd02e0bff5944bb8b045f7e76eb074133afcbcdbc4a31fd2f0cdcb458ebcca4f6728eb7141ed470c38948d58dc226b5a13f32d4d31b3624159450d3dbfed1b58008280bc92a88820bc1359e3c31ecc66eda0cadf51cf4642de17347ec60f674e1dfe91d7365e06b55439f1f994a08df5d333fab8c6b8153f147992b742c4351d53b6945e43a2d33b31c6aa7c3c0b23abaaf001de73542f3c333108639f7dd8a46c7ad75cebb199ffd2159f3848b0786c59aec5818e07f34992aac3ae019950c954c2366a761318a516aa03fc9bc694c57e52338ba39472e62825155709b08379da43f4e0decbd31a1bc63e146f467db590dc0031c47f15631417a6abf49958c47a4248e104733794618f8e3554122cae6588f1a14333377f055b169318378cd552c5952f199564db343f460151e19d57203a65ebb3a0fa544e77d46b1246e809a6983349299ad3741fc613dadb8a459dd01b82e6cdc9a096a3762b51985f0a54cdb9294cdc91627b0865a914f0790c6e712903d8dac8df095d8161640067870603261c42f2d7bc028ee1166aecd5b40691ce976768b0cfc39be8c2afc16b8e172610e57da69224425849b9eeed607233dfa0d7d1351fd3b6e53ff7ddbbfd325417a417b26474c9f8d3fc13aaf03ff95bec217a8ba072b615e2ca5f334f743e1c2cb77338950c7a70077ce309704a2ce09ef75c96688bed0b47e55aff797dfcc357be019d2aefc38953482d682964897b5ea7158fdff1c1a44587a8f424cb199be4770af84596389a77a82ce36ee6547ea62285cf5867413926fd24e5960bd46062f3e1d1792ae65cad779c79d9244de75af2485b3106073b7a83c8e41b0239bdf4019100174044b002eb95be4e0e78a039c7039c3e2d1fbdf38d48fffb8c0cfd0dd5cc94fec59811b2bf6a491b4443485e5fcf5c1b28ce4e690bf2efd5f1f3ff88e85362990e8ef0be3bc82e69ee42da7102aeb55b5d82d82474a546017a4477a10599fc41d47c27d087c718e9f71c57ae298b165d63df777c13615130bdeb3a0ba691236a2eb8f7015b5e1f0060fa89b85c34fa141aaa7fd5395ca22bfc02b07af7abc17008dac4a420b6b893d00bd02f6f3817e73def655083793a35a1694ec21be5af1785519263e0015626bea78d04b2f3891660941e43ea1169a1f1e9a709d1eb68991b9982f77cddde3517daa46ea560f9c19434496caae735bedc546759d1f93112d5ff56c8f1f8353b7eec83265c03e8df8b27d7b027c3ac80a00aaff56038f215750f924c477895812dacd10f2baffec78e7bfdb8dcb1683cee7b78d9cfe984fa08707af5de0c1a507b8cf810374d13e5098db456e3fc96df400ff7c14c5960cd91369cd16b2ec563c19960b1155881cb9e66e2e31333c5971b6e46376db248d5e2cb3bfffa0bf8f63dc19d22104dd9de063aa985f9d9e589b24b7ce20d7a243aca686194610af2335b622deebd0549fbbc2fbabac8d33571c8ba95aab72d14671d60122a28a29347683f5173b3711a9df506e93686abbac0ee08610141b30a0f9b5d5df72225b0424d44a04bed1efff00027f9b89b13811bc15369f65adb42e8abeb590be5c91be7f81d4570f56da62918215b81660523f69e99998e0251447b57ba8627be5fed412ae7af1fbec5341278d0fee0094d0decf62b79249b843943791df5a7c92bac736969c7d14fe4050badeef36cfd8009517f04cc0f9b669ff1b45c6b9218b4d15dddfb3e2a9b095702a972a32ba2b2c0b05ebe1ccc35875d75ecdd09b67bc20464356446fabca11bb0261906103cf038955c146cf83a8d3d63a9f5c79dba44622c919401cb90b66ebfba5f22c9521f3485c8f3cb0807654d63580ef28d2b2ba98318cabac3cdc7dc3ae139b125d66cd65087c5da937552abfdd5ba3831738b0a2ebad3179576bd247a4995feb2b9dea38fdf01555978409541d255222bf3a9980bc11c5f19e683da0231cbe749685fac6fd5aaf697b63deb295bf88f1ae1a4f232e24c85194aaa3be07453c94cf7927d3d5bfe94ae40f7dfc40ed2d86f4db5d47b57f63751d81f39f39bdc127b2aba2dd39c697d71a3e8915f29cbc14efe2d1a5d01bb3b9c3f8370c127cf10d199612cc0570f06b33332f4ea01b5965c24049fe58652b3aad9a75597112f7e813bc27b00804d87c90b3d38b8b29eba7fc49a67b53220a6c9d64c09b9917fd00f0fa75d3c52795a110cee9d58710f01318eaa3b2aa768d5364107058c949cd0475e9349be2581b0a9718fcef22dfe3f69248de143064ae34ace38e3460a02aceb9a4ffe40de85d0dcd2bf6d626c7bd98c4a36032901d24d357c6ae03c581ce79796d5a429de971c6e4b8cd3cdb311f86f231e3d7d6100ce45543c2d7426ce776aabae5f3e9dbf6072f2505271f6af51d53db6d5ccc6a4c75c00c52da8837c35fe5b33e03564f4dad7f81c0944afbbb6eda56d7e20ddf17976837ef233f7a66f4d1eb007da336a1a496818dbd3534060ed98aacbc9a172aff3ba7d931e182d77c54795493fbc9a1e5623661f67cc85d3ff9554f324ff252d945281930456bcb6f2dd1068c705800b2f2310a3454286c1eaf350a344c42ac617c52269dc411a395b7e24cc0cf354a927129b02f53e924a55f1b94efa041202283d4c2c637d302ee25d624c24c7244a4437af74eb0fe5e43937dcc136ef7c0dc56ea86d0338e39fa220adeb136aeb264e201e24c91825a696979319e240c7b9d0c50305a425093e76948804a5617d2bf53dcac60201802aee09eaefefd211f5c6801eb35ea182e077fb38f9300a8f6dc75fc87172f3210e451f3a897e30c41a7ab00d259d8508ef7d45d5d13aa84235e35c06ea2b63f279b7121684a34eb0169c1572ec869f805f4ffd7f2c2abeb3fe4033e61c24613f7bc256350e356a457722406bdc51c6d6405397e53b3f9779e1e7b93734b8bba9a78dc4fddd798f49cf65fbafdec1d389c8e0c816b6470ecee7543075452899bac5a7548ec919951a51788d00d697478ec5f8dd26b926d6a04d8366aa6c48836d97a49ad4cefece8f3d76d7df04f219c6cd8c0ebcd6bbd21654568c6fc4337a308a710453a0fa8c6fe6c7e735c77bed66f964a775c4a5132daca43e09afc8f94adee34f4f761f70ce349340fc007d44847b584e5ed52245928eb1d4f7ad676b143c4cdecc55e8a9135d6e9883d5d1857458f908b22957a05cee2eaa82f8342bc925b7483b61525f9ce0ee86e26121ef9582a5572b43c4c915d8a66e7f50f6d37cac465e88f5efc759e8cd21a992aeaccbe3a1a9e3c022be93e2d14464de74c9358a927eb27b40714f3572d2f54502c26d5db0583794c41da1be706615d14c9ddef9f31d31f08e1022806aacf95f90b38c2b55dc742644c20a70032b5ca027cf6b0659131e2b41bb6e4697745270441691acf6b3a7bdcfadfca3a2addc015ba53cca75a8a03d04ad1bd87cdaba8112803b1e167ec02b074673e7d7cb5e0988306f03274932422013875a23ae1f384e3d2fb18d9139baebb4158c0b7fb061302a1e220da2cc39f84207b74bfb88307e4cc4e43a0ea8b6d846b83526d1b993d876b257e1ad9528d7865dbad3e391c85c7a8e4aa1d6a3b7c858f3b1077270f7bf588f2af0ec9703b1765535880a650963683825fa26d37bec59ba327762aa05713795e9a24ca5eaf6b467fd57406aedc3967f978238814ce072be8d48bab1894409fce8ef427e395c1e64a74de2ef5b8e0a8c920fc2a49dad8218491f7b7cfb2902aec426c5116bb123586be1037c641722747382e0542ab119296acf856622ff6ba2162e133b81684b2a91a12985ecc4b5476e54c0d9d9830152c39cfe484ff78063269aad118a3f5e1b55b6c61179d89619f53f28be9bb957c0e1b3d58a32adf091d526da6466136867c2d9c9a353d63b73f4b9f43df06af52e49d6d27580a2b73c8e868acace3c5614db98d8226bd529d5d77711c25febb42e1f798e147356ee4514ce0ca991b738aa93458b88eaeec9ff02a49dbd09a21d39b45cd5f96ce4e9556140bfd59ae025777ffb72ee1b8bc9fd6be9c4cd812efbf6ac7c2eb23f0e16c8bb667a0b71fb7fce7df5809696f796f5937fd0996916a02ec1e026b72bf1bbbcc823f38f0f67cacd7ccdb0a656b70201834645d16f3b9a9266dc00232bd5cf18c37dbbde589fd196091a106904562e80663942a91f05aa6e97a4dd818e5b6839cf9109f713cda42451c0ee5bf9dee7883951f375b9e16256995c16164cc03f304ade8707176a80e4bbb059ca35800fa2f987c999434b798561163eb049d92e952ca83167f9a1e4fe055d66379a901272be3beb32f535c5696703a756dffc785f5b5751c9ee2cb3df82a18cd28c6fd6360f30890dedab752034ade63b600fe167062af29518ce9a61b9496151c28173b59b99a900f768f4639baa70447090b959660c6ff0f86f54c28475c72f246c8242c31e13004de8d105cdedbc7c4db853431a1a18b4b72c952942ac4adf8148f7f83b105f39b03596291ca710fc7bc340b971393e59212a510e9e547a65778de817bbbf8c62a5c14eec1f8cd1bbba5a5390194dae6921710cd9b093e92ccaace9084a30f53e0beca0af4361caa9fcf0ad6d01deef3d1f5082f92e3d4c583cfdb06816ea4f45a70608f03d41897ee3f053e74e35477b69e5e57505e88bee2c8fbf797df94820c39fe635a4b487f3690bcadae0f183eeedf717b9c60293a60ec20e9d27d7be7bd50adf691c8d2cc875363e249a552e9031e7d4dbe038f6ab0e2dbf4d7430af2c914f76047077069565d2696e9eb0d0d6b2cf7967de8ebfb24145be94a27dec99631f8e9f87cfc12a08e6b8d5bf0f4fddab1a497042d13ca83a447f9a4575b99dfa13bb88b9e9abcd01ebab0abf701f22333d16e0741c346e6b9849c5d95c6c3a7da901def2969a7a270b32a28e93d3a912778855e701917704d253cbdbefb745768d5df780412c211d8a7a991f05a6f8c1fd69b63b6336866d43ac2b93ab2ba37c4678a3330c23923c715946b6a1eb31bbe4fcf21441e943d6d680e504927689417d09fc6f27337ceb4a0559642ddd0068fa26a464a721707528b791e750bd96239ae365f0f1ab029d5003cef092f2d22669fcf778d52b0b1e0fee565f5510fc539587edcf31820dcb84ffcb3bdf22ca577bbf3eeece635a15d911c007dbce5824819e7eaf9d647d0041485884700b16e99cc6de5a64cacffc41f0f6ed97226f3211e796fc9d6a4f0e41c36ba7d5ca7630163f4beb5602113e6e815423401fdf6df75073597ae119141de5ab45c02b548f09312ce3067c5a680d392c956f03107173c5c9664b0188a5746991ed1be43e2b4ada56ff9b25f4f4676d43cad65d71e957d66d01e836bd2a888dbf887e8fe0776bef96342241108fba1d826a73cc0509e809f7224f6f70de9418344bf984eed9d102fc5258ffe5a995094de51f34e40c79d0f0510710084d0305de0da17977bfbf7b8f6c2f2de25b76f2fefaed846f110cca554a3c4c67b1c8b52444ffc42fed45b7c1d14287c17f4bb1d450fb706485c1c8b9bd12e46c9def09ab7b5dcb7569ecbb31716e23be4b66566803805f877ed93fca389a57a3ea1d3bf809ed7f636b9a940112e3015f6877d666f5b871d5daada1fd90830a75b703246278df68b2389e8c440c6d182a78c9ca610e344008bd18c6193b64afd922824ba7b5b817e1ea2cd698b1bc52a9e55b3161e32cd2c2ba6ae48f55305bfe575ae875b5e8389e4279dfdd03d93fb2c9f3a51e2da4b0a4864c284af62c1f3fce06817465b351e66e7a468863515808f585b946829bc925f0ed64601d05a26dd5ff4037a8b117e28fd3ec2b4e34f3bb091c045c64ff939281664c30fce361d712faf215545f15660c38ed0512322c8637eaa21b735abcfb3fef0db2f21a69be837a9f0179eb3ce06e3168baae33bb308697a2f6c7fd700671a4a7605c5f12b4dd28b20a959472253108b5a0a4965408bd3069007903294f4cef58ba82bd2d6f7b5d0ad0b724e86f03d1bdc4b390f66d221af555dd72a878233d5a15d6bab54f13db6e00e9b2adb8c0a1e173aa2e610ef22040915efad631e9c074088722196a805b1b839eca7374d9060706b736cd0edc861c2632e2fbd1b48c4f758bad4b442ff9da01606d023191d1914be6e8a5a3562cc55acd133e78c303c6f210af86b7dcf4e5e89e3f8e6c449a102ba205c48eea5c5e3705bc5925e6bc450acfcb42f1f28caa3c568f2fd1dd3130f75a434bf3a0fac55576372827ed76c7923b23f21b701a763f28a8db997df150123d9be873dd27bdf35dec587b8b98bca9aff6c7e0373687568b9c878c16e3ea2c73e1bc1f7d6105313cf51f4191c12cceaccccc7eef8bc0e61856995ae3043541b0d994b4ba5f1b1bf8a5433a05b65f178b9563aa09a6e48523caeac0c06016703be4ae05bf9b5ee299384a1d68a3460ac495cde22098c0c2a29d1bb95061b449e83a15cc61488d47a6db2790171e4a5197dd4da078ccd77ba48aa9369cb2033904a8b91e30a510e4a2ca8a75623f009fc4649ef6e807decabcbaedcfee04bfc0707b2a92e9040fbecf96276b11757e502fdd1ecb5482649a5065c2552e3db28df15763676c4aab74b05d5633965c31ebe1ee0041c73af47db6e4fc48d1e60665d924b32fd9e3241ce4544589e8242dbcdc04851a04fa331cd295f405461011f40cc829362f6079f2e67ab76098029189ae031a0596647d023c43a569eedfb877f06369f3a66abd3ea8ced7db6d7e62c94098e31b243a62f9cfed2faa3f22d0d5073b8ee95646ad0f08c0e4aae72c0fe168de559c4efdf7a03d3ef298e2e93e368a66eb32a96f54de736d839903c53694be7009da7370d9115bb885ba4a6132059518bef24cc4b4e050065cb905f21cc1cab8fb39d51d595c7481cd7002330e8920da564ab2b74f81643f5652eb46d68d6d25b5857d0df85e8ad4ebd19f99bf7ecf5228581ccb3267992c5c32520d3c4188d106db78457b62738ac6ebc74b7b04dd009ecff006c53912a8b07b62a05fdb35b9c329b38ec38b59cca252074141d27f1cf0ee50fda59c1a61e8e5d0cc151a12581a829cb2c4a0b40d7c40617a621114cd48327c93983989ee1d75acc0bc496a7dfe126ec023976caaad3d366adcb93dfc71e4432386523524b15e46781fb06556c1cb4b2174cf8013abbf71bd00ea31040b5da53c6f8bf31a89251340003fdfcd2a46e67cca23d759e60b437f57c03bbdf76fb9acf17e5e916ce78da8ab2431b078ec7df75512e3a68a956","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"e06b548b27a7e7d8dcac8c756dd3f2bc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
