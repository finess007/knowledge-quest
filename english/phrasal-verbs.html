<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"e1ab42981f3a585cae2bcfeb423251a5eba85e2053e80cf1a67fa0efcc9d0f15f6328757d46d107674f4cfc32569fa3ecb944af03e052fb282705e447ce4063558efd79594001905af6a0277899cc1567d0d1c07524c05d15bf4cf55fe5164ecc327fb7b3df3fdae036df8d314d944e69b574747d1580c3c3987f8290ef7b62ee472f3aa8f990117e898d7acc3a46f2b3efe8182598a27564a9d02dc968ca7583054ad808b0a89cc9d6d8ebce6adb6b2e26a05c9cf621f345947a12d6d2e490c1a9d9b4e837f9ca4237763c37eb1c1dac48c879a4d94ae64df93731172fa9af6b25eee4f8bf1af38784bda7b6e8362ce6bbefa87b85d0ece0060243572314c70c59dc3e639673cebc9397a3d8272e2395aa9e8101862c0e42276485f23526f5d4a5321b7d22a8cd9cbdee0425d2ff0ddc3e767c745dffca23391e58391300b062b46a40878b65393c7e99d906aa4642915bd11567546fef3c30e4914c252a5023b2d65f377f5a6efe2c38fb228d65a6bdf824526feb2c19cf453544bf2cf9e6071ca156b055efcf5518130aa2ca3f0711cef6807be1e986ca36f7136394833981a8bf5a2f8de5e82210fa9a506a2b203f1d1f08011f68dd5ce2d9f922886ee0a85cba767076e4d887caf37c42762fe6e315226c0aec5af3ae4eb71448ee70bce8c6619a0bdd969b4e7ea546816b269d036d56c2e03ef72a0574e266476020de8a0f24c1ac0c12b28a97f20955ec5c6fdabbf9c3fad9a5d9b58d230bc7495112d7147b82c97804361ceb5a7ce8fbf0885d6d4711e42c323335fdb5fcac5af69b8f1353451d2489782dc294e14f03a160ac9aabb90d06edabf601080b4b932f37d314b5501036b63916d3ad3afdbb150218798c012943483912a504482f9e1cf6de3d3b2b3b98f7c0e573c290ef2a64f291fff9897d733ec420944f9cdf95fb3db9739ceb85794a5939f4cb89ddb62f03ba9f31bd027918f301cb0e142e6ee18c7c15f30c7162507170628c2bf17a1826a66070276f044a416dfb9a5123c95405f51a474471ab858fb1f76bacc27ca8e417e770906cd782b7534afa7b106e455798496d88184209521943ae06a6ebebf890977c81d9ac845f0def7771c6f97e056dcf81228c5ac12f3553adf9ed4a6e6037460d5eaac1b73826425d520d81ff9a30fa48bc645309b507bdb8641c7da266274f81f3a0d22bf868796d2ec48d098c6f836c8e2362cf8376f135f457676fc77672efb6b6fac2df94b4139796ab6fc2bda03d0607cbdc5f530dd747afc671d3eb1db9faf08961aab579393b7d88f5d4973d368ee724e62cefa8256308337609d55cebfda0500dda1ab1b261fae595626665094450432cc700dbf04940ce749dea5fb093a28a190f28ab4557bc9c83eafccb0172a2f263d82c7155500ab6710b2e8123b2f5976e1e57b6cb9971d96dc665e93b40cd66e1825784f4cb6a36f251aecdf192f3814adaceca2f82168d7a246adde2c428969f129afe9b49738b814cda2126dae12a0800ddc53420783ef6d0939964072e2e002aef751d95f14b803ab4028e7f247f8ec5b1171b7b242c41e6944320175e437763a1cafc87cf12ec1621eee9ed867ef18d6bc2fd21cd142496b8c2da582228a71bc68437eafbc1a97251a10aa0603fc59e34bcd6ecacf0c7f9316c650dacf49cde010452d9755de3b547e43dc99cadaea664ce7d2a997c9a4ada10d6e24c8be5148924cbd4ee1ab86e6b0bde49ad6edc8bb815cb2b65673a2246436aea4bd992018bc62d5d60e59dce246a8ca7543fef8ded7799f3506ccf6e0ab0d5ded5e7d1db1409d67b73d39d19d24c7c0bf30126cb71dee3c0669f3aadf4029e8b8cbb02006a1cd565f2ce65718d637663d3b256d6965661c64b9aa5ef99c98fa7e10ad60e688b6f2d0bf2537738f692510ad4086bf1ae096160cf1ea5f3b689f1016d25ac98efcfd666a8e607eb1f3c0d73ddead6ed228fdc8d55adc042ed17dde445ad4e8d2f7e84c0174dea93678e024b12d82f686746dad5e30f4fb924f3c3d9ea1368d66247cd0b7fda48f774e780faa053797abef0e2c794212a7d330431aad4ddbbf7d3a14f5e97ce211aca3236091fdb6df22d233d47eec4a0bf1af31fec12e7fe7e08fa28f953f98022bbc4e98f0458549fb2b00c89a86b3aa7a71b3db85afee66985320c45e580a69cbbfc7618226c5a930609614dc221c76a8fd95d4872658f82e814099371911b410a174447958bd8f6a50bb592588367167a297c56183497134fa62af575d39f92ffc471202d75c35452a9ab9e792dbf756f1e1b5be2098edc81a4336d72ebd1248b4757e2937b6fa0862c0a917be96a0942aa0590ad0559f13629c21056a0699860b7f59e958e07ef4d84ce2b98c3666a9f870a962d2e5b58e0e971cc39040ae341f97e02ce3fee0b5fc14a910e4230b3f07f4307c1b8e89ea97ce1785eb082be176d252e65637435fff2042fbb61b9e274840dabd6d67fc6d926864702a0b2637b0bddd72edc1fb212f3b9b89a46f8333fce26f3a0025e2ef61bb33f5897e10b393c6a346171b7aa5e826ced62fd3559a74a2559e46335a023ae98c960bc2087f0fbc350a294ec4deed57c1f5f9b02f4ab29b95e681b33a2ece6f475568f735491807070aa9ccb3adb8e3eaa212f4aa6e62b69626b19763b454939b8d2b520a2c4e5c604c5bd7fdcadf6fa3e990a666b8e2714177a81708836c6e4ba87aaca155aa4e958ba20883f0b4f1e4faa673eacafdfd419e7f58d5c47a50a561339aa61ca61245d3c6c4720548cad2cec6a299da58bf471882f4326276bcab6390d805c2dabfb801057cc5a8c849235a62d2993ecdca116665fd5af97031192cce4b39c2a25c138b814e8ff24bde99d7b42cd8cf8ab7c811ac12a764d430bbb6e4de570854d1ed81b7b5ca516128cfa0c6525f89904a824bb7df73f9eb520588b207472549bfa2b85b98122590c4cdf2f76642a4efa933dc91215c62eb88de01863f36d9f8ed8be52e1861f1aa42e0abac24c5feb0363ca57a9ee394f5f3fe1d082c53493aaf32108f1fb24247c4169d977948779aad5ea4ae50d736c5eddf0916873a0d350c621994f6e8b83093da8371b36c9ea5193827c4371344a729f4ef6f4ff02940ca8b892ab7cdddd62b121626d31de91bd54cacac3379154507f190a18f252ae87080bfdea57be4b9fc273c6914fdd475ea28e0c71086779606b609416bcfb285ece267377e143c7b501f7b6240f7e1e6134c64d3fbfd20b2a74eddc369d0e9fabbce2ff2af2f2fbb2ca2420b08dd070f635a393b21994eac3f56ffd14752d73d21e548c4095ba89cc47e9a4460a65c546f28d0b1a55953edf7ac7a3a638aa6d49d72f15c183f2b4574b8844cac4c228541463b602f979a701974a4e988216d04e509c11a50c3674b3827d46fc0c2f70b333d6a97009877403877456fd71fda40b2eab86ca360ca62d383b7030f15c24549ea3075127ef7df18019a6d02df8e3cf6de08adbbb06e7bbe492062d4419737abfb2e61d3bf9e86b1e589eb5c72820c755a761bcc53dedd72c5d02fb23e1b2b5c1c26e240d6e942c5fa4cf1d1da6b164c8330a057c4694b9f369ee00f78b5adb42d24ac8e8310738d470b74ac997d4c8fd757d284367a46b7d833321911f2d4aec1aa2a588079664f4415fba3deab65506e3aebeb5b1f3cef94cabc675d5e10c2b4bacd6824970c601c16831f2cdd108c3d0bed143a73fb5bbb035c1fe523348b31c48fc352da21cb50fabb5b6e56eb9ae4d6763d0f0ccc47d216f4bedd00b0dc78f96088d07a8536ea426a416b7142f1e40b9129e4fd09f14527cd0c506c8fd6f3c9ef8f5d66069adf00bb4b7472998fea69906bd5574944340d9fe614345fb9c952c88713ba92f271973e4f19ed8e843baa2e6104efcdd32dd5d27b78953b99ae8d4dfd2854b1336d8478cc9d45891d9abf05a797f87afcfce74a9c7559cd0480636dce2eb12bef99489800b22ce411fd54ce926c3b91d6439cc94a184f7e4ab83b1fd8219ad78abb65c97080bdd2f58e4af34fe8421c8043c46dfa099fe63b90c8ad851d51913e40c1b53e4c78a0cc9797a385772cdca0308cca13f1227dc6527e5d43624599fa218ff6c8bf0d58f68a6c87af049c9607409510ab2c4f0db2dbe04290878d7f469db0887ecb2491cea4dc085db3a142a0399e540e3dfc884d719d0138b0b723512cc9fa4ca4b9a1d5c609afa7258df91512f9c037569d77a72ebee227c85707e2da7341572db6f79c88b0ca2788ea3efb386af7f1394641158d432c63e411a67210da6c4b7bc74fd9b9f37ca888cfabb186df61d45f41cd51934c5e81e8823c061429ca5de760e64ea65e6ec5643bd5915960c2ce78da478ff27b6ed1ab162de260a1770a892402e90f0bfb2cf444be3fb5437888ebc6aa4ffb1d64ce431b24acde8eb38f677243593aae87a1ba55dcf68cc0fd805224be47eb82c432e33f22470f3c00c7249dd72fdfafc27e7ccb7a8b2baeed38f8a86c4186ea3e547c49941d05aa90ac872046b4fc31f8817685d53402721398476fe92273e71c50b9a4670bab85558e11a9a4fa8972a110edc1302cb5f0f04d8b1ffd3a006d7ab50446813682038e455e4c484492cf2f4bc6d16ec441664a950e5e394ae416d15f3686a247f6bc305a3fc3fc71422c832fcedaa9015cbd3742821810abb86fa9b8b94dc338a66b34b1c883b022556606d5d65bfd3a8c2d4f9d976c5e95702ac88ea4d606da8a80258abcc712645c49be7cced2a53e05aa6d95fc500086f528d71d267aed179d5ea469aa17278406905406a7a5f77f65d492c159cb5dba92aa4f7ae18d1ca8eac97f7dca209d5c1db0eea8aac23bfeb7b3003e85e4400c2ba26b4a25b44840187c225254548500b148feb2d98ee95d8fd5565907affbd1f66b8e9dd170da678916fcc4ba57abf434b8b11b1f052a5a34a5617858ac68e751fb16cc9c659e9c5bb4cf3fa102a2d0659bae9af5a78d22b627c579f1083450e42cd5243cf5d27b0b64f8fd9bbeb66b3cb8380e651a1d4f8dcc233bb3fc00f5667125cfb1f7de0beca7dc9d7b59391b8faf8c17e069d9e2fd801891642f9e6a9671b05bd37d9bd0ff76aa22c1f161f2a113e82609a2553b5c997d5be57f46a927c7c2f4ad9de1fa26a767334cf9d6c472fbdd074984aac57b28f0b5c967ec8e9844cd1a1278f101ac82688d34a973b2efcc7d460514606f1587c6b91ee5d67ce4a59c2b8071446c6933e982a7ae7b1ac0b416588332883445b15599971d7dbd60fed623a891748d1fbf71abc6c980a9a66f10fc67d6d822f26d9e8703d54bbadd3c68a8ea840d2e2ed473783f47fbde730ba4384a94312fa1095c70f93be563f7235f52cd2f3a0659cde5f43ae6a7f34f3fca43349a291f987425fb67c20547cffc42d11afa8b711753391542c9953bf2acaba5d64b5dc2fb20cd4463f0ddc008b3a440e3739a64e17ce17cdcbf64c8bd0f2d484a10678c2e76577ad2da055b663bfcf1a268d2dea2efcceed0bb3a429d57c5a71454b56c08b840ce9331753359b946150910d24056717c91e2230a9848334f99688f36fd239daf6581c3ebe6d850a999c368830fcdf4ef74f09c92bf90ffee20799212bb838f3246eab52f727f0e4dfd34bbf2fcdb8f35bb5c23729973fa4069c3cac6b2ddc080ac5d71d0932385b5e115fb9b98a1f680eb42376ebb3eb6bbed714d4c93b1da760c46b11abbe54bdaf9e2a19dd8c83931fa39395dbb50975084e1311104dc9085429aafac805a4f400b6f14e6bf9bf42d6d9a8599e918eeb6f83d5c1cfe382d67716a2a9e3f19074eb5d2885ae5674a544193600c9598d2cb31481bd7a2710d869ab1964ca304a7c81a868a062f89b479a05df183b9fe5a864efa3691599871f449877745e36bffc7abaa774004573a7245c6c58791dd2c60aecc90c12c8d0e40b162fcf9cfbac5c19eafe60bbe01a930274108595d8862921563a1baef92f32d0be1fbe7fc207c0fd43d1652a81388bf21272372b8c28e5f352d332b7056983ff4a7f44d7583102c202f55ab8f419361a52a06741dd53b1a1f9bce55c8e629579d9b44f383b34068fb3a8197a6546c4b453d281abfdbf77a47c142e3dad9464e2706d2bc4418b8b977a182179d9dbbe1c1afb523f267bf7ffd1d8bee8f2845082be7c07774f8a302f47da07bb9138234daa02276b93860ea358e58c73b2b0da8195ee1372fcdf9224331f12c17796481407876778405fc74c276d1a56f1d098e83c0c6c7af8641f03ee82e0fbdddc6405fcfe805c2785c855635baf67c4c22a21a4d4947fe47d3360b3ad3bd51f141f8ad25b1b76eacd9b750566983f17ea83869e605e984fa0dbec209c68fd66c57f7d5ca918ec8cd2ec3176866c2ebaaf29f47fb37018a51746aa8e4a90481e037ff8d81eb71d29c6cdf36c32473fb71210d5b15618e262d287e122433903deb25357ff23cf8a6dc4e7fadd6ff9ce5e41bd853112bc43559bc45f0b0af450c59447d09061a2c6585b4eafb1770f1782ec7ddc448cf2b65548c01793fedf259a59ce1367c9fa7ffe793ab5e4bb75f4e8163409cae8f8166c9dd0ddd637498ca925f540930254e12667c84568d0688dd4fb44b0d2d8a3ae9ab163ad65b2233223545442e36bd06fd54181c8473c4cbcd1a6dcda7eef464ef76e66e4a84b5bad7bd4fbf1b5e0430ed07270839acad5b4ccf577422bed0042e1d2bbfd355babeea3abfa1b413a05a6a9aa826fdef3fd372827d087c4fe384186f9cefb50a432f5929bbe440516e68b5a39a1d2d2b6637ec47708e6c66675219c4590d56821c62558b1bf701b843e3484925549aaceeb6e55c798968b34bb7016bc05b7db867ed0c00bf8f2ae8101ae82d997556021ab78110d8ed99df64af73ae5e313207919beb4722f88706453a799f75b24ac2c57780e6bb7f0db7664c960741df4772e2ff5505a2e826ccff7dbc239abea57dc05af1e9f5aa083e62eae1e10cddf88d78ca4a4790824b94a618aede1961faddbbb75fbb0e27e14c4b34a06be6e4160cd816ba60ac08481ae42310dd4b9d3882de20d5ceb51620d95fb0bf1563ac456971a4cb9334a7a52bc579daf35ab230f37ee5ff596b9c513405ce39eb234f236b467f88d819c781815f9c32c90d02fa7c2bd46844f9d15ba7984dd30d0e79069e8eaeb600bd0bfabac02687dfc14ac864e7eacc144893d029dce65cb54f69750c54183fc63f78950389da1f51f077d1c782cc594d124cb469f34edd3aeb32a4f4e6bc2dd3f3bf4abdee146ba0a347cd224242ec246df97983fbf87b082bb066ee6613b645b51f9ce8774fa152cd7933cf0c3532c8c807b85a53f192b69f32c139b323bf4972b21576a507ad503586bc2eea3244ffd9841c72e0dd8a1e7e60385e72063c9517364f3c908db752ea4ba312b2b85b78e04596c76667a83947b459c9dfebada0f2060c6befef6d7dddb4ac7b9d62f14cfdfe640e6e1356c3b13f7f0766325e3147b722306c046bccb996fa3f44d35f839db44953f6ceabe0e7d6b20180ff6fc3b7c94620f83c79f0b2dfc10d242dcdbb81123a6873a233e6465f35f93c8b52fc35ebf5c2b246a812c27d96288dd9479abd34a93c44616ed61b3683e004498cdbba4dbda65d64048f60f983e040258cd7535817b222fb7b440cb9069a7305138e9f088c72b1720272125972f7710e56e37d4ddfe5c80309ee0651c4c2d4c969f6b15f87cf73a3cd65d6cd583c8c30d23a6365aefe78f6a58434a7b826a13dc3b899b693d0d4f400dbe35ee9118ceff580b3b0f5426e3d146c165542f9bcd819da35e5246886ff5456a1543c829ab867f5458e44b3ac7b2fce32be3e26e84a3e62677013ec888eb45e356284a08fa3b76a83b3e794fd596fbee44a054054ff4d69ae19712d3fc0ca0e82d3fdf507e8eb4a001a0ce394233fd05727aa2b6a194de9287710574cf5ca52a029cc5e20ad03608c11609935887ff4c3d14547d75c74b6fd021bd9f58b5e6486dda29bf3612065efc5f6154d0626962cdf1fdae2a7dc2a2c0178600c368b3a3736d6c1266b55e5c48e6a83412ba0c8162898d997505b91d9b942f8fcdb70b449e19fb258876048898ee1702400fdf57102f156abc54903b790ee296ac5cce516d40a2281addc7241d980743fdc0324b6ba0f6201d2770bffc4cf5f6287d955300ab1128e792a3944663823c23fc9dc2557ecefdf6a449889d524ddc7d37613f1ed332dab9206838ea93d751249c3f9386cdaf8e54bf564c33c38842e5fad41f4625edc632c76f927dee6f97aa2f3ab371a84921f38141d83ad4e4312f7766b5ad6a01fa095db3f762fb0d867233ce5939de54127b27208f0f1ace87a060926b772bd8df28728fb47f859ec106b7e6f6cf8ceb49d67a585b577a0309ce58796523b1693d9b1bfce604c88bafc2cb9d66a5d38e84cbaef7e3f167a61e566229fc929ea520eeb82c3e75b6d9d51e4d3787ce2d3943b944e1133f707769d95d7436643ecdeba2b7597c2573375eda01006a2b4bf8347622d7fa63e822f0bac25133337aba63df39c6043eaa6642a3d6760ff8d431c01ed88e69114ab9886f437a1e793efde36aa5adf360ca415900bf2481407e8954b864004855afbe9742a165505c2259148a6a4ab3db76297890215e638db30e1056179413a5fa43d526023f944a6cd9fb25f260ec1a47edea0b84e9d32aa060a9997411155404a47d7d329419d940d927a54e9b1b92bde28217e058df4d529f66f1699c39dfa5ff00f1923c6af6fead255020610b50ad9749f668d5b81918ed79b56622428ad43fdabd61239e3c068574fbb10888bd10f8505efebf9d83b6393d39cfa29abea20e2617cf720a250d4e359b387b25d4cb683b41fc631f4f9e83ec78fdb5b661cbc9f10c33ec17a17673cbe4fdc45dfcf5af557573c12b8104e7c28abf2aa0daad37907d8cb14ca17579566a868a14b6f6d5de8b54f6145628db0bcb3312532bee99888457825c773f8f323f6beda76f7ad4846e8f0bcec26614a79ea8fd4fe00d1f2b7a0ef1bef98e9f1edd169adbb6473484713f8db90df906fe54c0a291c83210c46ed93d76424089c46ef39909de74dd79775eb8bf6f06395c6a0a0e4f65ff0754f1dc67e1d07a7ab6885f5a02d0ac4cd9eabfe47272c64ac6ed45972e4ca4019c80516663e814846698380ad8d326c351105d4250b6dc8f5b03944aaa337c1c2ff87237bc6bdb8a43d6c4cac3b98fb226d201177a2a028f599e8033fef4fa8306a77eaf9224eebaf02cdaed35aa9b1ea007930563ec23bce7d00efb3ae8e776f591c7404b40e146bbf31db43bc1612e8f359446bbc5b99bac9ab824f36b5a39026faf69b030f32ff0b77e68e4f9d5c8f6024ae0a33966254a5b7b77f66a4693be15bb8be50582346be1d0c64136a4e8d2e5d827954b11eae3ac5b51d3dde1539295cd13bfb2097f9aeaa311a5548a68ed209697a300d91708a79989a646331e2085dca7f69faa45bacf7acdff236cfe50041fe5259fcd7bccfe9985a4f8d5015547a7546132d9023b3224b61c8f356e764c6e32b4b61cc932884c10c66fb9cb116ff048dcd3b97995d0f122a40ba2930be63a4e1e90f7276737d6efc290f916ca84d81bb08a517b54c06b350536783dc1a4da6dcdf1a4a5a1c507a882b795b1e0a38befe54993cbf37d18553f99fed33a9e65e564008ff7c12503c05ce9c09029b98ed594b3fc72104d83fc407c95de0e0b43f3e8c62abdb3d8ec62489728e2ee585491f6916153fbc31f458b1c3cc128259bf634d7f06b37b123d14df793688a987ea2400f4d2a56f36d5068639539cd62dcf49b940d0ce170a14ea982cfd5504cdb4c6099ca96e5b86d9735d9b60a459c4853946e4e02b71866f165dfaad79e9fe81f38e6d977a76c3aa95eca8ad83a1076373bc652da2eb71283498cb942640a8fc89f813e7bd80d20b695e779dd065066bdd5e6a436a29230c9385b9f1d521e6c886f336df876356d6e4b8ac15dcf4e5b44e33e1921ac98d98edeba11424048d8ab4e58c0311c7b288e6d27ab443063dd76ca4ecb48027157186cc883f462c5409d02bbf78fd87e4d1a84a2eb93d524278fe99a6a8613c17e4b6d7145651689bc7ef9e8679c3d48e5e922c20a168da4bbb106d6c5f4ba08e880f67cf7d45027fc52b6dd83d72b7843df184eb0ea808ab0f6f3a0f4b772d409498d5b0bec762a137f1445f1a97c2f142bcc38717895387401dbdf1507c2a57d9a0fd7d736be66146750c805d6ce22c965fced4521eaf9c6a549de076e32784fd6469c9d5c607503984051d5dee658a18991b3d00af6fa8bcae35b360b6c5e93fd455c460e973b2632906837bffa6675a6d94c43cc7d4dd438fe9a17b54ffb40d123ecfdaf958a486116082962104cc6d06f16a6b0fec0390a01d4f1b3a935ff1a061bbf3481b30de7fc155cc427635d7c5a62b3397e5b7571641e96c94aabb14a3f7f801ecebd4b2e167b8f480abb8530cc549f341592a9fe1c2051a285973b0de07a6af54ad3d2b8e5ba7c980850b97614cfe4a7d245f741c8ac9f2d70df4fb89e8d1b6e2e6c3a50a29db3a584ed69d46fbaf5addc0db25133f7a17593658410847a2d774288b62ebeeccea2f83aa4b4df12d45b4bbc7a27156613b4f0fc0c0c9334dd80f72a5ac35ac3b9469083b41e45c30c7eda73a3a78920349f5348309f6a4261de2e4bca7bf7c61d5e934942f820b3a470b82d53bea37ae4e2f3d0e26186ce3f6f616239aee122c5120378b7b1bfe6963db782ef7ee78e341178eed704c5dca2db256611b3b67439cb212a3ff4e746f73aafa5f01cdfda7da6dd231e798178ed8a9c7371a3114b6bcd7523e4266fd5a24d892153f24a28edac8d4ac8a46fa3dc9217a4a04586b4e54a3415ccd90c6ae22a393c7ca5024ab99e8f9b878b62bb462a71517d67d62b2a2fb484318ac0708b8ac2ce5ce0864ec104cacf6f24eac4c7e1a11f6942aa067ddbc4ea6d6e95770e8f89790beebc48e5574aaa454877f0d485113f85fca0ec3f8c725a47ebf582988d40bb6adcaabe14a7b68660336ae2e4590e6c1685c03fffb9783265bf9af1f26f600dce4b3591cfafcece5db35435a73fa3ef8b161fa1433a1dec824f6a4e0bfc80322b561fe9bac134eb02d3270019a71b794860dbf1e3041f4836574ed6d7a98488f3498c8353ec7ba5468ecbc9ce0dfc70c9344173b1032b59f4e12dfdc56981d95381934da315b386a6eff20d4af6a327364cc17c558d9a2158b8601cadf3914a90b5f8983687b87408e966f90005624724668756cc7e5be56b38657d2af99e0299bd3ec97f60c94e06676a6cd13ec424429a3a31da2767780cb0aeeb4acc31cec236922c43df1a0ed84bb08818b1f157f22c85006228328efdabf5087f474f008083d0451dd43a13225cdd7ed17fcde739ec222a39b41e2da7c0258bf0b3a9772bb3f986fbf6e2f34c1675c3b3d012df6d66532dc1d29a022117933ac4a2073e6c46e9b5652aafcce90e2465aae8c6a8618debd523243e826f14ae3e869a50f3a2ef0cc1795adb8927604f55f786942cf431bc5ee1e4524b5a527a6ff92a10ed32298b51e3ec6de22e1361f6cd1eea676a197aed33584da1d3bf17a42fb7617a9f81c5ab8d4b0bdbd207d3f43faf11bcb7f0d631538132250b49f6c83965903fe333bf3854c60e97e03838b35a7fd45e3496e73b3fbce9ed8034d31968708e69f55adf20911a62874ebb2bd01fec30862c91a1a92debe34a459b0d6fcd0c67e5f497b3cf540eed5016e7a7dbda2d90e55107685cd53d16cff0007ba1d93695cfdfb3993504bbfdf43965aa3203329dba7a9977b01b3434a41cf0518cb613b5339e76516a2e4bfb4d7af764900d74555923e29273e4799b0c0606c731f7ad9dd73e73a3c61603ef2f7e30004dbd6b7dcc0034e26325428ffc8bbc4a5db6f43329cd48fe67b405f2c53031521324b5f4309ea8253c05e15cb8e349a3536e17b5e2c67b4026310b81a508c30638306ace59137dd25dcbf5caea674f6412cdf2fc7e7a12b919e33e18ae05453dd93ede89634936aa5cfc1167339ea476146d08b419f931d31a5e560b0d69c752a8af830c4f422e6268ae9bedab49dcf0d81bfa27a11c1b8826107f057232f240f171aa1da36328d4b29637698be03dc555cae1bb443862a500f4d334b2134a23820c39fc8bf292bd9b245369bc7186e2be07d05b15f243767eb21cd5d673ba8261edf39bbfe272337f04f70fa0fae2d678a4a0300af041261222cd8c6ba790ed70e694634c357d6048deccf1c8cb05c3c61810a3cbe45c99f82713daf0102cba8b0cd892d70f079048f3a310a8652c314a71000e6946184b2b26381cad6aabe44c706325220f62a8fa019813e32bd177928c0ff3ab45ecf03e78850a93993c4e51b6ae5b0f21c123eb4591779e84dd5e5d298d9f0e73127135a52875192c2b33f9859dd2c855b3a0f3f615d1421d322a28442114832ba7f1dffdc8407cf6ec9e39d705f3293985bcfc744f534cc13414afad74298e9eb33c668ed79e464b3940693d9e65359669e7cae277f84e126207291ba5be3254fdbde00c6295cd1a39639bed4fdffcc5c4aadc21b1d9379f266182e549a78884b967002a8306eae9e6ee8cc36f8b37b9d34fc874085339f36ca90cdec21eeaa48642ab74dc4550b3df99e1e4582efc4259cf869c87c27e8155007f8a651b22374e212e28534a0cf7eca40e7644a5a128aa2f4ad0ba410e78a422820f761a78cde9a62fd4133cb020dda28b6cfa1a6caf7a1c9c57be8bacfb285931ef7e239a52582aa5b95572cd666d8721b126ba36064453999ada80a1241042df5f3d8ab0e7582516c27b2ee1697c536d0fcdbf5d2e10065c97f4b029c226281eacd8b1d3f9df413baa7420afc080a03852f28bbd39f3da19db601c4effc7ce41bf3144404c797a807cb90e1ed2b682033de7df484f32239c1fa82173b35041ae0e8dab8f404d138d3c8d21a8be2237b0858f5ba1c6341368324ddaff7fe77a8a77a1ac2b8d44680a97f1241cb4f77acaa26eff009a654c07e86172a83ad6068a37f0881397310934dc76f10597ab4440fa4dad7ca09e9d77de02a1a0dc75455104a1c1728d3187828ae68e30253b161a1c6262ca6332733266ce885608ea32d0b94b73ccbbcf0340519fa1ced25bac24861e112bd5eb2a08b9229248e93a7ed3aca4fa7f4eb04cf791c295942c644e304e569a862b7ae4e404524da8c5f5ea6d09ba25b5144617de8f68e397f74f849623cf06168d8234a1388485eb59b91917e5be4eaf1476720305d502694de1ec635851d58e650aa8e1bbabf2e9bd116918f3286bb58e41403acca04597bd7f3a1785bdebb9c9c287801d9e258c78e27cfabed6223ccec94ec8c60aaf76c720b0e4419e754c4e91c1b16723d90f893c43ff994714b8d9f8d31eed4d8a4b50170ce8c3ce2b5b38a3c28f23021f3b2b60b1daa9f9bb5f4f96a4b6271e5012bbc183f78dcfaa65575181ac21abbbd167f5ad9707e3ccd6fc74320b4bc78a18243e5261ed9855400e37044de8e57b1a54ba63fcab2dd5cc5569e904e8bf45f98849515b86d44afd06db0a23c4c1ed57c1db1d0a0b9eb2383aba0dae7ae66473746e9c67eb02bac47a3aa464da0ecae94d3fbbf723ce293e7f9b435ccc76de2f65dcab59a53c2e6b49ae2ed296dc2458e15eccf4750043e5b4829185128f8131e0f250bbc5e793b1770923fe259ef88cdb029b45ef37c6a4d3c4446b9e5ee8ca9f29f0bb361d55ee28020c95818fadc989a976b0bec8b65dce0634153f96c5e043c5a6c68b61797a00e6a2e6b4fe1b7701a4efa282789c69e60b54daf9b8b23a9fbcf92e86cb96b94580517fa059463bd3d04dadb9bbfc47563b4917717f44da752ae92cc470cfd9a9c53024ee8fb0a41eef222bfd3d55c69536b68c0e576f1aa281d5e7d2c633a8116635bb9302e4e58bae74bed2b40e1aa5f580c01f574f88415d2eab3be2ad4d6912d36f22833b799c63b1fef815b7900b51c8fb94ee71b24afb8bb8d497a7629ebe59161b3cede46fd539194f7da613b5ba944b615b0d4008d0db7079b56f877c681b7df8c8ee9502e817250f1751169eb4073d8b051353ba87913b3f3c5afe7431c00c28e95b2232d344404679640c14a7156089c0b4f8d02288c372591bb454de64437928aa54cce80a8b053eb43d0936c1525e3a08cc7322225957ced845bfb19fb2913805b0a493ddbb36b2aecd73a7ec6f6aed93ae908a343f001df5bf97d1f5b1021f785031563a53067eff727f6694a4b8c0bb3a2b08fd6115244e9bc60f1f765e2d0b56b3cffadcbcb09b739513c33c6286c22d10ed4a290949c859a4e48b52601f5700551945ca71dd525843fb42bca5bda387a5497264f1701819ec891bac9babd0f34145307a7c5d79c3ff9787284698bd8e090766b57ae357e84f7924634fe88165a79d1da1f3f4cd1226ed50e4fcc34fe352932df8f4feb23f399ab15203f6d5d1ed4fca92ea611156f189a5b784f8e3724e0a84bc6579ddcb25d2b0b638b3dca9d6fe2ab39f48fe95489d020f54b0ebb27112eaf528a0f180cd51a49f306936017fdf2ff176a073d5b838ebc0a82b9cafcea7713f985ce45c54d191f1703d4de03809c6767d268a825ee1fe657a0d0cef4bb5f49c4412ea9edbba101d6007f7a61e90311cec5fbfb7eb64e998b7b50bba516b2cb29d40b82e61c987442d55f0fe6ec08808a47146249e264ae4de4243e7d23bdb3705a843140ae78d34a935bf4875f153cf88983f9a10d1e2a7baf269963fa31e01b2808409d3437e8d8ccf602519efceeb60f0d0d7125bb111f2243e2814f2dfb7c4bb9cfc3380e769806a71db8c1785bfdf5dc61867b12cee6ced0ff0af982fec0e4abc38b029d792793adc452c9fd245ebe9ef74c0acf89b9a2e3c374b940a2c0f8c6b8ad78b705527b1f6695ecbb8bdbfce2d0ae0661559ebce09d83200726c4d61e199d8793b8465dc73672d3ad103cf5fb693cd0059a10f1c8201d0f29fec625c10c61bb051e72227095ea05d5407f7447d14502000cf3bc2616abd8ac439e6eb181c3218f69f6b922970fe1c722a0d2e6d22d6004db73f7553fcc033138151b24fb9bea45d0cbfb1723b91d01c1fdaca4e3068d9a9464f94c2b959567d0bf1883b2aaaea5e6793ae8e4df037af188b1f3eb7617d3a6a744becf46605ea23992da2bfb0a613a3de8a1660983e308d53ec05c67b952bd3bebaf9b5a73ee39de0e77a2c163544356c5967829acb902dd37b102f00a0b7b5a5212b4068e7b5ac0d28f0500b27a7a79da115f29e500d0a3392909d3bbf5100f21ade168d27914f24294ab3f4d0b3fb0cc548dd7e5de5cc92a62e6eca3d3479c1ce6a3afd50a8561291e5bcca86590981773288974708b94968e17137419d9930f58f0967be65e996c1f5b966b6e61680535efb5f029b37fa8976b47de1164f0fefc9accc0ff6b379028358f5fe416b14be738d1024822fc47e86e306fb1e09efdc6316183e1f015e813137013e69533c8de3b5929ff1ecffd50387d06b7c53c09d495ec4f646749be8803ea1411b3eace3c07b47794eeb95c7bb5cebe435b4ddd994cb8790b499374f3f62ac70116a652baff5f6314cc19b357f7670902adb73a5a5618cbb988c7cf45c2e1e921518ada19b46c13ff9be715f2dd7f982e40135555a95b120d9574087df79a8877ccbf1ea9b33b740045ffd72ed21ae915deb0035ee5ef5ebc1cb6e47e346192bc2e7521c065cc5ad8d63ede9f6f600430e7794dc89a4d209bf1728425211ba4abbf8e3cecdbd0670995cae045ea7b5b6c6dffc150af83735f43b8d1f362a401d31f723c2fdfa9fb8517afbd956c0feb52296939faee42845cedc4b4018bf1aa97d1a4d43e4031f51d5b861b88166360e094cd9663122de5d7886eee1af22368e3d0fa30745560aeccd0eefa5470be887b5b6f65fce94091a1213cf72e8134169a85ccc5c41dd6d69de9193d0aa1aede2a31fa123cf1adf66cf7d4107c94c02fb1ca9986ec67e71b4bc5f305742341174eefd40d35d73764afcfc28613ff97c2bbd3db0870c61a6fe8b8d075b2605d364f7d093ff234f7d1bbff5632d9bf909d8e3045cb0828512424d84f5f68cbc8ab5d23b91390f6f16e099ff94a5940389e178f176b363050b1187d88d8300ea9a4e2949a4eed41195bcf20d5b83d95c6971b6da42002de7721e98d6c2b4efdb5dea17726541e22c6a2f73dbe1bfdb886a155743ce9629d55e31740abfb8b45c8b51e7075cde443704bac911539e56e18233b2fee982f9eff731ac4ccc5d07f77a3cecac206f74a9a240ab37f981bb7b9e784d47191c8614d36ef3861eed32519b502ff08e7eb6c4f53d609485db39ad13c044ac1315a9cd2bbdaef7b98f5593e1502c36c72d7e13b0ba8b04ee2fbe28e4ede7498a847f5fffa9c69fff687c7ff5c1c78f9ab2ab72fc9d052a9d3a4b6747e8aab5769679d9fe2a67327dfcddd916338c5f452f8f0e7aaedb01877f281bbc5152ea9182c03b000ca6efc24f4b7be59860580abeb4e11a3e9bf1d6308f7798f74ce52471861ffdc96c1834c234804cc7344d6f0f200320765de14a6b469c9155a092ace08e2e1b81b6bc5cfb19fc7512297e0725db26fc12a3436ba400c7ef198f430f358fe21a6ee17c6e4d5aaa9ce0fda0b86b94888c911d5f542da6e36f7527e0669f5dbb0d10fbc8cf3685c75afd9247503aad3524d8eabcfc1abaa2d234a821316449bae8d4b8c179a569289cc4ecfcbc04abab5e0b628e99f12581fb0ea81e0309ad777834533aee7cb7ae991dd284afbbbfbcc875f06ef9ba81ae18b2d0f6256cf2812eff0454f54615aaa75ec8e79c4a52df12c21f55717312bf1fa098dadea517a56e19ab71287875a09aa2c61e3e4104eccb381857d030167eacb2fa39a38dc274ad1ebf5b4829addfbdab64a92018cec505b2de40c1cd4400fd8a98e4e47842425f709877f59ab8e5932bd841c43d6e93db7519374cfa5c3f22c59ebe1fc49e3db1f96f4e0c613c586a57060a18a0538c463ce8873745172290a72730cbd09d7fa1ebb731e358f07626bbdf87429515eff10a258002f5fed0e097853c9bfbbd7fa6a404297d4cb1f2d0478fe2de549d4e3a23a3df3a492783a58bd02268c5df25b7f457065078e25730813d6d5324e42fc0395c7f1287b204b5fbb63124870c47fb4014904f1f194f6848d82c8fe99709aaf90080b69f0bd869b1d44e8ec07cf36ed72ac8c76449d9e6fc8e6c0b94fcf95dbeb327cc17b5f6ff0de9bc65ea320b1d94ee6522911651810f699c6289d67f9550a9950832430ba7b917bf85effa76f6eed6b2519395883284bf39a8862c288d8be0da946f2f4627c951407d07a6bf18e9fbedcfbaa882972dd1607c7ca77e2af8bfe07b205c2dfd8fe354cfe5b1753b6cc707d507ae5844e56910c2160ecedc19b4c5dea1b7cfca37e14940f3be1c5610835cd6c9bfcdf33e7cac1a824ebba286ae70cccad0b878bcd87217b9a972b90bd861b6b881e5d13a834562726ced601090ff76d2119b5e2c3a80055a7e43e11d1cf57457975261fde70b03f01b8e464b1c0952d678341c63f2c688b9fd59d352d5e6896fc74482e252926be6829c419a2b7b52fe91bbe4b5fa7025d7ca36e74d2657d7dd917a144d4a2186ef6e01f975c4a7ebe50ea2120e052a60ac8de4dbfca37cac6ab265c52647978454c3c4ad1119b15c182dc224edb4c1f0e88935ce35f7ce69f8a550c9c28379ec0798cc6f89f16344264dfd009cd6be5a2f1383ef21c664b403f582e87066f3229be2c29941f704d7503c76f69fcb5819e1a718d770ffd98fe06d0827a1626f680867c53edb71e8f51303b953d88459c16e37b6af34289454e4b983acdd2680f70be6301ca56b0a6c0829d0e0dcf0f7d85485bcfdc3ce1dc3bc5b8675465bbea925839a4cb6d518f5f3d0c41e121918759a812ff61d141d350018b2b3916630f554ee85343740c09892ee3c9dc4525accabc2747f46c3cd8ee43b4f1f7df45c74df065cfbd30cf49cc6ae52d9e663dbb578a38435d903d42665924b701e67cd06f654cfc111f6d17793855009ae0d2e3d7be3165fa8289adfd4358ed79cbedceba20b43122f23dc34591fe27356097684d182bf8d074b06bfb3b92db1f10c2f92adfcaa402ad47c2d23c896db9b872d909ed1d21245765207b6ec77f38aad3fde19ab19af0a31972b6bcbf37a183674d95cae5459d313b051916e3b3c7be5bda34e0e291debc7b880dab9fef2262235d428ee93c6d54bf41db30e123736d3ef06ef76de345fc3b94cae7c80996df77c68d8b44740017ffb2618ad99a6df964bf0d4731d8b21f8a9e0ae56ee8c19e777d7ef03a2c0f798aea59ff78f0ffe09009cf17c5a5c4acd6f66220a8f1f9b8d881a801be547d9582cfbbc720981db976250e633e4fbdc4eb4872e9169091bccd4db003111bc5108e852a93d5f5c3eed693e605bc4d77d0c32b3903e57ac0b172c5dba3e797829edf383b82aeb71a522bebd04fc2a784b5fbeef9909e8963995b9ee845f07f2f76bbed33b2270047cddf3a82007bc6d2ead63c033a1045a13869ec5c4c2fc557337ae00981f1bb3e9671a3c5f16907529276b69697adf09cffc3a44bd59cd7a6397d8ce34068b12a15db6c1c1ac9238277a93f33f23d41b4373c9aca1d13f85e1b122b25b7faee32d085fc45f1934328211b42ae0fff38d8adac10b5da40666b1d1aa493a10caf65f704056ad0f8e6815248002427f29c18e05f33ae80463291cd9a93fa8266f457707348e120fcd10b281490894e5cc5f709f891626930f7a58e6cec693415bf0d147c1c84751696d6537aba3d49256f922b81a13bd323e29bda775a4e57e770b7e186dc6e61355b844eb2f143df3ff28b927b71196c91cd077f2a97c1f2ed5e4a4f98b541279b9ac5c2b0a235b1d7399abb7b22814155136f7d07558b381ce1c981793450c8809490567b3cccaf62df545cfa7911ea7232c4410886715e84da3159ea4be119b1db5d218f8b06320bf94ddbdabff7e5fdb560f8f249324b575563273e84294b7f38081ac19351183712792b5fc2fe697e1b5f18464a49321b079dbc7687fbfd4987e2da0bcb80af15ef1cdc6d83c8c70a4c9aad739bf37635db9a9811e0b338360da99a8b60378b8509194f0440761898397f1e251bd5893a664141ab0e4e4ff4702f78b42b3e1b73e9097ece52b5b7f83c9b03550fcfc997e0e7ba07484e2d08407a24845a5058fc0df81c3b22c3d53679a1df884195daa19af3d0f4ad16205c30ef7b86dab77a90a612de1d96034e94542215e3068f617717b829d8214d6e83296792575d8be95d86bb4f3b542456de2be8d6b6892936feb01587997519ca4d9a40c2c8714362cc149ab4d43a4333a86346b36bc7ef7952d94230794caa4ee1cdf66bc1fdcb0f60df21f697ce8d6724a6252d8f0f7928adedd19e324de94908754ff5486ee32fd3d1e88b2eea05befe850f760c210270720aedaf783278f85ac42c3d94cd393f654caad6be494d90cb7384ee17c2e0cbbbd3d69c24c606518c0660c56c85b0c78621dd3441f9160296bbea7cb7ee73243beb98cbbb762932225d27c7a6feb13421560313adee60dd47626c0fe504c92d31a2a67674f20a60277ea544b501a3af54a7f271e83114de0594016fa892e20ebb62baa56890aa78fb0436c4e6eb8bc783733f3163dd11e07c61a786cca1ebc98dad560569e7e7c4e1d4db7e9c1af6b14d5e1238ab2881f0fb4e5a4928b69a12b7fd009d9d7def7b51c8411a331770420f9c4919fb03d0c00a25f35f751c21174714e1efa5f6d0cb899c9f45bfd5f72565ebc6465aad035ae6a79367742c9cff51374722a7e3f15286bc6c85d6f2a048e3d6308fa265e3d37fd807dcf80739179b7059c274ba65f910917a481313995c776197ffe821c029ee7b55b3fd5158bfc2c63415323ec720cf6d1a93a6bf845a","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
