<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"fcd9e57ebf7a710838b477ca4b1f6da9307ad373afba1e6b7abe3c9b95ff5dd830cb8cd3f9165968037550b96480e9a78e0489b3c0bad8150be1380dacfe8abca3e3bedb7cd0aaa4e0cc0fe9a3d0b4ada87142559c162efd277d6510037207249ccf74170b6a3f09561639135c63a0a4b6e5eda2ff2c0a38898e1171e87480e202412396bac233f9401cfa39354b719782be3e2114c84cc2c10070b01c9bbabbf791b32da1d43f8a09593e2b718d98c89a3d7ffb1be3b94859ac5881c0881a83ea526c533bb7e07ab00634f7d26bebf4d8504240ff18161996c7ffe262112344250d65072a8a0b418aac384b68c5f481760da4904d09174471052edc8b6c4b58c27b4638ab6af18ec3c0d8a56dbc3556e04e6551d10009809de2ab11e377f626fac21d6313aa3fc3ed8ed89872a4afd58a3c6ba8af926170da559f0099225866ad202b68c7da5c5f10dca7830ea8e0c1686ee01b282e4dad07dfff271204d258f1a3e02ec7f8786a0680f573b53e6e617a59f87e33fc82163ec2a3eed512501c4172a3c35f2700ee4035a66058646c92a2c80fbd9bbccc9b5045d0bbe5a64f72491ea2e377449b2f59f33d5dd3e4900c1efb18da97f737ebb3ee73f13cdd160702124c9797d529134879ae6f2200c04f9482a2343789285b419d4add8300852dc7e12dc2c7f8f35a4512057f21d6463725c94eda8e6a3755b9abb61fa63657eef709939acf6617f971369aad7a898f720030a1595fc875a84899f8bc1fc04f6eb0e07d27f5cf9816bfd8d38e1df3e6baf64620dd2e664ca72a97f023e2f8650f320819fac3f1830eb79bdcfde81cf0351534e3bb1408ab633fb308e195d4c2ca4300b11eaf397e128ec6e37d7eece0b84b7b8d743a1762c7616a182098174aad45d8adff606bb6233c3488632b85fbdb1c48c0c8084a694ecf896ec443d653e103b343fd5d395cf20a3df06fa0ecb0b2ca593aa1092785a6c96a9b22a309561a71a7cb80ce0249a0449b38766d495aecd186da3c592aa7a180c705f9801f9ee227b22df185f53c0b10242a91c04099a5fa25717205ebd99f7b9daa2c40edd0110ff53088f11b864d51c39d1878ba0e29fcb9f42cfdea61054eb12d9a95e1e33516b560ff5174310811c44ee5b5f5eb36093a587df54f85899814d138c3aa1fcd8c87ee08a1ed9366ee7e3cac8077f6df892bdfe0f26eb6e255d74df1ae946b6714bfe184f250d2b5a711b9fa97bcaf390b2492be207f43414225e53d99a7b4f188d40c3b5b26b67f0e155596ac35c59b6e39d870c293443e3c7db3e17c21467c3816c3bf185433a7d68471033e32ce5fc4b10eb35e401c6ac432a65dfa74a9aeb34cb6d8af48a140b27c94c982b1c079fbe24d9e9fcf411ddcb0494d8cee17731b349842604614fe407be628a0558c74a519655e8f69004003e279b78ee7a4d55c657cd9b75a145cbd8719dd9eb45eb7ef2e38bd564fcc5d910f0ae26e6b0653b4609fc4bec6e84c8d152c4a7f62489da1d76d1fb72dc89725e66cd5476789174cb7c2011169922f388ac79cbf953c83e921fb48e7c13c2c1292957d2c2a03bd0ee2fea62d9eb25ff4f1413c6e84021f5aed68df250e5b5a40bfcf470095837f42389400300d87e7a384294a0728f4277a15ab8422cd3b965373a3f205a28431d80221727d6dea8f0c57ce3ec3c1650a8b14e6ca1ed4a6590beee0a32c90e188fb30a35e47f5cd998d529b1bef70f4a7662e6739e02988db9f46f940e846dcec93f5a0ec5c639ff0f543ac4dd7d6bf16400cac025ee9ed09d2a29387f18a76d831213dfbc647185cf6471e5663d19ce360af3974fdf0ac7c65bc61d87ea8299a3882e8dc288ddf9e53c6e703b953f2174976c06f8e37004d93ccdbf0705399a1c58a99a983d461dea53b12ba8f47195e607ec861a96cac63ef61534d03d718cfbfb4a50e5fb681d928b9474b9f7f15a909c1835698f2b6d0c65e4b999e59cf1a8f61cf4a522d4e8a3c41d875335343185318e8dca6f3c31f8a398f57401e17fabfa9d7751107d931fa5f0a9a52d71d1d649be10064f593787d663f6d7421bcb9af64a401ba6e59d7c2d101838ed79a4069c2274edd70b2a431350a3e5d3f8624442a518bd51426caf511ef51013a3e7c71a348dc589cc45db567c505fea2ddbf01841315ad21e930ef9bbacd6973cee79bcf827255cdd20a105f73e4cddff09fd7493aab93743f8ff8afdaa3df34a7cc10da3809ea84192c43459338dab20a209ddf693ad44abaa063c3793dec7c5ab848c2ffce4511ede209168c7a6be5952a8df687dd4c65fd6a70af23cab4f69008a7c7e40c3a85e111faa14e78ee6fae6d233420b4184f164991b7f92b3a18963740bffb3a8b1dce615d9796683da3ef52d2053db8f41d3554d649c61dd998322f970fb0d1815f8bbe6c33a129b5f2efed0fa8258b43bd089158f20ff0a09d9b1a3e6ea21916e897b5e57e2699ddff3068caa8ab626173e2ec69c695c1f8ce9da72725f70e70b6d83f63ea8c8d9be337c181bb58b00d7d807e4f3d9bdbd4907a1374533a6528b8f9363cb7cd8a074a28e8c2ff8ec6959fc174a4dc9beb59b74823a1555d5470c82701d38d70f7adb6ce2a858e0bcc9cac77487213367b61834fa1bf065cab231f9ad8195ed2a8913a599850fbbf3abbe7c8d9db4b33471b013e99775ff95983604580adf9c3fdb867e2496f1bdd019a7219e47f2ba4a391578ec393e7b3eed2c7c3571e18fd75a559b8c57043326db63f1f85b820cdd868219556a9726b8a9784e5faa652f3a4dd060e68aa8737f7913d11930509d223d8300fe30f13408ffbd0a80f128a3000710669f6ec2426e2c7dbd7b6250937da2be308e0e6ffe5616104a366bd8df1f2eb58cb5d55855965adfc08bea10b28cf1ef9ae91d7f229aea1ca4cb4823177161440a41ff55f290f8b02db7e7bf1c4e58aa60abe64311ff4ebbdf47b49629a5e702130de945a8e9c95d2e79774859a1d3e2be377a4666790e07dbeee4c6aa4a724904e4523de66cc822ff5c17007e68878371c49ab4276311bf1ce10e2b794c5f16b3514d110f60f94df2c2685255c3b15ff12b4f3ee1117f96928a0c89638fbe447d18a3542a6b43d62463a3b693ff2acde1c6441d513677a575cdc9faf842b3d48538358266486970c508d1bc6930c7c9a351be545305bae4800cd9129905bcc5b3d134393e78f51565634d11eef1a958bc775b643dd06358fd967bb146fe33edcecbf1bc9048723fa81fe3a664f6e4b06d32f980b3075c43f4ae8c509fdfb63a4e8b8584f677ca6947d401dd929e191a6927da336039b80adee1a2a00449a8fcd261e2fd9ba478c9df6398b5d71564f3323aa13b4543c134363e92a850a5a5ce911c691b1ebd2df96b66a239393ab50b965b43e276506910aa51559d525acb1a8db6f6e6cd481a39846b48f4c46b1652b699687c957ae0c46cea4b6627ad1d1a1c8f6a497dd3b1bcb95dd4618e3f7424452e58890fbb78f347254e2736eb9dd37c42c3c9bbce510330aadc00528515b7ca7881790b3fd3393c24d2344086d102b37a2d5329b96a85c37aa25ed3faeaf65c5bb341cfc3d2f192f93168b3f52fb52c2cb994c49b1d78eebf19d9fcf7382ac940931eaef26180fbf55d52627a3bf42140cb04219dcffa0a0a1d2726dfaa1b5f4b446b009f09c23eabd1b3740ee3bacec3b65ebdf2d0f6f8d827092ded6562dc5eb4df5aa68af241edd26a4e0bb1c228ad8933b9cc5af5dcd5fda4c71d3461394be36ccf97741aa5c3d299280f59608454fcac95b4cf64caf46e760e8ebadad80e07a2d120e2c0e3b484f6f9574236329b4e6351b436f2420bcb29d2599bfc74a3a78be7516009d7af0fccb2d26dabf5c2aa929776fa6ef1e657a3223cd3d52698914265807d6aa21373782a2cb62795b33df4e0c2dc6d47c954bdf1b0034691d4600127ff3dace7693c9cab9895f21c4a1ffd32c778b704bd8c70067f5d7877f1f7d27119c739bdb945a7a39243532b2e514c68cb8d5197a63d64c0fba92400b6a36cabd3ee5c02ffb760f9d25c63958df69e3bc8b6ffa059f850632bd9f34e6111502f82586201812285ea0f1e34b4e2ea28cda478c607042acfca06f9a13b3a93f0f3ba17230eb095b5ad752729101b49ffa8eeb6b958f744d5cde6541f251c4fa0df658afb0661870b3a40fcbf94dac65472b09b6d5d4ef0f147a223e428d92cbd3f4a6d877e01cbb7d8694fc7d3b119d428fa693b4233023f76ab1a1f38d48fa187c78d6199be43374d3a4ce7ad4ffbd356b2b520b3a54ed4ab712ad643f32318a23872b04b84d787c8a74f82d9f7cb1a694f5602eace76cd30e25eb89bd97ef5580fa42257422b924b7c427430d7d7c4f256672538005352426066b1d5358d6b63ba7a5545865929d9134105ddaf15a8590e18a10c75cc30d2e0647c0abecfff034c4c3bcf5390e36c20af65d714bf27e3e02a495bc5c52e4a585c8647f64aef1ebce4f8ed6203f5d34bcfecf08fefb255f1bbe549a15f00fd45974c6e0d621288026a5dd773ab56e3cc055357097e0c5ecdcfee4096a014c493dd475d06001ad19c3059e1df11999f2d57c2ec676547197422f8b0677cd5f9e9928d235a083176adc23ad8ac6fccc768891858476146ae71352018704e3a4f41db0fc2c8a780c38094987dab94e42140356f4f55e5fb9a3ff939daa08775e4b589826e4dfce089fcd6f83ee53595e89ca682fdc7de58ecce7ddaeb39ccc37ff2add32475c80fa656619cb5c1fb6da9c34bb2dfda45307c755a60ba1043599d706c49a3fbb4ba656413e0661b0ca185372186c3ee56301a5c6f41933c7ef05ef1d99cc24a3c6963bf3c570228ec8989177544bef0ed216c709c1ded075ab919e67bbe4d1dc6b1bb4ea14dd858b3fa245b803461c7666348b5f1255f5931eb9b58495e2c488b7633ad9d7e223f50d6bf670f1584962f3c39d9f8fd72714a342c0f2b62bdb95c20c92ed7f09224ee6bde437a01f13f7d7385899736c29eaba69e38ff7e85de6e2d90ec55a144a1051e5a23ce99e4a49353c559436cf231f1452a3dffe54a4363b675c2458401d46985e3e6abe2f36b78d36cf6e0942d7778f6c9b5fe87b257a33d6496a27a43b33c7eced932954e5727b70f1ae3ff98fc3151c895c7a2003a8c3fad766d674f081f8ebe24db1a2e98ccd5a4fff5f3a56c7a32ebcf99cf47204236f5f27584770761d178a233421bdf3cfa1c1fc09f37efcbe3b65f8b943913d2e9b159a7843cd5447b58bc3540b1b2d8f759e5cabf7d86816c1df7b7e14356f8bbb4a676e28dc40739ca80e4d2042549c525edd5780839afeb64ca96d75157fd802468687a8cc197a73a16d625db749d52ff8e085786a80885fddd6d74114a5afd6422b7e3ac0d8d118faf796f1084592abdc7fc19b22bf695bb1a38775b1a1688f32ccba953addad6213d79629b65b3241df277f094931cde9e8c03c1e6059ea8e44c0c5470e3ef73f4e2c8254e6e09f95057e965e3af56405a23990b86a3e86447d195ce6f950aefb8be640aed93f10fe212035e5e72728797d9a7e088ab895b3bdbf788e137b911a3a9fc2eef030583ccd3bfb051df7cafc88dfc048ca34761085ff456e7152d915f98497dcfa30d954ec7a037e28e7c831d4fc080679543c5fe6e0a9c946d788b73fa442c62d9c362556b72cefedfbe2d2b5a2f5331909e605c29edb5383695d4656f7f0d2393f5d80f37e2ecf1756f94bfd388e62d227ce9a29935646ba04e3083dc1cf6591f352600a6fee7fc748573563e61dfb6e5401dc6acc0d08f85c2c55e45b98bf71b63f1b3d91bb691de0ab873d3b3131dbd9bf7fe2fb9bbf863e8fc3e5c357d74576a987900273fd2d9234482317f7f80f1f9b2ab9baa0fceb409ab8c8326ee392616ea06c26b523647d5f3213eaef0f148c8fb9172214704bec963dce7dffecec1261f0974c8018fad3a9224cf423b4112072dd9bf972fc890445bfb342e81725c215a0b5ffcc0ac83cd8bc9fb9714ba9069ea4bb6a6d91216573ee99e45832e593800e760c23a934eea79e64b3dfb9a447492853c3570cae6fa5aa324b034167bee01acd029ebaba469238e002679c2a2b09bf9a7cce75b6320fbe87dc522f970af983a00da063e48eac63c2cf67c750e75c6ca817d6d41c859cd379890fb5cc76e2713dc7a231a682637a900a316497ce975cc408844339a882c213791a4f512b7499e8996dd2f0e0ac4b42450a592be9455d075768293cb1e42c7c36fcfcd7f956aeee361cd6d15deba19566b0d7a25da8fa4f919432ef73b802e7754d8984b108c615e3abd8830e12bbeff2b64ae7c2070c8c2c608b280dee12f0d367d992b2767d4c95e39317032d94f23c26d7be4d237fc893e12daab1238d6f0bddacaa6a62c94eb32b8fc529005e9e539897f59e6f98bf213ac5b98e0af17284a9d4ca2a3f9ae9d40f950388d934b5894bfb59c1be9827f472344f4710d0acd05662ec83ceb2f372ba83eb76210edcc6188a3d2c6674f4b2dce150ef39b81882c825164d266f9806bf57aa7ed4888159eb17729a93b545743e5a192a9da8ad48eec360aa26b50dd5286419fb9122301179e945cd63689d8594bec0126a85a7a66f4a0fb92beeebb77b14f4f250a500196f436f6c36db85ad34df156284933e7fe72044cd8cec02a2a4bd3ea598bf1d43151d10a57f93d1a45702fa2de56eea6d0699d33af9f6058c1ee966322ebf5b50219539c66b1d8e8272db36ad003153ad9da134cf4d05a871caf738f0fcc77895302ba5dccfc2a2897df8e6766691da66b037f053ea3f3c3e6954dd386a1965d70c50763c21835cdbf23c1a93d13d4e3810a5d93d5c656cc42dbc5dcbb12942ee74d7e268ea15e0f888be4d1f0d1b5dc0f166f08e173e95105887adc1909dd9bd4d9c3ac4983911c9b059a014f01f530d00a69d24e841f6f76666bc72844f4a0031cef8bd9cc4f120845f82d504ebc01aa50b08f46326c9a7a3fa3ad4877f11d0d5d410b1e3ca4a0354a1534d164ed52baf5c19cdd202eb1a5ad4e99f6f56305381a34fa56b90cab53263dd657f4258975d9d765dd575c32b74ff3e94fa939a3ad86a73606234a0ba85059a9098d6936bd0279d26a9b8ce93329c822b46eb5077a4964c2ab53ceadd2999939510e5380b15256d44830f607c58e67289517dc6ff93f409300061af1aaaba4328e0fca9a571329d132ebc60c8f08f426d01728fb6b1e76053a7a2179fbc9edb9af6da089fea553cea944e751dca5b588286ad13965f38351179966ba4c69a221589b5a1ce54b47a2ed69f4deeeb624ec422564a5e3ed0d689cd261f0de776cb1c0ca68254eca2c2efbf27366f9dd393c6487a669cb9b2d52284ad1417f0d64d475c986cd4eab0cfee445657e1f472163414bad4ebc1ad73e333ef913cafc144302d99f41abd5fb0e462678b940a7a438ac504b7613de2a6b25610093ab001f135188fc22cf2c2995b1e11d4a4f633a7676d7fdb4dd2183c3cb8dfcb4c9ac35456458852d0992ff10399e264faaf76b8cd5359754908650e9e5ee8322a809514538200603cdd0aafb7517e94a7d4d345994bbb969b61f0bb0de6a49b18b637909adbfede3e846a0f1e7923d59b9de12092196c87d5f7b13faafcd966cf9f9cf33286f5863cf37bbbef0ab1dd68bdf8ed6455b791329b140c16ff430345489c897f73d9d771fe8b4f5832dc296bab1a51ddd7bd2c040c31bb1a1b106e1d2734f00054bdb0ee0e72bc817516b3910d6df62355207558144ef8ae1418d179f514f1d7cfdf423330eb6fd20a0ad78d91ca7229b2a6193fe6e4d7a98153b524e55103bda8974faa685d13a7bf5d14f7d2e2cd7313f727ebaf2531572f7da53b8de12d6c45010d5e1888f9d59f81c75840d92da66bee78e13c5c3011c9a3f288d0b169fc850a7783cf272bf5d908aaddb53da0ecd594241cf0ad9b5a25f2d26b98904ce630bbe11cf5281a7a932a581b6cfa87a008f12de9b16f0279dc3b1be6e145c128e108635c0fc0b462e41ca146d54e80bcd64798eae60c46ff264c174ee4f14d65646698483cdb83e94e699ebd4a33e34751d4ff7069c558772cea3912cd3ee08a73df6c3c8367c2f2a3c537449211889b7730b4d62e4acafcfcf377f874952ec787cdb11565fa9059accc40115da4bf276a14e12f4675578236c298a43a6dccfa8d2c59748d3e7058aace3b8bf160cb5033eef19668072609b608cb2ea95d5a6683f669baf7f965d5df4f81de917b80817aa60120e1d1f350ede9b20dc7c13e2f2dcdcf820b20dcf548a24356fa02a632bb253344f6f6839f53e3501a182c1848f08a6891bcb2cb5cfeb57534d1d228ae649ce0ca3b8cd9b9c5dfbeb8a47b0c99506b17fcf391788a99908b53fa3965bcf6bd1ab922c27e0911fce783f0f1b52e2467f73c9d2be553d586ed31e9d3310f17cb34d4bfd04b15a645fdd991c29a6101cfe92a169389d6342a1ad683657c847097bcda14d67538edc3cd08c60488883c2b579c865b05ff8905acd2e202cdef0c9084d53b14c0509aeca8aa27ed7c008c3d97464724e61fcecd19e1b6439a79681a6923325ea64ec8f90624dcc67da5f42cd38040f285839bd4cf9e63d533549262a01cd85fc1d5a87a23c966f0554cbca6f3a5f18729a2e31e64c169c4444abdd45470ef88dd00e4b7ad95307dae5bfa9a507c13a19bc2a5017553242e50489f3f0d20fcf5abf0bf8b4c59b8fdecb4d021115da998d315e2fde55a08c869041f3a8de3ed30d7cef67d96894757fc9d5ebaf26abafe5470bfdde68bbbad7ade1fe2b7b0feb80948815bf86e82f7ae0f7f6479bdf3a685acf332d404fad4a7cc02bb3da4062848dfa8ebb902fba4911004c3a6689bf459e6e636d4793d02f26ef139bcfb41f66f7ae26d2301fbb9f427ef866b6196e715890a26e79085a72fe449338e6b57dd183d6756fdb58767f62200a482c4450ebed917934165ddc384cf0a7f5dacaf4863f6217729a7817768b52a47594c3478c63cce21bb4abe7f37aa71979dcb2870fd2051a111f0ccab81cc09482056ea039cd037d10a394a0afa3366749cb0928a3883d7070693c75039e4f6fa462338069287c9ca17bf4fd5a5eeddef358e4725fb298a0bc764c64573640f8958da8d6439fedb65f4c60af250c0e970dd7b10fbe0dff3d5c2e52922f86dd84697d961c4e3c541a1dfd02220e1632ed8522bc3eeabd6022d9d35863436d750d2a881bc589d8cbf965dda7269c01a8ca67d91407a1d963c82bec196c8322d9354f33841416021228d694fb659c6952eae32262204e5bcdd23cd081c82821d1c07ed8ff2ebcbf5a3e6b47999f5149cc1bab60dc1aa06cffc4dab76205d87c3131bbf109c83201bcc6523cba2be6c8ac0623b71f5840b2add5d4734076fbbd981bad4c183b4f0d709ad498aeed39028d2e2be201e7e478c77ebaeecbff96ecff45a8993a155c96f10708e4ae43a8fe9d6ecaba693acb419682bf677d325282dc03f776bb04cc6df1590d4fe59063efc64b38dd4f8674d4a08bfecc1a4e39835fa8b55c9a43b3893a00ad66805d3e441856a2b8e9ee9048c65a9bf8965eca26b3ec821887bbed09d9aac51aea7d9f838927050ebfc0d0edd6450f11e7bc39030bf881905ecc5041d0345df022bc347bd419206ed3c5325f1b9f6d611aee46b11dfdcee7c2fd0c934ce989b207640b55c2a6030fc1731964816ba91c23662f494c1eb9941343806dc405ba5123fb207d0563d5eb3f998e590dcbfb32661f1506601fa9e3d54f948ea5ac9844be5ce8df162f9204a0b2bf77a912b39174fd7ac9a834efa7522615ece281bbce33d42e62fca93b0ecae465d3d962644fa9ee9f87f1eb971d746e743df246da653bab64c88e5ccd7cd5943ed1ead1fa03f21459443649e227173ee14411c4e542a70363e766125540fef4e76277ccf0670d3303903c65fa90ad74ddcbf21c6fee9d25f20278044daa16449484b088c0a2fab5e71e827fdb862238f239b9011cecf1613b760ef7af681949b3f9393a215b8dce6a1b6bb4329b014c989b2397927bef98319a3a1647dd7a291a0f9a54442ab4fb646f36afbbb45c92ac273a96df6bce921f2588d2e2e7d4d84505990cf99b30012db0ee36fa77e6ffb4f9f7095175f42bfd46ef1659244cd9e1c4a9b9d3450f2d7db42046368cca2d3dc13c44f0caa989e98e6508b5d5f28b5af7e54cb7ae745f88d1c1748a22e93cb0bc441df9d2e4aa94ef4e3e78b730885465174cbfbae245d87b7d172870428efa562a70a07e81108a3817c91355267c981c314fe0ac128cff23a9ae64eff66ef5642be1ba1404fced2a9535fdb05dc21818d87765187d8079dc55237b181fd490987fe0eda50b85049871df60825834f33e21fc9828ae5f734c35c65c5d215f941728327b35f0e657ad0cdaecbd659b644b4577114f5e96577c2ac92b7d4b1b58ca377ca1fa396e7c7861594f0ff75bf5d6b6aaf69f4a38a92651dff72b6eb2e1cab3a6d6f953b3fe7058d73150b77f83a4c58a211ee323777e9f4c675461b543776a87612a7729291cbaf33754b50ad0f0f7aed31394e3b3a393ce5b33768d78daa04f00dd5fa14fad9799ab58e2bffceb41335b744cbec97d6f21bdbf508418bdc4719c00c39df495f6a50f1d9f369e7112289b693a27aac7ab3a6f86a13ac22dd0adc241ec010d8003c6558ba1c952e883dc12b31a41aa1691dd82c066f4aa51f8465298d7b7f8b51b846e49da08e320c0bb227e93652d8cb1a5ec2b0be7b1fb8aa92ea1910b018cbb2e9c55541c96e3681849ffbaef3b1e97d2fb9ccf662e2001cf9d1219a221c9263ecf401911f15add0e3a364ba8033ffd74adc21e221ecea6d766697cf8fa22a08c42553b0529f6b339823819da55c874210c97b5508131752465e0dbde4e6aa40736f81656212a69bef8552a674f69aa7ab775cd1ee4a51d6734bdf8c281f9737b095dfa8c81dff1bb0171184b90d424ba46c1bcd8dfafbe473eb0f6486379fd6063419330d0b7ddaa5b370b0a55ad3eaf9efc842a00df1cfbf2ee052280f68b5039e901c63664b5ab51bafe54ca66eba22af91a6321020a9c75d9074daeca0f6d8d9d00fefe3ab672929be505432c8cb435a74ade471d18ca78c6d4861f43d48d731102ccd240f665421e0a868a350e57c70a0e4281661d9bb6ee7692b7d3c342bc3d490d2389928ee682a2d0618ae448de67b14c77ec4461bf732103d416817e70f33386e71b5bd7075e536038c6d3fbb33b0f339b895dc13e16d65c99eb45c773662cbeea831fd0f64c08cacb5e41d5d1cf10c6e9f9acdda651204262525709967c8e05721b08434b91c16d9a592bc7d3d1d76a98e444cc932adb7fc2f207d13612db39dc611baf98a81f51094e637abcb3fc41656163b9f1a92ae48ae6ad4dd05dbe2c6b77a958a1212f6b7d6b18d92c5e58ecd3f74e6644e0f54d9886665767e57d6e097eb1a83b9d5a7101b435295e6b5b32c65c8fa5885663a244b876142a5a2e5d39b7b00fcc023a2bcaa659d79634fc75a5ef3d1e675e1c47f3d72bfb7dd8653b599428b5375ce445584deb67fced6f98e439a727ffa2bb58417af3ba485863ce640737aa51b0c43506d56f8d8a20ef1cf5e0cf17108e18c116879baf54ff404d19f42cad44dd88bffffe97bb48b591b35161ac6bcbd2adc7f923ff24ec2b1819f978328540944cc9b152b2f43a539b447e608829a2ec4f0f4e275683d86edb5144379a1f8aed498dac1356364de2f1fb46117c3696201bc6bb01be22fa37e94204da2ff69af98f20db7d0567ddd8dbfd49032d9692dcb36d84e01c9211dfea17bf2ed4134d6c8e2d9e15e50421f6d9dcee97348981c4cba0a7aa6e297669b8b85fd2390591cbd674681948371bb6901f0fecc420337c39ab29377aa3bd57173b03f80ff0d65d9953f6c9a1c67167dc2b362b6d37da03a229b5e71e6895f5a1b9251a07a8e1d49e385fca7530894ef356720fda3c99f82177ce83aad1b4c6fd6bf24a3aab3258e477a3af0c13a870ef1e218523264acd0e24de505b8a3e12d2bb97011fa906619941918620badf7809a662f167076eaafb9fd4985cbcaf820a0622c984bdaac3e6b8b67d547dcc772f89bf93a44cef6ecc859af54f45323d1aa12c007f79bdf734205ddd66423123455610ae1aa2336579b152b26dcbc140a8afdd1546b084ee31e52c824c6527f31e13539210b826759f72a5b726899583cf72d00f8848e859d34848e3d3a4c706720205642959333e3ca6dd5cae42440068662eed1c68cca741323f698beffbf3d0c63cf85406c734aeec30b1ece4f968f7b1a31077459fb3256269c7c6baf28a1de53c3c7351a36c3f22094fce6552df8b992b48d2b273263fa12b25e0453c9775e3bab175653aae7f6f96cf6340f5e47e72ffb50bdfe906363f0f611c66a0dc4ac9bdfe3b5c936440b4d583b9401f294166b6551bc1db7603000a483c0ae24a9b53b166c92a6874fc43fc2805c08d3edf9636c8e6f16e5a29d99bcf6a240787e046443451bf03dd467e04460bdbd968fd4d6f20e3c5b004ef0a78f32e9073ad4b26c0adf7527a9b86e60d88385574572788bb4ccf8686da66075270a174ccc27a58af9f42181f3b57d03b67615f3b73847486b1b35df82780ab6d37baa0c1e2af8139fdbe786843ae6f71acc7bd759a07bcf9d3dcc25ec5138418bf307ade1be61924a4ad948382341856563af7cf9f47d6c290e39a4e7492d007f82576725aba005d2bdfce73050b793a5c8af44c14559405f566018bc318af5a74ae3d15d9b192f25fdf5bf61217e655980be5f2e2d9b0df9ca339836f8cbd2f65659d891f114dabfab5161c1b957e3d31e1dc23897e12187bc8403b6f3a19d976a70f47e5e55f7c403209787da05cc676adfa7282a4e3c7cf2c4eb50460879e80bbd2044956fcd638782bf82e131900265c81fc266544cf84dd31035ff96ca51b5ebbf37f90cf40071f2b00fe9aa01ad6acf7d27457fffef2c1b5b916fc1d5ac1ce60498f5a740b62e864f5b280218b38b1fe068fd2fa816f420724579b3a02ecc689b12867af7fca5acca4363fa3ab83feeccc14e956448f160346ac99d3425e765ba94203d000e949206ac2e7d977a2dae7367300bd56dcdffa43d29635593e355417849feaaf5a33ea2d3ddd63a1d734143c785a015cd017063d459e2c2c9913acc169e5183d4e09db6827b31f2a47efd7e35a2d15ede497626a2076439973d88bb4b379b5066764a19e9286ee2e02e1d5b855e8b14dad5a0a0f1da294d82fe1c4361a92e8c3f3199e2933f935224657fa0af7c5f28e3556b1cbfe35ea0c0801b30143e72a21720c6d673e4d2247f9cb279b0c5483567ce9d0d1dc8d10a3362f5eb3555a79cc83c7c8befc8666769050c6d4240a542ff8b02d61851c559d49553bfd409d36f2488155ca91c34f4fa6eb07c0ff474c4de843b68447f4b92f456a61bd398fcee2d4e4cd8a3676aba1db060a98ed1ceb7a4b164c1b54dd95cdf239cc604875ab673115032fd70b5ce997910bd96de644e7d7aee194c8b4f67a86453e4debf4c47da1abeed2461f2d7b1c9ddf8a734d85d309d0d692b656aff8775e810944e204d29d91feb35e3623f31eb10db9013ae450a7f1fa0ad6ac6ef06ba7d4bc103e4a39583c2fd616b7c5e91232184012c958ef9d7064601f5bfd1eb278b9484cd90a5c7a617ff94a3698ee58145562f36119ccf551865cc1ad7af6d6f40ebe67264b4d6c0285268285352f27357880cbffbd666ad198e613eda2bbcbf90ceb5a42919d122e087bf632ab6eff04ed3a100ee7cf2a7ea37b259f65ac1e08a3395a0af273d51f59ede9be405a8177647758eb20e441708aeccc4466278be015291c4bb3b2350a59ad724e14b24b103c8f2fae7e2ee06f6b6ff84f3052bf61e769003a7cf36e1361e99f02f076aad86a87d11131d9752bc867685d7d84b24a6fc86e48e2f626440540c53bc667af80b83fa9ebff902c3acbe213b6842ffe078c5c6bf58fb4984f84230dbc0bd94216454a0faf3de8369d46b82129d2dc061c6d288643dedcb2d4dc7f8aa083b163787495b06f33cf1e3c98786d227fbeb6f57ba1828b076fc98fe1f9be2708530c3e56ea8ec9a2284fe392ec05fdcd85e5ee312259073d4bf3ac1361adf8667acbaf30de05989efdf6577f210a0912ea88dd40521da255513bdbd41a540b8af2767df9ba41cf5128152eee87c9c72ebb4c57c479335a26d7465f77c360a14ac8243e4c93c30531f830fb7cfcb5b557de13b225b2ae5ab0bc37f30a685bcf5ea92848d923fcf277896c12fefef6b78fe2140b7e5f755c0462d204bf7238f1883fb591820a9f531526eea12a2b15921fcb9948e99a3aeb615e8305496ec22a81743f8a625987e7fe0d5bc8e5599d37ef6a9cedbe8998088a890f9f29a74002f5754d0e8a48413d22dab3e6d90cf7920552df74336d62ccdb1b0e7c544a8d6b4858c5f6b59d28ef0312297589ac07f451cfef2f3b805389ede0e67df83c818bc858aeb8e233a1fb9f8b5661134140a60871ac08b57ac9dbd8596c5e541803b3c0beb337909fe2f02f11ef512a41e9270e0798682a450a9d1e535bdc8bdb2f5bc6e5891ed312cf791f984a356e59def78d3e51c19b56d1b38439bb7514223d8319a8d331c122cf28a8e2521a16eca378621d52be529ceeac31edc5fc0efc670f4f7a86b586994629f674506a4747e8552e7f473d08c0869fee0f94acdbe68ca4f1978478b45766ef5e8a3f91f9e8688905b4b8c330fd9085a974b1559fd85e65221db57e0ec9c66d85b1785a8d2a6b3f7177095d0a025afda8b6894a0e42661173fe270773157a5058ee13007d8a8919426340edb41cf6dd209d7d3e1d345cffe12ceab303c9fa25d96d00da897d102346d88d68a1f34da01ac3e5486574ba0f636bd577eccd68a3c46ea8e422b6d2b741f1ec08c68d90d0407638b20a87fe74a8c03fdf33226b64f614dd1df6f2a30b8d6a7a3476c6fd227b3d6b28594ec736aea3bfcf85e9a3f0eebee97fb762d3a5772f7b7cc935e661496fbaafcf2c99fe0a8fae3520fdebf28f6b686746bf72934c8b1f718b88504fb8d4ea4ab3976f041202d8115deafa34f7b885d679b47c4da61ae0e5145f6ef637ac96d2ef67641fa384283f126fdb94c39cb7511eae895469e4efb29cf566e0e64760eb83e2b6dd0a65d2cb1be555ac1a67e70c227c9474cae5c42ee4a17619e9ab51604bf9d305372672346eb54631b314ea59fe70903e8820fb38fe30f7a00dba7a3bf25d0e9fbb8b09d778aff849fa83b745d10af65ae96f97ae44a6832ff2ac6c78d35d49a8c759944c253735563406e140c7a1523f8afeecf9483b648048bbaf51f9513c5d797d5a017da75a8b9724410a6e622edb56d7e1df62ac39b241935480d6739424cce7d71ddee7df82dc1dd5b0b51deb451ce767951741deb91c6355be0dd13b8bdc18b3ec1b6f88b914ef537c0e046a73e6ff388bb6cb65aa929aa62bb0dda4ba0e9fa170f718fec3f9c53dfbc44afbb72f6e309a6bf3ad87a19df9664c4d782cb7d7b1bd141fd9609f3f765b35028054cc53282ebee0a8292a5bc604018a864b07516a85814e4193155e1015e417f752101b2ef64491907e614051fae062f58ad5fb9487fc8340b7d19de1d64749e2b78f631b7253898e6108c4268f529dcf9d4a44677d63f05fca80dbd4101211c6b074a847e583e47fb86f8b660e62f23614078a5afbf3cc364aac59b1304d4c16ddbb276500cf5b11a5ec81e866d9e3d0de25eb44f583a28b49285689d800806cc32e023c73fb0cade62e1d86f3d6bbf2dbfe6b414ac10be9cee0d45a96b0fd65f8dd7f06fdc6c93e2745960e507e617cf7ea0c8f8af280b6aab028574f6c16e6f19a1077814f97d761c1ed8578eac7af5cdced712708fa9b13107378f42dd319adcddafc8c296a5b464f5f46010c8580a79b4f4461201d394b3632d390c85554f7d12da8a7fc845d12a5ec7f697ba5443104ab483c48cbc3734e0f12ab2f8a7e686c4c48f33f51989b87b17fcb62047d01fd534b5aaee9388916b08522df08294808ba2f75d0ae8ac11fd6ff02e56bb3959635e9a9fb4d15e33a3d1921e71be8a7d48b063c912efa77dee6781686588f092d7a7298e530ca8b8e685c426ee060b05fb5fa2a8e56978a99cc132ef25880c4f83a2059c89873f4220692ef6e4409ce1310e864688d993dff49c30a07b42c8c63c7269601328dca89e5739b90bb6dc68f0f03fb347ffc8d977a738e3726f77bbfb16d1e4d27c13ea97d3289e844e30467d92efe6e80f1ff67ee480b9d6490451d80c6d140c16b3aac574f0c41e2a6f8f4f6384e30408601bed58862b7599824aa9dc795acf804208f31743cf843ab38c1eda53d7eeac58f68ce3f9634a3344d6f600a7087a3d6b916cbbe26bab959ca45475c9fa1ccda45eb36405132af4cf58c6ca228a41875f1afc29dd738868411ac0895b9af717f7672a276870fcfb7f3a3ac59fa5d87e08b1fc79c8af26e5d817da708533ba47b4c686e91dd6801eba9aa9fccdb4ad7e65d2583004d29295101cf1eecd8dc92d025340b59d9a84bc741547ac097f148575e0fe03fe2065cf5c4d3a5d1e87faf961a0d9cd663d092db437cc60b087131d86db84d61cdfe60165e62ffad823226d9e284385ec4ed3ec7cd4458d78af63a3d6b66bb2ba84b2df3800365144ccdaac5df4409b46139d08035cf3c3d308d4500aada0378fc887367285e3ae8f820c39e93dce0fe68140e0805233402829af36351bde941f040d4dd1a4750e46290e5bf3544f3c1a8ea197194a4758c0fdb48c4c2a10d8d46c02192aaba287f3d1e10d56ab74b591fb86a24cde1d74230e8a3c8b878756e762cfe858b38b301d2dc32823ec9f90a5897f4e86ce70bf09463ddf4a2bed57f3e4d86234793b4a4d900ec8f5a7881ac5190069eff7700a3d30337761d49a434f403dcb15f129beca47a11a0f0a3fca76b5820918065670642f0eb29061057ad28425cbf372a0684204d94122d78050c8c20bac723f6c04b7836c41d103ab60673a6de8b2375dee4956fbdeb7d1af92f5ee98c50aea7292442fdc26b8d4f65ccb770f8ab36e8ea6eb1405ad14bff73c38d991786fdc1d4a5a95b0fdb6beaefaf9cd75eb0959385f8a6ff5eefa7eff9b248d3d56faf102ef7cf31bc7c1695e0304f4eeb835d555466c543c467ecee598dc2db6e9f478c9ba23a533480f3a364f238bda3cf86da558041310b98ea138ba2e6589b75520a96d006be2c63f1685845e27db5e78aa885101f7aab681048618ee73338fb27be95c7196e7104e0ce5a015393aa29b3fdb3f7edda933b00e363c9cd0b2c900d4d3de28b6894043f1b2bf5b219380333a42e2728364976a0ef66d8564a1df4658f4a28030e15c2afbd89b69c38545d58c25132f3cd3260913767f8524c1efa9b4d3e72ad1d1b214149b081538a87dc40d6413f216c013f60f51a44e4d27d8ae7b903ab3a102889e4a6cc226c2cdf46d55c932ec67ee051660b13598f1bd6f09183a5ea4fb847e129d8835e87fe274278b46a766f4ef4b8e36193edc0d211fa3216c5e23e15cb28dedf4bbfff6adbf76ba1268e4ca4ffb0189dd5a093b80d24b719ecd24612495ddb94c7533601b51ef3e35b80dd0a5a81f2ebba0844acb8f929d02c5112306635d77835cb6652429b03d756fe97ae8f6a85bd9100ca5660a2b239e296c7f619b6f036bbf3db7c9cb71577a70f8398b4a95da11e838d9e39b4fd6962cff63cf7549504c650bbdbbbb5cab9c711d3e4a7cabde6e5713f5f3468fc7137624d05af7d25946416a1a355650cfeaa2e8c2d06c9d6416655072245e84a5e49a86198109e530016b6d49a27c3537d88bbe4ac0ffa8f90af475d8b35da5ea01e2069fba205dd3b04b795627ecc909edd72add92d0001f42325c87172682129c6b187fc6443431401a00f71e16d1ae84a1fac10e631d408c103ddba4e5cb017eb9142507698b17e25ab01a2c76963e703b116d5ac221a2dfe518a0063582f5db1db6ebad631b043300217b216c07111f692aa1d23607a80682fb2a0c9e14584967698f90bdb2d6890307f72028b8313c7d71191a2e5aeac913a6a06b29a79350841cd25b70d2a7ddfe1cfe974657e4fa915412a55bac1277ddb3264c558f2442dad6bc1731e24d76ca1be7cc34a33150cc8282121756ed6c37540b0e4ce7c2f3bed224a0845d43214ae8638286464653e7b0f0fc936ad0adca50cf3bed9d78610851d07994a2369898e78331bae605786888ce1d8f11f313ea1a9b1d77c6a86f9ef931b7230e38fdaa67aec94fb40a923a206dc80be55a194ff707399fc315a2c4fc23ebdc8b061b0c71847a16f6bf87e9fcc0a7448df91f37ba388ff92b71edaec950bebf61f407ef794abcde33943f1fbd5133e1fae074fcfdc50bc885f4753e0a16d7793be0a8af1aa31354ea6a14b4e5f6cc45adbbb5ffdafd381d1c8dec0505a1f76db76ae9411ca35ebd2667ea18016765f47e52459dbf0b2cc6fc64590c3ad25b1fb8ca6ef1e2fa86a637adcfc9d31fa971b9d100c2a91322fa1fb1ad131330bb41bff134f00a361f8b0d2350e84ed19bd7a6388fe27f054b62a50abd7046b670f9363613a434f28477bd6243b0b06f4f7b406e0a61152a23c59841adf410d615e20b9984fd9c104ec9ca25274b4ab978addf59de2c0e13bdb5664d677df0e1d3e0cca026814ef7ba95a1561061bd9917ea26d6235b9a608030a070f2b92ef610d07c05fb33739e256ce93325f4ed894c0702ad8efdacc7f951223fa79ac7c03f9099a12bdd6fc685aff36b0ff41f31d196ccc2c8e56fe5e96416219a8c35922c4e85d13804e2b0341669a4fc2ead85d1bfcd20bd4787e3958679583f4cbae6abcde00839adaef768f5b9ae85cdf85c3ada264ab98fb159fe2549870ac2a68c61d97d5b48b435a80610253fa7045b11ee4f1a5044e8bf0190ba27a8bf72fcd9d4a4f59b070b220a93591c78f9ebebe37de27ceccd3b182a98632d3278f44f9784eaf003756e2fa7bf1e5d585d6f170ec49d5d57b2b20e85b8bac4a717e696599fa79b8e2c7ca914cbd15e036beb9953ab91a61e7a75a508e91780b60a88d7af90a8603df69540b26dd8c2f7b57e610d273c42a13b924653329335613ef28adadfdbcfe8be8c38597614f7bf79adf2efeaec9328a993a5ac2d00caf51d07e61f83be013184a5af93e1d8a9da2fa9ab9a126d086d8b459826bd9ce4f2c1e41bda69fdf871ef8521d46ba7ff0fc879379ddd0422e346df86375c178c3b5e991956d70e1f34919cbd204be1690a9fec6e3d3c77cb72939477d5b711527688b37ee713c7b0c42eb6fe3d312c60c1688fcf4f96e77e364380cd5ec1e72b789d6945d077c1f4b6de1e1fc2196ad3f3e522ab174c7a5324a27714835666232dcb0e62b5ce5fe3caad5e214f38041fd190ac0eefa1d0ea93bd424f753e3452febd2275bc0019b8f5155b0b956cb2437abc3b154aa9f092c67bb2411abd15a059c05477c25fbf93c179b75ffa4e98ad2fcc13b655a3dc01803ab12ed8cf2a1ff99bfde560db73fd0dc43ccbe8a94512a7442afb72e7700456c47e8a1a1ac59da18bd872ff4e9c543d91bc726d6122a6bdd966e58d9322141611a91f7cf8dd3dfddcc0c2377eee9f3b92a3e8adc21823daa3970bd5be426777b24bb35833e0e43e17ed65c462a8889533f92c83898fec76d064bee16039d56d1369eba602c7c1bb63e25a745cd72b45ab37069c39b01a36ed40dd1c8030084896551c0283ea529515dce22717972bad0c6769d4f8683c7386b1df3a4bbeed0a130ecee78920d84a700fd1f18ce310c58f494a8ac1dea9d4cd9cc61a7354eb800887c766da21247eeaecf9c53fad6d99c77a598e58cb90d211f85990d6fb97165b0c3705baa51039547a01dee7ebd19fc1f9b7767058e1b3589c1d441e546cdb2a9f39635d9b9d36a095c8d732fca0a1d2d9f1","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
