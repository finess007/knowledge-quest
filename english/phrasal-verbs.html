<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"89632eee07cc33912b566990eeb053b173f50ab886235eecd20f0820e81e09d5e51f2c2831a63db0c848950674562a08895707f34388cc5c6f3e69ebde7a84b1acc58629062a3d7dfd4e1d14ee067852913b6d70267af69e5566c43d69a498af17f7fffa4bce6451a9557ed23c729aa75126c6ad60ce43a7c44479cca25bdbbc4a33f9712611cdd01a89314bc0bddd2f0c127a7207dd7b7277286099a930cdd47db372be4f5c57313dfad33d19203d168b5f4de954825b54c70cfb1305aa0343c1a9a8100a770d678de3c6b06bdd4dcff66a3751b158b491b7e8429103a0a97b4d88395ebbff566cedfa21963bf58272c72e6dc16df5484f269e01a5778d82d19219610367c75b2a0a97c63c3d54e9b38daf0747cb37893d2cd50bf6db9f76aa74c74f36ba23693cc01c9d225f5765ad71ef43ca19ca1bf5d057182136692b85e6afe6514fa3e60a9ae216e71f72cf47a5574ddb830f67bb8649d4b5075905f55f152cfc5ee8431f2ced599687996a67092759365c53a13d1cecd859e35acddd03a2336796246878ecc0e357d5a0a27f170cc56756711157c9b113c000348ceff46f13c4b3ad7e634eeb1b672c15666e36d0fd226ae7e5051409e2d8d1fba9167897154b79a0c5d85ba0ec1e7035b0414e57ba432771adfad4f7ae124c95cfa0a691d166527d3dd0b7e46ea13601d03c1c6440b2bf04e3b322ab22c3886bfb29ac8cefc9013ba1bf43c28aeaed4ea5015d28032bdfaf10fd315afd16fc5ececea1dc30aae892b2b19ab77e09b475cafd1d0474b454e76c88816f989042aa9b5089ebf3ac058c89808d4e534109ee8618f909dbb5020a82c6feadda33220b78a05d0677a91498d0fa25de96a49b4a90491aa5e2eab11a9937f1505016a5eea091054efd89147cb9c1b373a8aa4722d9b3741701384b79d53d35ab288788ee4d1ee15689e4c11f2db365a49563bdfba5e6d4ffe19a83bcda07750433e6a9acad8f8e8a9342601fb4294dc7978bb8b1840600f3ff9d570de17f7cfee2ae02a8a7ca3353c5a8b3d7d0fe22df5f96662ec3c5c1c01f21ace48a79f705af71fe6b20a1fcdfe5f2e5802a29ad87dc59b91dd033b4981f3f9834ded7b309d242b9bf6d6b98bd16a2ee11a1d9fcfaebf33f3ae551b457fa035f5fe3f1243dd8aa724be6f5a9bac9831b20319b5a6a1d3088a60bec8d51eba81d42aff034da773afd7a07094253198104cff1970fdab32b9a639a7aea837572da40798b216fff6aeed16d366bb611e54a21519584ec735c5bae11b5d8bcd30118d4b5fdb57df8875a6e017106b9bcd179d5934c8cce992101c11a21ff5d25faaffc64864079d230640ab28dc0bea2a5d1ecc10249e279c21e4870687d67bdf4c7e0a398bbaae03d2c10432dde8ec4eb62537e03683a79767c0faee879a5c4b97d0568b4c07623aa39a553fc944b4ac7f22bed1963224d8ccee7bd91814e1a559dae4bc4b238e05e639a35f8d671693a0cfcd8811b84effb3db4a2ba3c3d11405bc1bfd7b319ee3313e744e1876311956b643838864336c4f2981d968d79862e0f9e5fe4da0212e9ce65cf3efb03b9451a205d0109b58b01d17aa386eabe8c6bf6c83dbcb4f44acad223f84e9f513a157b59716863567a4705117173cef5d4a484e6cd547462c0e1d291470f6cb1ffc29c3e67c683838cba25823528cf25324b43884f9d175a3d3d51bc76fadfcb3cebf2bcf5dcfed0fb3bc67b417a7843432e5cdf9e5145734a0ab55b209c480215adefffc32ccc43dbcee422496367bee4f393d66fd63988e85a67d18ab69cdfcb13c5cac779495a83a7e1635c02d7065d7c59fa95041690b8662f08e475b5eca3f4f08d8d2fe7e6aee3aee6cd88ab2bd3608625a8d4d8655ee7a3436a05f90472df4cdda4c7f6a3066b8c4934fb62667a6088183403d71ac59451196d38a83d0c44cb9c4e855843a71a7291a0e62a01e21313264ab08aa6323ebfccb95d00e0730153c95e231649b9338a6773fcf90ef36057191e4be81062f5b136a825ee34ebcb76f21c4e2f394896eae62849fcdf169d1b2d5387f6d8e6d0249ba15a193ec7cc93791e15cdaac294ea8849087462a451a9ac4ba64c098b7c0bbf3f35bbe40b48271a82ee89a3d5dd60a438b0a535bfc4f58edb74a27e6e9df1953e28a8f886d95fca91b8aaadff9cc6a8b1a7393db44cd2eb2c265505b4bfafdaa5e835cf0e2c417f5744448407a9b92bfb0e4eb70c99520abe69958c2721bdce2b1a29e0895399bfcc2566de8ffc2d185893e3adbdad3949d4b6f103ce6b988f23cf9020ec0ba206c9ec04f0437fcf130a4f0024feb679be53e090fb5334051404dd750532df8b5f8f8f978bba0e36f972123ff4a5341e559faa0510e476e0a0d3ada98c546c34927be37435a405935744e865da6a0f2f3bd111f1d051f0af216b18e01a8a7a7969072be85ba5aecec98e171c9aa3a1fe5d90ce201c7465300d8efc4b31f7afafe9109e75dfda6a242afc6d82789c3584bf28e2fe599baf8dddfb126e83a07f3df7b173524c460184ca5a2ff2c59f2ba2a70465a2418df402b18a95319ae5ea036add41123b76401dfe3c62f98c1c6b8ec755efde31bf3cacaad865dec1df086636e1f96540ec52ba5b026a3f4e2fc6fc3b8c05964aa37465d73f866b9a63529427a934d31d5d9107922ca92d5a5fd74737639b465cf3ed11f06613a35214e7eb2d4414e52791d0706a29205fef3c273132d0b10e4a7a1624e325fe75f3fa9f6d0ed4cb9a5f575507fda989073ef43e5d1b81a98e6c74b956b27d26e46f418df8f4fdd50e9ddcd2da102bc236b23f7e7957162d0cebe6f103d7584da82e5ad833b703252c5377cbb205138209a6c980c9a067f1f8c14515a9fab0c6829292b075d08306dd738efc6e47c28812409746763deda74b0d48298676f5f7f6feffcc5c9cddbf255e784a791c2fb4d5393cf1af3dd7a599e6fae30c98e8bbc235ea6d2c7e7f654f27bf1c29a63130834201e54b764a071fd344e87b70ed14dff540bdb7526a39e906149cb219e12e64ca96db7764f4f66b8b343990edac29fa33ae50160dec93285de6f652a381122d989c9c9f9dc95690dda1046f7d4359f34e8d15072834a76f95412927592c5e322c2ebac42944ee3e6de3a5cfb378490cdca7ca19a9ad5c97d148ae8093f917840b19c2d3b90c387b9ff4e6f26948cd6729128521d796356620387adbbafa0d64bb222b9db28d6d4b11e526c2c572018f4e80f204da7dfd4e7e75cf73c93eb247760dfdfdeb526362e8d593cec7a4a0013d77c3d67c8bbf97a904593db0d6b5b9228f7433aa7d318b79eb46f732a72196d9d9e81692c97a89f5d2551975b845a4256dfda48050a89f1ac7bb8074c99b8dabcfd60873fd071a8ec58ab849e374864ec80c9027a75ff4cc2084e734ab05da3ee29b7458dbe2b8ba0200bcfa1a5e5916729a748d4335ff022765084f104d65498040b4a7e394cc9faa261008b89bbb1ce2ea014df5c1692e5039d9afe654d60f7efcb52ca731dcc41054eb1ae2acb0f5126128c45c3d31d6f8cad8242d3309aed2b0a41ac6b2e35418b12623e40d00092ed8c1e90a6932eb1b03ce1a4e7e1fda47ae88436ccf60d450170e0b504a3989c9c520faac0d5df15f084420cd3944b85a9566298d7757a2df2a89bd426dff4a86e36a512aa2593004d304926f5aba806251b14d0c918da7badf80fc910ad5d469d118bcfe55cad006e4fa8d3bc97528a82a5bd576f618657bc9c2fc453b8a8f64454d6a6abf77c688116a41ae74bba040815335ea84e0e9a67bbb82ad9a5d41caf2944d593618636b494b6be1dd097300fe4757d0f2711f96bfb083c16d5d9bc2baa87b5c889d8a3f709d2cb1c3d42e1e835a460f8a154518e9c6f95a96f38c86d20f1b15d4a44d398e59124a7a2fc9918af21d1fa94fe25d99033010c99aaeebca1cd1875111c9028cd468c47e00bba7a22dd9f3eb86d345bdfb080ca13b5490fccd0de8228fe1d5d8592ca6ea9812b98a2e054d38ba1ac3f57eeda5adaa27ec363a19d241272301d23bdafa6e53c32f464a978b0e902fb37095c93878ed4df29d38d04c7436a89132648e1aeb7313a1d7f6d5bff84b2de7c8ce7752d01227d347278306aa1f9fc49fff9accccb03dfd857f1562ef1c6f27cb28512f93f5ff503d3c36d1f7c9c0193b4f5f4957f24e83e6a023a8aeb8651b8400f2426483c3290faf52747a7e30fc23a264ce251cfe2b248bd1d3bb5c1afad75275422e623376d8ac485488029eb6cac9bf9526a6acb0dc8775286e22237b2daf81f71fcc7c9ce552c53ec15a69fdc74a47869784b3930907d0034ef94e511534e00620ad1566331ece7372d15a463f1973075e3dc3af1e50a1a047873f3c0cbb136653121828c7b1017161de76b36cd53d3187f6b1bb20a47f8aa989c689c5c0b119f63a000259642ba17980f6388c966d37c0d3d2c11b78fe6f72fa3df90a979a494199c323199ccedae4b31e95e4d6c4ce69d89783e8cdb0fc10d702685719674cedecf8222c86f51a49f1e8a57d051606469bea28bdc7575b5914a62eaef21a52eeeee501739de75124833ad8411c44a14092d8fba3756fab7c67d6cf5885f0297e4e00dfaf77c0fe273ad25f50b28bd7b3325484e66156693d63e890ea53c981159166f2b54b7dbffd4117c18dce9a6a2b0f5f8889e720fadec0a961a84b044ef49db5b1f7651801a1a38346a329ed3be5db60851c290fd7f5b79aadbb01bd3da941a2458b23d63e71b3fb957691b1a7a2f58a7c85771e2a1a1dc9e0b78676fbecc349af32f49de52c54d81534bbc3ad016a8cdf9aee68339f49314265dd523baa749661fdb7e5ac8fbd59116b677b52eddb5a8dcb92acc98d40d8e3d80a1c640da2e33adb47814c0bcb98987f3a4346241a2ef202652a0246e21aff26c0dc3ae5aa20a540c101303baa705d2edba879b14cf7773caffc371d7ff84797f74f4c79de54565d45f114f8b438f3ed4a11f3ba6feeae0aa53ff13bac5e2e95e4ac45949d30a29a008c8ff22eabb75adf9062e9786c8ceee05da4e5ef385218e04faded94b99a0a89cc419e60ee218ae4148c135197ad800a589dc23a442b366067d0352d3da0588ecc1fd4fff947ba8ad6db672172bf6c242b319af8a1d668389833e766f04cbb3dfe73ebec1f53150a80e42f0fd0713854018526dc57df032583701ca49dd48d0fb1d030efa95d3e79f1cd3828a8267a8d324fb7c93b4b769d29c86f73d3cc4410a30e42da5ee88bbc49dcb5cf6d35221d6ca364120b3537162695279d32bdf3b3d16200c8aeff1664fe6874aa318cfd43f16ce9f0a93e755d90db9ea03a3d1dad5f0229fccb4459cb1b59f19bbe9ba379465dc1a200933065b5200fef8559b849637de11de0a0fb9dc94bf42efc47f13e2488c5ec46b915502e144c2d399aec2b4440267d832e507666c692103d3286fd4734b5ea7cbd9e40c51b17de82c74386863b633c88f302b5fcca2df861fee528c860cb21dadb88cc8144a39ed44917ca104c544bd525e298e8465c2c3bd5eaa788c009e71c01fdba616ea7dbfeceae2d67350a595c4a8e70f93373b0fab3279b66398e1b5043cc63987c91165cd6c44ce261bf06ff28247d06cd10d5cadc93f359de1d19490c4a2c9b48d6775e06ca7d8b63dccfe7eb09f86fd7464640dd0c3d5d5cff4aa9a4fb37f5550a04785ed35ad4acd3f7fc099e6f91724712b48211d7203d0dc8021d325523151f9959588ddddbc60ed1917931a9ed1ab61a249f010b3f7a468474ce23da3597cd6f87fa83e7deaa00a8043ab23befd7e1f61f978154595b87441bdbe6f3e202cc6e2669a14f64db753ceb81b3ff66f6286f2695e1fbf24acfe5e5e0213debffe83eaf98044b7335de77f7a1c5dec2f67d7d01873f5d6a592faa61fdde4e672f87212e8f54c0d8932abf8866719fad15ea0ff70729438ee38f5a2dc39e3feebdf187d944f7f4b6c1f0a0e14a457cf1a1cbf9b19e0f46357f7a2a38ea9237c12ad354e1f948592a8690b7613791c23e7289cdadb2e97e90510cfebe0eeee3b42beac08bf07ffa2d0a1680d86b4ba6337376badf4c22af1c0175c4899d92a57a70ac801d50ef3afa3185dee8a3beb6c366c588b2a729f460f7e0185177dfe2bb0ee5085978692fedc6c9f42adc6c23751a08cf7ca6f3d04ec707966be0419c1d05104ea1a79c63aedd99d01aeb43b1cdc518eb4705bcf7896098288b6e51440ec72af65c71dfed06ee4026f15097777c830c73cb26b9cc71b02006cf52e9ac84c5f6c82da294acdc6547660df37e8d8b40c205d18a7637a961f25159cf995acaa7aefa2d43191831601c2ebbd77421d412bb1ad475c323ce660525d1bda2cde2fde7009fe6caf57962f9e22746d6b82aea8f4483c32c272e509cfba2ced9d78c06a64933eaad1e7324dbe694fab3bdc2de5162872c2745705e0366234e7ef239dc02aaa52cca735acf1a75676262d12f7e7f10ec0b64c46e00590ec75461de7fc2c6af1c0dc4dc243468fb3d5748f23f112bde79ec4f5a98d579c606ed307299b721313cfd141ed41462f92e664bae506658ea39cbd1c746685e495d293256192f88b8b7474f145946a48769f799b16383791cf5c0e5cded42f9ff40cc17700e085904ebd1d9dacab21df03b78140aee75a9cfb7fa6d0bc052bc5b33dec37368a7152505ee18dd9c3c6a99a0c13fe0d9742097228372e8aeaa2e8a8aacc2281679794dc7f0c8dcad3947c773c1d0923ac8f93b12029eb9e1bc0f690b23d8aa649d0b61a05e5469fb988ff82cd3804398e6a1bb76561782989991e21d3061612282c925f6c3390abe93e48a8aaddf0da6fafb23a0f3712d3fe85705e072f540abd919210a88ca0b4c50866bded2a0c74f053b1203ea170318bc3217903f7d38e7fdffd5ac91eb993b0d16aebe92b20234a83708583c2433e91159219d0127241cf280c2377bf42287051e27092ddb1206428441d8624727a3d1c47f2954c24f41086ca10cd8311102e59488edda3b85784bec1abcd3419c532a0912a02c86710f1ec5bbaee0b47908592ae0f4475dd44ab3a9ac2a59b98617e06d327e9ab59fa42005bc65bb594423647069987f996ab323a0af25ecf6c77327a63334a2a408a7bf3b8ccb9be01cc0aee1541afcf5d60c6b45c7d64b55fce50cea9c0c40ece33b85e4951a26da58d3411ecceac50e234cf12a4885d689e8d5513162f3b0269d82ff0af9e4fade494cb0d87fca6537252c929f19e26ae75d2b86ea54ffcfeb4cff85902982a31a092e48b3f7611ed38f992865dd6c4c65501775ad7f7f8f1eb130669bb1810894f386b3b44d3c3f1cf462604f952207a593e04a79b511755dba590823b0c8f838acf0fec09ed5fea2fafaf4653b880efd00d612ab191b6eed000734b369330be57800f067fef561bd1bac6a0cd560e8b8f58c71497bbb659b41000bbf8ad64b65fac9a15979e041b69d1f76fc6bb30f0ab356ebef2b4076cee94c554b2f41766541a9a85deddd1a6d8cd18475a3edddb2799e3aed06c199419a13e754420711a22a27a2470a460c70142c8134b8bd3ab3d952d0ca14396a0ad815f8be3fe68cdd4b8017b0898fb6c09caa383dbc7246bdd26295b390973444a316fd0d3c02a449ed5b9e8ca515d197652959a14a813a7cd4bca523a4726e0c3be68f10516e9c788537fdf5fbb846144ed5d3e56b5b0be8815672445b7c450ff4a45a84ee46aee1b0239964d6ec60147594602d79ddde704f6716d0eb86d42ad81e585cdf9a6b00bd38d0a8968ed7042fa20737389863ef6383328482114420a47384a3af7d693b1df9658a58daf37e448159e4e87699476544cb07ce1af1af252ced2658e0f2c233d75f233b97fb3ae07cab189ea6534b2716c7f372e511981acb7c24fb7253bb41d3a489993c715c808e673cc41f5a97d292cedc185634f011d0f5a5388a5139f65d2d1304623b6aa42d23f7bc034b741ee4f089187cf73264dc0d7d5fa176405e8382c96f49b8ad16e1662a0a8375a72031a613e3ce2489d9dcb28a5be6a7264f4e44d7beb7fa75ef7f5e080e170ddcc55d11cae7ac8a382cac8437b893c3d411d97c9d4664d50c6b77360c42198a3e01fd9e23c49bbc8450a213f4db04717e2f00a914149851c2fe1a7b0765366d4e5c1b161138db77dbcd0e712ec3e8a476b5882106823b9ae7a9aa19127d5a1b14bb7192bfbefac4753715f28c16c969076a0aa2fac953c5eb37f6a3494afa358f78debd140a664ef6efe1cedd8f19a9501f7cf4bafa0756d5100fbbf739cb7b256c3b0a62631097ab759ad00a8ffb4c5627391f8f41b55fd513fcfa9f28a70cbd8e8a19fac1dc9cb9171eef81bb1d84793f4c74222bb7d01b285a64e364d80df5fb4c0efd2582d2f5e1302c0c87ea76bb7d2b6c92372b6a2c4f6661f99e753ed76a69c9e137103d016be2907553dbc80f3213f926b33bab41dfdf2d0b6a13a93aab8d5fd23f366662f3cbadb62fe11184a662feb7eed3a01d186e34c8b9aef15559a4f06a0cbe828e0119718d823f54bd531074bebebb39965ee93e75268055b3d05578f1b1b2e703f6d26db5f422dc271a10fa8dc5bb9079182ac251c9dab9d5a212ef054e5a4055b0f4e1ef7ac99419b3cae46e9854d9aa404875963b8f61e3ea7c2c4f6cd1e470fef76b2c3cc37ef1ce74076e1759716b0128c73ceb1fbe6df1766e1faf6399b54fc138c12ad7e643bdda82c6d8077485b738f8ef3691670e8c271245391b4eb3a41e1d38c2f77372bdeb90915dd934293b4c31c23d355d895cac532b265458b8034c6fd5c45872ff8b2c0e7f621c7c89d0173452b268e70bac2c8c2ce43d8f35b47ce71d4dc797cc786b33769eaeb9903266b66a3c53c4b0e1964845338f3bd3cdbbf13c7856ef7e9f9f427ada4e59262a7d8e21a686f72288a2e498ab752adb9171b3519e29fed696646e1a27355710f801daaed13f553150c0e55c139115243b8e28d864a483d8c881ca459c2072b7878b049ec44998895b0097f01fbb07061a6e270acdbf6d918790ee05ba41be1816f59f1ea58b64c4dd2c3334a11eda369673484a418c1a9b9a6277592efa6e7e684aaae9076fe27b454f7e104f3d15d97e3c8e7e66e5a27195ba0f18c9c83c3f59c468b7051631a88eb5494bc3ac53552b3e3fcc609b17f52fa3e99dfed4b7196de5ee1c513ce048e4abe1970039a600a5dafd1ac8faed3fd1895b13e16fff98a073287d5e56bc39096b14a33e655dcaffe340516c92cb5f82fbdef34211a3fd746387d4d4c8cdbae829c8996be00214af97882be8a8137f85bc36bcaba9950f5d64b4e5cdfec7626c41832a17f0abf857910616aa7184c233d90a0fecee5f6a75a86b75663029c387fbd58d2fae498e6e9cfb0d9b82d1b05c8f9087c4c87d8fe8dba8a7c14f7348767dfd17595ac2e86c551a4f7d44342a29f27917bade97a9e756de29ff004784c1f353d5dac90d8426c1b77e7cfb222977a66d42e277bdcb8e3028f13b8122dd62012c9ca96a0dc80a4848c135783c006195bfce064552fd7abf2600dead7b5695cee2e77c2e01518a8870269bcf15c934e49004c7bd3576eb6d5a8f140e5cc0274b2590a5cdbf9ea5146f3e683d204c3c6b841cf516e901aa58dc696d1a5f8d6c1891380a82c5f1c3f68a247f704e3802c99562954426bf374ce63a097ff5b573d529b4ef41b2e760dc084a6f4f926575909af2cb1cca777e8d5f101737b5291df4b6f96cdf5348c52036e54a36a4cb71c1f8ff125b34dc882b6741316badc1e308527e77b6f9c8672a89377c6272e82993c0bf5c12739668dd272e5e1ebe92392d06d92c2093344709ea5c3d3392947e2e0719c17c5531ea0a9fb973c996274387acb9b004c1e46f2bd3948c028860afbc98099e7de8ddc2d5624d456ddf5db9b55814169330b16388d8c8a0baf717ecdabe90a19858e76f0d3c7fd3ddfd5708a2531c2a6debdadf5e804ef0e0704a3b64ec91dd81049ef7e38b31f58db0663b4c44cef5d12139af678c6917215d0d7fe440c924ec65a50ff9bc0af9785a5d29b3420241f5feafa2e3a65af970d2d0a5fc68660ab61e56b86a05343b13a17963379fe2f210e66bce91a0a1683609f31c074da0415d0d8d02b35049df8f354c748760b767de21d69af05d73c030ff3e71942f4ff3edbe9f6b8104d4ffdf36a0a57894f6b42837e6f3b426b57589d9e4cf71fe69650c6d64688916d175152647b60757b68bb201514bcd0659a4325816215153fa3158913939df7b571f40051401ac4de0fce6d212893e22cf5fdceed4bd3a7c476bf0de3633cc537f6974d22ba50d3279504fe4d2bc1920d7e58044f2ce0ea530ef0815714fb8937957468ca99bdbade6efa2abdc3eb1c3927ca646d686fa2ea28e8b916ce15e403aaf452c52312c9b1edc79ded7d2eb319451cd55e9777d44bcf61fe5a63ac1ab279153e65fd96e89414c2514da898e39be88ed9b0090659b336a096af7e49a9333516caa072526ee94f0950c116970c2317281e55d31303c1f8cd0d1a9207e0e1b99ee9824b67ddd6f3607bb5ad2cbd96b10369e1f74802c9f60544113991b9e4f39abf02b96f8ef0b7063ece9d1305b5598b464ad8c6f82a8b0ed9fc277c25edc6e40334f3ea409b97376996aa65a02099d67830130e0adf97a646863259f9d05b51351dd5ee4a2cfb1e56271148a53d0106c21950e9e37ac1b9cd67d8ad3be24a3d78868c8ad111c9bc1450b9cf6cfab90807e2ec816fa16ebf16be0f082ac9ad396d39399b505939fbe239f03e239423dd95d5ecd428e12d329d3df67e505d7021fdda65b003644c4af3dfa25a01497c2d5ee8c85d2ad194b79d3280ef1ceff4e05acdfae6baab1a94c12edbe9affc913b9a6d25c21a59a838421d1c5e19afa9e90f00b32cb6083097b330986704b5e057c445c61d7afe003f1cd238c48c3812455a681988e520378566a75fdbe178a6f0384f3303e1b46fc3b402d976d5dc2058609feb5570c95cb7e127addfb77344c72e3144115edb270c226a1313d1c7b59c9224cad3490017d0e644662f1ac9fb42c370b843f4255e3f9e3596661609e855c307769159050a0d18b01a7c76c80bc45ed0ff1b10df9a536693298b250d7f5763d62d8292621fa8399c1fd1a77a9330e877456d11807c60b36077f61c78fe3a020124b23ec21313559099ab2652f15e23977d5746dd45fd77f7a84eef9da0e5b3a525a4a466251732a467dec1ee6ec26f753c2a61ded9c8f84af7ce923b5f16619162b34821d073f1dd780f40017800b5854bbc649d2f5be627e09cbd9b8270fc37292ca29527740d27aee128df19baf366c59d46b5094827ab321c857eb666c48a7546340c7ddccaf156357d94cabfd49237089741c67bda4508fb582df37c16d96bf029ab3fbd0bf3175074a5ef739c28b023cf917adac3e96898fba333e0fe2ca59ed95eeb13233e722fb1e557657463aa1859f32ad9fb7de9701346ac3c6bce0528eb5a34bd4483b5025299fdcec6827d5db683ba701c4cc7f0d54c5520558eeeb4bd664754fc441cb4d94f8c4666e04385565bbe49a3833967462c20aa9d231d9f2b9b65f383e2d6c8a212ef04420e270895926e69bfa6291bad4b8a46327acfd3717188b42988713f7b53017e0b6d55711cf0e1315b7d9448be9106db387e934fceb0c33384d44b8c947679a3dbafad9692df161b3a0df08ae1f801580aeda2a787b36fe3f1572ffb6568762556122d1aaa31aae33085ad8e7d9e749878aa26f1e0248dd1a1c73667d77e78906c2bc6a9feaa421325adcbbc7d54d05d90e3cc7794ae5937d9f0a03e9c0ca958bfd71135707fddcab41df646bc62a3579ff4c6dec7ab7201c382b8582ef5f3ad4a0d2f8a1bafbb9bd30a4b3984e16a2a0d273e20eec23f5982875491821f20a0a24cb005b36b86d7cb064aee4f8db5f6a27d3178909b74b82256491ed31282de2117a2ad60fa4f11fd40a0751a058f8e023bdaeb597dfb8e8b65bd1e4d356638305a1068b22276f25e1a76a222926495afb49424d08f72c02fcedb34399968426806e877e8aea0e9e9827129a39c34b0b26b4f295bf0bffc2afc0a6041cacbf0eee05bf8636ea4131398278fe5aed57591f00e9351fdc5270713316ca0631f7edf350ef031c06822711200113cdbb6ed4495d947fbe23237133c2de7a841c47950373d3f8c514ec767990983ffc65ddcfb15e4bf605f09f5fdb920ac58d875eb9b279820ef4c9cf8b5f2a94b8cd27ccdf6a8e1a3a940f83e78b3e4c144d15d54e18a2606c6a0635607b6a38857a691d9627b753aa5562fee28affd89e5c8ddb6b1671a60755732b2a4b70a3df35b48cd9f0e257a77327e8df58b78b2da64bdd2d77019aa9ceab969ceea6cb80b67f4c54d0592cef2a947402ab6d506bb859ac0ceaf0db4456782da19f02f90c162a1ea40fad8a8496245ee9026d05a9f51f43844bb46726f61ea5135e8c191add8d3c217a09950872791e32bfd80f76e682eb6344a9155583ec1839266200f3e983396265395503da9b932baaa51fd07ebe952a95a00fd45e8775ba54bc9dad81a8db77413343d1eae6d1761309ca96569477fa810866b696488fb07e9341100385ed62c13cccc1966d4d1dfcb5fa8571d6a00d3a7fa03325d4c73cf908661ac6419afc084188fb1e010e49b82337ec35dc9eac6018cf332e5aa1a6221225fc72bb8b8b31fb0dab741e0f25800b6c552d4c9e25fae5dc1afcd931af0b339e3c7830017c8866ab1bb74e2257b1c411e0d715b5256da6766a71efb3a1c62632eaff3a83ec1258a8e0258b15e99bab56b6e666ff24619b9d3d8c5a1e07b681e436cb05808622dd7bb6ba424b58cfaab8cb4f882bdd91b6e5f0ec4a7bc0727268057b25ecb9f96918db682b97ee7092f18416854e7a43fa777fb873d2aa76f54d401114c54600d9dbdc1f87d1709389590699bc83fcb53cb74973192ff7010a6cba4c33b0000ec72ee0657cd9dec6e82c417eda48a2c750e0c5ba25c26a52da9baa41aee6aa09a32cd357127bbed276fa93dd589410a8074d0071143f324330fc58de163b9a1bbb8f9f2d3785bb4e13f2f9294d75f49761948468394fedd38b5551d961c4e9aa90133aad58245423244748e6590ed5fb74d9ce35e9e9bf70184672383bd55adb020662134b500379ce26d5f45696d6d07eb237b43197a3adb769c80de64152d35e39395e6366466c411ee289d62a92fe653f8afe2435237f4c5a05930836653287284f50b437aa135625fed29d459a6a60b78942f481475d62847866fb919ab591c192eed722d4220906a8e23f03ad0c094f4f536c6c60acf219a6db10de89a9cf6e84c812e200f4c644c35af45576d59fb714d85cda1bd4e5f98a988a75aa541492c0fc8d721bd1edb47e6176daf963f609e2e3562d5ab7e54ced35309cf63b4e00475ab2cf119a0dc972f4ca5f5c117ef14d931c61d3428020de49fe6b72775b8efee1ccacfa3c069d3c4e1dd0bd6721549013ddf559674205a1c4e444c64796fe638f3f2dd58440b95a40bc7fe239c64202b3a43b45171079965e88587203bbd016500eee6773f44260c54e4e6d601028a18a34fc64cdab46714a95ed6a1ac07618a51f326fd5bcc86b71ac6b6c2f8bc1b93f30be1e66015d19de60af9329f853d530e21cb9273820b1d9dfa7bdd661536288af811d920df018ca4d501d743188b61b96bfb616be354bb23e4c3903858b2039fff8b7a238e0d2296d7f14f29746f4c85e9488fb79ae46b12b7dde4aebcc349f5d3aa5d6258619aa37a36abd2920d62f7651b273a902aefc1561dc93c9cd45f6bda94b54dc33a2799f58f47bc2f287a4b07331cbf2ac9820b008540d8920fc9d4fbf8cd7b5b7473a3c8123c940bd4b2826841d7d44d735f3840dc9584f104750a5f79464c169d5c2e7a06c36844577e0c8a76078a430d13442d0b55af7840a9e374a375614acb14b90d8954a21df42b17fe618bdf885152c7e0c60ae1322fcb2f2c970242c1a8602f9430c3471c6c67cc30f93f13cbcfc412813f9ba69e0c6279afb73e3ed66dabed2897ead18bd4a8f7b5b799667900e1455421f15f035c134920c85e2b71647293855de9b85a7b375c6540cdacb6438e1a03e457b480823af10904e5146bccc5af0a58af169e3bf1bc27633be7254fae03b28bfa81b4c1ec13a82c2912e4d73d0ca22c3a50474aa3b5d4e85a4d68a0ddc0b575d5352b5a6a0645136bf91d6a04b9ece94cd7bdb9947f01c281d07291846d41bde5d091a21ddb5b6ee1dde948f29ae10d595b6e77f155bd315ce21618b4a7191a129a57987fa726cac5d79e86ebddb96d934280095234c0ba6b4a760f03065e831b3344676b418279fa269003c811b643b0457508163e68a12f311db96dd9ac824a11686cc2b79f53732efd46243e402cfb7387a4f8ee79936ff8caaf9f6eda3bbda7ea862c464d77d5ecc1612fa19979eb5106c2afc76ae48e2be15c24f90c9cc36692054902d893c70cd626c3097125849992472cd042e82e744a0bdf97017390e83f0a63d7922aac7a10e9428c2835412f5575b85ebef3a9ca502f3284f57aca6c6dc62a6b6015647ed974e58d1630c36fd31a0ef4550a83d1ff8daa9b35a710321f322195bf2fc17d28cf2948d704ff7e40d5628febc00f78375d1c608d4ed760d450e3cc314acec10e4e3b0f7a8a1bfffc2c8214fc61d1623f20cb9d533dd58762ed9bb16abe1661dc964c87a85bc3478a474a62ed03f9959c4ba6fd288bc1f2b17cec04c85590a266c897ba05d388e013505b09c896f6bf90eae879bb7d85694372f718347b69e5d81492ccabfa09a988e374c195909f512c820d9299d993149f48a37f8a3f30a636ada91b91e20c6940de1de8fa92c933cfdcd329847dd887ebe9548362d4008beb1f1a9f91a7473b6020fdcb2a19f742984c4e3492f623aa75a8d90d3047a55f22a4c6a3777bfb936683178dc66443aea11c2014f46b1b846427084ad069db3c82708072a85ef17466dabe7bab0f14947ce99c6fa4b8af8b46ae8f4b234c147f9ca5a27fe8ea7963c44ff952b9d7be5bbb1f5db2df668c06ca5a60e8d66f1981145857980887ead7bbcad60638e6ecf98bb95499975402fd9b455bc12ab1fea3fc23df69fda64b0bd2b82491c2b532152886074a77a13d5518f6ede3d0dc22e146a66b1cb1e1718dcbbabbf730dfc225255416cf03113518e2752de64319483b136c4ff49596a0c10500923457846345ead314c6ce2f0c782a1bd22bbabfe12ad29031acad412d12c7555f47f329109cb7b16cf4344ca66d29279ce82231e8b1c067ec3102792e1570bafdfaa06979f072b540359e86e4f92175bd84a44fac8546278b6c83063d55daddf77eb9b4970c0f89ab479eb1791c5ad06cece6f68f978b3e8e370a70f84104ec46353b49fa451c58eff4f4035f5007e92bd6240fcd9565a3ff4edef95526281f521484018c3e59af63b0ffede8f4046086b92018820a15e5f643f99299eb3e8dbf8eca778908c9621779263b34966c8432d3cf84219cd8dfcaf97b882b3d07a75d42b2591aa32b9939305edfaad13f697e7c95f62719f797fb668e954691441db819dca121d800d90937787575b315b7c59c7373624fe9f9731169a419c3f3f736453d201435e5429b3054654f76f472879b95367ecd6c5fa86e487a7f4567ead7f589c6a10b4f5d684167ab3bae743037c0d3e830e90127a0a1d504691e1d15de894e9d7aed2a0f2dd94d5c49df34354388123161e94d6fc65a652753990588511c33db05d97ca9f72140a836c77d28602beb4ffae633461e5f0ea44110d11a61031aabd68318655342fbf4f1508fe402dc70f6e5d75885a7bf0509194d46209020780d8a68fe85d572672be43a2cec1b6cd2316f035510102063ac8e8ecdba1567aeb5ecc0e45e1087050992388fb939b903799cf212135cdced02fc5c179f55657d3cac7a58b6fe6cde3397418ffb473babbaf9c73ce87fad04a3a25acebebfb0951ee7503cb8e02aa78e232d451399bf1d11d45b33d05e5b4b8ef2935610c0163de3cee4a6ed210c00717e6f2bcea95123e84e85fb981e7afa134cbabcd5f001bd552d959c7c351f34361f5817e7dfaa8e203e259772bba20e8775a8de1ce843b9be90a7ae18a8b2023b1bead0d5124b202eb0167db0caa5594df13ebad6949591a01d20fa8aa0126cb1e930839ca6b1de6ac6581efaa9be0e8dd6ca4651cdc8e04a0001d55f3495a191fccac133b1b705ba16164b053d424f5dbdfbc7587c99f51eadbea48692682eaf19cb32a4465f442bba26b1783c532e1b96bcd25ba5643d9bbf2aaa280d3bb0c4d9aaec6d1603bdfbaff8dc8a503ddc7f9c739125aa1e1370c30153d5863e254d3fbcc36500eaa03766abc3a97e60dd9d3f32b6167bd8529fa343b80ce970f28a2e4c02e77279a389c54a9a08e4d1ff5eb6b6aa4e9446c2f478ed2e97ded9956433e349a3d6d98c1129f71be7c6fd48973ac8b82800131905ab7919e30df74b2451322ea978f95f117859cfbbe1e79d2212a001da85d66bf8ba81cb89f9a0e7cf88fc58f8710fdc426fd9ac94eb8633f2dd2b32a56d64f6b281e93f5e8c6ae4608894c658a267860dfae013e8ff120e3f319a524b5baf175c8aa9f15d03710fb6906caadd26e367d565b6786462a351a0c708573cefed3f7618004d6a9f5e595ccd928795492713d6efa34867071cd882b6aee25ca6bd26091fb007ee29acb54aca54a43db8b691aaca5ab71337c66a2a304fab1149e7227790aca521c1e85a67516dae1c963dfe89621553690ac841e9065eff1b7cc3463936608db3ef6e6ccfb88c0ae3c0892a582bf572d606f82d757ca02f5adc02f58d6a4f3ad5aaa2e94b46a1118d700f0b3f1d52d4a4d01e988b7f0641413eb3234bcf8859ace0ec48b55dde81cea4f2823f555989cf09ec4c11aa80909b8e5f60f837880de3411c8330c9b4f75df29733bfd0b17acf941f550a6a6605f63b4496156e595534f58cc53c9550a724b31e38a3cccf776d65da8133fc0f9e86cdd6a1e5facf772c8a467e0907ebe85cad6378877d2d6e7338d8fcd632e9f201112a974a9ffc773890f25608d7918b364b20822a18f45657b2bed2c00fd1492b2149a9a5cc44397344fbf0a5aa41f245a4db68059dd8cc1e312ea244af54f1a5d6aa9417592f47e536018609195304e451aa3b1020647e60dee95f02379981651d3d91a956abf139663bd800db37c50040343cd1b98ed9d0b23031c60678e4542a8b8e5fafa4368952c8a34396596be18cd388a05bf05582cb2368be2446f9937fbc51eb6c31d435f7442e44d7be092a3842cf79ae12bd2cdab42cbd1d517674e82e927622ad4481af43179bd16b9665c7fa4b2d7c5ac2ca4ef6207f0e1f7306edd4612b295d45560c752b417232910e7f27173a71ce9317a4ae925b470c457b49cef6be1f2f7fea503289946e07e9e4a199437160583b322e1eb8e196b51a0e4938cced74297463bd5f9c9b8473bfe033d85571cf3d88b79f60bc7c767c9e0a041f1d25ccb264aef48434098b109bbd1b1eab5a890cccb4c7d25c8711bfbac98848075db2635f6d85ebcccc6ef507217002dc0e44add3b384460e908e14cb9576499250a3b6aac1d45d1c25f4e44c70395debdd0be08cb67deba3fdd6f640c54b5c07b18ae2edc04694f617e1e0e47f8c73beb79059bdd62e26dceacca1f8bd14bbd902d2545501b31dfa35c8e4bea90b0f512fdab21c11d570d8d6339f3840cb4b8ccb12bbf59f5c7d154305268d34bd3043fe9f005feeb39a521251af1a0bf2dfd18a41205435f489479d2e7517217e00b4b70260ccf53da517df50965698f25da9a9196e7d9f0f4ec66c3df225ae08543a2b3855220ae57ba7a3509334b4bea3380b0485df351fcbd62e6bdb8779931627e69012d929bc217a35d954cf175f9ed9541381eed482d5766c510b7485fb38e9b8d049841375cb435c94729ccad68b3dfeb46666db43af329c851d071abea670ac439059f2ba206ca68e942bf3457f0b89f6f6bd7f695a36eb81702f76e71a3b3e96a6ee28e09a876c9e7d09776f4e09a8b5c98fd9d7393d919863b26674ce13f88633e41af75c12c41a02f7c084ffdec393620d50f5ae2e1d92c7df7b6b9aeec0c6ec7ccbaadd7edf2c08085f603314d84b9f58c9a3e8a40b9095a53e0ff9d3b3c54ef7a03b7c0b21be6837a430a6958cbbf7b0ca18f1f85219443de63e1d93cede3344608c0d9a2eb03588430f765ccd27250e2a7c8ca85e689f93d166d836d0e0a1d0e75f99be2990451d669c6d28fe501f16828b229082d164c6149136536aef28196238ed394c6703f50d9f7a1096c70d7397611bf218dbbf5f199b142cbb13db13c0eec17cf11a98722cde3d3972c5f1bd9db0b14c40b10fa43d57b7d37b9dba9414318f0e84b8fac097c6427b24016ad27dd4289b0791ca6e2b719b390002e5e35062b216693b1730beb6663986dcf4651da2690a0f9d5694c5a521c67d6247bbf5336f392c9af9cd9cf168e1e563e1f2548fea358f85d219a23d5eca76c66f3d0eb50a0830c3da4170705bc49f82d994247d75630fdbf4ff0e33949a1cdf4ca624b55fafd1d29ecd81c4cedef7da97d58e7f2f8a69815f980ce937b02bb81ca57ded8be3b7256def3ca1f56a1e9b7773e159392a23c65753e1834995c627b4be860a3fb2979080f0a0588428543d5134fbb101b236be07a0619a67a0c0802747876d4a122d578bb64f59fe2dcafbcc6a33e2b15ce58d2867cbc08599316b596c9b32528d0114c4cd54295dfbba3a12e377ee7ffe91ddcdf5798de9969f82ba3005d6f571fc28a9e79fbd7405325bec43ba0df0b8ffbe8b5f95239fa98e82eaf9cffa4e0ab33bbbd688a4cc90c8bfb37f3faabca70384ece34c2ce910eaf61fd440a264cd1b5faa2ddfad2f50c8559fe8a7218d05033bcb274e2257efc39679564fa4d44aa23705a923ffd412ecd2a72a24da949f8b4444e8475359dfde465610bed2b777041d7cdf0539daeace046ac1739ca14030901a58aee24214e932668508d999396f37856625390a4ffa479db6d02bf3fb04d07f33f27c961132c9696d5bcf8707e2de88aacdc27caa4127d60ebe1237c15fb108a1420eb6540639862db06dbb5d74018ddaf7660d99df23202c3c1cb35c2e84b6d11887740fbdf98264aa3c7807fab6bd6de7e4b7195949964850024500b18a05ce99be74815506cfba2375c7366b0347a4052664fa5005371ea32e94e46a11ed79526a9e55682ed4f51eb8b9d5391d70bff073662bb7da7afc7a26fab79c2340f17afd0ced618ec4813f8948a1f194b47f90e14230d9981e3c0e43fc2408c2383b904954460ffc8600a2a45bd2ad0c4dcd0c9650056f52e6c2575a5abfd2c15e6b31c3ee95376423f234a3a232892189dddb29f73ca76666eb9635d83d4bf7cba7eb49b72cc440917c0155edbd6e7ea7d48c0af1db8ace753951ed13093520426e6d716c7969609815f53b916ac777e98141253e2554bfbbef5280710de16d918733a8f22a0600bf735ea35b33919564c8f1924569653e7989f16904920aaf639137f369916da4f5e1c1c6129d6d75c27864947cc40b66f7702056a9f56bc4d5198b51eb846d8d4adfcac43753ba9ee9da6cd1cf22fce391df84c0e9740fd9d4f4d34a00e3c69cef2b73d721c90025d2a4f0bdc9e982d5b7e3f65e5e8fb7814ee3690fe49f430f78b1de6b04e829b7381ca94d4370ee04e30946f694cb5ed421ebbb2e5f2548fac21ef16be4982627dda42749fbefa3b6db6a01d4721c5d782b5e3b65c6aef2641b869ed9f035ac9a9f189f7bbd3cb0842bda69d31f4351dd9090e4429cc626264ab376cd65ca676d4c0ca4d62829329d18db0a91a157148cc35fe799b9341f3ca918a9ed6e9c23b4e39847f5f517fff7433c51425e0fa0dc348a12e9e2dee003a8b0fe4ef9e9f8caebd63b613e6e24b5e86479b69e3c0bd25028d9455ee21fa9a6404e657441a7e7e082c878432d457bbc86050ece21647eb304fbd74094fe03ad7e213997a869af938c3dfcf31d946368f5eab518671aab4c655fe4c787622ffb5f7ecea43155a02624043ab571235b5cf33c60fab8d1b8ed36f4f4fc1692581aed95dc3b0a5e712046fed7582962e9f66a5c40efce0fdddff6264932f481a7885b229d5bf57f67928675e63a2568c7cb90244556bc30724f39d07eaedd58c7b7919f09c342e6a1ff4bec2a8db7fdc591220840b5eb5dfa637acdc17d127db80eeb0443816","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"e06b548b27a7e7d8dcac8c756dd3f2bc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
