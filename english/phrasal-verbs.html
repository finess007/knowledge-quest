<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"ddf16a4da7dcfae75c99bebb4b6e0ec4ea18a8fd04e87c10c43476a66a88534858d72309741625eb67be816c1692a89d50ce99946d098e17e6315b7d556625ac1ebb452cd39b277ce07307cf4b4dff562b74f55bb17e9f486642fc3ed2b7a42281d5e11398271b789a737ecbab89c5acf9e692d79fd981ff44b2ec06b8acb5eb07ab9a2a074e17d0c1ee3d7e7b2fc15cbb43975b091f93d7a07b75c74c6609481e5f098ca9e0047ef42b6fdaede2ae1b007960ba5bae6089c9e1e364a1e89286324758df6cc5d6442a5fc9ebec54bd45bc6756eb5aca8dece1da20dc250348ecfc1d9042f1d0c949c5436a36c84d3e65936485d44895d3715a50c4d18e15faf1454dbfe32b6646640bbd764611127349474ed8a24279315f8877888ef14093703fd8fbbd751907d25bfaec7c9d9fdd6576a180ed6dc4982653475c889a42e28835df5c5543934f2aa803baad0ee7c369e71885222eb32722b0cce15790ff749fd8fd2916b266a94c43d602a3a647ab9330a4e81ebaf4563fc33f30b05fa9808b53a6bd5266505097cda470f272cd83f139816903f349b4580ebd1817a00e3bb55ffeeed9e66feddff704a35d4229accfaf7a963577892f6aa1d012c78c76c6acca9b5e1a05538b15c777762121c69af98c594e609d940a8e5fd6134d1346f19cba00fdce85ec582d126961e5c38123ec8ba62197ff46b28ea62aa0e61b25d17d910bb469a866004115519109a0b415113d8839b5270fd561178199b23101d074efcabba05720f6a91de5812a63a67e4965037f7f8facb6ab39a51406260a0e9f6074e5e212467ea49b91206f952176c6327393bbe7905ec1e74ef58f24e948330ec1994988f820b0e3277c6d7109f930d6bc4255abf40b56db133270969ecfabda812866165641f6912ed1cca30583006ef4efb848d92a33b529570bf6c48d2cba93110d2208d25d2a61403957d55a17811a7a778fa5e5f43387e136843b09bf64c4b28a454aef636003a8c4acf6dd03139773cab52029ea36c9ab8fa60de8776bbaaf1a17a50882f5fee485ada73475494454cbac21bdc5e34dbbb51e7407bf9c9b47549c0cd64e51c83e248ddd53c99b6213e5a5bf120a04edce06dbc7d847ce601ceeabdff3394a18be7231f5c8eb86bc86ccaea4384020290b5e3e33df89e4e84ea1b0799be4bcdc54db6f8ffeac22b994d9267d155afda5c90fb67390651f7b55097bfa40c681acb3dcbcda7c695479a08ea6af5bde24ee1945b13fe111d4609d0830cc4c1ea4620fde64b43246f424a18ec55a948ac2c886792de4a6a893f483c7c537ea0783c7aa499bda03a21f03d4497bd66039be5cfd7843376b4682fd2ce5790561c49c225cc0f9cde3f6bc2694056253b9b8ad108bd0b3cb8f538094b358ea1d0f78a3b3f09d00912d0e9cce84fedca6156f1e8a44baeae0ce25d99ce9ed583eb36b4cc1f4e786d933a7ebbadad9e6b26174f851c9ebb7dfe8b5fbe977edeb87bf07f1f89265d7d19da85c555d87e77641a9ee046f6be0392e285f2ddacc6ed2d47ce1c8977b766327de2df4c14c659c8ea71782ec826957e7b2b1c5c2e3557038e74fe26dd256efc3406612eb0cb153624dbf1b6c281c9cbbe8295a9328301c0829537c445e7f7ced404335e9de18310a39a881ede83b059c17da4e268178a2ef61c50bd3820e2c65f6bacb99db27cf6da7bbe586c5cdebfabf4c8bd96d9e97083c68496a139bcc02758abe4b0801df9c7b26433a76fdb42b6db9df1c4cff2bc161cf0a3448a5668450b92f981ba61773196b1676fc4dedac95747b001ca24b5e1a2f92f5c691bc88b5f1cba8e852ed98774959cec77f2d93779beffc640cb122025c06b3547331124ab9536f9648321ecfd43e01bf4dd4c7c396d1a9b588f8e15eda623a5c6e5a0e0dc9b387697b11247ed96aa015a153c93a27ad9b284276c0595d247a75c3cfe7f864774727db517333547b55352d4ae91728b042433df1c53030d544dd8a0165c901f93fc6776621fa49a940067604e18b4c9b8b873fbf6a68a763ac563dfdfb9570aec9ad1438b34bde2e2e7fa503a283e0c6fe3765003e094b1b473e94755ab0464ad1457ee1911b0732483df5d7308a878e27df5e1655ee13478fb28163661b3ab8ef49d300f87d6f4ef1032658c2726bd0fe86c9eb752ca08e5ff8ac6cd0b2d1ad1cb6d55c23dbdf2c5d3be2aaacf4bbab22bc5c058c783da5cd004f4a84fe81b832e2ee85a67e18614c22644427f6faf5a166a60fa39c593fc665fa08ab5882bdd0de230e94b895c9194362279a8362ef0c58b520e8e9e17c04839720328d4b92374775c56ee4b7861b0dd09f1d1d8ac0a516b34ee17d087d3a934cc55f3e440a7b7878fb482c62768bf76663756f7438639b6501b38452a0d14bfb8b4e12447d9253a6f4e843d807051817e9649117da5908f126e985159396f3793ea4ca70346d6947d0cd64d4105bea08c4e5c7e7271a37df58ce54e92c1e4c72b6e845365385eb3602c49b2dc95e554985c715430577579d1592a282d6c6bee6ed727e5d07608048433bf13ddef8bda19f20280ee827d6887cea86ca249a99ae1dc31fa2316e583bba87270a6741e61254d8e0e1be14bbfb0a77df433ae73debc224f1c1069aa8cea306ec42cde6578cc79c3ceec05278692f95ca8c0a9afc47bf7fecd1289391fa2aaa8fce6f78ae77439395db0aad203f97243c11727d21de82d1e7e4256f0f2525bc661aa40b2f0017a4338e0d9823050a13de39259a4c0bdcd51ed64dd5ad04dca8e4fe250b4a6f656ec31691ea1404cb04b1c9b39c5db3256b76df9d3d903181864f9938909e908e2d7e485922568f1ba26b7c3759c36ae12be302852e5e1ae37138f6c7a46fbde96cbbe6082bd96fd60e21aaf69ed23f07bbafa5df4492a1185019f6df7ff84041711fe65f6f023beb172a782667752497811d47d2b414b0afb3c4757c5e3c98b7fa5e044de4f93525a0d32fedf164ba009ff3ec0a089a62e351b5b8a09a02dc7de4dcefab4ead9d428f94f16790a1895d6ba5223afec04841c8c7ca857e447b2f31deb885a397eafe10cda0dba3277c1a9a7a25469aa1ee7ea8da6de2b88316e24cda40db9f926af525a7d0e8bf1b1a964726b2749df1c7ee887d61ba7053ac6ddce53b910814c9ce6357cced0daef6f7940ed76dc429891ebb7d3e2f7eb8efcff49dd99e67dff4fcd3c791aaff63aa67d7f17b50f6d967bc57b1cde0c9ad67d9889090264989162f313a5199dedb0b06bd3cb617f31e9218dcaf9c0b4fcc5fe5d85ec3656405322b18c144505e1c75767dd9606d6754e808fcee6dd2b58c024dad0b9131848501041b3d64dd6a71cc135a0aa3364851e1df888162b184404fe1b43ae56e51b8d773d7861f9f1d9fbcfac4f9e5aa228b393db907994889f3d9552e8c8f64a6638746a6cd7349053883644edcb5afad71cf2cb85eb14bc14de6ab3f5cf1efee738c05a0e5b1acaf8464ae29ec00fa79945a2df53185786fb9089cf9cfe09b62509805ab812712843dd977470744abcda9bf480eef84883c7c4a5aa0126e945b149e446e9993ebcb27578310aa8e597341608ab4a086ab83ec0bbaf0381d7c46bb31781af9eab98277ae4e96b3f1def7ea950381371e1c99b129d5138ff6a614e645aba2f4acd5df5e0c689dc90a6dcd2abe6272d9709b1e249ab9b54c9bcc77acc18e7c7007aec0b2567a9f20fed211f7e847cedf500da70bf2dc22f5a52e095e5146534a9bda7fc231c0c148ec265889e715388f8e516768fa11a408ffe58ebdf1ba65a8ea0e231f6aeaba6e75aa0e1e68d2e2a3b4aefe373bfeb991e8fbec7ec18df1fdfef4f291408750a4a885b7263f68478546d67b047416d1867ad332f24ee0aec3347d8098f1089decde869c106196072bec8af09fc42a4d913b16b1f1b42fc115506960c4d31525aecea63d3c5a57f4c6ed8774950ed2eb64318de35d58554aa2f405f05b954d650c24a64448e3472e4c719a36b05cf8ad13ed0b688739c9cdeb775bf6e5f250125855cee398f5c2bba521073f350814dc3fccebab5dbc514dc29933d0484db267d55e4d2bb3f6eefe123474875c1e29d567aff53f90f2e84866579ff735275aa4cbc4b8d9eb15b5e526affc6ace62f8ba877647d4ec686771fc878c72d89ef2c45b6d3263f63b00d5c551b1209a312556e505c624fb844c3c8c7a040aa857305eb66fee441a7e944f688c0ecedd076626af6c83386fe5c66e6361f8601cb2f0851181ee97c5d9ab0f5f4712975fb7fdab93d13a4dfe90e0087d94a094829df55078cdf693c0609944b7b2730777afe40f17e2f7c03c6fdde32a1d29e3f1e0052f9e13e71775359252d7939e21942395c162b9b0f98ca02122d6e16cef6273bf96c1427289b2a0cabf1cc92e3346dcbccadcb5145f74e62430e199e4b9f684627aaa4c219ed0100c10c7eb9a131a8b7dace8240e2ffb947b653365c2157fd688fe0d041c2a86acf6283449f418a4dfece4427f80e2d15e960a5cbfebdeca02963b46cd3feefec01b2c0d4c19a6550246ab05988a92500f3fe378e625c5834ed291973e85d7383d4288de7d233c519784fdbb98f0d98f3a6dace7f516d7241b9031fb35888285f0c748e0e0677a3784cfeebbb2318f01cb20c1fd3b5102b21b9cc1bc2a027da186a02e15532d143c91e156cf99fe1f4510ee8545a512e22717c951754aba0059ae70924870988e18df899b2e33b7f97e579373c700aa892b40059fdabbb6902af7d8e49b5e870733e32601b20083ebbe575a45749659c4b04af665059953dddc1cf81398fbf6ddf2f19a79453e31105bd09342c6a7dbb20f3246696f6ab817c86ae56f530b04789b49d74d18139e21f42a4b9d4764efd8a4fd7b6607f6945a79974c1ec92aafe0eff90ad2263328a09cc9b783380f951c76e38bf77e2797a5f501a72afc85e1f91441a3fc1a084bb5490e8d4fc472c9866c1319fec1d4bb272beb610bcebe6e6c09a0ea7a5321e464374f9ef80c091d67f1a22a10d315e3bf99fc1c57d842b8648c503c5682bc056f723a36e063f03e7f58abd455131179e5af5ace153c0eec1946035f9373b6cd4516e77415949ddead8db0c8f22196cd5fc1ca7122a12374f96b96f08d037cc9a20fd77f7e3fd5f58b060a271b93cc0c482da4c93782564b620aeb7906c0aa12dcf478f9e11a2697251a98b0b161cf3004729ecbd3d6a3f7141f12eb1fa7cb5d717287bd6eca7bc3316897a1ada4b39c2167d75a672378d78505fe72b0744ba9c863d8cdc9e55a8399eaf6d3c229c970463547e27e491951fd49b78fe17a501f5502b9137553926c1b1d4f8676ca4336d1059e4fda9b9eb04598e90fff156bd086aa929629c103899ec18c5ce6f9c9dec6d863cb9dbc6d972275a37c623615e414026e8ba0af998f4debee104f257f293f41b4356085da3f887dc9d1efbc8597aebe731ca7ca573c7448389bba1e0a11727dc6401c3a73abdf8a0629814d7a197194213963e21181b80e6883569c778204f96f9fd0707718cfc49b492097c24b1e32a32366e61fde74916eb9f3fb2d952e2762fb2e898142e7ec00864809a471d15fab9191521737b650e67dd0659078b0afd770c965b8a80ab00669ef73930bee092f43d1383fa50df6cc2611a5942e98d989f6ea70b761ec7a6d28cc14395d823685a5fd50ac1c7a912695e8a371d7c2d35b01945ac6c6ac4077e4b942535fd49abc78c77b51145668e1bd2310f872b5ba46c212bfccbb9aa8d4c2e304e55bc20c6343b7f811adaf58d50370177e8ebffb2ca936de8642a4ba1ff3b32d2768d1a4a71b4240c71466a96edbd3db5f43a01d7c87bce322c6057119a11131caacb36a976bade25c061706eab97043ae68e361996e15e3e19fff0884f35df30f963179033574aa94deabd9391d4a2171c4d3e7deb7b077aab6d4bbd8d9f09ba6f26ce693da85e2c6518d755f323c6b0398cf6e6b725e009381591b145f93ff99a91044b1b1d63e198f1707ac125701b412106330e70c4b5ed9d4fe0a85b4a5144582c5435793d9e68a6c72de6f91bf516792d3f72562cfa4f938f49eb388a71d5de531b3e1b8ae2aebb66d13d82ebb412fd3a01149e5b8a33cdbdf4e11fa944aca0c6f6bde09042cd0c5f914553e1b63ca8e66dd541f14f27cca361effadfe1932172dba424ab2c820800569e2853de3b8dba79b2e22c11251112b56e4c794869b4217b6c509a957c73bb4ce4c44403f28eb6e6eb34cb8e9a58614b196e2e060c8f7e70f50714d75109d280bb05a2db914122932d89dc89d957e9e28255c533f4ad40b6aea92ddb0d550a2ca95e40800e5b98d37ef95b800d9fc4714142fa184479c45fbed6c5daab2f86df7441a7f9f9730df500d9f6d24cb305b010ccb3451d45dd4cc360fedb5de133cdaafccef0e9b7d0c0313ac9fc323bfc3d5dd6f57b4be65912ab9f1fbc171ea490d2c644580c39770833bf73cb44c90318ee7e9c848b45e8ccee4bceb0b164a977bebcf0247339920fb90c911d6971853fd3bd8b09820978a19d131f3ae0929c95e3c69f8cd03f4ec95498518b00ce6e4226064488f369e6eec07325f1b45ed0838a57ff9b7ab3af782c57fa6b41acf206822ed852af60f3090ca3b81df892d0963528e5e4b1379f0ad393f681953bc3f51954d079adf89ba9e6c0744602c4edd1ce6be02ef9de124cdac4a0d89b83e7565b4b83992c49e5602fa66d6e49cd232c48bdb3d888cbc6318dd6367d2995e58af6d06c585ef6c8b446cc9fc51458a8fc7513425648e2e7ef06dab9e9a3f02581b9fc6b0317335981ea86c02f3e29fa169e3a77b9fddb7b64da0a6c6e87e4e7186f08ba224843da96a1faa03b4b259b3476faf0724665b66179eb057dcf4ac18f21c87cd577cfa6e2f10c96b44d60b98214e160e8dff8ae4d2f7e8e01057a1901ef46bc4eec70ebee67effd79e6d7d0e38535e99b8c7dc870a419c633333b0a163d4ad876915b78b85e98366fb089a560c9733bcfeec5ec2076b871620bee598b8e406534912adc47e58eb0662a18b9241a186b82e204e16f170acfb1cc92545bf4655d8080c77bb441a174fafd9361772b5b59da57b06ad7e91db1aa4cfd80a8f75ecf7682f631fd8d2beb9d385726c652790bbb186f9040289419ede21b4dd332fba5de670d7fe09cd8479e3f9cb8b8899a7a8fd9b7218ab541408f996ed17154d1b4e69ba75c83d757273df571d4a05d5f42ac1faf6bcdd9b19cf209cc05bf0cdcc6acf96831d0ee835949e6eca2dfb84d533ee17ced16b59e8f7181d921bf7ca2b2fbb8579059b4e084c31e769fcdee2c7cdb9d731952b6c7007e198be45cc4becdcf6307ed8687f20cda56a5c8e71b4ef4aa4fcb78b7d2dad332121107b9213a2dc3be4b2ef8d7c8a6480de616fe7b1cca5daec81b292a1b49ffddd05961a3746478e612a01cae628b44611ace62858805891e4165d1a88a26409ba405b412919149743aa387d5d1c55085cb8235720c02e3bbea012b8aa308f29bc577a3f06f542b22ce262621ddd1c81799347261f66ae6f8c2df0fe87aea8cb1ce2bcfee19d366c80e1b2c74998ae7a5e28da77ee590a8f5cc62ed4da4707f86da26f4536b0c7f2a802dabb52d5588875b48b144eadc5827833743a0ee662915792c11145917f70bff79bf51b5c919a5884ea40bc0b8cec39d726c09410d820b044cb66e9b51a0bc0ae6d9000814ed176d86411d754f247993296dd989de9f90c82467c9b4f0788a2de0f533c6390431e003533fcea0361eb790aec71cf8b77f0f4cd19cf4b162b4f3952772b5b0bd8348830c5227403ab1d3e77f46fd449cedbe5801c550d7f4c432bfa1e58d4c76c78dc0c02aac3fcf6ed5b3c9bd71a49c0b6b85fae4a8b2fe8f97569f049a3d2559f4d6eab30a2b9bae0c88b9905d07f7b607f9afd2b1b5602d50d8bab2dfbb6dddf834b84bbc86af9161165f69f2aa4fb79aa9f7e2ef9e7c98dfa32144759321f1550895605c5b0f59fe7ddd67a80e6c8d0b6e2af6a438fa6be238bd9705a2652df0289d0afd1f3d6f71c2a4c190405b036e4e28cc9f9c52ffa43c5737d1b1943310568aa07def7de58ff8efd54a85c646a1b6cb312faa7f93e6298efae1afa3fcf63deda9b600161943c6f8610211d76f8eb4ad82f7326a9b5a01c42a9ba58f64a094deb539a9bf9b055d9c65b14dc8110f14ce8a42ea9bf0b26f27b201521e25277210a2a059322e6373471e828053270216877dc63ecaae061c5a4dce43fecad564dcba3d39325d33591992616a468217925a51d26a7e810f29473f2c7b0ea79be22783ab239c0e66c30f3b137ff9ce59cd130770fc991171a89672f4355c9a303ec935fbcda9fbd1e9c13d5bddb2f88cf3351b219a66ee315a0e347bef48472496cc05b48e35789bca6515e4b44310aec9c131ddfc9b81e434538c72616d736dcebb4a27561a757eb8d15f18dd63f844044566396cf8155a9db1320a0453e9f750c79aa96ee8c38c4be147dbb014d38aeabfe1269e2cb03b17867e61d4d670bc52215bccf89dd8c173d5382592b7abba033346c522be1e913bf17cdf7fcdeb7816e46cdc16c9bab3c955916c3c1d99d31c9a756f11d4da36dbba95a8f5bf25054f63098f335e124620121a3dcf78d6f949cb2bcd79c42beae7d9f1d2d7caed9b08d47fdaa6b91fa2a84e926c7a24cf89d3cb82b68367f43a4787aa896f2215066cae7101bf9271ee6fbb380d8241188aeff0ff2bd23e2fd71297d0d25a1f98fde81228cd8799eb8b2c9ab38e3136acb9a3309edb989bbef39b3c647e7c9f3c83a240de3321b08a574899990f24274d50b0e863ac97137adc731a9c3ec3ad8e8fbb64f2a2edeac07a2ac2aab0c9bddd8e50815559546aae1d36067d82972efb8df61d11772d2ae5bb7af7df85b155a12d94d745c5368bc3aad783d0c21a32accc7cafbe287c97f7c440d89ebcdd0dcfc7c61f66589ded52dd8d72e5095889789778e73bb06d79c7a8d2a9e76dbd6cee7a1cb5e31f3eb20fd6c86bac9f1f851ec22a30ae5ebc515f521047af882c615c7454b8a6fe21003f0a44a0d4eacfbdd9386fa07d5154f12a1a771e27904dad6a9172f6ddbb3ddd9f726474f023db9ae5383454c19477c37d2221bf4577315822b20f8fdad2ce8e2807b5b51bdf8bcb412134092c1102e1cc31bd3a82c1d6210e2ecb3b5805c1beef5eb8d1954865fd0a104169fbfbe4cb173273059b9d9f6a7db923c852e497ee7bc3443d4e814c1507b83b6bf288c455b583cf705a0d8d195d7a6871cda0b0ca200689e2fa161367ad54e5b1882a1837e49a08f2d093a93993121cbe572dd7452d75dd4a643e7c45ba1ff7f829cda9c823e40728d49b3a8d31c2a6f236c44114c43148e217a464f58a925b690c1d40ca9e71a3af7d836700cd4c278cee98288d79118b3f344718fcc03105c0762144975077d1539400691c84ea0fb94242eb9978fdd0d10e5e7db8a76baa5c346806cd0990018470729ebf89f8b72f0074e2eaa58ecaa977b66f91476682b27ff4d0d919c7211ef661913610267d2e2fb10e81b441fdb500ee3a8b81fdad9225bd5d8a38fe593931783ff055a6333537f63a54d780666cdca9b08328d34b7ac8ad950dfd4afd341443fb5d040f0286360b4012961c6c51e45af6366347dfd50b96c0a5f8211109c372338fa7578c9c28b5a26c22673ed59af2bceaa677db02a6d876da3fa6a0a9a8f305c8ef587bcd532f03384b00b1ff8cb8a17c6b3ad6660ed4ceac7e83556d78d6761808fdcecf836937bb95cb512a751a849d0a1a823d8b17140f284bb7c49c899d2d7c444da21a4dca0a38bdf3b97f7e4652de877e538b6257cdc14177c67666292819ee9b51922ae84ddbe446c2f778abb3b5897a230725a1a3a4b45c5edfae0bc4219634156be03967c9e78245415da13de816b9c1461865ee2c9424c1b316bcc5c400ad8a6c4bbeb0c36e818b3d1b8b0deb305a6719ea5a0d987b3b5315f87e004905e74af255b7f0b67c2499d75614ed43cf978f1a4c7601222aac5ee02c29e237658047eee9c829f02c5455379aa3c563ebfca445c0f40463de57f7046d3a1af4f9eb07fb247567331c6ce9237694a283195ec74331757637ec5983cd460341806ce2de36b7b87b6f462730eeb1af1e50a527b375c3c1e69eb13a912e8257d016c6f642c0f7ae2daf37837f62d542460cba7213582cd21fdc64050f292e45a550293a6051fc4b50a1b743b9f257ac31648c673c325cb9c064766121866469859f797bdc3dd0ebf44244d64caadd1c50993a69596052a6ef2e422f7173f0bb703999cd0ed2608a01e7897a0f0a430024ab3e385b627c6b1ba10f56aa27dc6ea0c030b0ac0b3f6cc22e5b5669d924df07bbf15ff6fc6aa14742c8735085ecd326cb8853f22e21f2952415babfa2bd9a1f27244f32ec03ae1277be393a187d54e8cec700205bfb3d63b4382031596aa3b0e3285d21ecedfbfcec4dfadcccc19934a6d5f97ebf88630dd02cb02869b20557e59e4f5dd5e3141919fac17e0a4c5927ce96f0d852a2cca2a7d1c0853b8799b66f09b45d02b7fdf882033895746e29f188e2b4ff2742b3b5b41f8878a6d7aaf2a99db7ae993ea949f46b6e88c38bf3f370efed2a2a3672fa7b763943a507827b83eb817be17e5dc00ccb26f08e7edc6b7a48106052925baeef9b9c49fcb0ab9add8ac6dbe9493db42c17e18b535357510c47e09e47af80054443cc83689ff033e96b837e2b6d2942a124e1dfd366d349c6df313889a0a73b77cd1c8eaa97a46fc694d36982373d0f9b352e6962d2be2e20d55aeec951e77c8bbe0bff55eb5b820f0ccfa6c5ad8654611f76522f1290786cf9cd9ac2110380946d76d1253b01ef70e1b4c9f7d38c20e8cdbcaa743a0f9dfe65e1c89b9bd2bd9ce46984b3d490e6c1042e59ad0d1d9e3b3c80e7fb0af87a5c65ab7cdb9d3959105a78a0bc811fe9cde530936094e914268dc1e2702813683f6f1fcd50d9bff5ea7c0ac0d7c36d6e827bfe4c2a2c46fc1c75e1442da01f9be5ec7da95d5917e79cb1671ee15496c185182feff5ddc2c6fce52256a2ac051b839da144e54d35fa52bc63b246d963b9436d007b668dbc0f273f0fc95790f07b02fb04bd4a00b11406da882a96bef2d53c28f35523dd55e858cca3fe768c6608fe5be2d061ba1d8fd8b92cae285abd2a9e57040bfc43a3be97d9385f1c7631b3096c1cc99ae11e46dfd1331936c9888b512840a5c2b1a41659a57405d58ac90a915b8622496fe6e7b6d6ade64ee6aee0270ab997e9c838086153ee99f2bcc3c555e06080be40efcda587fffcdf9073151a383ca4fbac4bc289c93f314668ea2e9e3298743b242304f191acef999c06b86d5f3010602223ab710d2cf4214d81118a65fc0a73929bc7f70709d50207f639a7f2cfc3374b15d5795656421b912aa20fb83427e0e7df98eb1fa760db6297f58c5fd9e7920e20e0223f54abc5171bce0cee73413896d659ceb9c69a26f1f5cc660d19540d1e7c7c8904101387254b9cbbf1f814f28e3edd1c91bd3a329b868ef1a2d9b76fbcf32dff7e2e393a36982cefbcd18f214faad9041218119e8291a89f94a627679d3340ea2ccdc1046bdb2043ff0b25948232dde3dd09b87cae869e3066c7d99596b90d3e890da013dbeb80b5395fb143715b7c08eb7320f4a2b4bb3bc12811afa89b74ab295669817b9e8b36396109e23fe859d88741dab3ac96b9ac70fd8fc524bac1f7c613176b4eb8d979ae47f768d19ac0a59c1e93de36c658a5afa42b97093f4461a55e47493c0dce72bed11c89fb9ea894c8ce40546dc3f05f569ca898e0bd1a6cc74661d8728f34467795cee79707ff84234150f075492e432705b5455e7143da7bd74a0bfc9d7a8c862de9962c9a43765525c4874724c750242fece60652a8106350fe799b64f2e132435e003cb65f3eea1a29af6bf8f30d6d678e708583703343d477b398f692ecdc6436dc4b1d371f3c76ae0e2190e82034b4dabe82c8451da1dfe8274668382ea4acf14a3e99c6d129b71a4fe385125aba72cf217bc4d26f7fab29acf1830b9926031a253bccba8c0840e036561c58e4bce03f93b794d927d9a9d65b3cd1115da621f150a418d1b7ec02b1cf33f04b9f0945d435d84a337e01acc820ef4a3ee1bbc9c085418f84fbec1b879f7976ce723da401ce290f8b953f6a32d558bb65f8f8b1407121d119983cec1ffa222875eba1ff85137c97e15ddfdd9d67c63ac1024a82894dbd43bb7e6dcaf531b5de06e14a1007329b2e611410e49c8af716ff2c8fd277a474c1e3f53acf8d59e67e1a1eb5cade166f317068be60be13c561230e211343c92c27f7adfa2e8a1c0ee8a79f986e363550c78a2111a7a5a24d0f629181866147bf3f7f2d3529ca044e2f637acc8578fa1a766f554a8ffa99114ab9b898f6c01b85bf81fe14187321a6a7ea6a63b55b98a860118d84737b519e07436d7af4193040804b3b9fff52c6de177335fde9dc439ed7e69fe1fe084979caf92052e0c3ca9b1d5616ac3b3252aa5b9634919705b805e8df0f7c5c0d17f8ee51e6301a9c741afa1e8f545ed24f4b9f62658c135065913ce67c2289a2e79b002f54508c73654e59262c391b19ebdb6193f7c19823ae1f9fe3a15f215d7919e0292f478c8602f5e93e252783db691b7e7204565d57871d0588c78f12024b1e7bdaec6ada9b8ba05092fff0e4dccc44be728c018748817c68ec84019e25e5fca082005ccdf83269f48d6243bab240b1b7965b6b0429412f3290f9caa12ab31115d8b20d87756fa7f93acc861911c130bdaf6084623a7c775e66ab3618c13bd1075b2902e9fbd7a3c401a669a7c85196e732eca502ece3379d70351a9df716996d38ef831df3eb023f62edde04f79a8da4ebfc7fb26ecea470765bbf54459f6dde6425aba9860459a1fad77bbed0840c8bb96e27c340ac13d29f12b51e5fb8e8649ac986fd3e79af5b0208ae0c040572900adb9bb4c2028bf178b5fcfbbb8b047d21f766ae17da69f286bc88234e63a16b73991faa93a66ae7ca6909f25d34f8b2052047df03b0f1cfae33f4868696a0b5770085225f59dc9b3c4122826ead6f0de401af4721bca4ec619d42c5efedd74ba43740cecef0c9e2a0539abc2caeac43d0c52f45a92d8da0a037c69862798663476dccfa6129290e0f9a1d058dd5eca8f7c223b44aab302265bbd19dbdd000d248b7380ada02b926a7b05faa6803f92be0ac281d83ad831a71de59e464dcf89cd9333879995d25b80f0b34825cb630bb2a2deafc152e091ac9b0062f98427ddfa12eeec8f2321146ac31a43600670947febd284ab7522dd18793c9edd9a5b1b6155a740a76419d7c61571660aa838eac77c97702b7dbbff26d227f9bd1e0f7df301b150e083805ac78d28c7613091ae3f1c241bcd5c8827fc4ceaa65a8a76d4319c27b9b720efe22da6a1c99f8e53327e24eae2a280071fd63f21e9625f9e4d04685795a45169b2afa2eb64149ff895db6db6a6e2810aa4131da1836f585d4560829df515db8ae7a508e23735cf8a0b3eacee4e0e19c6ef14ff19147340af121d3206cfd073dfc0a2e40a6e249fb87564563a7364b606d092a4d3e0f905acc1137eaadab211686c88f189585a92e92b767b1b3dfc8f1d048f85f395e515a021bc71ee3f23137e5c3ca8606df819333cbde1e86ec2fe2c149423dfe97e779958ed691e870a71e0b177c65ef66ecfd033272a1b8f8e163239da6bcdf99619c92888d87d896f88ab719b7409851432fabf0bc419e2708781ef7162562d0bf49df0dea370231b2e45b4b99c33db89f7c086bdeb1b15ec608a68a5661b036a299ef263b451cfafb85db492c2ec4603c8d5bb7903a83c8ac985d3e236d24d3c0b7642dea04cabb6d4907bdd30fc75308135ecc942522f36d95aca667e264ca5b8a85d0e74dc21fd3c4b235cf47574b242dcd4932ca6ca2b211ab4ed296ce57ce01588bf90df0c717686ca17412b610277b74e5ba9d4f7fd66303894b48f6d5d6a486fc66bc3c45f5322d24bd0c2af9d49239a2dd69609b583b1232202e24c68efdea62e398a9cd15afd4aeb3ff292d6f91770dc39487db0c0b0d6eaccd1951f3e53a2549822a36dbabca4ca049dc8d99018514ec040532ce782bba3327d678ebb5094f6da03a617fd80310ae550176e6a5eab227ff5ada6e62aef233a94cbe42dbd7b4083a17b5ca40921f94d0689c1e15b99290db3b1f6cfff0bbc55f264115d6d2dada816104652aa983851042aeb7a74f4b8e1a7f375f927413941f71fb6b888c94f06e3975d50efa9752b455e1896ae431dfa45a150b832056041a28e805270be90216a58103e96ffb46598f63eaab4683598f1d5e402552d0475e28b65f53b46d1663e1692256b1e01d2c3d65ffcee31eb35b76a8800ad3a9272d750d0588b9fc1d2b87a52db7c789b683fb3abe8d2b03927ea2c777fd0cdc958876582a140831fc655df2c2673ac8b785a252abf02875f978531d653003cb99527e08e17b81932d1c82c60dfce3710db4c1fe39e660e01de30919f8ac49973e12afcd289ca7648c85937bba22004a80a696cac0732d0bc1c4c4425810cb7bb7fdedd5f00d8db7775cdb7abfc47aef5bc1dacc3ab47ebf04adfdd40158da7acfd9c052196f55d3ea43db796e67ec9e9a746891878df08620de460d22eefb584d1bfe6e9cf51024df4c8259cbc8d8fbdf43e5e8ecfae0778f4f12effe747c8ca1697e5ebd9160d6faa174b439fb1e54bacf1e7cafb7ff05abc8c7496b725ff43c1c1b2e4a32286b2e056b81760d0b019a1c16c68f9cbeca3274a90115fe4716c06df47e565e5d5acb3a61b4dfd8992543f958ab3f2730bde81c33f87f8ac37c9d364c13e0c795738e426e770e9d0281233629de2cdf76b0065ee793f74b73a033431c95bda07d2af83b1bd16776c8a2cac97fa6f36fe500d664b8d9dfea22d13e3060699db61271808fc1c832e483921da72c359d40d9ea77b992269a094be8067f3205778bb818cbc284ecf4098f7380e1ee4a81971697397e87ba1a404486553bac404d7e8e697a915fdf1a6373f07f54e6d5e6e0edbd2d96c8a62a2e0f401658a48efdbaf3cf5b884f0cddf52ca602aa0d4d67c6bcea090d1ef71939e98af107404c553225d7814feae6ada5894a8f8fa82d01248b68e3482b5b888aa61dc8c4a66f1846cb64c2561290071d6c7bd44cd6fc80c26b64e259dc13cf0bd5af3ba4e39c8ee5892b5562fb0c6407c973a4fc768c815f40f0917873776aeaf3909602d4ea273475e4d5b0e3c773e8fc43cbcf86db810a31a8b6dfe6994742715c9c8cb3272f3af3f18cd61a41a490238ffb1c7b4f5e4f86e943377678354111fbd0de072e1c65b39336555c643fe8132f7044715c9c2135b51700a4ea48def40b29fa39c8eecf57160fb9729dde41dfc0f94197ddc497f9727b8cbeaa1b311beea56bb87c1591b99ed6254f4c0c3186487a9c142ebd1f95f91177c0f2e5270e88212df831bb0ef63849d42e8e69764ea2776eec249a06e1951138019fc09d170063b9b2757ff6d3399f63a379fbe20ca307e53362b22809ce3fd7cc31befa8aea0df94e43db441fd1ed6e93de5caba22326198e787a6ab30b0e5bcd923ac5ad404e06789fea906e3e3a23462b07842ed26fe324cdf5565ececbed583103e28daf980a4588e86137073ecd4af458ee92dd06c0e371bb540ac665cba4618f7f58ffe593ef76280ce51c0821a4f26e1721d6d9f9327031b35d515b01b2f87369ab4b601df9a0c97e52228b3a149c674ce340fcfa6394b18e4cf042bd49842c1cd0406cb51a243780213382d77d249bd63fdefe16390a8150a006708024e00a9ea65e2e39ffd47af2df6af27efcdca5d687c9ed298cf298d6fb3799c73a3e3860c00d9d0c179c6299052da9b5ecff87bbf12245dd8d34e94764b7f59a942752ab615c2b1101babda4e7e80fc4825628c79d41c99fec8f4499a85bdfaf5b5d8668febcf78b663464ada3eb84e5686e3b5de0fe9ad8d22cffaaf2da72dcc887584b8f956cda0a3979905cf4baae4c442b3b39a4b9e9ead1f3fca88149904b1ccaca54b2f7a84428861242689f2864eba51157cce36255242a7c7b4e8c579b60e6e526333b134c5e6e7f0301588067fc3b9236efc38c79703c010288d38d4697709ebe0c8a874948c8fcf6807cf7699a88a757ea285f65cd95b38de2f25d9f5581a3be91224901b8dd2476badad6480e6c6f3e53d5cef8781a954f0e1c14a65c5f1ea8e5ce6158ac075422ef7b166b3df8bfe0c4351119a5245c65b9211335295588683182b2ee2d31bf04ce652e1fdef1d3e8c067a7fd9d4072e090d6df83e08644f6821471f6194f576d018c761d79be53eda20c1733a29ee3e232ee5576dbb7f1f0ef586a7f5f30b365eb8dc7fb505abafb888e2cfef364a93376509437fe5b931f981fd6598aae7fb4cf28e0d0cdc224dbdf26943b8cd34a38735ac81f500267c05ec18245bca40a5c82606edcb99f6270a240fefcd86697f32be29ab565d36432044bc04f6c6edc139aae0c63d4c9c5f6862c9045e95704fb7df5e19ea1cb07fd07a2a1d8c7182dba18e718bd5a57cbfabad87275faf1f942cc92dba4adadd629a200fbbce6fc9e46acfe75ebbf67bf1974654d6b3339cafb7ffa89f52c49ca31a95b39500117b5e5785a75779d4fd1005e2d7e85bbecccf0aa7e4b072801205bcc7b0fca69b528c9e00dc4c17cc97dfacb6b133031706cef0f80095db1cf5cc259adbfacbc4ec73aa2cf7383944169e66bf4f2d6127fe5b6c1e4d4aba8a000606297bdac5509160cb4a5f178dc7876ed4f2e0aa8c1dc6d5c9141cd473a64b44e43fb6696f68c6811aeac38fead73577c679f0d91946b6dab12577cea29ac2198af3d5854a8aeae6395d56d24a5e8822d1984da67ce62ee18f799697b8f6bdbcbc961742274829961b68af8f8c20e16c39a94fd711113226b8f8c6c843954e97c47ba2bbb06091c2aa7bc9daab8d9c2d17ae749bd6f58c864e108e2adcb5fb567e61fb86e474ce6e93b44d047a74d2c985001c5414bd2f8245e1ac6f72995717d40d038c50618a0ba3cd739737f0bbc8e16f69fd7d1e9e36df368f928d4f5548cb829a624e5dd9a59c871bf5fa7736624e328b539541dc5a03d6ba642c08d8daa1e8b59ecd8613f23ce367e9d7b410b73c2af8ec6f82370640131d4e1bd10a5d746cd6d99869235b970de8a385cab87601b4e5177d455a3499445b09ca8d9cd861d486bb2a293a7fdcacb6aa35bb9920db9824524062c0c2af5771da633c845b896cfde2e3326beb3178c3b4e82a689266afd0597e62bc6390047a1b11536e17cb64a8c31d000cedc3b91c37b9163fc5bf6392df37a98250e3f20d436cc170516689457a4470d45942a2840f33009ea32c2293b5ab9094dfbb9eef986b7fbc04be5d760e7372f83db38131ce06fdaa65f8bbb9bfe2e5743f15d7068d2a82c68b354c8242405d31095c9dd884fe983ce1ec8f4cbf9877a66a01851e10e93ec77458bd4a56fb2abb4d82a7851bf6f3f9fc5958683197cefea33d599f48081097ba80fbae8d9e766753ab8c87e2c181832d0d31a69869693ac226c069ee8506a2cd50ce8d6b2c385ee263f1e46722ec0aadc2cb601444cb72d15940c96212bf0927702e8778c4497ad1b170a092d1cf03f1b4b6df921ef8327a6420b24dca5f1a5403dd683abc8baab4721108f60937e6e042463c40881ce7cae537a388f4dca2d933799fb47e3967e257af953bdc0bf702498bc85b881da88e1ec4f1fe436b5aa1532a3938b68dfd954c3084408ec6ce94a5155e18c18093ee8c13864d804f2a1643422c213645f4d20da916d633568a81ad279b88b5e0628f97ae697912787c641daa21b090fb4d66a83c0965470526b790095bb2eabec8533a6f5dd2325ca644f04946b0eb85f88ea4cd0d69d83b99b5c3e4184ba09df956dedbbf2a85a16ff4065df57fd0b9bf6890a9f038dff989c426d323e5b55772b6d5cd76b214ee3b72570610aa0b9b4cfe80db2b3959d55e32741aaf2678f1dd3f785635e17d87da67322de262dd99777016908ac0c32a3eeb6dc645294186889a5f02d210ae67c665d8a8383d792cc96a3e0fd9386e1f0e2cf42259ebb544f3c5911c08ab190a069397186fe808e65f971d2fa229f57081aad369ff11a54855b1009c494f45b4cf5dbcef26cb4cb6dc647dc868454c394046a329e313648737dab880a05ded86b502945289689e5617aed41392c12c8652fcd3c63aac0ed3feac01e78d0a8b99679fac6614793c53f8bf80ffd2d326f45d0a0bfb4d44e754fdc4e056f05eeca2d00ea65745281c8f448da72290ddbee90aefb7e86822bcf6c0a2250fa6f5bc27c98878e08953c17adcd6dd7be04def486b7f159742a274b4b44290b98329395713850f75c422458c1688d2bcf836a9dd780c9edf5fc596756c78f76bf485eb01e1651fe611d25e74649e93773bd553e4d054bf90183b65e7680f4804dd1a3820eee001dc5f4fbf55f5c476f7dda1937055dd137ed2a301162824444b9934ce1af42037884859fd5bdd33eaaf97f5e08c0c4abbd1e46bc2cab341fd95acd4cd58dc4073ade9c487ee04bf6ad00e79f28da6f80f39591d883fee480514a3a7efa5804941f47c9b369038cde8e335b0638d7f9bf70dcb855f75fc77d63364df7d22413b71569a41c79e947cd60c36a595c646ff767b1efb7ea92731aa3bcf37d7221a89dbc6328522da06e8153d44f78b70314cbf77f5703ee53e8f60a13baff1c042d235fb276cd199760e18b0d5c0e65949d8bf58d06da1ac3aee4fc7a1366358aa15ea7ceccec27e3c423eafec2b245d482c54c6c8f49237e5ac6a8702b24cf74039ec4f711c58f3c1493c9727c5c1c7283c6170ca904eb8b2570339db0930b6e02162655061617567c2b2f1538c9de4c08c38906a116b99fc2f6bfab6c89d4541b7fa4512d18431dd726d4fb16c150401aa439f8adad037558f902510332bdf54491ff1e0f75a760cd8c12079e2c6bff25bb5bbf971ef63b8fdbc4d886e819e5222e26aa878ed17cc2635aa71e004759221ab7a08d126cdcaf6bb82ab2d5acd1fb63474f88306e14ff963e265dfebc6e2ee44313b8e661e39f22334a2e8c095e3f5feb4a390fc4bde237f91a62294a0121524c0a61beb12e2d5ec683996401820c49d8782df13ba4399210a246c709aba2ce03e65addd8524dcbb0ce3302604d4de99c633bc315510ed5e2b6f16af3955506e15f375224afea99aee55ce36fa472f75024d52d39ea47da6b88625089b2a5e821a2d1ef21e3992d938d96000fc379abc51b70de669ac3dd1af995f289ba12cd60b246e1e05c9354bfd180d72e54c891f3d2db8e5a1877021b79c2615517b1609a204bc9dc62a8cbeeae7036d51ae905dd07a6b47a6702b1e6558fb1f2a98cf8dea385c9c7292e239074a2ff2bab1b1e2e127a94a0b461a7fb19d3ab4feef2d8fa0c0db9bbf34ad9c9de656349e0b02fc3ef24fabd680dd753081f6a933898e65857669c449e077155f1c5a5a3b3fa7934d357fde1f47b2c54f50000d519de1d4f829c5eaaa8e913a88b4a64ee57c3f8ab977d78467bb712d926bdb652b9bc338e34841feda14966b52a2cc29ad1786609d136b1d68eb04ce26fbdc71676a61be6a32f033963196c0f901e9eeb1c7855b5ead5cbb7d2c60c3fc665407ea14214d89b8faeef1cd9b4bec4f8259a1cd7a908233bace7cd8d7c765e2b4b0b182cefa34186571d086699ccb6d8c590069a08efd8cc4ece6ed4e71ea47059e478a0d8be005b48a74f6cccf67eb1dee3117786c88d0eb3fce851393fc8f862883a47b7d37ea5d49c3aa6c092535b48e64d584789b09c39203d86d413d6946c790b2ce4896a10ed3b4164be4d72517a41a3fca2d4c3564425630147cad688536add3bbea2a649fbd5e967ec709c9db5dea7167a1ed806363623c5b1e7a9da22c1fd6011e7a72339755ee080a3edb571308569a95a570f5a11ace443201ee62b9256ef072e69b04b9387d11bdd8e8bf5764758846070e7a1e05c1b08daf4b5fab157feed4b5ecdf5d98c51445d226b9eaa8c021fc0584fdcd0050a7d4a6fc1eee0e425d22051eb4a25311a4fed7042343de02441d60b9f3a786a0eada657c4bc8e7f3d9c48c6805f90243f0e9be5d21c28a1db0c5d587907198040cbe453d75b95d80cfd6d3db4b82eab863109b03c1d13633f5e5bb7c6fe6d1ed95083c41b1586579e8a02c9feff5e10f8605576ea9eb22c8bbb750","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"e06b548b27a7e7d8dcac8c756dd3f2bc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
