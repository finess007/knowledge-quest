<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phrasal Verbs Progress</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #fff;
            padding: 20px;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        h1 { 
            text-align: center; 
            margin-bottom: 8px; 
            font-size: 2rem;
            background: linear-gradient(90deg, #00d4ff, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .subtitle { text-align: center; color: #888; margin-bottom: 24px; }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }
        .stat-card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
        }
        .stat-value { 
            font-size: 2rem; 
            font-weight: 700;
            background: linear-gradient(90deg, #00d4ff, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .stat-label { color: #888; font-size: 0.85rem; }
        .streak { color: #f59e0b !important; -webkit-text-fill-color: #f59e0b !important; }
        
        .progress-bar {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            height: 32px;
            display: flex;
            overflow: hidden;
            margin-bottom: 24px;
        }
        .progress-fill {
            background: linear-gradient(90deg, #22c55e, #10b981);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 600;
            transition: width 0.5s ease;
        }
        
        .section-title {
            font-size: 1.25rem;
            margin-bottom: 16px;
            margin-top: 24px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .info-box {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
            text-align: center;
        }
        .info-box p { color: #a78bfa; margin-bottom: 8px; }
        .info-box .emoji { font-size: 2rem; margin-bottom: 8px; }
        
        .sessions-section {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 24px;
        }
        .session-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .session-item:last-child { border-bottom: none; }
        .session-info { display: flex; flex-direction: column; }
        .session-date { color: #888; font-size: 0.85rem; }
        .session-details { font-size: 0.9rem; }
        .session-score { 
            font-weight: 700; 
            font-size: 1.5rem;
            padding: 4px 12px;
            border-radius: 8px;
        }
        .session-score.excellent { color: #22c55e; background: rgba(34, 197, 94, 0.1); }
        .session-score.good { color: #84cc16; background: rgba(132, 204, 22, 0.1); }
        .session-score.ok { color: #eab308; background: rgba(234, 179, 8, 0.1); }
        .session-score.needs-work { color: #ef4444; background: rgba(239, 68, 68, 0.1); }
        
        .verbs-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 24px;
        }
        .verbs-box {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 16px;
        }
        .verbs-box h3 {
            margin-bottom: 12px;
            font-size: 1rem;
        }
        .verbs-box.mastered h3 { color: #22c55e; }
        .verbs-box.drill h3 { color: #f59e0b; }
        .verb-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .verb-chip {
            background: rgba(255,255,255,0.1);
            padding: 4px 10px;
            border-radius: 16px;
            font-size: 0.8rem;
        }
        .verb-chip.mastered { border-left: 3px solid #22c55e; }
        .verb-chip.drill { border-left: 3px solid #f59e0b; }
        
        .footer {
            text-align: center;
            color: #555;
            font-size: 0.8rem;
            margin-top: 32px;
        }
        
        @media (max-width: 600px) {
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .verbs-section { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸš€ Phrasal Verbs Progress</h1>
        <p class="subtitle">Top 100 verbs first â€¢ Practice in Telegram with Nova âœ¨</p>
        
        <div class="info-box">
            <div class="emoji">ðŸ’¬</div>
            <p><strong>Practice happens in Telegram</strong></p>
            <p style="font-size: 0.85rem; color: #888;">This dashboard auto-syncs after each session!</p>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="sessions">0</div>
                <div class="stat-label">Sessions</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalQuestions">0</div>
                <div class="stat-label">Questions</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="accuracy">â€”</div>
                <div class="stat-label">Accuracy</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="masteredCount">0</div>
                <div class="stat-label">Mastered</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="drillCount">0</div>
                <div class="stat-label">To Drill</div>
            </div>
            <div class="stat-card">
                <div class="stat-value streak" id="streak">0</div>
                <div class="stat-label">ðŸ”¥ Streak</div>
            </div>
        </div>
        
        <div class="section-title">ðŸ“ˆ Overall Progress</div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 0%">0%</div>
        </div>
        
        <div class="section-title">ðŸ“œ Session History</div>
        <div class="sessions-section">
            <div id="sessionsList"></div>
        </div>
        
        <div class="section-title">ðŸ“š Verb Status</div>
        <div class="verbs-section">
            <div class="verbs-box mastered">
                <h3>âœ… Mastered (<span id="masteredTotal">0</span>)</h3>
                <div class="verb-chips" id="masteredVerbs"></div>
            </div>
            <div class="verbs-box drill">
                <h3>ðŸ”„ Still Drilling (<span id="drillTotal">0</span>)</h3>
                <div class="verb-chips" id="drillVerbs"></div>
            </div>
        </div>
        
        <div class="footer">
            Synced from Nova âœ¨ â€¢ Last updated: <span id="lastUpdated">â€”</span>
        </div>
    </div>
    
    <script>
        async function loadData() {
            try {
                const response = await fetch('progress-data.json');
                const data = await response.json();
                
                const stats = data.stats || {};
                const sessions = data.sessionHistory || [];
                const mastered = data.verbsMastered || [];
                const toDrill = data.verbsToDrill || [];
                
                // Update stats
                document.getElementById('sessions').textContent = data.totalSessions || 0;
                document.getElementById('totalQuestions').textContent = stats.totalQuestions || 0;
                document.getElementById('accuracy').textContent = stats.overallAccuracy ? stats.overallAccuracy + '%' : 'â€”';
                document.getElementById('masteredCount').textContent = mastered.length;
                document.getElementById('drillCount').textContent = toDrill.length;
                document.getElementById('streak').textContent = stats.currentStreak || 0;
                
                // Progress bar (mastered / 100 top verbs)
                const progressPct = Math.min(100, Math.round((mastered.length / 100) * 100));
                document.getElementById('progressFill').style.width = progressPct + '%';
                document.getElementById('progressFill').textContent = progressPct + '% of Top 100';
                
                // Session history
                const sessionsHtml = sessions.slice().reverse().map(s => {
                    let scoreClass = 'needs-work';
                    if (s.pct >= 85) scoreClass = 'excellent';
                    else if (s.pct >= 70) scoreClass = 'good';
                    else if (s.pct >= 50) scoreClass = 'ok';
                    
                    return `
                        <div class="session-item">
                            <div class="session-info">
                                <span class="session-date">${s.date} â€¢ Session ${s.session}</span>
                                <span class="session-details">${s.correct}/${s.questions} correct</span>
                            </div>
                            <span class="session-score ${scoreClass}">${s.pct}%</span>
                        </div>
                    `;
                }).join('');
                document.getElementById('sessionsList').innerHTML = sessionsHtml || '<p style="color:#666;text-align:center;padding:20px;">No sessions yet</p>';
                
                // Verb lists
                document.getElementById('masteredTotal').textContent = mastered.length;
                document.getElementById('drillTotal').textContent = toDrill.length;
                
                document.getElementById('masteredVerbs').innerHTML = mastered.map(v => 
                    `<span class="verb-chip mastered">${v}</span>`
                ).join('');
                
                document.getElementById('drillVerbs').innerHTML = toDrill.map(v => 
                    `<span class="verb-chip drill">${v}</span>`
                ).join('');
                
                // Last updated
                document.getElementById('lastUpdated').textContent = data.lastUpdated 
                    ? new Date(data.lastUpdated).toLocaleString() 
                    : 'â€”';
                
            } catch (e) {
                console.error('Failed to load data:', e);
                document.getElementById('sessionsList').innerHTML = '<p style="color:#ef4444;text-align:center;padding:20px;">Failed to load progress data</p>';
            }
        }
        
        loadData();
    </script>
</body>
</html>
