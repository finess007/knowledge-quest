<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"e8618860364e9ed6579f6abd9e5b48c9248f4cf62e01aacb54e17655aebd285fcb30586853221395c8c44fd28264608e5dfd2121efc265dbbcf4559b41081355e858ff2c265882ca9043f4973f793690b541449bbb6dc8887f506874c27be0a01e3462586741e7e7cb4d6a239ba14197035cf951ec1c26a72091c5d0b573e9ec168eb3237b63cc2baa408dce58a821d125375d291b62289a779d18c64acbc0f653ce93755ec9ebb962ec05ca5ee5b3b358052d13b8c7cb6410c7b0d5ec9334db2c5ec3c9adc46a0233772036fe11b2b3d3451a703947b49826f79a00ed007cb20b3fe90c854837b650a516359bf3bd9726581c0d63c5c5f0e66b4415c55ff51ac9458ce8a61bbf718c2964651cfe128b6dd5218a3719305aeb7e12cb2990004f424e61fa799cb37e290e56d12a3e4f37b0210108dfdde9ca93813e78f9089699414eb053d3f5a58682787c09cdb42715470b07ace8150de8c9e5d44c9e3afee65bcce59143604870085659be5c6ba3b70a4988c0d86ea7cc66211fc91199a3dd7f2821e2c6a88a22d93366340548f80d07d6c687bd9fcdf17e9505d556bc262c2d126b751c7b8dee94bf711bf510b3175c28023b926fcef13add8ce7e0e6eeea5781bf8f395533d987936d880874efa31b19b5364910011b5b97ad2b438089c5cf294abfd26096b2c0aca11b0604ecf09848e94765ba4cf4364c1707a3a2752bd48bdad66baca163e4bac095e7ba0189e61082c786e9fd93a42801e06b72d1273d5ec79d18943662d8a406c3b06e01c02fec64e5f753d95a520d074dd32a451c2216ba913a0e0ac9d4470609a2406adc933806a69583fb267e6e3ab1b57f892112581968ba4bd2506b2a0633d3dbfa195a60aa5ae999e50b7a342982c8c00287d4c6a720fdffff093b419ea4423c778caf13e888f78e75d4630cad11051e76f5d1076d15af4acdf1cd540f7a469bd10993725b3dc819f53af951c4f2e2d07e4c7cc291727bf667e88608a4cf8592f5e427d9237bec7c5f8b35e2aa222ca96d0302c5d9b409e1bc4b7a8439ca635ba688fc45427f088eb6d63d10027e34eabd054aeb5d4419376802e80275bb347dd5646517700b83e704f8269c5cdbedff2e62696b515247653863025964025f301a30f513583942ad8dcaea4391ac5e8b3511f32a0cfbaf389c58dccd7ee6f683ecc13f7f40b9bedf2c16babd206dd0e34a6c9c624464f1dd55f7f47ccd81f2841f3bd4501b06747932d0218d89e012db7be882ce556a0a197ed2f646be368ce901e3048d470c1ed462bb5fedfb1358f85ad2597ff588029be38cca1e56eec522673b782e77e6a621b862449364538a3b6c15799d19d7e6bfe657d5ad39b9449dd79cd08b95392015c351f0cb81a22262cbc91564358e0b053d5cd61bb7a7235cb4ed7473e0f82987fda97f0cdb5cccdac835f5e6d0b1eac1810ef45b1346b6fd487ccf6903f888a4bef27f100672a88ad706ff581c3f15b9c3f49ce4deefdfc9fe4f275fdda664f92876314baaecdff2e32a75ede2a3373dea17428d89d724d9b1352f9f238b6344ee4012a9ab666c60c8ee81cb3c40d268a5a84ebac58ada27fd344f9704dadf053edb5fe3336071feb7efc4ae6f63770b04f292cedadc323f2ed29234c176979d20f417cbe426900d5745b16a695b81eaa5433b2f7cd07477d8ef7658d745f43596023720c170582211608af3ee77e950f5e6f81687d9fecf5cb84dd1da3ba7af27e1ce6d9b1e2da6ce6168e6b743aa8f2804e6dd5ee1ca7d6aec1cc974c2d0772400e98c328ad51a366cff0f53924287b4e8565b0d7177c39f32dac2502eac7519f37e6e7d50b15e5b390751aff8b56134e43d8bf45c2e1d60eb769a606db4f5fb41fe257412ed3ce4622be5136d4a58991a3f8eefd49f3408c22e3b3b97bfcf31b6e4e106343c63eccc534c6df1d63d96956601b45f113f0188ff8c834ec805d1d2b920f180634eb9f5c22027c641e51e4c8e036849eab7bef7be6f609224bd92401affdb8f0f3e380a512ad22d996c3b9d28c64841ef7e7081fd5f897806ef0431259e2bf60ace26c15901a10354587e44da3217d42b627d6086172230e8c3b2682bd330cb9f75b4a4ce6c75eb823b2cc0d4ad2aff8f8081f493759cb81cb31e1279dbe19835d8ce9b2f9be4b53bbf6b6bd10b888bea0ebbb70249920409cb6f8ac24738356426f7dc37d855361be72934286a76f22fa2f4c83ce91bde11b784f503de1345ed5473a8c37234497b499a0134dd57d4a1575b3070e5fe270a7e26c3fca8c81b2ba22e94036795161b07ae40f6a789b2c684f6bf65e3760a18e39ff71171d6ffd2057a833deeeb1e5a8ca05851e74e5b17275171b6702e3fdb9d8127b15982d2635b41bc6e474193a8a0143b332bd654a2fbc560d08cca19320929174e0db53b0e47517b0b7cbe375a2263d6180dd61de2181c256457d543ece8661d7c4026073df7f8dbdbadc1506d5e0692117c41cab20f0ed4d226441a5faecadf66ed3202d90b3618152e7fa10f10e2d3c9f3fe746de29958fffc1b69d694a88df7f681277b7de09a51f9303d199c54d8c994c4f90af0616a593a3614dce6f4453a59f560fde7c9bdc7c70966687f1b494d5fbb6d3fb236b1bdc997360e2e2ffb63ef43dfae02f0cf520a7d929c754b718bb33333ba304dc19b8c2a28e3f37e75273e16d03c5367f5f73f3debb6ecdb5541c91b871fc2edc137263a69877af4dffb808f20caaea3b88815a13d7c9e925dc4047e9a9ecf2a263f07975680c6486fe6f78c8c10ed17ea5906048f40080fe276a8d6a85b31e9a3b65568060db3ba6a0644a6ba37a2ed4a2aa1d917e83d567ad44461f919d5d987fd0ab24925b80ba631e0e490ebbbe264c08b0317cacdcfd6970c62c251cd31436c306bdb342a67a5751e1c0a22833e668e46b4859dd421d71d167bd881c058237d513ecb85235d621110893db95ee4b5a2838c841603887ad309447ec588743e77d0b5abef966f0d2553b577c01c7658aeef1ed5c5fb12f8f1ad384c70d48a7c187340e1eeb4600d871ec09f69f2a2ffb0bc047be268ba617e3945ce730136e647b1788f04b3f9de88b98cfdfce8b19af28db9d3538d38176fe2ee0d74c82e306cfb1d458f43122529f1f4d3b9b2de083728fe73dc335ec6a622a8e5f13f920bcb974ed513d9e5fa863b773f5d8fdabcfc18c42db02764d7b96020f762c99d3f15623d69c77646b45a046ec84b9f03f8a191307120bf053b63112fa8f9c3128cf44130431c76bab4059942bc11dc447b27d997e7bd5ef1f28b65eb4c273c149e4f9734fb39177cdec02dcb4d034c65800bb48dad1318a821dd8a996dcda9cc53fb02648ab9dc2a1f8e7043ef9a20332cfc6a06656d59619cb5e4589c5d2268101b9bc55152663bf59deef0b4299b7ef89431c48a0ebeafc37c2eed8bf6b880568d730a1932afab0be1fb0f9a232dfd68d465bf198e2719ae36e5988387be52529af7fca5bdb9e0a501e78237dd1969cdad9d30e84e47a9399dde7704cc9754ed9c1011f74431d14df1526bf8e81db40ea33371b993e5d8992ae558a3ce5f6e8b7200fc37d2dba94853d6b31082d301c88a0d27bc04e10ac92bc2f3dcf5f0afa93def8e5fc11ec60171c6b20efb110fa14176810c25cfd644d0e7934102e111efc05735a3c8b4e5778cd2a69599d4d887d9882caf2002056b52107ea25ea3945280a7352ab6d8e664f63dee33a56f753c5bb0459dc3c24cfe4e4c06ca9040ba78910187da444a0e2707670d6f01ce4ee50f6b480cd35d568730a3422bed1e729daf2f16f5b63f6514d62694d96b51ae8ea031ea2adaf4df8f50a082a605bf02bb5a7571376daf555e52ad6856553bf94a8db3612b4f9b52b1ee94af46ceced5263360330a92db9c198cbac6b536058a70c95fe1cdeb8f821fda75e11eb6b0e0691c028e84f938c8c9923709382b61edfc9453f145a02b74edb0f1dce750658719bc19a06859e5cdaaf7187a10b97da20607efc5688b3fe137b4f5017b9033b9f940f5d2cc6567d6a1caeeb5c7f373c4feef42e4f6493d1a0b96a6ea4e96ff153cd01bb009290aebe758b179e5b3b7f273edefcff6ed79e1a93309e8f074597f531c7b73210988b511a9afff5e21730a07d3d832b7e351564e438fc9178fc8563175ce96e91908d9141943d143ea4a9731eb39f99874355e7bd1db85686e4350259952fb146718252fd18b1adb8831cc3e6c9e532ff75b1135f7af9db94f60b2c0b1aef689807a6d06a4d72d951ff43a8ad79197d932f16a346a81cd3a3e4e55596c8c3e2ebfa1bb75c7009c4c7e586648008db101eb0e27a33012f6096f61806e1187ac42dfa7206a568470209bbbb33184370b00983f94ab651bee90fa7dc8d791706f5d03dabb215b4778752e005ff524f6a58d4a50ac06cdf526326ec7ae68698cffb4d5415d07d80b2e6341c526cc61a30ce0616724fa52b0092a76f521291977578fcd0cf6b81a641b07fd139a563e3778c8d2413178bbde7231d3ebdc3e50b9b1c951622683f3b45f09025d8518efc2044849d1d3d1616faa6b94577c093a8985f66c6e2f2d4c7f17a746cae075825d87acb1c8205b2258d75ec84cfaecaf77deafa4facb7ee13086fe727a986c7e79fbe2fc6ee2e252660ed501c4ac7c0376b8e7ca77cac440ae74ba23f489afdbf16c8676687793653ba70217b10e2e3e9bce1758685643edee1903c3fde63247d378992f31c42af113e232690d2f6abd156e276a02aae7ff0704ce9103eb97b3190ab1159089f50b963465b0de6f8fdca01004d2fa3c0205f7f5c05b917d3d4d7e9c6e3668f5b49650e5a587585d8466dceab683baef3021ce751f0ef387ef6675f61aa356ec5620a98bbc63dd06af42ff0372ed5827c3732d1d3afa61a5c579f5cae1cf1076317741359a830940a44c64a8832b43ba667e934b629b2e99ac249d526a214bb6a65a5b634f3e333cd68d701a9fe1b2d640d4f71f2b320d4e5e57f09e5616d1a38b31dae40242b0ff033a9e0bcb103ae3011c309dd56d0dbd955448714a088d4a134f9989fb209e47d4bacd3fb63f9e966d012ff04055d20091cb487f9ec0e1c023274d2d36f985a4bdedc5507a5fdc28c0a48e80d0f6716bfcbadc86db4f007e5beaa89974006342c2d36501655a99e88baed922e676164a05167ebd7ca9d10413e5c378cdc45a31f55d35a07410d67202ee9f4217e0491baa731152fa0149696eb8916d5f423cf2bdd976baf9c29dcd03010985df94ff1ebf986377f41381cc1ab0eaaafbda2d730dad684b5ff37af8eca08a32f347294e5680e03b6bf4745447cd08d1bc805c85b1532e17b03a5aaca9151597371e0e24240c9f4612d7da4e7a6adef0bd84915210ec012c446b6d392c2ad8ae13ddd9f04bb0d2a5ebc97cd96db05972f8aa14e66c7543214673d2522884f996dda17c8ab905723c8819ad92512d46c4d39473cf6d4a74f91382cd14d508f8d968032885ab4264b232fddeabb29e664e92ac8a3ce5bd17586dfbab70f8b1a6dc6f8ad354dbe35d7651f91ca9b51966552f146bca0db5dce1a9cb4144fe7ff392374aa84697436257c1919c88be68e5a11a857dbfd7c24c60eff25c84fc7bd1c759a18903affba84f0ce868dd1a5bdfd3a3177fe5faf3d639ad1bb8ff8921f277c32e4cf490127f9d7b386aa09aa76b6355e9298dd5e47f89c2ca4e965c8dd9da9a33750f5e152af03adba0ecee95f6c0b2192d2fb54a643abf7718b2a3d95d8b339efc33f01629a2db54fc91696ef80a9f3d39783dceb57ec8d479849ad5cf5a62935a9f286abfb45ad1a0783c5b2a035f1b1029cd658aeca04fcf70e17d48c6383fbf85f60970ebd343ed24740c3e939e1c14b738ad04bf575ef5cf2a907d704032ba6cc7c3dae265f2373bb7033d7d41da01c7241cdb8ef16d0b178f8a5dc66b55ffb3f4d6213d84c2bc128c7d22f4b5bd7e77fbae2909db3a762b31009d2b41c077df4f1ac81a71787ce52160677d5a369147378829b2a8b66b77fb01696a0cd265b7f993579101de2ad6007f7a9e027d5d288d346cd459ab30b08ae5aeaadca0ef9c716914bd45a5e9db6da6edff38cf7fe7f0f31296d827141984d0b54a969d3e2b6e915b0a3b6d3c127355e068b9701e32e404b08a0ef42b95bc05bc7cb86092ca5498dddea71a7a9efd3e1ca3918ccbd45c037ae97503487a4b8efa73ff9e3763420d65fa8d4e0475896c87f47796b9f8449fd857eaf4ff543d8f747a5023d67b7eba33a183f3536f43d6056fda4f26a0c8e52cb625eb48668faed796ac14470747f0e4f9dc8b5760a0b8433fa7f3a758628dfab246c0054a1acc0e408b19416b563288d45e553afe6dc08644d88f9aa6b24d4fd27691502f2754c231bbe3ac1c536361f555b61e0da89dbbc77d6666b4ce6c625784f7e93b09ca89f10093c51d9bba2a9a537ae5d650af66f66e53444cb7700a43467621186b020707bc7eb1682254bf9283ae446aa7fe9e3f7bd978fcab183409c7b9a105d59d6f9ba436531246706c3720dce4f1b7e413c122e46c839966d5283a7da785e2a5d32785843367ca6bad853d31489cc1acc767a71a65cf28ee83fdcf55af654a549f11b7b80d098c56a4348160863ed21cf9ab4ba538a4fa9f0aefcefae0225c3f9cb89ee0e6ef7cfa898e944baa56d3aea59b2d2f415b6c80643bbb00eec9cd5b2c0800158b3853b5e20631105e8437afb0678f991d5e8b741445c4105827a85f0e40c68aee5874851e675c86f5c0bb2bd95fbcd1523bec926492dadc9899f5e07d3d0826569ac218daf582cd7d183f5fd0c5504098a0223d8404aa33783ef12ea6822032e5e2201d769975cf285740eab7da94bc25ba740d83f657c9592a17b8c9a1d11bfeadc7e3b5f38e846523a7cee7dcc5056dd432da8c639fa9756184f290bb94e79173d2f3b3d5272eb3bdfe7d3961a18b9645c272212996528ac930142ade86ff9012e4e48161dc03215b42410aa1ec68261f840908e2db295c656af5adb9aef4f845c3b031555291383bdf6558dcf335598079f08efbe5fe5f96191789c6257f9259df5d660f4ffa54cb36e7fcbaabfec56a1f98b442cf645c1d1d103b95a60dbf5368abe53828afef27bf0f856e11e994bce0cf1b6c60cfb7a613a790a4db75d787a3aac2e1caa52cacc6c82ae3e3655ec6ba6679ededa46f5a4e62053e7e9c2f302b51df45d29f73da8898c2986745a35b3063f9d4f90babb1cc0bd40087394dca5238caa0bb0b1ad140452c8c2937c5f7fbfc58a9707c410b8bc6a818ae999ea2f8cd994bec9cc42ab9c834ecc670ba93c1a5c65b7b4d0e2db5a9cd2005cc0b3496f9a0e380ba23b61ad2a8cf5a0b4d736f6cbe2a721bcb8e8f35f139e54f4fef9e1d9497944313b949da973d3f58f51b93762eee6650d315596fe68bb111fd61ace5cb76d698d4c857a6f925966bc3c83d609749981cc8ccd29096706c9fd6bbad00e7e7b3aeb5b8f57a24cb2de38385591c6c0069a8724606c890fe9c6229b381104d63f36362abd12b491410709f3114321426e3a932fc2ef68475d075dda14010125da83f7f18a3f1cabf1dcea2ea20353210e114a2bb7a7ebd53f7f8b45f479731d5d1a616b1d4c3457a453fda9211bdf6c667a91874a3d2f9324d679c598684f8199a00b02bf6e966f600f77c6cb5d6ecf8f13893391bf8eadeb1bd8e9e422307eb9b614e78ae2464c2c248ce4012e42656816830e2c821692640af1cd626b86c325308bdb6d3979268f476eecd7674f783668f517f27324981ef41c024652898d55e660d76ee7f0a33d2b59c9501731c9feace73ad2f87fad4575adcb713f4361c722b93f4236570c31bc17d66b25dc28fbc4493e7771ef0f81137b8fb2b45b95317c89e539d3fccd458284241d1fd561da1eab0e1ddba4ce98c21bd11c8f285490bd4589f8968054c4c06ad4c3a0b8bc3559c469fa55d5ebebd2b6266cb7ace10f86cae9cab2af8d3e9077d4c61953a1781ecba30c33c31bc85da9040f1748889b3b49a2c3cc9ccb351450a97bfd1f7abd27fe38087d2e25c955510d895c81f9c65b493fd5182feb4e84adcbdd2fa308e87fa040ebbbacf8b123decd43a2c3e6aa207a33291c34ebc8593783b7da7564de0126b11e928e04579bd8d8e679a84893953f10f2ae854be377cff107a2fd5fdd730f85849016ec33e6957c8eba642fbc11e4805a595c3711fde1ac2abdf303cd55d6aa8137b52c12be900106a4a4af09023b2d6caa968eb99a7d7920d2705500f696989fba4347a783c89c7023cf02d739759611c3ee564ff459e62994015615a5534739e100df924aa71878c5d20ec1a49bf658a1b5c21c2e7c9b7f75415828c3eeccb99691efeb889b11b8de28d05e074e1ccad45984662d1ffb95e9c51355991b9b4d6a21371c4b4c8707659b36554ee79d377c36d6fa7851f6124863658d83899fb87009434546756491356472bf162a1ee336a772acdf1860db649fdd903f8a24148a7b84156510ca2bf111eb6c064dbaffb0c959963d05fb6e03ff8ae31f1bf5613a16bab51ebde5f10b4067dcbc6517084343badd022dcd75d1d0bcf3d91261cec949f10b8a85ff3edabb3ac023c5e34cced16d04c6cbb65188882a439fd5c870b9f6218e538195ad2f1b2fedb1fb327f5600d7fab042d313abac61a12118d8e238f14a73e7cea14e987f651822320e7c70ecb913279e8a45d125196893cd068cb228a0d69d7185e06f108d5afae13cfee91e2484793bdde26cb620b0bc685fe30b290ee99bd86cd297ba3da34ab533922b6a539a9ad3ac745392c8287eea98d5b37edc02a138b83a85e6ada2ca78adcf3540dbcb1850014d1e8b640ffa5fe08d88fee34b0f38d4fcce3b8ceca501563a04a3021aa93a341417b60f31a5bb2397f25740997c127d878474874bd885f040c2da08f953708dffa1bb709d287c45c27b2d0fcba96fa482f49e797c97a099333398f117022444442501557b855ddd88b7e2100e7012a8d34e15e2c17eee82027bae34b2a9dd35fa6328549dcc661d9a24a022def084b7b689c14ff4449177083e188cefb5e357567cd0bb73beea8e7b160899746e1fe7a92f09d04f105d6692d808bba6cd54184bcfe50827172d4543804404af7a0892f3d7d3faf164fa0b9e15b45d51d06a6052db42b283ebe0765a909dcc13fc3ae66da3718a8209efd98391b18bb723fae38922e22d73b2fbef68aca7056713985ec30239461e540efe04cb935fb7c84d5be8ebb2e623a2ff77dcd6d967481457e78dfed15a19dbf34d43cf94431c0c4e52f8ba57f2fbd23abd133d3f62f5d7226c4f5efd09b6dbf5f565e0fdaeffb0f85938916f21b9b084a21555a7bb12b48db2e5c31ae6ffe426f86a16211e89f1706d9377c5961e4004a802c59c98b841425047a88917b5f7d27b028b1ba89315d44a23dba80573693f5078352ac229a78bef2192c9e1edf7a8491d40185f4bd9c4198506f6b3b2b6278fd5022fbf9f0f5efe85946108d72e36fd0439dafcac2fb7cbc2557ad779c5c62dc987bbbf0b62595100c93e54057b07108487160a5b016c651e177ca461b5be3675dd459f4ce33a5363b696aafa74b59b6d9ae6a5557350ae594d8a694662ff5048015b72c560b82fd2aed990fa2f7fab2d001d1cabad50a4436d89afc0664a76d29e2cc509fe855dadc287399730ea2f4ec650341a8fd4c1671e6994ac36ca2ce645e229f8bf50a6df504cf31b2c22935a95078ff066e07b4f72049235faab23cc5c74b5032c45e922b0cada97f4aaf681fa914f15bf642e72bbe66020b1c6ec0ce45e78e71f8693f93cd83c7c27d866dc46ab7fa73acca3c2cdb558302cd9291465cec4e2c25125a216fbe4382d0105613a23a2bb93a8e289c6009359eacce547982931daf1ae676ee329b7914384e4a446f928d38ed594da7595baf454a652175bf5bd560d209c6e809f291c0ee450e43926077a1f281c8bbee6c874b1a4160583552d830284997022e737bb8ae860f4e6c4ac399b98352349200154613993ee08763a4e629aa4f61377044c2a2c0baae1245ccc631afaa22ed7578230a0772883091b70b0776fefd0e46215b2ed3056accc67a1e5bec4b253b3ed7112401bd0af840875c895cf1aeb855b40615375d16c3b47694bed7a78169eb9431f73328d5c07b6a74dd2cba12914474b233e98d4ac6ba291d4afc9b229ca12f939f6a403e235d2a91a0c2e34d853a988b6474b4653eee1a3a4c8335f595d6a4e9f6608947e167fed79857e697899088a5b47e8d139183613f86ff35fe8fe0750898544d577f778e0b1fbb2f62078bc6c31058cef2f6760b70742c2e29752cc940bc10decf9582c5193f4dfb8ae2ed636b782319a0e273688bb6c07c435af6e966d58dcca26bbd698d09573870f188686216754b688eb28b1293b0524933504f3573c872a340de83a8813f1409cb713a7b02811871aac77a97a85ce06604dee7145ea9309a4ffd47e1a1c21e8d3cf4e883c3cdb5450b3a49b430d906e9695b147ce9dc0cf981a885fb377f0d3d004044b7b2bd6b98009ffdc92e8ad0b3e420bb37b02fec0f770a045496455c37cc3e7c32fef9a1d94d81c36b49cb71bd0ac29f01f08d72ff0ba6354d70229bd78c37e6527fabbf49fb1ab3acac31064bd810f1fcbe0ac56bfd7fa73fa586bebe7e4a580f75ab430e0015d640da5e0f1da7bbb29f4050be11639dbbbc670303bf5f0b154587d01744cde26f39fcc68c2f45d55a4b52763b4ff59c52a90bb14e67dccb8756ce3c865ce5eae2027cf9caf5fe0f9ce2bf81304c845fde445bd04177d6322936206b3dce724e3200157ddf2afd602ab54f17e405ce02458a4746229beb72be0f8f77b97611fd49df0afc9a45fa88de4eb6998a5bbfa75c132b6c398a5d31a186a509d0d90ab572d18bc52a841e7fc63afb95ace303e6cb748eadeaf5dbcdaabeb0268410bfaab9f5256f1e1986182e1fc2ff57f8b7e06b4059f400de37efed57e9daa7d0033b669950706cd4044518bfa7cf2026254a7fcf35d3424f639d2fbe9990eb38d700f4d553cf8090d7028f64dfbc57c34d9152958ed36d283a5d27f693ca1d520cfcc25b7be84295a450e75122dd02afe9211cdb37aa275379961f6fcfbc44e1b58a75d544b4f55f37c7ae4d56372ea5167c58275f997da2118db8b139b29380ab6966901a03206d4442857ed523d142f8e8c3d8e611e9dc4a669ff1289f27cf17839d23ff67a8f340df24fe3e34dc03582b081b85de964283c22357968c426b07a700b3e8ca7b6ccb60c147fdcc5cb848c37dc9df6cb219c2102728d92909631b8f1e8a0de878e18c05fe97b51ad70f73fb8a1efa4f1723e3cdd30a90ba7ec0d40d55171c303f9b954a7de7f6c3111f20fd6e261fcba85941ca30253d988a6758b07941d3d22dfb30f6770dc8e73c689de561264db07c79d25edc6bbe928c6ea313b0efc6b3d013515d1f585e8cc6751557597c7fcc81ec884f64f7ef6c26b862f59af27e9f4a26aed5dfe6933fb982d26d71a24a67f21c4133c87b5076ba452e7373a9ea8d1de1624a0aef283fc6dfd813399f935a1ec83dd48c323546c2b60a0597ff2090d88006023425e497c8456b03f1775c35da109ac56b5271186e72688a2c05a78dd94f213065d145322670c106507247908372f82a9542f173ff10fc7b3939b0c2bd8e1092f20957f804ff6394ce56f3bef425511d3bacaaca3c4b1ff96c734561f2c32d340b9d4380d25e11b804026077da73168926f03d648fbc592f6d2c8afc44f2c02107940af36a1ad765a5ced4014b98fd72a2738d7489449c06182d7bcf69e9b69ce62db10cde2a3353ddcf32cfd5f0551c616b3021519d179677fb7ec797be5c72780231a7d4a808669b0194e747bf62990f89bf22c6cc6db225ef905a731491029f07253901670a167514a0fc0be68c3ee809346939464d1adf541c1311283d449cff769c82569c578fb6931e4cd8e79875b3668dee709f635ac4f0ecd820a987e046ddd7cb941b88121701d74e8908b2ba22ed3175db9df44ed4df0c129a7a8e20138bb7dbc4956f31b2d7901500c840dc8939d50ac4ee7526d07d9cc6731cd86f82c5df41f0040dc0edd837dc59de173b5e08555a66fddec9180140e86ea8615e8d24d6e8cb9cfa7440a7e2ce35368ccf74e4da02f9149662451b505abebbb276d3675c9dd8aebade9b3ac6a0ab64d1bad7bcb16cf3ab32ee3e8fe6452ef8ef61e755834ba84c5aed9cbda596f7276bf288dbb75d05602bdb8c6ff75c4f7b88fdc1784cff7599e71a333d79b34e7e12ff01001b11a30eb3e7a459073f8ec02837e59946dc07d6481c9fe084002a6685a1e7d5bb66b3524395fa688dc63719528ee5da65882d5eb7134782b2a4fc6cbcc362a129da20e55b00fb3825d3c7a9a8c8c8b2b4a5656280857d372d46f1639fd92367b76c76986f6a1113cd2b084470c5fb7b69616ab627205ef13fea4a66566cbb0a3e85dc41e54d9c5eab3c5947a485c3122fea036ffdab1d478208b49622d3539eb54973d3b7515fc56bcaa3f90ac006461d0917247006bcc72f730146cfa87be722febc72a21fe87e3f65f182f13ad48fec627c9336384460931ce110b3be6bb4f73eaa541ac6e908be81a2eba1763ad17cf8d8a033e2d62f850cf5bc82f51fc7af206433912446e248ff788658f1425c4e985a258bb428f8d0dd09e41959af1aa6720b77b52cdfe5ff48068355e97a669d833a0efab0c7a47e0b733cb7ddab6241cf6534684e80f9957150114218e6fc63356d0201b48105c630c31f56b2f0fee2bc6db891ce374b32be42db33670d560afbe1f2c34b69dbfa72acd8be65fcc196a31d8409ec73daac3fe9b4b5494aed75ffb0283c784fcb090af3e450e42f7f6d0d071c105e7b11592ba3381fcd69238365f8127739ca1377cb7c57c8f7a68f804329cb94c8f0df14783b3df5021d35950b862193b49348d1ec3aa4c861419f8b839180bb7fb98c20a14ee09d4118615fd6e8ea5130c65828685313430934adee68d931f082693280aa0bf60e15e2e39a8503ffb94670c4bb4e7aacf4585465f6b247134aba7dd5e8054110e20364bf57b51d5ce14a6260a0be097bf6e1613b92e0fb68658d158138602fc2551e900ed615bdfacdb054af694ea3b71824f903de11ee05f7afa77eef9de92402e7c719035c7f879fee92e096d8d31b6727e5f9763091885973145bab255eabbf479cd27a983e092084afefdee1cb9c2e3ff62ddf5852c2c8f70a420b520c0b40acfc30ec45f1e20b893d27639567b22abf0f452326f900319dadb983fdb4f74a5ccf4749b74a5377536e11ac2755dc4b3fea55fd72af0183f72408f56544ad7c591b287ba09cccacebff2ed739846ae1b4412bf518ff12f85ca2033e4d1dfe72d246af5953235c3a164783ab9f99269cee6d5a1117cdca56648df9c1b58a5f39406b9d8e4fafb7e8744704ece8bc06c7e8845ae1a7dcf1dc2eabfb904ffb1ae39731f067a787c9910e61b2e8f14f8dce4080ae48b42c302ce791fc794e12aa39b6763d8b1ea1b7ceeff3de3ae093f72e1b05de204db92941cff51a1c9ab7ec0179273a9b0f6676d0d0d00ab61e1e051f547c9a40aeec38c730a41b2d725a06c50eabc2b11f46dc3e1563fb9031475d2bebcc6da998a7b1a11599a8bf2d1d7efb3851f122e8544eba01bf3c6b609391d7674b9bf59350532c677920f2a5d49a5c488ec9a14997889b03a1d1a529fca185b55a9815121415f9c4ddea77c87045a5098922bc090f6e35d947c91b5d76724484274f2011f77ad0eb8015e73a10702534119e10ca8789f485aa1e6b346eb6eaddc2f49700c834715dda09a5e6b6b8a5c55d61a80b5c1a796f6645d00ac7ea9fcfed37ccc6b053149b4aa02e84458f1d9a0acd09110b58a06c238077fd6158463e70ceb4c79ca37e6a0c44124e860e3a76d88351a7540bf4e4bb8bddf7e83cf0df3bfec91ad51aa01a91b3e0e830489723c7b57ef434923d274158b8f0280fca3b63e724fce1b9507020c3af130dd08efc5d53f1348046dfaaa52027270e7bb9483eaf289211b39bb56bdb1a366fcb6d68e9745712b8ec1d4624b90cf9417e011c6b8426a5babe74c80554e774c290550f92144b56cc150014c45ebea0404ca8f35a84e7e1900e92c5ec68c4fa0a83ecf3c3622ef4492e202a7466be36f1febea2bf132e40cb368ed9824e6e21c1347f737e5fc03b70cb781ac75982aa9dcf3625a80697cb7e7ea855f21fa21666ef30b28417406fbd4dfd4caf6b98d855112c502e8faf94fa8d2530b00651302a4d0681370c1de942947892bdc21ed55f618a090e6d7e258571fa046e3cfbc62a0b9f924df4cc46ef9daefcd83ecf26510f6a25a651ce6a856936db21fef585b9d65ca34e23157bdf084d57aa515d5481857244f1afd8e460f2d4aaafa275eb24f60a6270a22ce089dc214fa43a1fff5efcbe12faf7fb4998d28244ea250331c89164638b8046d1252b76cdddc716c9a66588672926283dedaafc1b48d8745fa22a5d0b566ba99a5d272a37f4078abfc5d9a02889302b849f5c295ee4d5fe8a1ebd19f3e9b5d4ca95470a4e8db7d54849ca7daa0797ae06825855f58d8eb8761055f7d0929bfc60074a6d1a20c95a913005959e423f94378de38a40b5a2ddf338f426a76f607c881fdade70b52f5c97e6ed550fd7498cd0f2d75f9f0e4808447365ddb5bb4c5a8b00e5cf2fef3e3b6a6e564f9e161433241a03f1a5e086360fc0a8c287a0591d2821c0063ed93d9f0a692179dc6ca3c9a9d01a53f6066f5b54312656b7f05edf6337fd109a7781f00912230ffc233dbee91aae3c29a0f19252463abd3fb51727cab82264045c0018b17743e49579ca6f977542a5d53fa08cd4d9e62530f63d35e6669327ab75e43a7d56363e04bc44b292c883a5cfd664eefe88f8226ee6e557f3acba328782386c1542d45e0a9cca6c52d904b67fb2586be4425bd47ab73c4e0dd4611b6808d632598999dd4266cb2d5368e7dd2a50d2cfa801f076866396bb1359842588253a3949713869b2dee19303983e3c8d94afa30012f270842775ddd40eddee768b558727a0bf5be702936599aa9e7324ceec520c50d7f76c9f3ae98bc5124b353a7d41a8d529caa6558ca440ace6563916f67b3737051cc5e699105b04562f441fe5f401ff42cb198f3e7b9b13ec55cd07f1b8753133b802f0ce3140de14051145fe889500ff2215d86cae995897e9b5374bb23a6c419b30f6ed306c3aeb8fb54e0f833030158ae8871b4b311fbe04fa6f9ca6f94882b4b3edd7692f4d9412baf205b84798124b6356ebebf594d2a372315c7f6cd1810b72fe0c37e0a6abf3c6bdd0d383789832c1ef8eb27f8ab8da5789374819d3f13330232a50291ae339e3d4522913b8ce963b460c64302de58bc947528fab008eedef5284cea2329dcc5fad034e729b15588e3e6825cb042ea6ec8b36dc57cecd2e701660cbb6c6595e08d14939d0b830369df8dfccc789a7d5b8220afe5a453795cbd433920885af64b1ed66860beea7915c423a97215f6231a3dbeefe93b79ee68865e62cb1ecfe2873c2882f9e35069e7207bbf2bf2f8b80003aeff034de2729fb55749541abaff515c63d2638b4d66037c077da46aac5c012c5b6ae33ca93fef11c42c5e404031fb4bc821dd3a6ebbea83d5bfaee966205d3d5638815ae44060c9597e29f5162e6a42415868cc0bc0f37cf24a9d1b6ddf52c75725152b69fc43784f043634598c41511fee7fa20ec6aa45bd84fff767d3064f5f0665c76d5ba9a311c96b9a3610a79e66913fef0eae5efcd310769c1740c97a0957656fa2e7c014da22d5bd126294f9b3f0abbb8668fe69d4c3e0fe3c69a098dae61b5a9576adf7989f05c2b33580a681aaf1847df23c07f4300a172930de2283f6b1af6ce8685e1953044089d18889e9965a8aab3038d39bb540d97876b5597d7e0904f73258026faea7cbb2f22c47349be90562c3b2c50ca70f421b1dba79fd3b6f052dc72c5c245f1a38953e058f92b60a248e7990bda25e6bfcb70d5996173899b30832a6443677f01fbc3426091a5004255ba4884546488186ba8906d1dd7c99bce9b2d40f22775da5c5584175f41075a0c089468b154bf2ac0d68f40268d3a7630d350e6cdbfb84da5944cefb50259df9f2ccf741e19e4b12e25d7f9faf969f220877e69d79caf3d9ba93d860ba5cebe43dff4244893f074da7f04fa2d633bc6dcc6bdc8d77bc28a3579f2ec0feea8300d60045cf0de23a04ac2e99ecaa70b0f3a019c85a3ae7facc637dca1f04712b3f5e5d14805d1ab403c64ba0868d35936eb56d85aae9d87d60cb2125147d539f6ffcc19505e5860adfa945d8a1b7c47da9145609cca1f3548e4156c641d972e41f83fe58ba075217299ad6939263e74367e368e6ab53ecfb2723e8258b98fe2e2f922d83773ea075128e06b5d75ed63adfaa198c135c3903f2d2bec31b18b45f00adb229c23b4094026ccab18e4d68214500ce800a87e5c4e9637d149ef048333b7f1d26d44ae9989d92b5441f45cc1c28922fb13865c51e8106e4ab425d18d4d8e3e93e6f4befd9d0be7e13b3e402acc88d206e49fcaddfc1270124923f10bb2df69cae50973e277f6b7d76d312af1c366abf5d3ffad331c681bf3faf412302fce210ec8980cef2dc434f5745cd0819fe49fae8c4b241beec2f25a3f6dd0a814fe4ff425df4cac786c760da2c265e8951b182909bdac096fe18d79696feab6bd7e8c2d293630a19c31f1d8c873cffff40283f2cb3cf8b478fdaa9448455e9c3240056f250744e6b3eb658f27cd261e25c60b3585082372fad1d109680b40e474fa1990c7be6e17ef1052e0c2a0843e4562d97f1256bec2812d5efce336a531f3cbc10d4bd11a8c5fd838e9d4e3a2c085c0aadb1350ba6e16a549cc128c0e57007d63490e73df598254eec9c1a9529108dc990470fb7cc20b2304b2d70b0236cac780a3eb4c0b7e14197cf9950e33894be5e9e724fa005dbb4416f675e7916187be762a40e58034de7a966bb8284626034c45280fbd9d00555ac1bf9208f27d4b59ef27709a0c3eef1b5ae199ad8e1cebc3017e11d9c89961bcccb25edb01e98a32a5d1b1fe5fa38fb4087a86d323d976b079ad7d669b0bfc76ad89812a3f92653fad0b3566d8ad0f77b6d579a636aeee6502da5cd3d9df9a53c8be6d6d1825a7272ab76806a22ec428b77319cc6973de0a45232ea5adce81fd35c1f04da58d473f114b30b62db85fa3ba27a149b8c0ca26b05a4c29532e413518a9f8411cdcfe946283fcd120290dd00d795afcd11d9c18ab1b784b1b906de7f1e70463554e7963707d73026c263068e117f3f141185dfa6f69b0d80eca8e1a523b4aa1b72c1f229762c4c75f662717b7083059a9189f1705f3c8f7b41a270d1fccb11d4b7e12956451aad6ebce4665de55fbf56092bcab1b58a5c893322f0b2b3a0c4b31098a76d4b5680525103ce2071dbe468973cdc1a564abc7cc5cafafe8756bdaa24af0f18f1b74f133b6006547d10c0c630957a9dbcc285469860d573bcdc0409643629447d0eeb859259a2b626cd903ebcb3eb867e2cf666564a37d7438e73e03683a663a302e1f61b137928d5dbc6bca273582c460a1975e63801a1b5a5fa7af842faecba21e4174ccb4eb2109893b4d9fae716be45f11784121efa64387ef9bb806fabe0b7f85da7ce06294006336903a658b3fc547d254dab7feb4f3467fc8cc2f864863a1c19785939db2b383d59e2aab1125c62c40c5d6f738c23e0198d3c670ae4176036eb4c34e744fae5705ac3432ccea6afc99bbafb36bd9d2fe32dfc0b553f8562749234d5df2ccb6a997cea93d82ecaff83756832602e9e486cc4664c005ab4fa1580ae801b5593cc11b8ff6787d09ccd1ff9d21d2defba40e37e68ba079cf7307f6a91099b6edbabe8d93aefa1a1e22961a8457894b67fe5991c2ac04537b36b87868e15502715d06d6a3a72adf08c77305aee5458ebbdaf7de63664b513214f3dc7385e30b6c34591c89c3d501b9048f8ea44fe5e905a0ea1b112e1b75b1c601a98ed98c5e46c0024c4a48411b18eefcaf90465d0df0fad57e28c0133675ebb8df90b6714b750fa3b457bb611d2e05351c6e59acde547107ab3cf15066704b0f7b291329bb2ab42043c5e0fc92b287be7cac6dae6474d9f815ad07623e1e2959acef540687cee92bd2f3e1a0f2c015563cdc6f3a4b481cf4eacf8849715e314ce89fe728150f5eff5a4b24c064649b06231d93d8a27676e42710a3899e57b0cbc9bd86f807243d1ea9b8cb00823c070b26a764153d87eb2c187a14afb6fcdba5b479583f3743faa946669cf5ea3928537c4b5fb72f9644552a17e2aead41024cb8174bb08428d54cb22bbe52d3611ea93589c504e85af92dc6e75468aa38eb1086031c87a52e8ab5985d4981461e840c26ce4a54e3caa2e5d54f01485d4fdcc14431f83ffbb6ebf8ec3ec6b729dc7f9723947b40e7825f0b7a4aa3750aa64b64a53de0eaa257e98331c41be360bb6c2f91b6d3839ec43614b70478d63726fd392756753e76bf7e534cb3e870d9a7d0c3e4541aaf53e8707f0124c681c0e265e4f38295ac7396f7fe7170ebbac7f8fbbf9e4e78e27fb0fb3c44bb83873e5df5a986fb84f109621f7bfd8bc03e36523d4a72d4c3a577d9e8248d65e92246a0d8934fde2179d4ed7e543fd43be39889ad85c251f1a13396f3d03cca70280927ae010a2d0443ebae9e0c9289dc67539f0863f7622b66a492c0c47669959e2be4475d104f8a3935366355880491ddb01f48c596ebf5d0fec074687d8eceb0a43154f8ccb1bdec4016565782f7e848507c40c7ea3d0893d655c9d98772106e0425a00317f340079cd3a0dd8b25013239becd345d32cd672535729049b0d498b9cea07862abdeba360b3b24ab181720f2d4685249654afabad93edfd8e95f0cc2c27c146d784850ba0bc11cc2b5c1b0c48533f4b605171d751e6597bf22f02cd16c39bb33878cd4bf80ebb903d5c3d5bbd885295147ab2a67f4c91fc0bf56834674f7ebc1564e803a0b38bcb93833a2092d50a40a9bf027785009e17738303576f9ee4e9a6b8474167a0c8a1a200d9637a8160e74f11fc33414652fd85c269222937caf19137969c4c9b3fbec8ff60bd84f32d6321d242b48e25a24b9843720983fc15d457b260bc241a086bf4d1485cd4c99c9f6b5ce007cf4af1a40123242ae4025d561f9fbc2d974118699228c6efbd404f0a4af664bcd03b07101f6930a3736af48a7ba06a6f0950485f2e9a7c0df503fa0133cc38c7a2a377404a1b6994296d1060701c9e2ba97b94858a24ffd8c73f634e345800bb872b8848eefd48bcae7985249119d268c138851ffe59ddd4c005ba61033071d9ecbd595c9ad3c1a04031a53359c199b69c0691182b610c7f532d34b6d5b686931863d0647491788cdd880f80945bfca722481ce2ecc038f0f9a53b955d8cd0296423a1776813a2841fc561418cf343dc85c5b07c128b193a3171d8c10fbe994549ea7210bd886bf8792b4339bfa3248f96beb6237e3dafb2f7a28df5d621a1c67bc88630acd2e80881c7847df1a8c3fc69173ccc11a3e998cbce92da02aef4b3676a411dbf4cbe8670beef84e9c0728d4ebfaa42233caed93dea70519be9334a89a26aaf762a56ca840be426aa9a13ee43e7de815afd791583b5873497752285dfef3e1e38ec05eeaccc417e472e8ef32942b850e33215b45de15c40b1df38da6c8d7e377a49a6db28e9226e46a1aa9da75c1a64cabffbf8eff351b58afa799a83d5dd6f9fe688e7b011c0dfe81b00d711438686d536722df9e71771063abae13ade13f793d760d6bafe2ed74358eb2aceec73605dec23d3b3609251d9e24274a29d9027c36aa654db9f17248bb6cb090df13e0e37b8df551ea131122e2bc460850642ca1546b8f46acd34b3def2eaf9743f98dbe2bd6e553","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
