<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"afc2257ab754489231035068567c4082ffd8805aa6fd27eb877b3910a408d35b04d522c9cc009fa4a8d1d13711b165c3cd54d9f8b56a8fea8156244557b443182924daece43e1080f867ff5c166be315be4b68eaa8e647731d5ca90fe058e2d9d2682a0a7d298f6b84aa91ee6abce9bc6c32a93cf45700c2c3f94950b22a87d786ee7f93f8b0841c50d4e685f97719cdcd933e0da1f853ca629ac4f52c73039e919ba0a550621a99cc0563122645483f377d912d55efd1ab1696b0037a1e365a169b9484910ddb9f2bdfaac8c9afd59254ef125ba1382b26e930d8489add6bc225e58214dab8f0b4e60a174567b51a1985e4272f1c218f5c98d3f9317ddf64ea6b6a8fdc2ee13a9da7a9df583d3671ef8095553be002e16c6336eb0eaba4e369c71d3913b2e10fb3af32c8ff2c3d91c8b459ad93eb5836343899f667127f3a487512d52a828b62f9e11c70d3d184adde0399335706c5817253d9d1abc2e2710927fd54bdb9358eeef0db26b87d6a79ce5688fa568a793c394dd4bbadbd70ee180a6a89b78af0ba8e44797b0db0f55499df6f199cd44ab9cac638b6b78144d13cce5df8eab1b2d99f8f34cb6e6a8d93545fd01f03ae5d592f369a264e453111e9bde961ca0c080ebf568254fa0e36c4f5829cbbd2effdd5704178986bc23c4274e2243e32af7d1154ec18331edbb96cc6c7537d69058d71e95b1b31414c1dc68d66bceebd67a53256964e7142c823671e009a07c1749173f52ebf0cef545d310ab8fe891e5ac50b5f620bb3ba1134fe07e2061e96cdb4f84db665a3d1049985aae2ba1dfea0d1aa52e61a864088d72c61598e56ceb790e512bb3f2cfcf568ee3b6ad9959d7fc18b46ee5a30a3ce70331255f8664be66d125d534b1a6b1128635c920f8a9a2862fd78fdeba462e354ae3c275002a5108a5d6433138be808d46884c25ad74069046bcb5095529250edb7c50e9b652fb61f9fff6fc24091576383abe1beab3e000a6ce2e75bf5343875d610c4446d7fa3ae3456abbf9c5da39ccf8ac0638848a8fc49a900866bc4155ab8f26376a1df011af3a3aeb7ad88afd4ca76a7ced284ef874c7bcdc922d963fb5c39fd60c1f1611275a30152ba42621265c47732d89833255a714b82579668b09b3b0d9dc9ea325ae99a4369bda761f97dda9d5b4ae73cbd7e67c1b19a99e437f48d0c99fd7f28271a3ec0aedcd1813cd63998fa8664093e1c02c2acddffb749701ff898cbc69f754053507386ecf686956475f06d8bbc7c57c308d7de4b37ff3da23864a1b9657f7d2f423fed84f88b6519d8ffe87f8c1126d726b8236f357c7f5e6ef2dbee3f8865b08af1ad97756cb04de872f443fce5cd4c0ebb7120b39c0d419cfcdacd41e5ee47157b95536f133f2a4040ca070f89c284714fcdbd6320c29cf293f34090f68aaaa37a822901fea9602cc22f86906ddcb3a11847869c1b342c7ced34d4101bc4e2c2c5d4c0986c588827775f48460c5dd69b03346264569ca3efc875fda397974090574939caec9949bfb00154786d837e73629b6c9ae2a05fd11b4fdb2a7140f9a0912690ffec59a378c61dc24b43b8f893912eaac551b15c4c953bf16faf2d54e45c54b69a0e9b0113621b004ee9884db1dcbf19453958ad9a4640a39269367e001b0a4c2641bde3af89298b333886aad44b1f8100d07a7da93cf4c9d9844c0c161eb5e6f9202b003c0bca8d8802fb9492b2678bc16cba145b76fe3838413d34a9f5a0bed8ef5d92a21d88733c28ddc14bb485e87b2b41f15dd6ffddc78778e855d83d01d94444fc2234620835c3880954cb3ecdbdb911813d55877ef78638d99f291f7d44a7ebecf446cadf584ea64c0e8a8366dd5e930dcd946813000b5d38f23d4f01d703ebf9df18f8477979fbe2dc9e55466f66e12e5fd904e7b34b52e2eedc88a36d49d67d2e299844829dcabd38399922d36ebd63b062231839febde98824d0f9de3f0dcbd628e1384a177d9f244e7bdf0ed2efcee84f7fdfeb331a179b30b4e057aeb11b20e130a10952a178bd9f898f127263f37e258ad4580e909355923243b18aaddc7119cdf0324e57d379fc349327766f775ae2380103a246c3b856b605b79d7cadeb0ae2a9c2d8c9bf73ac3cd1843d6e8f6ace870edc9fe61273b7f9f5e076a0ed1a6dd1adf711988881ede2f9318e746c1ac4faa4689caf545c40b5d696f66e2543799beb9e64eb00be8ff93a5bb1881b9ba2fbb31d2830c106335d0c5f26f60c1b291e030c6734ad02f269a4a62bbe45ded6a80d034e26f58fb3973e2fc387a522d02cdc2972b9464bb4d016433645ae32c88402402f16bdbb9e9b86c1904d799c2b5eb335bf83d2e1136740db7e61e8b6e3800858746bb5758eb31a5eadb83a0ce840c45fa7c7d88340e6e1a681576e61791888ebe22c0efe59620e06963e4ccf7de1ac4f72dbd0f1ec1199308cae06dc87bc58f0e5a0ad806847c39130b36238f63dfa0f6d0ba032b596bf6bf721e4cfd6ebf2031176909895f379320bb76ca763693209d3d3d356195a4f86e3d5ffca7b7427c854e61eb6df99a3f2cb366290ca78fbe2c478475a18c527a50952b31082ba4ae77a09118119c03f45a30c57ffa842b42e980b44a058e5442c44e1e775eba3d6c161448a80b9fd51d8c8944df734cef50a22b298d05462941f9d3c10728649c47f35aefcb5c6e0a69e547f539bf9db8325313c9992247971a5c8db20fbce951879954d0ab420bc73ad656f07449dc852ab57295da9e3badb8bd1e7169976d26eed95deea7e09c9e6acb9b6a1952fc40d63ecec28b0a4385c9b76763773c04583b7948b66d7296429b04741e132d3e75c3cb06032b24ee1767abf333acdb5a973e2f1440add77190dbfc3bad69c4ac5eb46348ec86254952799b832f63efd02fe245671fabfa263e344964db335b9935f473743a37f97bf7104018fa22326bf19c18aad68dbf17a48355fe4544c8ce2d4b74f8126bd7403bbe710e2ee692c47c7019c4267be92c464d50da92031aa4f2e957e5f9f322d28d3910821c47ae7ac535a7685052ed51358303ddfe5bb05ad81a3a861ecdb240de51726dcf46d900158c2d8448b270524a8a993a039ae7bc3945eb4cb76d34116e224b186b4e5d7e9c140db203cd1d5fc78d91b5a4f80ae8d958ea3befd273304d00e3e4c30a9ecc17452792b6964ce8e2a090f1c2e4d67ebe87dc8841f460bb09bd9a5e84b50befe5cd572052aac7cf3bfab24f138825ff9047f9386b60e40c289acac52fb57590f401a64ccb76507daec78d07a22e4772a63ce7bb14d7d7e0af2beb2bb4f3a26c62d60dc7186efca41e1638f874045c49de0d59b6e7a5993c7fff59c5f250ef95da9f56ebfe1fbd5e9afa6ef7c5567764468b80ece9c366f805238f6915f0ed6af29b7ba67e25af76f44386522f844a7d624dcdec71fe3c8677e9b5c91f2b591f350aa4fe0385213db912f79df955f359365b0ea563a3dfb150c6da1946a968f6bec0119791ebe0a482a188e94f37893cd4549546bf0ed3bfc9078d394dd03114f048ffd65bf61e813fad1107e9fe8c7db6536dba98c065f1493d54661599ae432118d7e3787a147f88137b832f15c8257e52e4f8b829821a86b98df0fff530cabb6976c4e3fc1a52871acbc80251b50341eb130be1cde4d6c0c7903d393c65c5e57933237a5465e5d582b30e3002698ce9c1c054efc5386157880144bf4ca894bc7ad279d97234fbede753d90015eaae69ad7d29c96abea9281889db9ed30654f831461127c2b20e5a9542c93bf6515d1ca9c5ad6a99128b674e4cf8995ff006f5a683ab26d40a035ffb02b7e73788e2951a56d65e415580c6f0941da7e1b2b443dbc9b0a9345905e027293af18ec1402d2c4c9d13daa3e4666973b02179e016b44fc538d9880f13fbd98703a3d5df4b995db9deacd09694b4b1507ad8ffdfbaee11c81f07cf4bbbd37ade422634d28939259ff59d617ead5b03668b5b82dd72e4080e6da4969f7322bd7ac2e2d37c4c2916adda1a5a05f7288ece1c67717d3bdc6a516c1171e1b804e7b4cd5a9b955e75bd60f5929cb6222fc60fb7a248268402fc3c5ae1760bd8954c4942e106087cd632b947931496330afe8b49769e2ada4c6932a3daa8ec961d6cd54ff1ab58b026bac961bc3ee23a08a5e9a7ab5d401c42e5e652b2ce850f7f8e02fed9e009465e69e3a5b1e3dd1ced452dcfde413a26f604af141e883947300e2deb6a8cc8334426362bb518a3bc6de5a8c1792da9bb4637b9c47b97546ee00bd495bbc49c7df23d59d1609fc5dc20e7a9af4f40af69b84da07b2b26abefaaa28b363b7d30f642c0210a51b7e6e711caf8e5bd997c4f2b97b71ceea1be068b48114675a65bf3aef7cc2388678ea61fb89fcf7d8f2a3e1a1d350b367bcc65eb119aca6960467a9b903ed2ed5009889152d32aac6211bfcbf220b80c6ac49b38f8866bfbb9d9f240dbd2e6d975acd641568efb8838f730cd67647f7fecc2ed5214118d12f5a5bb0ef79d4d20cf14142fe9aedfa4df79915c2e719967cbb624c47111111f3f3ef11c7633f6f79ee214b383e2d47b6d4b6fa46b6cebd14d0cb988a2348245aaa140c00f5649a5b1a360c8a40f8a5fad2f67c9623daf910288c12aad335b7e02605611d31574bc616a1284bf871a19855c0374d61e4915ae02d83ba483eaf6f696f4347b9670f9d66b966370e4867bc0388ea1236ba6c6e4fbd0cc24cfd80712197684f7d0bb587c7caaacda786d4dc0851971dc5300949c7eed63ce10fdacd0e55f3bd74ea73855afd0cbb31541994a72881e6ad6494d906c58337e34a7dd012130fc37110d1588c815e9eecdc3a9c9b3c0a18db8e2815f975786703d2888b84c6986ae16b550947d4a532331f56f6639ff1004af52ee7391a14482fd48563700fdd9cb5cd1415d7e6190a47cc0277bad054d55f4f174cc8e06bd25fccaf9e0bfe7e4d3312b40f1d366c042d3835f0075ff1e017062be85a9d243400883580a7f9acb29a4120d4e27db8454c6a6968bb1f18d836c353a9684b90e256220c648d3d4cac0a27a2e360f812214fa4c6c9397ebf879484a7ccd1510d6088aad951235f2f8309ccbb8fe9f6d320fc8ff58640bf5d57b5e376c77e4b41c57ef26b4c98ec2336029e26e6c09d4c5882b4bf57265ebbe35bf59526372be95a515b6b24737ec305a5d08c41325ecae9612a95204bd3c6923257121421ec02c9f9fc918ce8294b4bd0ea131b18f698d81e60e816b10e458e3bcff04fe65e7a82bdb66ef5806f78d46c3031a6b31ab4228afa3f9a0f5c3e24a52228f9b2cea5610144121c9acd123ac77793f9caf272e9b437198e41e6584d4ec5356029c915f4121eeac419c0842c93b6ea8e35b4d6789ae65b5e1eee446f0533d1459a69cd2716010fe16a17bda1eb8f3662eca9eeeaf9bd7be4edd4e3c83d95c4b072171179ca23428d9d23c35dcb5e04898d711f66c7a0a2e1443d90d193dbeb47fd7f98837b8fcb9f86ecceb75893452ee937e84f2f9deeeb75b06b3373d5108ab4f3e40d05737847f57e080fde74a96c83446a03907c414cc3c702d8224cc1be22cd6bf9a136e1b4ebac8267d6bd3347b455bc9af4b1e643ef0f34f697e630c030e4d1b06f9e1762ea0b19341f2adbd7f890cd9d37e873086938e7f6e41e4b8c9c6d521157d2a9eb5ca731f76771923498ca8ff09d0d1a5cd60b85ebc1cc50b70063c22e3d2afb7337fab575ce2394fda8f69e11a84ce73eb717031c7ff0c0df9da4bb1532b5a48c8ec05975f197498d7926c4f2dc5627b7269ed42470fbe9bd86a6a6681aca9fb6b9071c9d7c1248e13fae9354f9b936d62447c5c07ff9266ba1a6563d55a245a5099900448d1e173d75df5d8bbb029780d9b1c875cd59f6edfab1298408bd7e0a0defe72e178c96df0f7c7554674bbe8603bd9d5c5c5b3d8c56767902d0dc700d50e6a0f492bfc95e09014f33f5292e76a35a265d68ece47c18cd55afe00c38472cf50fca058b8ec7f9f6a1896e739d0e8939e1aa9007c3f02995b52ffde31f44b464724f0b613df324455d35fef745049ed480b540b3dd1f90eb1fa80b9e0f5e06428f1a651c8ef2e1a628478649d64b09f4e421e42ee815c7dcfece8170d41ffb62c35e9d6943de42902712697c72c5edb4e125a4812cd793cc1072a4a1c7d16fc0dae98b63eb7e0d5ced5974516b2964bb570a78430085de26aa05be640fe49d736082e380a4f112762a5edd0cc050e401b271a44b1d928cb9c62b43b6daf19e2370254b112ab402af39dc12e20d908a540234e17c209d3007d351274b0d0e191de5db6e82bdfddb556821cc16fdad55c0648095ecfb712908dd39ee77dab39ea094c51c6d0ea925fad905c38e651ad2b25196c2c1c44b9771da76c62d70ad453db2a91d05c1e0725c7914fd201bd43df0b99fa47e6db2aa231a73282d9cf6d68f592e3f17d9861c7b3cc3fd65d12c3cd46c3f74de10aa98864103f3de1ed873beb10d3a02d3a63069f5ac57cc3fd517f2b8447c5ae2e359d6f20b69545043ed47bb44315833d4d467d4f22d96d991f39d37b08d3f2a9964f5a61c2f64555f7f224e5e8aca493b7e6f368ec3b330dae5570260be16bd6d75a8cbe1c0e0c8206867f365dac23f3a3f6eac72fac43865aa227ba11b976e6bf0e08d158d371826da7019aaa3d18c0b61c6b81e625a1d3bf82903de71371654b6ad1dc5324f9698cd3efd7475a9972ab1c0a5620b130333659f110ca42e5e0569f83f4c39e5fb36a63d43eafe16392cce115b761d87c7207691f14cccf47d3b8720b5fbcc47690dc84d6e448ecb2e33923bbba3fce13945bd41593ce947197cb45ab7997f2036ed7caa7f7dc8334d717ab6ec0d613d919add78f1e6da7d0b31f991af334890ee2be7a50c67c91fb027fd4bab765a662e2310c4c3677513f7dcefa38ef6844bfd7292417f8282031cb5e6c13124b3161794b5b589c3da32588f4adec24ce9ef2da9c27574febf4189c67c35bf18af3e9af0cb6da34ab581674269d1e44eed0729c656e0d4c606bea8746fc5dd3cfd2c62266286ad50026a5b8053ce6f296a25739b75817d4c46cfe27b6fd7dee9c52ca095430da64cd8d96f08006d653d51c848674b30738abbabcb78f4a6bac68909dcfdb1a2e4549f820c3c8bf496c2784c23b7edf7b7f7c6a6ce947a1c867a09338ab7dff6b97dc5e46f4d5cd7d68b0152c4367b1f06c948eba13837df969dd277f136421d1305456015eca5ff7792586bd164aade38dd45dad8af88b22ea8ae9486f8f1c2803c7f326e254aaa095c7fd1b5f17540433c0b19f43cb4411712a527b4af78a37610e3b05ab613f84cba980ff1e1574b6c2f0d419d1de13914994ee4367572111e93755bbcc37078d8a6193aff803744afe5d19a2ab243ee96cca297aea359dc24185764af3054dd75ea3ff32827606f240ff932ca242525010de74bbbf9e18d2307f0368a694a25b2d8f8cbf02a26e1524141009c5900918cca30115311442a4e4976e2f1a85e049c4113aa8007da3cb745d50b9a865c666a00192f8f12f989e25d7ab04666960abc6c22b7a5e96c00497fa4c9a6abc94367f4914de3d85c69781af65c205a1e1f59136b8f6895ea49d44879be9d0d153408854eb6fe73a03b589539e2cba76bb7c4f085a24869fce174932cc4d8c756132072437293700277a4c09e42ba8cf4b17b0161de42c6ee3e532c750f16d2a2bb66758d83ad19c39fe3f240cad9ed75e6eca836413b7e7c32b574ee3713b47eae9b02a990947de2fa0c7d5e5da87a6cf702efaf082d6b2c8782667d42dab07adf30ea39886b2528a6acbfe5f4bc64cf9a76406186803682f11e165270c84581f5595dc075635332e1e9c2af4fa9c9abb64247963acd84c3c06bff6fcbb0fe240bcb7d19f7543f73e36976760c81ab26185998c061d51bf066698f61d9c09a7e36c6e84615f850ec0135d4d83d6c4f1886677b15fd3e04028cb50e4730d126791c3b70ca13181b2fc5a58fb922ed354ccd77afd38574effe7e51795add6d1170a13b7aa032ae1feebd7e20e63eeb7c7805d28113e82630717855df22e06d45d1e2e4f4b5c27538be91f177a06d4c231c595fe3c1932b74c4e9c84df6a1ac913e3e76e9b358189c19ac3c48e8accabdee296f1c14543e00394e481a54147da35c0339c9ce734846bea12836381e1d269162bee1441bf4ca5dcbe7505947641c4e394b6dc754fbf03a3676910acfb141ac148127c6c686392fc47a3d95638772cec5b78765d17a94c73908ba381760d4209c2f939ff6e6a164d3894a33bfb7b9763b5b167138f4bca1c23d3722e6c46cb1c274f5907d1dc661cd2292d67731804286674515af726d2dc8822cc748044d29520c261410b35d224e0c04e2952a9e34d6026afa7a8402dff3c226dc4a00d1646f9eac2e803431e0e81ae112cac3421d0779d14c0986cccb64139f80aad4abd5a3b3409a25e33fd19cc8b49e649c9437e27ce2ce2d9f8292d52bf06b642ca2bc92b9e8af43d7cc159427125d2e22d6169f727d25e5b7de32b8e1608ac78f9209c74d37bf1a5461a950dda22af0b07dcc40417db24e43d182b332f1019f3a0071c984a220726454be1923fd8612cf55f597d6bf30133e3972f93db81214ae8f7815eb616dc42dd1995fbd26408c6be7fdce0405fd9685e64ab115f97d1b962bb9f858fc449a2c5642a5e9dc6256472526951cf3b92c5684cf96fdafd76ada91125331ce00ac7bcd66e09897dad05912a08f612c790318df6a585472b68bc758a05e47eefbea4db8e1bc44fad0025c50f612636c1001c0cab9144f05026f2e7bfed7974d5bbd6addf42198f4526f209da34dc9f502c2d377bfc8811701519a535202bf30dfa9a014f30200fed6dc808d3f5f1cb4eef51b6bc339dabb632cd17ff736005518e435d647ec83be4982787e03195a3fb2d363ce048a3dfd1c244a3ca4546d113e00e1833ed5c317f1af691d8fb79247e1649d7168936cba9b27657c5061a71534971d988d409cf2aea3ab3b84e38ab5ebc9b9d836afe62cc454681b1e648f5e275d9f9a1e6b9ed174aed03662f589be7c13e7186ee58369a2afa76b8394aff83c0df35e7dfb9e4e0ac1f04f83c14d93989a9b54adcc7b0590b1a04bbd1258249df26a8631fe9664d420b13a3d65450a144a8786a70fcd3dfad8bcb0ef7f323e1c30eeaf5407c476a147af2358ce9d584513da9266e6d03f49cb8d080d82a7d29f4fa8b645464f23ea668effcd82fff3c74d5541b86305368d7b9a40b893c88c0b4d930d64ab6b221cdd46b873d1a3a66923097ba97577965ebef353c864f774ce63bc1fe0789fd6dbd3b7584d47581e15b9b258f70ee6fe30a8cb64a67ae54bf897d0a5bc03605818311ad9c5e4bf8d54fda6b7245036c12dd232f1835464e76d27c71cf05a58d466a7b3663511d15c6f14ce37d9472cffa19cf53f2e5e8817163cc0d8083bb2be858978c33cabf3ed878177a637e645afc00e1e19d50b25acfec6ab35b184830cb740c74eb3a23876c02d7bdbf94e6faaa257e2bb5d133957a61daa6666aa6b57f6c30499d2d7ee6eb95ce1be7920bec56f38746e0bae15a2045d93f22beedf820e2acaa7b19ddb10ca5b62370f09b2440c3f1d57304707e5a401eddf846e1c27ca7efa3d30bcfb928018fc77cad58deeef8d7172c38a9624057de52ff6ff512d11b78cb7c17d214784171f79d354c8fbe07ebaf8be84f0cb48aa88548e46bf169d097c7911655210fad9dd8f55b64003398f8168b828c11d9a089d6df46fb72f0ca9021066393f45c7fd17ebe924f5c8871ebbf3b1d9f45a6c50e8cd803e0c9d2de6704d5bc905fa1f31ce823cdd297a70daa7b7c11276d96705ed24de29b12fe697627071d7c1a148904bdcc65a08405c981a43646ee442db00616189d2b8bdaa68dca74708dd044512503c4be529d8dfc7c29acbdea5b5c1e7630ec0bab694fc1492ac0334475c1addb5bdd7138556cd50fe539689f8461d46f99f2ab83858ca57e55290f9ddbc5b5f4b4efb224bd3b75681371b320be6399622295f00a0000713adb318db6b5ff007ed5ba4d0523d7098beaac05dad07fe29b1662ee0982b88c2740baed70bcbd0a206cd232e86e8f9581bf35224a2545df19b0d918e6fb8e4003db1908f92d5e86b096c6d1d29b31a6d1a28d66ea902678106ab0c4be5ea8cda5ce8d3eb616cef0f204cf0b995d911f2f9ec2d31bbff9f4ee377a165179b14c29cb46592828cf03dc5f7bfcea914ba7e68fa8885f1a52fdfca4e9247c9afd7a22bff39fe9d4dd5ccb174386ef6c65a8ce9bc5fbc7f9951d1ecd868a3ce66c3940263dc9b80b391ca330b64039f56d41d4b07b951dee0138f2ef418bf55b826f177202fdeb297b2acdc94fa26d46511a72ae7e787708d5900e2905682b6e8a4e10da630b83752cb3392621996eca3ebd18dacbfb35ca3eefa4566f9d0c168cfb38ce4ae55048ad722339e166b5710908d6895bb23bc201f31c348768d35a58e82d680237af7a1f1b5aab0b72a9c7b5a8ebe8727df526975ccc49e44aaf5fb0a439b7c2b3a89635c0c23b814f33b9bda08a92462126ada42a004612c227c8ee648e8b676827002c4a34bc86c6cf366b07967c642acc83ac0c6e71bbcf2e626591c03eaaa4cc9764d4c0a66f9956c21289d96714c0664be1ef8358e1cb5d57f6813df7452568b602196347ab471c666e7981b607d481e71069c4cf0d5b91e93af32883553dbe697f4f2a4abae59b3684b90674b5affaef70f26d0ca06d32532c874af631127618c7dba50e69a997223946a46a8d0c7bbdb6483ade90dba44c5357571c09487330051662fba8845511cb369401153ba0fdafde4e6980890f3f5dbbc3f01cd91663a3e6a590f3ef91bf183b34590eabc610d4b755633f6a793bd21819a12710daa2432731fad75cb2e0335e9296b85d9e5bb813d938d4206321811c48cdbbe200b6a179cf19b3410d79f6196edafa48707c140c9ad89ae3f89c8e9c4cc263217de20c1cdbdb7e74b5ef5cbd52f03e41b7a777592b994e8ac25b24b17c3431de7f88486afbd0c74beaf055a96bba54eb057e3f724f9a245e6cf748743c9118780b271f091ec584cb1cbbe0eaf3f6e6fce94843f86384fc55d44b1a72c57b68171e0dc235034216a3af8bdd79c7ef6853ce6a55e6b0416809249c606ea95eec07df2b3beb9443d906839a3b90ee0cb338282cc366bec6af5e59e31a01e432a8e7f8f8d7963c2a57931f75776ae8cc5175e5ee5f581a572897d30e3ac2588a88686a69e5130d4b7dfe076734ac72d30fc7edce5955dec1f2c1263f6ab61cc6ddf71aece0e8d2fdafff6c5a3b690ca1ad18c43f81f0065dcba7bb668d3bb69f59bbde3892e3955c3636d8d724e2662949c35ac05a693e9504df7d7525ffc2f9b918e26ad8bc821569fde60cd5beab588d10d733816c0f4481ce40e6e983292151806dc68772f8e5125bac6395aa8b840fe5691d0dac7e70b3d5e58982115bc56254c82de67469592216c025eefbbf410656edf76329af237013a3538d014cc45af73c1b902cce482bdfb202023aa24c797b6e37e75036247dc00cb370a021880068edc8c1d633db878e62ec788ebf807b4ca474c1d061f5c0298751802a6262f2afa37f0c2923e75422ab8a35651a6ee6a90e3361e6348508581ec8e15442175bf116ba9f1a80d6a657b1112ae135b57fa7e402ace5134fd7ec9909584d889b1763a69cce9f20b426efed3b12dfd4d700590a83a3dffeadd483b913cab4b4f8983c180aeae7349f3583f8a2bb59677566fefd16589f91a6d2960e1fac4ad80ace390499cb99ed6bbf2c87f31a5b9aadf29d7de20e72cdda2a1aedf3a0fa26ccfa40167e9aeeea082db08fe37cd73b33d91070ad866b5b219445ed8cefdfa31532326ffee39ba04872a3c62a0119eb6906224c3a8ea485802b2175fb038c09a47edc71a7fbca9440e8bbda91af04464d3af061a537010c4bf41b2615468ecd23e80fbe9e5b520e44f5a9efa7d4994e0659f1f8a68b9140f54c6460e7ffb71c2b41ec15b612d7c473307c4119108a1641545f2759b32e6f9e4a0bf94d106b6e2901abffac2234b9872abcac33ae45d64b0ba133b8553cca15f0d973cbe3743ba9e654980bbc163349cb01ffdd7a7b984fda955e7c450408497d6fd070b25244285ebac28403760e22b20126bb459e7f511f0650e07d80864454a7604629394259ca834b12c168cda1f72fdf0272a272c47565829159fa0b75a5e0b67edf54a287750aabf7f4b7712d8f392d5a23cb772e3d37c277cc8450161ac199ff2a1131146cc05bc19f07d480efff64f18ab71955d2cb2e9f498fc53fe9a361cabb61bb595f8755f9ca7e628e87a6b5d5341e00deccc7e1275a33189905dc7f16a14f66325c369978c45b695339f604445548d6abb52b5b85772b000c0f931d841b8d49010d7273df5d744111e9323695a5e364d15f3672b1f0f3a8398074dcbf3cb7afd81b4e0df365944ee224a25c5972bc931007cfaaaf7d7090cca70dbbb0c3c355cc086644a9faf104f00f39ba9382fd8bf57c07a14f3ece07818c6e4871fa0170985b6ad3be29fd6f8e885aab08a55b4c6955088200db7136a5ee1df694357de841ab7375294d84127cd5c548a64b953c39e3092db8a87da951941600d89d21e720eedb2421d4ef3230d0fd59605741d1562d8141455c6ff5aac8ee138e37cdf316c90be9b0bddf28c68cbb8406487bc211ca6c26916aa3c44fd3eeb1bbd19fdc9f80ac9307c7c63655e2d3cab3eddac5cacb1b944b6ec6b2e81e27d9d646ed3eea3ed6e833ec40d43c2a9c74f2241c61dc948860306f13d6dfb9f65eaecae39da242d2ae7e948f83e93e3c65209ad3999a85a281eb9b4c100330860f3adfe0a899f0e96229f0e59b00e59a1e14162ff8d479a2d477fdd2bca8df116aa6642ba90f83ebe817dbc0fb43b9a17215a6180e6cf62ec382a6aa816264e2d1870a39f4ce8079efbb9d912d50507adbd7c71bed79a43e789b98da19c7e82583224732aa2d3bf9bdd9b5f95b147d69212b6854caa167ebb81a50012434e99b6ce581a4765e7241e130d2e9be0669082ab6362f905354348b483bb162618072431b2f1fc4e3c2a757bb13d68827a1bf89d1525e78f48ee6e2ebfde6bbebd8af17c74f9eb8d915745d1ca330f44cca15b0c5268b47fc563a0bd0f24aea919dfe2b54616e6b79d3004c2b1d315079679d4689baa640cc3f2eb05c23ab098bb1dfe52a651e1b938aee70b15cc532ebc271ff6634a35120ffe181a4df197a955161c4c5c92bfad099e0e852873119297c244eb392d5bd754aa5999deb125a70778f63d5a63bc14274776574cccd133bbecbec18cd5b1c5edf56332d559fbc269913abca55525820a96a3933a21427d7ffbfad90a6d2f71def328d6ea78412f51166c15d7ed05fc18567779e3292925d604b16a8796abe5944b1fb6ec6f36574751ba934be72b404368d20396272828db0f8dd001eeeca2d80ac6d49f2a8acd975bace7da873cf6649ba46e39c0c8c370caec3a93d9d26b8f789f93abdd8834ba0f86224c4137f2482eb1e2d00342967532f459245bce87830cbe004ae8886215e37a15e1a23f49e097b6c03ecf00a8b06ffcbced2fba3b45749b39f0565b72f9c386e4e6d32637e74ec5e03de38969f0378f4fb25af8d884abcd155419ef6c2e9c67061b9dc9ecdc01755b99e3428ce5224b755ab40c6ad746fff2f2f789c7ac86d088bcd792e4a196ef0f219910b30f3e067253ab66a0904b646bd1bdb04829c36046bc78c41e3e8761c0e82fb7751b02aeddf45839b4b4f7538d5811c7ddf5d0deaaea0b5305f7c651445577d3127c7cce9cad155af1df9c4ce1afd0a022c48ea3c7803b302fb853a7ca207acd9d312e247f8db96d6953ac31f39029b91c402b1a850f3f363b6c88a602c10fad02aa9d85f8ae2164462d8c238c108086293f4ce5af5462d4c4946971560855ab533521b7fe3b5fc64c93c465c2e623ccfd5a9f0540972a7cbfec00f3d7ef715374a0a0f5ab1e8d8c320ff16862c2afbafcccac528a7a3330c923fd431a2cfc35a7db60eb74d9b4880ef7c595bb545617f7facab64f32cd54447c1589c76bf1b9149b7da962b3dde55252e9111394ca78251089f1e47b138cfe2df2768246369e18b1c00aa3b159238fcea7bcffc8f2beb0f1b1e3828dc72fbcdd2f29a73996101a3c81267540b2e5bb14afdd73d26d4fb3b2d28a676e080740becf2368a5665f9503a413aed2169d35abf8ba6a110e63f64349341d40fc5bb2402f83d4d34075f90805fc12de0d99872928a5f440775771e139d6d346d46da1fc40c77f379219d982813284416396d71cc2e31da61a6777b1efc2a939b23d3ac355530fe37828f4bffe0fafdd6f89b3d23f33bef108b670484e5f50c7989a8b922c80617d47db19503289ff2372522057c39130f04f4dadb83b1a40bcc0cf1c0ef69ef6fca681c630a32e122917deccedf2f8c62d84bb17f2c08991e52b9a1b25885c4000919d0e0b105462b53bd05982ffdcb1d415e4d6bb11f8131e5186181a5cde8fb85f8e2ce694163eef1a0b97f421b94c31c926d59dec9f833618357f134de96f6fc6584284e99f7d92151d2e404b947028a3c271c5f9467b358639a0a48682db36a7c9bad9fbe21ecd2cbabe269b2ce1be53c021766af3a32a4ab2b941255c445ac97c8a2d418ad1e0bdfe6eb87aa2a9e20e2712cb49e2cec8cd4135135767b1928f4249d4c52ed59e06e87612bbcc96fffd927f4f035412b63b2e16c1e876d313bc9d2fb7b1329d2105291e462f74f9b32910f46d2b3b2b2c51843e1564dde2255da439c65095bdeeb310a123054fcc2a604225e5586651dc80ead7f157fccbe261a75b01829a725ed68b35358820994f31bac6131c9d12e981d70c3b773079e8a19b7068a110119ab2f177674243b5e399d4a6d9c200531dda4d8a81f581c9f620141c650f03d4ed4fb772607fdcc6b7b1c9b7d94b367be522a2c2025fd77da5b305f7615170b9c98f9af21eb40f6d582d710a8c39efbe88037d94728ef7953c9a2ce8c53db4b55a14d9bfbe4540bbb0ea7e00b8949954d9dcc0238c5e289c85a0eadd15834617f25667ce0d45a934d8ac0607eb7b352fbc19f5eb1172930c4a07ee327b8ae8e92db5ee328aa69a80ee7585cc2bfcb0cd3b213d850ec790d998a951e4f6ddf1577ad3525e27849cd015bc2cfc6ce1dc540a186d8dc79ad6ab76313cc05207146a549e22b9667a2a8215ca434310a394ae62526f50e347eb542a6761604f7643e4e6977d7ffa5d22b49523c30e1512ff625ce7108671302cee9596f810ee775dc3fd5d24837babae619a937d16c8a3f3837bf9416efbd65cf24cfe835079aadba727bc6ff6c6a905b52299200e34655884858b2d71405e2aaacddf38f0ea47ba43715b2a226a43c6c5219150715edcef3e31abaaae4403e298158fb6cef659d5cf85e79866ae73a03ffa7e77cef232a92e3422522cc003cc72acb680b6374178bcf8b45e7ea830e30d685739849d48f3b35000cc7c137cbec94c29d65f4f77d41375c624ee779f58ecadd7ebbf6619f49eeb70168bef9cf9abed2d8d4781a71000469e32a9dbe8f83438f9b436b017d78f4e19312e0d3fd164d6fa601850b374d799f5dd6c5c419a1d5e2ee4e14670c268748e1743d1e5dafbb1d45f36484080acca17434b9e76bf4a3a2958188f385d628c7e05d970d50ca01565c86fa583e8447627d529aa7322b92c6276076ab6ee31725abc685271bde7092819d027bfa3565795b26dc778987011a1b4015688512da20ad9ac3b001ce8446803901473cc954ca73b761a11b2315ec9823cee8460713c4336cb29e29808c8752f8c2779d537e263212f703246c41ff934cf1ed5656acab7fb93eb1294c11de1e3f6abd4a2d03a7cd9401366b62725d6a943b48aec91d34573d9db0f7796d8c159ba12ff0b3f397bf165858a51c4186b08654c9518da854f08c8ee82c2a3dceacd5037bb9914df856a46d4bfb74da84fc656492accbb11c32a912a6776f8c1f7ad0b095b90045cdf84e4fa4773064cfa592bfec0407d009612047f17f81e4cffdf5c2986f9259084b78b1a2f36a7d17fdaff351e538f69d83755a70435e29f0a09f7da7be44f507a9eea9bffed2237d0d372b59d2aef8c854c5c3abe23468124ba10adf9f8b0bf363aa0c6f6b5b2e256a98fa24db0ccfb6b61f9c294863fea524d11b7b05b50be45ba2cbf700887494696a8e918a41cd683a3bbec0c6bcc4fbb1c15882cb0d31069ed525a86d253fcab484150005307dcedbe74372f7d48df89a8a82eb7c1bb23a256481a4f19e633a3da62ac89f1c63ea36e1022d583ec3eaf7a57a030eaaefe8ef3773bc217ce6454982c8872f1975ee59f52a097bf9aaf1af87b73ea2e3c14f802eb941d5dafdfc24354b68bb78082cd3c665ecaa58601512491cd289d89d23a638c5a31d1db6663b51216f05d177e8f8c60977ec9b622eb291832c3139f482fa49a33bc5476d218f12466a96d004afe7863ed4fb1d638db25adc765a47e3e3b9835d8ef2ef912d2655d69606f8e6263058bac3c40d167d14647cf0dfb44d4fcbe76a3f3ad290ac769415271fba0e7fbfb3a63e147c241af96cafd5037773bebc6995d3b5307ab5c902e1d53eecd82ca42435e110e3b91ab691095f9b9928442904984fef7d8484492649f1ea1331cdbb2e05720f311c4fc2b06e9a2d7bb71b058640c3222a0f5873a48e559ada62fbef57a2a957e0a4f08023235db4b21fef2f11be847fcc48858ef3c472f7e7da238b1c690eda6091cc1a27054bb27ab92f990dfde4493ed0672be64e75dad084e5435763e89b9185ea2d18c81f6a4d41537cc61f1760d8d018fc4198b111db073e75d11c06531a6dc3f2de62774bf606abb4171ea18ceebf25faef10fe8585dfccb0530099af8814758d05a1d0479a9d338d525a9d0cbc80fffc5b04aedcd2c84827d73f11bc57c9ce3278bb3d80d5de8779d9cadda31f3e61eef9a7a70b2b1f77c1d0bc7819ea63287828765251aaa08d723edc3edb74f93da7390843cd8fa1aa72089268954be8ff94ca7c866e882c7516d48e78c8ef3b6a978edd75d661277e50e980c31e3b0064a6a516aa80be3f6659ca8176c32cd1f4356cef0ec1d55a366277a13e5049b07c0e5f12f193ca42baffd34efae68964dd438a6bac77068722f7dd9c9cc67cd8842cde369e65ea9115033bc87448d68309b49f96abb49a84d242e9aa1f3efed86f855edd071f0220eebf991d2246c27ed893cf8f5f11b3d413d7396144d324810445ef60f0b68c41e14ba535f590c4a8b50200648fcdfccb0848a1b3baf11f40565078b3926ff46899680008403507a2bd6718f972407dd2f264686e287855ab814efafb440229baedcdf4ecb6899e0e7fd688f783dc287806a43e811a8f2f2e4eaa1caa0fe763c3b9186908bddd2bf905424e762ab8b3bb1214dfe73b0157eda121691482af66be9eef17d42534b9fa85b1698a707d4f3ba65d77d5afcc10947dfbeb46c7327531d54b11433e895f5871d85cda1d6b462ffefbed891440f4c07b7fe5511280e52063770a901ec862cda81fbc62773c2fbf5e4e404f9892c6436430d8390087be9d38406644a7ea3b9df5cf1119c5e7a75d3bb473effea1def19b63001303e9b55e697d1b27268b8977a116378f53377dd67a168a9f302010f74d488eb45ec8e75f03e3a4898508a85be45dfc02f99d2c815b58614021e6a9b21a1bd562fe161db77e244d3edb50f57f75da29e5479afb574f2c41407ee210c350866b6a98a1e396e3c0e9720f0b910c95031801a3a14ce0d314cef6b04f9144a913a36ecb820e96ba0a2950e69675a739886edcd09dc3103eb4fe2cdc60407004911abbc508552fc3187321e44c7be4ea70eb44271579202abc82a86e4b93c8b32e48e40eab5a2d060fb4f1aabae37cbf823262f3eb7ef9ebbf66f3dc2492d7d7421ad85a05bd2ab9195c14afc51f75d46e98c2de686c8a12c81bfdc227eb75ca3c7798356cfeaecd7611859f811cea19ef21d8e3a6332591a6c4f8a3b4821385d0981a9c36f69af46adecfa78d116a9f028968bbf13bae6ec2311cab233e7bd12a288f3632b27a6710fc514ac5d5c6e5248f1d558dea5db15e5e8e7bf1cbf2d9c2deeccc77c498f43abfaa0c7482a2898318af1f5f2fd6f3cef524456ed53190b5ccd8f4c7497c63786627e88dab238f0d775a6775fad0a5f1b016ea36f3db440ba6d4f006598cb4b36fca0d6fa01ed4e9ddb9303525e08d69764f20f8fb1c4cf8cc736679623cbfd41e1bbd193e226ac1a1d9440974de8a3fa67893d2ca9e467656f13c474e2fd39d99cf2de4d8c4f8e4e0c5496744f0c0640efb099430b32eef3eceb3ddda9c60084e9ee9af533c0aee13894e6a092174152c5b9ec032fd1f0ec34afe405873ece3186b81a3cc2c9a2e3f7adc7192e770a0f8888ee43a57b7f950e476cf6074097c83b3e42a227e3268c27da12bf892f0c3fd69fb830ab63182d930f76aa488779b9e4010ed52f448f78916db7a45d8de23a380adb6fed337af76a0ba823fc8b33ac64eb2272e8ff48adec93b4adee25c3cbe2e8908a01cd88ca95bd5d7d2bb43708b3aadedab0837161de4a993c57b20d2a53d080340c7befcc4c587489a1f860f069a14842d137fa936398146b7eeadf3ed1680f795daa583136970733f063fce089f8753eb5596734c4113d067af1cbb2bd544d5fb951080b6a22331f9652083676a861339642193ae5e5cb5b719298fb7e4e5db2570d247f470d2daf63e08a4ac5355e8d77771513d6717f4189fc594aa82bc902d61d9150b91d755a553c935812bcc98fb98a72ffd5388662e647f82443d4fe531ed24c7fe4529942c2b32cdb59e092252903ade95818d23af59b15b0112b69626c8881ba2bd8a413ac2db2cbdb178b925a744f3839d41ce35de693bce99ca5a4bb6015117ddc53508569c1693fe23f6cba4e5e2b2a50a52862ab9df2aaffa999c2076263b2963795b85a21bc7ddd8d71fa739a6c580cc430154bba7d0b0ec015eb93e0208ea8bcf67f3b5db502b963a983409192fe865fcd1a4df758f66622874440b1c14cffccf006207c6a99ed3637cd7c92964e426c05a87bced9613b34229c40b6bbd5222f817b11164c8aa86a19293c8abd98acbd3b88fb5567655868fef3ee1dd6e157aace9644272c30f6f24770a3aea06c64452a8aae4d297d544b16b50db09f5bbdeca1ee823bd999e9508af09dd5a26647e36d810c9c0c03561e3e7d15ddd871f5e6e5c088170b2e69891ebf79e5b5bd0c6282145a5a0634cee83b7aef71f43a5c187a98496a8560077f92a9f87047b30aa2d3bfa18d5d57d0c8f12a4c254e6da132f7420917290b37265f1937c3527afa4426c6043c7986f7518d36d4dd221a4672404cc745f376a792271d107a0e73b0c538377411d11dd74bc44ad0b549fd84976fd81edf8d5476dcd7e7d6acb4d0fc0236797912d0532d05f09167cb19599f6d2cd1abcd3e5feb4ffee51e83e8975e576f8b38b4280fa47441aae783ff5b2d220cca285934a934856c1382f0136c5f88b4073845d6dd89620e866463a082491b8172698c6c87c25cb6dd14dd76fb886838638f55c5d32f198ae3596ab5520cb175f1736e484c9693e22c4a402b81db705ac971fb9fbf33f1b80da7ea7f66355a4a86d57fdbc4118fc588bf1177e0f512b1a12359603c9627379cf5ffe87bfeaa2a152e7e9ea4aced10edc16f628affba1679f015eba6eb4beb50a1c34e95684712ab7434e6cdcdce8a499e63abdb94f72807a7c44006a5aaea33be4d43ac9c011a4cafdc26a084811ba9186ea74aaeeaf1accf1bf5e84e0eb04e00bf0f13543fb593c32603ca22530037224048844dba392bc95578f3cd5271690f41c505007b18dbc481893b646c2fd7c8e2f315a05211f66c8587cb91d7c96be498749eb0","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
