<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"b0009eba5c8d996a49226ff4319f70be7a8874e1de0552804c183fed4dcbf3d90a219773b1f8740677e6a4d2c3dad2524a0f35ebd43339c3f70348224fbd3cc83f8b4d5076537abc09ce768defd8033de7765b281e2fd65576a11feb047018b4decd529803d18751c7ebca45d293a1ae9e9a9d5ea8c5e392083aadebeafc0ab867592815c39d6159bc9d7e500341f5e1d068a1ec897d8c832c93a7a35d65bd27a1a439e82ffaf77c1a7359f4dd56846321340b5bb76ef816cc1bb2c32a8947e12769ab5cc8d8b3cecc788810746bbf229bf28feed0ce12ba58a2a433ac236c79346f868896556eb9e900bbf1e9cd8553c4de3decc414eee01cf2e3a03db746b5adafd2568a24bc05993deb9f9eb5bea08916ee8473ebf3d9a34d36837c30130267db01aa024652394b92f21afbe63dfb604e28bf519fe28dc094dee11ce5153f0dd6fc39eadf7cd1c9cb8045c68a54f2675e3473c74eba3e20e04c6152330930372f40f42f1bb72fc298b1db2cdc7678a00fbf143374db3d1507b52bdc663aa054f61368a7826d1b6d65bd3044f79f56431a4230678b2789a533e5ef182f66752e316e6bd9955a684a5ee286536028c1e6be08d3c06ec46bddbbb312ac72d1717b8d26a71b566ce75e0605aaf25d5b423bc4e9e93dbad7ee6547701f3be89c0611243c639aa630745ce0c6fd4083a124fd75d2021bbff2ee086a3a88d7fc986a080105c6b26d182d1ca0d1686eeeaa915dd932c6f1e2c8608707def94fc10e88f81a81091851071453df25437ece36ab7af45e16429bd8c68fae87fe621b34b444b30e3581bb9d0b52e7f6a4d20d412d9af75e59400d35f18addcbc57d92e7320ea9e9ab89a3b488614017996a8420a588e46053c00c30f8ee2ea553198bb3bb5fa5ffaa767aed448b396710e51e8bfbf8e6f546537f14300fe6840f069e990d92f5305814e3099b0c1c5cbbc60285bb17538d2574773890534d3cabc77e5ba5f0340c51b707acb66a3c752f7cb31b582df659ee3586ee195ed8fa5f07a8ebcc2b36bb998dd86a05a65922886df51e6ed54a56f50ef1f2136ec8c4d97dda1e8fa971c3049dcff209e45dbcda118ce81c454c70615732971aac09a28eb7f38f801f992fd67343ab448f57782f2ef5e5d6960238cd0a5249480f123af0ad7c8f4898d67bc064894232ce0c2679b1afb6a4c50b984513d15eb7fd7ee531396d22222eb815d0c7d913e13ce087c284f39f0ec5afaeef64b10486d966e8a04ce2baef23d915a5d7fc181dcd2dc8246bcc6f63342ef511df040eb4bd97a3ec4a1b6c7d1de56700781e17a2c2d71d0ae83c9313b7e4ee39437b9d7896a2623aaf953cfcdabc82682e4fc314d8a7aa75206b7075e80aeab2353a0249ee4b2ddc8ceea246270717a357b5ba627c26aaa188c42240fe13c14b0834b7f5163fbfccec85e45fd5d1cf0ece485508e2733c3325446d9d096a18821343339c1e742b6463a5d319379d42e7879f3d354f056c10201b8bc75d008ce24ca316becc908c6ce5fe242b54a505803df5eec0f05f0ec36241ed0478130e1d057845b522f00d0bb2d70f36d90c7db160b237f15002ee6075ce192c18142c6db6619c88aa62f2a53d891c27d84094e434866452e4f6478468e03cb63a58a06cb9136c68a19ad668b04ff30e49a77c93e3f7a912f7bfc43f1a4d50588f006095f67d679e1412de6df1007ca6b1bafc628f701c64ba999ea1298b3578f79a8cdc8a04b55aaae592721f13a8ea02e2a4ca339b77711584fd91de0bb0136fa29cca815e18d96a0bc1360d76aac87b1390e4d803293a11dd25cf4497cd78a78668d3e4d163a555b76578860c37ea5e5ae486f0121b6550656e03e6d68beb87a0b610bc46d750ef189eb8e250d87708c52ea55e942c92b084dc9b32303c65ceb3e5f45e597f5e75bc5ef89342f08ad45a7d9f0553f32052c371fa4a4410845147537eb4493790c0a8f419151b0c27fa4b523b7636f8b47a95607deb64c76f79b472c9bff1409becaa69c61efee36ce389c552cf1843d37ed3c414a92ea3935530c3afa4d7d7d395aa7b0aa4026fd575e668efc5221917fe4effb72d5dcc51a769e38f26874f9b5dcd08a688361a4563de78bed03891842ae0e51458c6d0ec63087cbec936ed4b0f618772785418ba63699f9c2f4649938870c6f9855aaef5e20ccab9f4e94d9ea394114e3efe94206f764b1d7140c0a542099d781de6185fc3ed9652bc1e67fa58f7273d0a76a8199f9fd5a099decc7a3cdfc00e0ca46c38da84f1e2b02513679bf4a4f38fd67eacefe9b37f97e89de325a6277c3bfaed540e8d5d7e31e0adbe6cbe4bfc726d86c123ff4c2a282752b95dae25aeb5581685e226e2b0df99fdb596cb6c4785ad9e9f913151cb9fdf898eaf372e1f14b992fa84fe0f408c4fc161a550be88c50dbcd3f4a7abf064a7337a5b98b362a71d7e55d636440bd65fc480237ae71b4ad9df93177241160b53b7fc0a3552dd471f276390d46e36df7e3345af2c68a134f070958b1071a250c733c2a86f894b7d738cdbf9cb79b94756f95c2461a602430e3f7560b6ea570716e0e1848f2856d43144082fa4d5a6f319bf9b66a1a9048ccb7febab14d9339c4a288dc4bb56109efb0bcd1bdefbafd8784e42141896339c03a6c8722e1e9a5233642a8b51c554837256a6145e3412002992c64d3749425fb72bb19db26a2677b48dde1e19e5bb1ad08eea73dcbdbec8ac1c642d6ef107161a17431aaf6078a4ccec65d0e4a717e1aac8dcce96aedd15a155c4567039825eea55014f4f17cf243647ec15c5d7fb988465b66dc7fe94e580e3cdcf914045570ab2f87710f122491607d0957c28d794235accc45cf24eb2578c86b61932305d64ff17512ce1aa04a6e5e16aabce83665bac7f3a0fca55801530c1e8c6bf10f13634e2850b7b795efb5d994e4cb4c18d703f5fe396140e9b9a075428fdc287d67253d5e3373d5bc896395594fa1e5116f92584066d485ae64575360421159e03b13205a47eb4609e8e7a014e87d3f6325e9e2b85b697bffd277f5db14e116b1ace9409c7dc8bb1f802aa3f63c08c1d984d9d3e07e3d0ae717c0b047e0c450a73dffb243a21780153f5437e14da68b0eea3c7c978500c681434de251882182ffa1458a0b56bb60d10dbff54c0f429ff623bf7844397af72461dedab89fcd3254b21600d278ac4f63a1782753cab72efa767e66492d3e4a5fde73889760723c3eee20ca7f31b3e8adba15fc56bb6f4c35078eb1041f66fec46b370df9322a809b982f35b4a3f332399d46bd59ceb2815030ccbe2c592058aee9d98378f0d6033197c5422aaf7e96618610a091a956bf764304e781f37ccbb4c4baf86b1baa7799ac4e71362b7b34f38bf8f2eda3848649fd7f5683521c78d40a044bd77e46749eaea6392cb8651f803488ce8fe85aa63a80b6ea21602981f4b4e82fce9178baee22185281a904271e7a3e742b626c8362c51581af678143aa7fe85726745dc11859356d8207b79ab4f11b12fc00b39145d54f86d620e491a8749d00ad46d1dd8e7da3c4b9979b74661512ba859e9063d4df6cc758279fd4b3b09b588270dc2a5740cf3f6682eb24ee25e8358dfd0c1362d0d2db3501265ec2d5f6eb2ba09a423cadbd0fa8a3b3f2d5844692638c56aafcd427a80a3402df471c95e88a3b9442eef75f8919e431d069c7b2a8c5a1260fbb26ad6920a5c5e39865e57d175405cf8b06407f2b838a561a2df98af652238a05866c48ff4b38bf4d6aacc77841e40e6a99414527af97eda7952173970351a58d458ecb388cb74d4c3cdb119c9e698aa87487fd2c02228bd96f94db8005101b743c2593bf9d959bb70f20ef5cbdd342ab35cfe8905488a9835c1ffb3377f4a74b36189a38582c41acf1dfd620bd06cc1a6d3042726414401c7cde259181031a59adbcfeeb4dd4e4fda6b993d480274bed4c53a501c8a5846c2189a8347a4543936d5287e79cf956fb7e72e212e4a6a33b01502d56a83a9de0376be6430cf56a83e41f348172bb28875a3acfa467ff81731cd876e6aa5f762499b80755d80a398ef13cc7188f0cda8206937ae635ec48689286a884809bdcb2afbb820f840801ee76aca59cda7bdc76ab721da8d817c86b542c4f8233e13443c3f9acf47d7a4adf0916d66d583c4981ea209c7bd1483fb405ccd3521220dfb2ed1b5033492b60418718ba4ed4616b0a232d1218182eb106022e9ece3a61f734a967fd518d2751ef9115ae51c04c75890a8d2045459409751c2ea930e303cd4d5fba2a72d371282667806b9194eb9546c5ad1e61b5f190ee5c4a600a489d43239d4e60ba9406876cb6b3148a42fc37e44f3500cb8e3239ae03210bb8f3a9298ae6faefbe9abb1a14a25b5ca208628f1d4479a1dea8bd18c527ffeb133f78fdd64afc8b311b9d274d5f048662d648d18496c98357b8e600f5e8e1390d3e41f0afdcf075eaacf04171eef22ff3d2ff1289a5a7f5f3dd148d392d38e6e08ba23f10ab8841ba87f6742658cbd37fa97ca5d16d838f8343e3265863e2282165d83d25244538f68abdd35e940fc21cc4781766a1a2d97084d2a43c32d7050e8e76c067c226f3fa13d348bee9b866953018c3f890ed0a8659695ca6d2234e38c0c51565765df2ce1f2e34f7f98cb8db3db35fb5efae276a34ec4d988ceb796800a0b211a784e7292290aa38cabfaba4ae86687853d792bce8297af1531137ffc9692dff962090a6ee21f37e821fce5d98005cbfb25197731bd8936fe7b5ba7b3d5a158a36c5958126152ba0d106b9efe370e4e95d07ab54331f90588986bf1e889074d6a4283317e02593ff04174ceca85efe42860093a8303ed4656e4652ae5fb22089b7d7fe9b8b0ec80488875e2dc919ef554db1ce88321e6986e5a9e526b1221f78e194d4cdbb726b8e0f611555bbf51e20b0e0a00cbbe89f446d56ee61d009d14d2bc93f9d530971c8dd8c2c806c110dca139923d686e3138c97ad6115180f347a1a876c5a9700753b1602c4d539252f8c4db28bea8bd15262e94d2e523f5972e4766f122dd9f160b8b1a0e72286fde141170a0535cfc0a337e9eede24994e7a6f3b989ecfa17c6b8e8353433d136c9686153420f29a235bb58653b363633cfc1e34fb951ca02332d112f7b52790f195291320a44fed7c0c807017808fafd2ba053ae549ab3cbbdb9373a4c0a45c924e9645d4f648274f77e68aa54ab65b8ac0311897401a5ae5b5a8b7928f7b8f4894553cc034bdc9a324a8fc640d91a0231523b8fd76189dcff0e615ce8193bb7f20b651972a4c6730db1e4978a2e76e0476014e160050e96aeeed201f6036172d04a67669199a4c0c2502d2b425f181fe948e1fc7ff2eb6cefb23942bbca8132dbac14f87b14cc79dbccd68b39c9c1d830e27b66826e8229c56ee4a5223b1babb5fefb0c7f39f67f2b24fb543c245214cc13628ec8b26ae2295e255ce9862d27f6b044e8e1a89840310745e8dcbc88399a9feecf6cc4a162cb93379935221cd783f51baee954d3957b02c9d166094fbf9c550d56394df408170d5e1e23e03871bd1b5d2da49493b90961747d222762bd420ba6413c74533cd6a598ac91e67006decd33f3cd7620cde2f0d94fd9ee24411744eac4b38baae36bac5938126a4a1b3b070bf3702401dc640ffff7f0d680509204a895bf5bd2e3e6f45ba517cdfa0c38cdfad2ac1303ce460dd2340bd60a3aa9890abbfefab6921266cc542c5edabaa05aa70aed4d42c788647b52a8855e95264972d1f6248c1f8bca4c75445dff7ed87d0256011136b1235f51c287ef43f7ce5a63d78253bf882c45687a1768cb91f42a59da7d3d18232e39d79255ee9a4a2e5ec0f7ded20a90ff2ec21c2475e5df220e078237a186766e47026905108984830b92ff3f64acba2b2f799fc8e366e68352a8a6ba8e78ff088c28db6414806f8baa0159c024cf37eb1c0a1a8c8567fabf8142ab5b9d3191745603caba2d5700f362e04c744d34000feab8a8a96bd1e10ce7910f755b672e182119336ac1df8c5f0b176c6d367999ac954c69b4111793246a440aa3d19fdf1ee605a11e3f5e64ecce84a4414a4120c9d5d523406daca1e3e6c9d9a3e485f39145c65dea572d8f63c60fa6025f8d8670cc9bd163c5089df23a6ff4b5b9a19ce3af22fdcbb10e7002e8c03bacbcb6d362b834d679478561247aff2877aa41d7ec1b9dfb61a1a7c51be292d17a49335d9c4332278980400a307e064e804df15b2161a866a4ccf9a6a44ce3ba9009c6cf7824a8a354295d30e4fcb227faafa93a98a7c76e9c760c2d2b8ad80802dc7ad28cc60956f090613f250fb7adcf539fa2ac8b658384ca664f45bee8602d1dab97e7958ecc45e8313ea2892fac7edae8c25c006f4b4c9b6a58be0f03ed9fa6c5a7033f0fd15910d6ae0cffd472f603c586545cfd65f31d0e786be8a5504fa0edba04c805ff1890020df5c5f33ddcd755babba3d5ac84bfd54ccb0c0459a1b1ead823af21a6efd8d641a11c287e23516dd1345eb4fae648b33ea77665c7a770582726976df837a1e390b7c1f5d3900e9618b4060e1c20f63539fba80d88345136d47fee9a9469f8127214e379773dd318c894dbceee2b7956e7ee6d1fac79a3f6d7d9dcad6a645800ab183be4b138f6b6cb58bffb6c4c73b7af63c83b3d7d1d350f5244af6fba502be97eebaf90b77f3c8190a879c02a4ce5ac1c8441286868c5ea75f396248685196416dde5993c16e1f3870027df6016ac926c4a9e6b2abd2f886ddbcfa5aa29d8cacdafadfc8c76725506e60310005b70aa4573fe91a92ad3875413281cc4ff52c5cd55df362e79ddbedcdb6431fa361aef570c0700305cbcd2e899e9ad5d2e64480b876f6255726a82a55c4ddc7c7dc17068fd1aba38cda2951ac4b80e29e0892d125ca9ef129d14ab930b9033b2a0f0bccf52b70301e83a9fc4b555739e7506036e21d72b902216244aabbe84a214bef7115bde1805548bef452c717c0e60e4ba5c39f32a5c0f3d5a08b3d188e72a278e99ead5a17b0154bc65f15f6f5d1afcab2fc63e288842ddeef75fdfbb67c2a610774940f0f6c6db73341bf08f00b39e857c2457bb4dd17bba772fa4acf25e95dcac01b268904236c55952bf225c0f8e809eadb6ef3032a9e19773c3a8c854cfb9c5f3d9f1774f53f707151a61d0f4d0dba5520c716b5559585ca1cd64759efe041c129898537a5d6e8a173edb24fff1c19bc97ac3ccc866fcd665d283187a880645f15e0544b048bfd179fff1dad79df5e581291e4fd0f23f7341fa9af4de886321277e75f4dddfc950bdbcd160e757e364be018baac1bde0b11b250ef072921d9e9e69de411f1504228b5f6dcfad1b68c770bf7041efef4d9dc30c00e32fe6f5cc69fc494fbb3d9e0d09afaf8504f77855dcd18d1eab321d2ef8be27d4db51ff2f26eb6b96adbf8a52239201725e1cbe74eb98ad76a29c67b93f890181213b1c2760d0593267994aa4223c1c5b76e0000db1fbaabab512aa3ebfccf19683ef6d92c78dfbbe70f21ca60ca021badba8f8c911c7ae4aa3096bd2154d80a903ad454ebb4f82052b877983169b5d8dd1cd715556e40bf6980b7331380678de665cc6719107bd00e68ee6adb725808822fc057cc45056281ac2b3fe35b6843286d5a624b0dadee5bc3dc57285e0d746e374da86535a5e6f56d9beada55ea24510fa7bbbda431fcdf449a1ec6904fc5555a9ffba19a44564208458741bc66f94ef8926cfdc79f277d9c1929717b904b20dadd88f4e880938fb4d47abe76847658e36f3a0cd431736151ba8501cd66c429bed93e07e8c405c07d78bdeb9b42eeceb22b4b6df6bb1fa7acfd83f17a5565e645dadc1f52cde5397d22cb062754df2bc838a72db2e792167dc9f7fea8c799b19213ead184dc9bf481d11f61437f52079ce0f3cf5e562c0654ca26ad454c6665ac249e5b0e8770f26f296d1164f06dad7688f63d71d39e298e0fa03597c0fca625b7ef3f3ab60a85a29bbfff40423498e1ece0a73eccbdb6848633b80bcf4b72db69ab1cb3762e4bee16277c1bfe28ad9a23cf646065837f55385cafc7bbb81c73d0022dc458e7c3aec9d2d4cf4b1f182452f7ba19d3e3c718fb1a94b47ed46b3adab3d0159648d3dfca0f758b95f106d9a41aa6be75a991f422d40de72862c26cd1b96c4e0075129185d51c6e97fc0ca69f4fd4533d77ecbeed63a5a07ae2a90d784811c5fd2db54fa2ee5604ce6bde57108037aa585c81c308e732f2e58a6131e4359ba1b54d79be0717f235314e5798a0d39824d20e4a23e90aa6c6f5d79c9a5b42a8a36a3297ad422fa88d218a5e797a109d7b50401fad857ceaff76e7ff1329869726b2768c201d0f96070930347025a085d792f1e65942bb78e0eef483774c47baa0ee94e70c378436c4bfbe4f75c358744bd6b0f33892e107b658334c09fc0a800546ec7ec03a0a9552e434db36232539eb5309b732d40c5a0c3ad6de51d52ad4ae18bb59df197c153738b76ccb3522a52227ebfc61d98e33928ef325371448ed539213aec7a6140190bdb76a18c017eac135ecaf306c10d538121255f4fa70c619ea954deec3524df8c9faef43f6c5db5a9fc383472deb17d68f2c5b9376025a6eabb5f146dbbb433d985d6a8f3ba6c10f73bec7a07bc7d483eedb9254221e92f2678041db18776a336cbf4d0253dbf80f384784eac190c70043135079116a328ed40ad04b2f1b3df718068eee685da25bce135eaf678ff78003cef0ed86cbf7e812dc0baf393646784d6f13179ab12c3bbe0aa1c3866cb144ee8d17ab49fa0cea8a2ad1a9bb704ce8ad0faf90c8815aabc8114683b350065fdce68c6349e4451a3418af293712b8bd4c8c16dc9d551d369209344924407fff43a57080c8dc1d4e6cc837eb0bcae3ed4abe1cd0e1a8a078d889af9dcbe8d31e20b33d50948f31f2ae7e13090bc02a3a9dd58858d610d246543c2c4fc6b14d6ed39fdc1686b451f538dc7ec4a7e22d1827590096156dbe0ffdc7bdea9439796e97b8b0bb6f2a1b3f926bf8ae2bacd2c21bc949f9c7691316cb1a594e41a2f8f5fc3b7ae45809e7009b02786e7cc1d41cfa9ee8381a4beb6559cb523d410e003ab45f0196128136c77aeda229d034df6b56e90be785ec02f5fbd8658b80027513babbcd8dd1d996fc1ec3ad4b7a0f2031d864a31d2d1340ff2887b1841c2bf61939046f006df7d74100a78b7d1dbd05b366d590b1373d1b9b307a9f8d2539e5256cdfb56bd9eba5c8d55d44cc7fb51b99ee625583c631b496c984e15402db9d7d2dd413fa8137f28424530d79d45e762564a5bbd1a6de1dbc48825f11065896f5922d504404c1523710a95495d6ea8b0a3d518b08cd8850d1ea961e4d67d3f35e8684ae4818989cc823a41cb35c508aac83045e1e7168715501d1f9b1a29b91df93d815c9aa9f13c2ab29c0697357bdb14b337bbef7caec85371f56550718ff41b88aa6826caeb0e4823278a090e095f08df72ca5262e9a93568aba3eb8d957f144ee8110cbf5a7dbf8ea773673329c6c06f74def9972ac5e16608541bd51bdee0053b25b5ffb6b9e2ecd0ce31ede6af9cf0cc868f37044c929165d25249224fede8b8df5899f057961f6f0cd14a5a870e5783d38bd51efbe8690e23bff07c474a0938c7c37c0e018841171b0bb9d1418b7f83ed35ebcd699f89dd65f98f0c4629b8bab262e8051eee5d4ec0b3f6e27f5f0c9920a8a4bf7fded6cc10864f68d52a8e2fec7d269a50c7979301f28bdcac3487ae9aac1fc6e6c9381d79a6c92871496aabf774c56b791a62a87e7fc31f74cb15fa8a6b7bebd70dca66881e4c709a4b003a32a482132691f809be0c7430f0e383d5fb5f447652f3b808562fbdd804ad8ed58c54993cd17e76c99221003f4096d87637b4b91230ca441952eec0def2c9542db52a616e902a9b644cce6cf501749ae8695be132efa3591588cf6a331a3e5aeec3df1704ee527ba9752c6799dd83907b51d1f6d5d10ef9fc6b088d20620623cd2332455ab32272dceb26ede07343ebaa6f22cc21f11c5c6bbaf94500aa41385fd6d9473311079d38c91b286b4f5d234bfb64a152d101717587cc247fb0b10bbd92efc69d25fd8d76d9b25902d6667cccd64a13397f3e2eba68844fd386dd9b716d0df897a7b71838c0c55f4acfcfd40e92b4a57b8742ba9ec4a83ac65de83742a35653a725ef0db1b9bbc14daf9d3a6c5b2f61cbc3701affcd9771a7060d759f6166c1106bfa5558f657fbbac8b444b252afc6515a87ba0e385d5a885ab5c2d7b4f6e125858ae220c138ad999d1441cbcda4953a4669966aba476e3e7a5c4b061cfb0b611e700182c2db91bf3422c60b83da3bc8395e949f7df8b2e88ec218d2de45a4e90bec9de4178735a6009b7506d9015962c5b88047ac53639bdea4d116c548e4e5f9a62ce7bf8bea845e5876663662bd6ba138e5d54e497ec2277364f91d5f93dc80e2f45eb235e86b50ec30daa78ebcbcfe85f17e506df13a363fb0b22c23a33beecf3c6b0de8ab23018d3770d78b3c6a481851f927b2fbd3278ddc6251825c40618a679048476806e2de5b26ebb9f07a58704008657ee1a27f0e1c02ad6923551c5d02c6cbac046058b25b678a822dcaa921c9a56e3c661b6831b42ac4a23e23a33870f98f4e9d734d71b9995c6adbc0128f57465c5dd3e3c6378ac83469489a1e3f122a418d3806c8bfdbe0e05b9c183720441b36175417bb2ac8c08447b7e108e4aa349bbabc4f28d73e4cde5ebe255db43dc2ee67e7672470ff9322dede8a5cd90fcd7a2f45a8a3d08ecf00393840fcb92b51eee4789eb6b285b3343606efc78fcd81e38dfcafdea71d03f5206a28c491cc43b5c3275cfebde6468e992a983115e1449f0bf6908d6111b81f8ee095ad5c9f5f6e6bd1daade72c8e4049f3700f3fd53a80140f199e4d05657b5430bf4f5e5c5573036af5969185228f7df9f14e6c46277b58de87289b20cabf5d3f8a96c2c2e7c89a94c987241f2515cc67632472245cdd64d627ee7681d7f57af9e4431cfbe4e1f433d3e4266069120eee3a74d53873c90b25d9e7a5f46ae7ebb641166ca4a54c1b247ca1e50c001ce4fd4686d102d41c3620b685d71d8084ff5d7d1c2077621c18e34f8d44660b7a948cb9e88b93cf5156999bd84f37c9606a53e0359a472e4bc0d71b43245f76f4ddfc147e7348020a7ea3e4d8b1e5c9494a305678581c3689462afab15cac453fab8513febac3819c94468cf82ae1f38876c73d4939e58083c1481f939af0b1c6500ac2f3d564353e7727262a9ffa18f41404ff5693b4471b358ec5c6ae763e18fad2d9989cf206a4076bc6b030e636de0c1ae33bb7f3347acc4deaec057e0db0c68813fc5c3eb7f00d6f4dc0bd953b622252dc73477f5cf80754e94bb6bee84c6a8f1c83a1ff6fc5dbb494df6e1224f219070e178b5bf744d3d43a61711a505f54df2e8f6fe26d4144d98af13a90be6941e0f4a38e6ba8e075091091762a5059a27bdf9dc6acacd9be068e4c6ad2407cc89b60aebe3cf15e8232a017cb9e640a9f50f777658f8dd99dc28a41c2ed813ff8ef43a5d5f53eaf55e285af0512c4422ff14647271cdd21fa99b34f17e987d5836306ce9e26cab8f49f51c41743cc226e5a1d1a2ab31944e8fd777faaf7f8fe05c76ab1345fa7dd41cac801d249ba389ebe90498ffc5b7c0f3b86bab47a8653b3ebb6341242b6068bed637772384c3b5619cb219463025be995e927023ddc4d17a8acf075498ceaffe31c1b9d2710510b0cb9032e54c6e69751996abf61183870098bbc996d9d5e009767ef3ea90681e5297763891e74fca811b2f1f1d2438d10972d0bfd997b60f34b31f9cbb21dc557c21e6df4fed4a3e1f34a3658758b2aca8f6d49e7b77f46853eb032844eeac4059e89f5c066e98b25a01689f10dc54e4ac78b9130d20dcf6d0293397f4abbbc32a34e9bfc1aefe6239c9063ad2252b2088da90474dfd1cf9d837020ca59803e75948c840e26055444ada082eb9d2203a40a5465cc8348bf3dd75f00ecc5bed90e773ebc8827be1e432ea97834d7af163f2d932807c764bd533e6fe56eeb79036fe8b1772b197e1daf56e7da529414fbd5b3ed55a819b88218bd4ca19a0ccf4de0f27c4a60e9478eebdd1f4d7bf843b172bb2ffda8e4495a1f38a4d8915fca79013566e9d7e3b16367112b67c4b4d490e64b675a44e500e634eb7909a74247b590aaa40046f1ec19a3144bf28d9f165dc42957e6240fda243f0dc552c5f92e4c3e396cd52f1fdf75f2a04b7b8fc5488de79779a0e63550f14e158e3b054de8ce9e013b47f1f19fac56ae72f0d149740704df7a0ebe7ce068d0ae3820e5bb1cf498e8cf9d426305dbc0531aebebecf20db56d574e80a815d8911dbd53f61466cd99a2ec4afd5024049ebd3db6c628bae167f254f156632432120077d9be9e862eb87c77bd1f66d7340d43c7fda28b773c6c68145ec798c70be0e6cbec734b97da3bf88354d0f1b0d172f3ba8230a7fedca3afcac05ff9e1c8b39ec77788afe6bd864913ef7373158ffddd61e5064c8d6908d5305d0e60899e953c6b2f9c371441f6a09ef6dd6253cce81b83f9788a471e3ec30529df881734c5495ca94b270934cf3536f832bcfd51bdf4b14d034c0346b626ae767f2b34185d89f2c8f67e5c50e833a6cc1e8783876968b3cf7a6308521c93b9054025f969b2c7c30a5044faa3836138627d9e3ebc1181f9d666f56b756620a8b1495fd9fc76643839e6b55a4f3dc973ad1d2c47ea1b8461f6d631b3fbf8aadbf5fc6ebe91d2285b9d5b91b3385cc0a69084911e3f5828b39e8336636ba14c88b9963d1f525dc56076ad6b5fcc29df380bfabe00fdbc4417d1fbbe0106c6f51151ab52483bbab92966ca4d695f6f2430869d4c382c1d79ccdf248597f2224631316f8a565e78a3aa454a5e3e57ca8d1cdb6003cdf44ec17a6ba695f98c7e95d2a98eeea8536e841341cd0308eae73fd76f189251c2b498cf5ab812c5143f7bb8b65410386118680bb72354e217579aaf776f26f8e7b7abb50df4d444416df50046ce615cbf38d2db387863d515a0b2e14444d6b9db8bd74cefcaedaef0978e1e6296a36c8dc1cc259edef56b2a9327fc77b621c069725f8b1f246293af19bc2eb360fc72c7defef7ebf0f7dd257f08de24257116a45dad957d7bc299220af43c30d7a1bca62595c160ab517fe7109f53609d73e160d40b014b8d6a7e5a728baebda33493c0213769b261191dfa41bf88da8e02828f696652edd0b251fc214fe21959cdee1217f2089fc95ccc2241b1be4a08e3efcc68a535b751a3162ad59fa57296158dda8f550a68985d5ac09063ca34b5b5cfd3b8660e50962a18656c544ffce3c87eb1d8880f086f72e49a902ebe1cf9151da1a13540be578ba31965ffad88918111ea601942ea3b89a0ae0036854b956b3c572d97b7dac9c227ca82eb0c366cae24765c2c3bf65f2460d2ee9350d7f5008e98024cdeb352eabc7728c3c1ef06b04e82a792e2b671510bdd181a0ba9248aa125c2b84034b2561cc1f7db1203eccc54a6a1476aa83d964829f0e7a6f7193c0ebc000009acc45a03729c603a1ba5008bcc9e4271d11e41164f0a59c6538dd1f1ea306a2388c5a85041ea6c4adb58ddb07fc5866a12134c3aa30efa1d93390dc15d2b6bd5dc978970666a3eba6e371f9ecb1ca611c8771df0932e124399076dbc3aa58156530a5f9fc5a6a699bd09cf06b908ac14c63413cd15f365b338aa1dc2eb61013a35c0e697eb6d5f853f80ba9dd685db57bbd663b08c17e370de0b78bb7c110072bdf290d026a23b2d82be68210a2cfd6fa46c8513d8716c09c36f0be6f8193d787606632e9ffd214117bf3573929dbe465ad5e5ffdc5176472231f60e9362f73d364ee3f8bc8495d68a67a3e2f19265b59c81577de02f992dea1dc25f06fa65884930353a1fd0ac395167931b9a98c435bb7e7c85f0aea43ed9e0091eeb523945b2976b6189822f45f8fbff99dacac3c9a87fdd037b35a029c6644feeab6dd8a236ab7a4b6d4a76f93596e286ff273c69fbfbb86ca9de621a8fedc966ec96d0019fc5bcac3b578b665b285de4bcdbe3971fdc4ac2a6f050059b8b769310b646fd209f68e6438d3402d8980bbc11aec4f64d425f7180eadcc0426445ba9a10ae2d5e501e5c52b891af5b32a7633943f0f14b906f73700175442f1b8f40a78868d8beca8b8dbe34a5393691d9a98e67b5cebe8917db2615b197f1f01b90e2cca08ac30a540c03dd26e3053a0ded97fef9bcb59ec5a296445bdc090cb58e28c464c06836ec3a7a413cffa1d2e855c783b77d4f93b37bbcae02c75259899b290efae563d4391bca690187bcd535a2d26542edeb666a4c67fce7844a01742f8872770dca0c66ad8b8ce3dcc3634c403bfbcf3196cd55dcc20d2c2f456306ef26accae90ab9a7adf7a7c8fc8bd22c0244836d2a9f0f4c7e1df2628181bacf223c61d2f0dbf37eba1cf55f1cdda457633a31010c83147774591d254bbd7f168d3a13a5b5dc81d52c18830e71c9432e02c597ba429ba60cadbb62663982ef56126b879e0e82b720b9b1bcfc1c8e52e351ccc7bd78d8d97add85649533c68719098ed0693846e1a40872befbd5439045b591c3ebcd88d46273f6c71f57142de733ecb089d00038fa78e063b031bb9cc5f57da1270b9f8d35a83efb24e43c8e4899740120716684c78a63daade6ada7005d47b822b50fd7bd9e1a4f6fa4b58389e6e1629c928d71ce535e738f0beceebd35b57fc579a7767fc21cc165154b0c38b1d866bf6ac757937479296a39f961f0f69caa9915a010ff59077bc377caa8ea7c3765b4802dc0c46ecca6e8af30bd676cb39781e3b679f2c643cc0ba93d1f366f7cb0722862263459fd548272165fbda715e76069c38b7165a94c36a22409228c887a452bb87bb27b2f584f55232399a0af54885e068c22f36b074f83df41a2b008b9bdd6a20e8d66453eca9486d9587cbb58616b230f5315e543902e74f7cf505adf31ac99e06e2cfaaa2b32000e53f9751b570220939b1c10df318cf3fe13515f4d4d045ba5bc44c468316e1b18b23dd5cdc11639a15cbb40b8044eb89c86edf669c6d47fa048ba420d88b85653a0f11069018abb16935fa7f0efb5f923707635e83871137d2bb43e295eace3755727a3dbc4d51f8d8515567ddd3c3c196755577b21c6e760c7809eef5a89011fa1ad74e5d130e3c8cfc654f331fadc3f287a86cf9ecc0b47906572134840d4f044c66f2b3d4358a1d11770739150de64b14ed2c83870d198e541fae6a2c8794d48749561b428fca5a62d04e6edccb3bfb45f7a9f7e5dfcf1fe44cfcf146e6d9e81fe352b8ce906e6767759d96d795324b850b3631a25cbd6492ea0ce936f76137312469f514780ef39c5de26bccc88e8fbb1b8f410d8e6509e70c12d1accc6a751d4a805bfa1736b2fc6f5b413827f55bae5a4dfbed041e43702ba44ee5efa87720160ec526df9d43970918d8b4c334d602eacb3a0aa00e36f9508a0a6179f89c8038ac194564c7d1c0a8ee2531c2d96a6d940efe765a2d88fd499d606bf2b1d69b231b58ba17cdb416de1563267cbac8c147e7fea6b5b965fadc66c01d84b860b5f205b4a4e0b01fad063ba375983530d83cebc0630e95ddf185943ca6e3d8f0992daabd5b2bf2f4c33107f44b1e7e1769538c90319777b1106958c156abf0e3f43f2ed6c46681af7398fb17cf194c3e30a4034449bcbd7ac4598390dae94348e0d5c4524fd8fe872a4d124103a50fc242cc25a639a1476e5ddce4f2ac4b127462c24519467cbe2b485ebc3446138a46c012addd0e13a22a29913fabdeccac0b682faad5ad365fcde5f165725c48d77cf05ac777fec64b21083566c193dcd4042fe832ae92127667b8da324c37efcf2ee10827020379e30cef67b88e670dfb168bae81546cfadd03eb720e9112aea8499a71e8147fa1c7fad7a89954db973de4357fe3556c04a2d3db5de4cbe6c83d940a932645a986033704487c94308aba83060cce3cfbb1ee229fcd96e0c0164398d9cbf61025116a9b7fd8253c32662b20e0102e72379ea300f98081e2065df9f3708c94275d325554d6861df482d61a11759417f0efd94d4c1d6f5711a4b12c7edcc189d409c9e195dc1bbd1a65ce6c23f8219c873cc305bd60605c8985d5c3e6bb80df5111cef3cc4cb24d31dfefd08da4e45c00f0508dd24cb5c1eb42859015e2c68a73f84cd8c689ce4993075b4e9c12c75fa883a83273c91367d2d27c3ebac2c341f80cae74f013b81b953b01197295d9d0345e1aee6bfa8f2122145d74222c3f014a0fcd7972bcb33d28f46ff0a4b999fbdaeaa034298bba2a61b6ffea72319aef2d9781dcd1c8eabc02cb572196054e25f621419a7b43935daf421fe2c5999465799e0702b2190e4956091eb0bc758c659b1eb1b4e249efbb5e1611c142045a1db43c7eaf1de09fde529c1c88f38e72e3bd32d9f453a7e89a4df1ed3ea070068dd43986014f3e6bf97eb15c313954c88b86f4d4ce61cf8811b26d5a8b7f09d9da1b77f1fdfaf2e2ce0490bbeefc02e62693955ef7ceadb0ad3cca7ea42e7364ea06b35ccf6c016a90c6056c7ac5c99e26af6574f927162ec8ec7ddc0dbc09c73a1223d80cdf59182f1afa8012915ca15f08ddd0e539adecdade1847b66b4ba9b9f3dddfebf679752a2a7c4706f1878e8d9482585cbaabaeadf2349c8500ea1f7ae2d148c85adf4aec04b524cbbb9b90e8804a366913f17c0f7e7bc6a735e9b3fb0b6ec5e68c5ab7cce9ba4f36e617794d6a9686675672f2d1d4ade85abd22fa1c8e9bd88fbb9e77b79f1523f85115af9ed283f6828440ca546f207e89abb1c4140ca708a0cf5d82128dc3a086ede3b86ffd868785f589f9d3fb5b0ed655f4741ca32cfe5ae5d78b584c59518530e11380f52064d0446b0a02c6a577bba1c600653ec8d5a8cf89c5d95cd90626f524b9ccc9eadca7426eeebbacb23a7378d09cd2e4e7ee5f581adcbb1d4516590dfa616bb714d0122375e85e0b94257820871d95b4ea2e1af7f8ae25853ae401b75eacac0b34116b8245273d0acd3bd34892c786d3c50dd9ccf6423c8ca99228003311a21b1a1f9fa4ac9433b10089cbf4a659db0de355a34dfd366f1e1c87fc0a34b3f81cbc3d1ed316c90b4b4f73cdad1427b50bc67b844b3921e4a8d5c64e26c7244d75825d99805caa922d0dae7fcf20645d749b73e39757955038aba759c2aca0969650e88eda454876dabdffadb003c416cfe29548fbf0e275c9893c4cd4156b2784877abb6542b80bab869525dedbc89aecd3b70a7871bcbcc56c3fae4e6044b32a1dac717f6f032bd2d2c54590859f7cef55d59a99788a1e9e11a44883b5e64657dfa9038964a815c0625821f37999cc57587e43dc9b06acc4846ed1770b0ba684eb16c747033839cac8e45af8af13a4bd7b986f55b90839229c283a45d893f18809de76726ababf0db2b735d77843588eb333b88c5aaea870231a867044ae8158def54e1f41b2095df82c65c059c12a43834255f55784cc2f4fd7b5be45c2b69ee12dfdeb35b221cdddf94008b31f139234b92fc4bd0dd2ae685c932965abaf317d21d2d659829730046f4bb757b668d34f985c885567d528765734d0f4969cbc41d2325ebec1ecb473cefb731a836a19bcbc78e0c18d82d5ccaa50f8d666565d7200a464860a519b0b7bd1bd3b2765e4a9e6a85e809f9b691e3419a6cfed9d8463e2a7268c55115931ad5cb8d8b861aab54e6d78d4ed3cc40d936551a5f304e0502d1c616f4e1286c07f0eb13069dfb740c71725525fcf05085004b21eb3bdaa60467177ac2766257134c513837a522ef7c3e3cfd9027129ba9265fcf2f7aed91700e1e9a3318b0a9682b58f45b4082625718e75c047070a40c39af8ecb9eac53869c7583f5f4071d71882124345c42e198cce9a2072ff3d8cbe912f435aa3a8c0d3a1df86dfbf3750178d2f239385ad2282c4793548c189fd1319fa02123a07c5b4a4bbbec6a6bffaa6dfc246d2a3bbc2b2215241ca23ff52e8c9cbac2429a838ed59b82d4916fbf9a76df997a68a4cb3a95886735b4d67d6b8b4fc9a9dffd8cc7ad3709c264497e01599f70007fc0be2052734f56cadb58e6c683691169343f16e097eb158c92ac31a35f7661234e34554ee7df74009316b1a4cc13eedd6669d6797d80da51acb0bf90749e4db7990c611c5ad147f2d055dfce9750386521459a744cbd348fad6357dd7b1f8f937afb1702c6fbdaa977d60c13934d49aca453a3c9b097e3dab8fbff3c958251eafd211b6d42b95b5a44df1454df28062b46a36e391c9127fe34ec0a61996a2aa3c76ef891504484417768d3ada04ff4be870fb1c186f178acaa3cdddaba8a3a2711731790e3af1b28e1db8c48a7b153ae3bcf339171ab118c2730aea6bcdc73280d4061d9e41a53d4a9c4474f3a130d38b57264dd1eeac104e78f4afc49ad8039a4725afeb48959515610eeeca248385a6f539625e96c38e97b3a4f545be7f389bf1b3b635cb02a62692fe7fe9bda46e3a88dc82703b5c45879afe6e0043972f3760c50d8bd909f85acbe81b7afd8b5df38232fa7c6963b5cd2d2d6caedb4de87fd41efb3d07f256bc1f70611cea095193c9790f951047f1a4bce714ddb456153b109006bdba26ee1ff6aca8e3d670573ed988f03325cd1a0bb14a0b73d2f99a8fa344938168c4e6b850a37259d534f0b1f0a818b63bbef4788ab828362d98b3904ab28ed7892348aa615299b9624da537fb47756e140cfec683ae7d5d21edffb8f0b9096009a25d8509fba8dccb31c7c3be7723ebe04a0f90563c005839955ff08b1f1fb1488d128101441e2ef3111152e6201c80381c53d9f968992c5ea1cfa10cd2db98c9ec59bcc0bfc10abc2d912333730300a1945c4e65902e6cbad147fc9710084f5585ba2c2594f6524056a10a9fc109a9e0b556c546d48a061e7b737128d3762f4790d5f76a723577ff49d4d28e02962aee59217956416739b563cf569293d503c253feff2642229dcb2d0b1c9a0896bea8eb6c4980b50b20ed3b0320b7d77fe4a003c1422946a562d567cb7028a1aa95b2b7af7a1fcec74906e5352b5185dbefc20743d51ad787cd9efa63c67edede791bffb2873eb941dc020920b59ac35ded2ceb129df6971a7f06fb8d0a63310fb6e13dcb623928f879425953f434d5a68ed8fcc1a2545bd3e29c03cba57d743376065b6f6de45a5568674d1a754b4c9d4a9d6fa135fce9590220a9c2d6eaa63da9cdd8dbccc04891aa0c9cdd298a47104374bb7c582ff713898fa173017b8e0fddaa28f84bdb9a025c72f387989f502df82aa7d9eb07a74aafa5f9eaabb0d79d6025f648797523bb6dc9da930b4ccea7e5af4f869304f6f5ae1e818cefb3d19e75dfeade23375093079ab0766fbcd99a882230d565c4ed90a04d06c0c37d3a6da586477e3d202485d96cfdd13aa54a1d3bee1262b4456ff3cecff810fd2bc677e3db032a8b3bfc26edcccc5a266558d7d78da6566d1ca5fbf220c42e5ca414972160ce50b6fb43076e7b59a6b192a99a0b4ecb99c1283f326af0f7f1215cc73fbeb6efa5bda9fdc24e736624a3e8903ecdf645e56b27103e8e06baf47f73ffcf115f2c4b62be9444e7d1075cb593e955e59846acf9fee99789cff3bc52df42e27f4b93e24b91edc5eb81b9e78fb1d5339d44621a3a72a5adb0f92e3b603b88a3fa9db886e0f583487bd39bd3690a8122f4a8d5335ac14a1eeb762b645e532a186bb0b7aaeec1e12fab715bd068323d54ac20f239735523759ee3a3e926bdb64c2f549f90e4f93f06ac7a7f3fccc3920f126bcdeaf7222d107aaa58ece2714a73a02a6cb268d68ed27327d08eed773f5e9895f637f9241cebcc414fad078d9eeda6e891efc49cd76ab61541fa75aa93b300de0453061db31af9b6f5d47c263db7a972747886ccc7ade0483d9fd545b6ead65c4d9d6f4b4d0fcd08cb063b4c336557cf48b2884ae5111706fb407d8a6e54cd063df675ccd707278e64abc607b0392c525fecfa7a4e70d30fadeb4a7b7a510f553a1e40cf0088de775f816634b10770482170b98004f07c61805e444f4156f71579b896ba4675d21291a6c4014d7f03c62cc4ac40e59699ebc777f0f01870f5e72e82cf21c2ec46256f4737d4b56fb1cdc07c902736e8b2ebdfe55dc65821b228631136c66d1b66fc6415a4d3b7a1b54db5a48105b1804d0095f7ae071fba40afa1f6a","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"e06b548b27a7e7d8dcac8c756dd3f2bc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
