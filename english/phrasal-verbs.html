<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"74d65f8270116c92d9abad212c9c5090886416095d43c7946f44dd5c631c3f5b6dc115f0cc4efef6a9bf139a12cc529cf1b97f2f2e149cc5131e3784ea0b9291c4f6f0dff7dcb22c77b0dddda03174129ae873d5dfe46addf6a5d494ead393a17b3c3553ced972fe0b304936d4ad3c6039efbab53dcc9decdc48919c4e511fb60a5b52da5c6ff533cd93ddca8431ec986b889eeeff9cbef6a30ae8333c6fd2aa28d79fc814e1760f9ace10256183bde140a590da979361d6e5aafab5db8ed8543e073df95e098a66ee710bbc46ab964555140cbdd0f1a3e90454203551bc572464af2c62225f40648ff2f5a8abe94de2c223ae7927f7d7d5606da4e14ff9a4224035ec04a5f6957c04162539f4128cb78861ba67eed7e8d5de052db7ece40e81c137cc2f4e39eda99cdac01a4cbb54b9fc42fb9275eb647437c2eb943a585fd8ea723ddeb0fff7e8994414e39660adf5cd6cf82df900c933b50d0642332b2200a84c2742579acc5756d80c5bcf1291bfd0fa5e3a5051bdc6291c4ef6e41972303981f150f9c0b7d1adb89bbcedb1d0d484232f3cd6e3e6f8a023d290ae34c6adce31a54e7826026c7ef526b24648056c1eba575724b0e9ef175902bde6cdd0e750853ba45bdcaf40146edd1641b6505e1b2f527774126831459bb060d07ebc5669f7f120b0c9bda82ff20927d0d777f703d08d715ed6dc3597c8f109cea6f60bb4a133fd7061b788a6cd12387ea11df10cf9a158d9cb8406acf343621c3e0acdbe19e99554666b6d5f04eaf3cf2715641f4075c68115c0ab6a38b0bfb95186096ee5c28214ca9e50e489ba467a014078f3fc7c9b55161aa6010a881fe38bb1381637442fb1b2ebefb25a0047082496e93b3513158cc050f7e887ce99cbad2833e9ad4b70d8b89260f2552cbac5fd870b30f3087efcd70c0e379fdd013c90c1c5a345fc1a5b48fcb594b0f17176f330adb5a02221cd9d7ceef0fb526aaadb3a2332a1466993821b3a11f2a7ed48dd7fab53a58f839f9cdf501cae7b84e4b97e3f83e066358124beb702d798a11d6080a94247d7ca5d7b2c39cbea52c3dd86f85b897ac2cab0f71959f2cc5791fb563a2cbfb28dacb21695a3a356d46727e44699cf91efaaec4ea6792eca4f9864c47119205619f9ddec7187783ca58a83de3cf7550c9005edc9a93769305715717940324075455006d1f4cac0e7c81a132763ade682a291e1b2a37d2015df90667cc68351ccabb03434365e22ff768cbcdb7b1e3356868766da94f9e38e79db2ada2b7c338455de9f4bb33b039627fb72b6b58695c0469e739d9e3850b0105d8fc7bcd1cfa9f05b3fc43c035cf6f67f66c2a648dd93b37f753669ff29eb1729d8dc95d16498d160f9a1660f60eadbad85556dfa13f5c314239585634ff8d6ee94ca001b31f4aacf362c0d533aeaee2add0ece4cae0be0b068957e2045b446320473bfb2d1013b0d50e75678c332051c513c9e1b08613bfc3ca6ded0ad8b7d511cba3797c48ff873c09eb92ac8728011c872385f1afd9dfbe8a2aa1fde862695677d38c63a405447f9a7dda2025163f7d3a8ce409cdc1accf023bd7f043966777671df2eedd9b59c02a88cfc4eee6e94897b55ba2ae899a3a1087c9377429a6bb2982ddaceb514b18a08c610f984494268774fe427ca4cc7a7ec3f91d9527c0f76d816253201a1097104fddfcf3534d3e2245d878d732683d6f0b551cb32620716616600e765be632ae87fdc7e51718c90abf5e78beff897d9cbd3e466acb7d74bacaa80f0ddd645d7c4fcca8bb8a298530393ad4f9d26a6e72305cd58d1aab93eb167d4bc9317c46080898d1ec9f87d16c533322a11aebaf6dcf03ade78cb8cf5881a9d10bb5bceedbae2b5ec7200adcf1809a40c028ae503cdb4d6158c627c25c62578ee158b6f77ccef1a0afe4370dffff2d82a5be7687f5060fa4f66c20e9745eb72530ca3dd74ff453f08c7286cecd5ebeab1627b50456d91e0353dee4e878fe65f7c51cb071cc3e38422d63aebdb5c372d62b59346955024686e7fc2f7518cc1d73bc54b12612d994d2e859340fd53cab117d256eef05cccc5607ee90ccc5116db88c07479584911d75da4bb81bbb1695b9c676512a24ffce9f387215187c070b5a87539c5d50dad2fb7aa1e4c578f95060884cd72f097382192ada2ffed32edb7621a6f32e70c3cbb0349dacfeae8be5318edde2c9c6c39eeedb2a143887ab28b0d2e63edbd4f40695fef054b9b012d3d27360396e9c2f27dba4b061a60d2a9f84e9a07d4dcbcbfdf64f15427bd8a732e8b46844a0b09d5f0047538bb19e9e86eee16d2efd8c70132b8e351475bd27e1738fc861d7a238953242fedea563cf2279b2ff42983e39b3304e73aca374f8aaf726c84a5910e262c4b581d8a38a50d0d030f324cb92dd6e71a6580f7552ff5811b03eaa3fcb14126172548f4a27c47370dce217f8cf1163cb5623c3817bec72333cb1fc6c3ab3c2cc69cc3b07d14a56062436b622358f8820282cc7b32a4d2ea52dce9c24713524358412aef66b8460e353818f023b2b1c1be389a272c55482ecc277c4a64346fca168ac7611dd91f858127b19d4a500947c1b44c3da58f96590c2da8e3c5225dde4a1886b8fa83b18eaec22703a1e788ec52351a4f5d24741d44eb726c102696288eb84342ac52464ff76cfc037b073ab23b2a23eeccb091b49a0d7b81e1a59bc9d8a6dfe489edc6cc4d055cca024d0d4ef1810f31ce6b8d8c100fd5729f1b7926ac13f01e2b03be164770800f60276fc006e57801fcbced0cd68ee7122b5c32aa282b242a1a40bf34f2a39800877f8f032bf977f90e756ec8a46fb5c72ace1a0f5d7f856e78d3c393b15278b76fbe525eada84b191567b994c9f5c14395847ad9351f44b657dddaf60c6f4b2b3ed9a73f170b23c9ad30abfc7c2cd0db1f01f5e70e99fd14652edb6d642bd4e567e0a7f9f9a0f98821acda4a9b9e94af814dce450c9b4712b6fb69078f65c1f77224034b0505c992da8a873fa525bdf64b775091219ee1d0d001339b415a84be7f76553e0d2e1590d35ca78cfbd3da707700204de75be7cf4bf5bd69cc01cebb691780ab29fa6372b73a1e82e8140471a10ea22226b54b05d6852d61aeca5c980cd7847f5f4209e9389d39b33879e0c815e13dbe2d7fb595668b7bfefd3a2f1b00074446acc27290c7622b655322119d456925ca63fc48dce48f4e66931559df78f7a6808bd05cf549e58bb090e5a8c5bfd83812f4045e245b4d3e8ab505a27c00aba23675f3f4737a67abc4811da3f6f32196f77d14fc687d1d325418f0eec6fc0b37af222699d9ac41291ef9e593731109506ad1207a0e6cb2e3bd8b3017057f8a51ad2a6cc9ff1caa723eadc82bce78d5ea9a8ad35c8504754995fe443d4f522b37d4df60390b2e3f3f1eb1b09986e32e463d9fda251d04605f17899e0c18505168bd067e1bca172bf4514dc33175ca4704ff8d267f46b554ec1a2c2f6d01bef0be754ee1e02e6c6b83837ea6313227c24501ea87c31d597757985678e7eff8b2792bc46d99efdcc2296e59bfb0b15ea0de496355278c400f94bd6c9567cbafc559b34d429f7d68695df4ca744e9bd4f833ccb3865fc0dafda1dc9a7c3a0b62317cb838751d5bee2fa6ecb3334053126c5e190eae203b01b6c6b70a86ddbd358fc7f45e7d768db5fe2afa506835615b898372e74a46712ad39b9ff4dd73ac34ded8037175132afd79131c789632410e164a26aa78149b72b3c865b42a651ec5a3316fa8b618a572f6d0be46e62ccc95d4b2599621d467f8693a49ce9f1151b4afa269c7e7c7a9ebc9d75394d6454254a4973d4bf47f5078b9efed62133de17eafad674ccfb5a9758a5622376394b4c3dacf4f7e4cc1a4861a4d7a374fbe7a320e16cc953f30f750732f45a48b084025f80f62a457ead223e1b22f6448d1ba28b8fcb7e82cb64bf344305196c8c21a1c63b83ce4ee77c5f4540c83055d0b4431c5f83559100f0175ba3c40b27f275aa44e4590e0ee650cbbdd925a46ad425885933c844e90ae5c419a33ec3ef4cb9a2dc9ee779604c8d8dea0d663806df50432ddd4cdf9c8956a3ea9dd0e60d69a2d737d15b1f08dd64af40a7587a8540c51177006037c865c381fff294cedaebea3eb883feec5ece34cccfe7dc644c184090a5755fb803d3f5a9e75c014f0d8cb896f19212a62d350fe0a5d3b51e3e9a54e42907b82bb2290e892ecfe221988e336a0d784cfb36b4419b00226bf0327820ba74dbfa49492572908db5771b0f9b9037328a616e793d365dc9054b337625072cc43362101281241e231651c770f3564b69f563be173f350afa6cbc523dedb7408dac7a98f77067ad60ecedb8ead2fb2b7bc4538b7e2cabe62344766796aa01a40d749856cd6b60a02c509af38be3f5f9dc7cb9c619e8d50c764a4140babb1a493741dd8d09ba6060507f092bd3a55981f004e2bbb0a63479a50b154ab8d092295b1749f2d608e831c06e164b8fb6410f66195ce7713ac3be7b078e87a3a6f3213c04a85e3524e1bc08804e242ebd302a7fbdff04ab44ceddd283289f9aee0b8bd461fda7f49623e413cd617564ce749a741ab4b6b0f873185df00c4b2a81b8f93f475fbf08fc03d2987eb4f0906970a3844c868e3f2c80cd9c7af3b29c672d4eb7989a739a0d5e3c75e1280a7b4ce33b7c081dce27c48a7ac027b8bbe80f7e0d7bb704a09ebddccf7cb395153d969490bedda21c4d8023f4b28404235f1fd5ee929a15d5f1ca81a3c737c224b34ca601507fd3ed3c25ad47cbfbd399eb0b2a910fb7b4db7538adf00eee813691e2733a426879dea786083de7d08a3f336e8cc472a0e7ad2335355cc3332739a2d8fcf0847e2f0c0472cd4dd48976c50d58047947667f97529b9fbbdee15d69156df469e72fd39d44ded73034045f7159a8232efcdf7296d801dba6c587b2e320f12dea570062b22a23dc212f42e144115940560a92038da95ac4297562905dccd70cb5f804324267e8828c712a51f2af3a2c8fbbda7aa9950a86f57112b0ba276a00f25f21313044b32e79c30b7fbfbc40412fd066e3833dd81b96c5269e43c07343b44ca1b6934c8ed191c55f6abbf4566151010aa1dc411ae205b71ce2cd66f05d5a7622f39f7cea6860f3da0fa9a88403db357d44076e2d4e3356370d8871b39e91899088b2e6bff5b7af5e3fe18ff0406c01a8db2293e69b276068871a6ed89dbe682eec1d2d090bc37860ba46b2eac19546e7146864c6e511e6f70dbc802b32cbad291e96527fb6634acc6ce0b47edd72d0fda43fae12d2cbc878abb4cd605ded48c4b149697e98eeff0e77c4a32762c2081edf4fae97275dde2ab4c89e9001295018c3989ebbd1dba5c8cf8918a32ddbc5be3de2dfe425d91713bdd2a101e0694bb2e11027b4e78fbccaf80e1d42f9e0f38bb762383c393fc39eeb11224884afa7783c7f8040ae077a9c798c1c53b4e9abeb13925b7dd891f4fa3fa9e042f350ecefeebefc69082e847bdd38fbfdfee10da9759123078cb4dbc8e59f1ec593701e89746c7b0f287c46d4e1d87a4335c7a749a1064b535c4b5bade05663126ebe76b977f659f316c597c728e42249a90e56de80bf3d08593da11d96a43aaf905ea501c54d4a856306818be09c27a7503b44150fc4cf2d916949a7f7971b47da35412cfc212e72fcf32cf89d6e9db89b4e0040f853586e09dc28034f0a1a93e6b3a859ef0792ba80ca21c6aec044d963ea20d8bd04f7304acf01693f25b38774589cc93556ecdabae857c4118387a6f46059a1e47104ef5e0cb5c782dfac7177478e3cb11830bc411fccb3e418c5addd05e0143f3816fe7274aad27308574198ae086c0784fc3d48aa5668e9f93721283f395b7bfa009e8567b2e68d464bc8570b19aa5e4da066cda79986db1db2bfd59265a462b34bf88f255b231078b38bbea4ef3f68014a11c98223ee48debcefcd9746921595aec1b189f644bcfdac3aed2a6c24f27761cfa931122b4ad3526b6e06784823f244bc7155e14d68b7f858ec1cf5058849fb4d30f1a81343bb1bc013a7c9fb475ddb31cb505622109af8b2e823a6ee44a8efee77e1b7daea4a7c415504fad11253abb6968da0cabed467c1214c720e0ad9de44388c3e76f4078bf300af844fee5d2b9529da6b16610d3af3ea0f625a94a926674840b3f48341d97566484249d79dd8b81a766dd10e5063b4e0b6005567166d4d0e3ee760f91e04344799aa2e75e919253f61e616b01be9b796010fd573f83e16bdf10897170c9395e57ab8fe22cd9196be2433c75ec582b14cb016250160c1c7d0639a552e73c93bbbd66b3420d7d9edfb82f87a77ea9bc5e9430cecd8ac161437e5ceb35afe3f7f6820c41363f9eb2083439ccbcf033b1f9c49fa572de3bcbe0312af4c2befab18235811cd815afa9308130c14da3dddbcb1b4a7baa4306deda56c9f76f4a26cb989572f9eb11c856b0c3d223ae48fb82a8f4c69110118a3fb09f97338b12eef663e8810263c85768bc9f5e41fb03982985ca8ca33172f8c528936198516c090bd9a6228f1a4a3fecd6d924d3b8bf120b830e9e266d0ccb377bc02b68f7436ff11b8313a7e744c6408567fa404b0e5467363985071c7ef31cf4d2c1254f7d817b385ceddabcde16a383414605b057b6560d0d63aad034ed492bf05ab4c550efeef80424516fdf3ed6974952fa2fd93f8866f6932d7a15635da7ca7d93996d143e33414f75eded075d1b3afdc7eca4f2cb0d459d1570748f89b74b438dace54dfec5c2294d1382d7b6cc86b2d379a31ea5d1fee10776f3078056482cf8a7a99cbb7d6cb34212ec72cccfcacfbf4eac6d85b06baafc4ebf08d4c459a4ffbf90d5b8aa56f0b4e1675460a3a08000bb73dcb76657272245fd5a0f89477af8c423cb68d681f7d3ca300e87bae0d21e7bc2a340b94e2c67c1b7a9011679076214de4ce519d37d9c2f1581da99c21609809d167e3f777ae80f21ded14e4c85278895627d0662020cf9b6c428f22adafab225be8f535a14cfc843683346c6a420c5a307b59eaed82b2cc22cf99dbb712e025278330522e8d1644a85320fffe648336caa07e8c17454d04e1c55878edc1934c31b482fafdde0a8b5937630c5cc313100ed91e9da58b3bc8c55de0107972f2b6a0c1ee0634934f948c2398e36c2fe43a1385aa16e642a72a3f43813011de1b94c72460e09da2f6e86445c1fd665d8fdf2315ae7b75754be9353c8be41bd67d326481f700c1f152501d5e1941c02bc62b711d14d126991734b041ab6ae6e841929b6076adb9c07346871b9dae8c551b8e104a7ba62b4de020961f977251ad33d77b276bac39395d4fc335c6a98e66e1756d9c8dcfbd4f9e3ccfdcb9bc49104fa7174ea23d8d4367879d5b2d640e03c49b7c7ce0bd5b48ac8b3a6cd0d20c13d5274f3529f92072e752c0206a8a946d6a908ac3b17a5adee27f866c93c0e1fc318a7cf90fb2f2ac9ebeea5722e9ba3372937e207042d7819066f4895aa0df6f51807167cdbf7bb6e7e0685bc061bb36c4749ab1fc475b95fdee60b43fcd25d22a60dc10c6e9ea6fa2f1c675323545177db2d0e156fed9b462f699be060913bb9f3a49e366e420267a868269583bb471ab67df47611ded0120f9daf6a04a864e16260937e9e3ed2ba1710aaf903476e22ce3cfe9ff32102d1f06bf0c4c6c087ff2306557cc90c3ca3025803dc86ee5307c38bc207179700ae3b5e45a43e4676f2b301629b71936c5e24be1e5c11a82ae493dae24800802e711e1d62cd716995b06dd0a83149a78d1b34d801b6ce075caafd35af4e89d35f44d45602cbb20d6df5ce7ab327dcd295757c6a3c439f9f42a40ffb346915c8ccdc6d28c07ec507abf6b4cd757f18ce71e18b74391b7a889c532f8a1cca8437955be7feb1f561a28ffc1eebbcc055f41fef984e3814bdb5db2bf99b7d132c2bfa16779a06d466beac713451e4e162484f708c672efe3d7121f3c686d51ce99ee21f28a3d889ad073bc34ed845010ca0580e3334f211ba972628b67f4c028ead85cbf38f921ee41283194103d4cab173de5ff8958e142c1ba4087fe89b018b0a8f88ffdc567ffbaeceec9dfdc608b6711ff36295153622ccdf894ae6d13061bb0671a5c78a2e0248ed350b5d8af61d26e1d5b2ad078d488864261f6de9d7ac5d86cd09dcb3644b5f01bdf2978bcefc9bd27c061c0b740681c38d06c29a0c86e1fab873613279dcbf226089c2a35ce733adb008fd2f4592c026a42a7820f68433b27c6d772e5980468e17195a354f25946ebfe557a6b0d00884a0888e3d49ce0a6525cc4c3f38e2558c66e20f26e4570b6314f7e44345ecd663685a65bb5013cc75d9c36df69e4105df1f710e95b9fbce7081fe88f86ca2f2270a5d1eaa99c65e23ad782536dc4d59977c03fda8b07b64b4ea154c7cc7f79172c3801ecea71f7d8a566fd0b60b7ac7b284fb7ef0204488ef0434213e88c863de6ad4d94e760732c7b435f8ef709265f629954f4364c056f23a9084eb46c97a6f9ed4925d66f4a6205884ccb0d5d0b099ae851f22ca86d84c8a486985dc167b8a436e13cb22eed655340e2a793dd70e6b48735636dc33cab2f06f467f78a89db2832859dbd2dcefb1bb496309a4a7b4c29a01158d6278c2c535328549389279dafd74eff0ac8f5b3c3a4b6f1eb09f3f28242c6731393416f9da1b988e063308cb7ff0df9863b3baf82905933e37f1482ec908abad3244a530475d9f28c833784b6667b81551f10ecbce708a2ad5c5a10144f3015d554adca26ff63c93e1d32bdd4c09c8d55e326553d8039f702173e1fcc9a184c56495d1a658827b02b5b3135adaa73519585716558259d7e261e99e77c1e13f10793d2b4e3c0b3529005a97517212d3f986a356bebb3ca4a8b10ab94737292075d02b68f4ab6e3af963ae7ae1abc45345f8c6df001c04b7d14d6b883053b236d07087d641d974f6fda4da9b6f67e245d1da72842e72163912f29033713587949fad860014163fbdb3d5c2aaf2bc40198006ccfdf9a1fd6744e8b8bf9e4f68293295056cb31e4c3eb5234bd7f735b90d9d3c3c4cfccee28266c2d2755ac674e14d713d7ddc01a81b7b6dba37b4b850e71cb7e6d18059afa6c6ac74012c624e7dfe46e1646da89e8da39bd0ed1b8840764c237164518c2d05d787b7603a888c04f36658d4ea9afa8964b1258a0769b2d378b74f30e4ba6b43f7e3f7d5984759c125cddf7f0fe935d0776567e3ff183efb4c21640a809f2095b5df8bc807266dd2f5c538e80b047f22111194938676d30b3f0bf8a36fc42163662f0ecedaf9feaf6428fe4a014bc7c112da2c095d737fbdf462439bae8fec975859144c75d910c24d58a3b514361d44d914a53069f8670e203c0043413f78a25907785e76805f7b087e0fc720910ffc7b56f49c4cd3907231947d84cc2ea1acbec41aaad8a10a8ee52d801c94ab72d5ab7430468b0a17516ad86fd2deeb3247273948d67c877ab6b21670dcb75e086c71b0b86246ec98909b34ebbd11ee5fd6be2603af67b20555cb774323c63038874399f0adf5eba0018021c9d6a8fc0bdb0428818d96579c3f72ced6dd8f9cd9981fea0a23a5fff8da1552217c7c094e59e0c61c59f33d5afbe7f926644bedc1815ae6357f8b6d99150150fbf7b1ea97097fcc038acec8aaf596b424c8eb947dfe3c10720cc3c532a83db9b19b5069ad2bcaf6ad9350c1a85deb6be4579318c325430c70f9c4fa07fc48ca45fedcd989ede86a8002ddd9b729c287f83f1acb89102e0b51db119fe5df8a879c01ce92e59ec58aff0f2a672ecb1f7c274e6a66aa3fc077accec58e54b8c4db5dbb165a28e2328caf30bb62c9e628ab46fa8989bc02f688f3a2e5018774dd23c2e5e82b3d98c633ee1173c0f5216346d5695f3f3754507ab360cc787f283a2da6278e09149ffcf7a04b0c9ac559be5725c58cca679b99870f108110d8ca079c032fbc90e851948ca0d198c60180a980d9b3b3b6b3a77360c7d75370c7fcd9dcdf172743c20dc9b0e7ece029a268b189efb9322c415db40ab0a9698ba0bcdd42a5bbc2b85859c7ac10bf27f1ad1c0e63b5966bc08c4c6d6029a4269c2315207d3bbd539dd09d4618c7898cb303d1e3477f91e3b867a1715eef2b53681db290286040946f41afecaf687293689ca2503e89cc3db211ba80efdbb947b384cf6a9a61af9c0f02206760c60ee4812b344f91db15723803981fcb0a6fa42c02c96c97b0d4755f5de0f623c50c00a0c89dc4ef8ba2f4196f450e7a73f3b69a537df12fa9c01915858c595d9e8de948cdbd7860bd644ec9398046cac98e190dabda3bac2b7ef8d067f08ea10d2abe21385ea2492f50e3ec98d2f324ee90ece2819a8449b5b3e7c3be24e0fe0bcb11653a1a59208106f835cef1a7311dbeb0b30617b71127cf8c3849208a668f6336c97fc603756d9660d9dc324a6f1946d56a8b8e57a36b9503a73bae2c298f71485ccbda0fefc861b253e33248b8676f7069d9d63037f4b36bba0d88f4fee3bd735112120cd364a14c3295aecdf3db0b3884e5461ae2dfd22543ddd6676a90514fc2bc51dff9cee4e5066378f6fc655f445f98bdee825819bbc3bb9b723b1746580d6ffc8cb309116e33951a0c5bf1a259218a2a2d0723518f5a17b5f2eaec8f6730ca3f26f2616a2895bca8c63eb284c1f0f9b2b95bff13918f30fa48a6cfad5e2463114dad91db0d4f1a47601c0e18c012bccc69ceb318b30de34e1e856f6b5736e60521ccc22e725b9ed63537dac8c5234d5dea91ca6bcb1b5c95817eaf0c8c1c0f64483bdcf66fdddedd187c8f0baadf3c798114de4f840c626e252f8b92a897d48d300363f100b1dc0b46eff3ad6e519afa6352180728d303f67f72da97b9060a0c8365fa947219114bda6bbcb46a2c844b793f0b7f62a003216ac763e1bf12e481ee5a6ac05c0d1a6b2d3642d664eaa117c23c8df7ff7b91ee966440a728e59880bc8f47cfbdffd4abd0f9397e59b92eb046f60daf9e1971a03079005fed69ec900c8d3beb95fbece437cf23a3dfdccc78095b5b4683d3090f1f9bca7d112666d4f337efff73e5ddc9b8e599277dc63c75407d478e0ce3219e83e020099578a43e335738a88ea9c3968e6ce09e7f8e06a8f3be12219316e6fc5005d9438cafd55f84c3b11628e45daa85c5d9f9cafa22ec4623bd18a9e7e5c4deb69fb36eccdb023a9ff11793a18528c21fe04aef8eb8504d37825667d09878793b876242af09224ea4be4b6a5fe85e67e43180320b7901bf90f6f4438ead3634be60b198c2cfe69170fa9b7406e5224675229ce76ef3fc297c30a51dd286a188bbcb74ea6b0d1b420922d73a439c035d9f97dd347118eb25b07dcadf9279d5cd4a33753fd65dca7871619fc92a84b1e72cb17d84c678b71e8bfb6a9a5a8ed9376de4c80771e60023b541b198744f2c2acd1d5d95805b1d8eda5780c46454805a76b9ffd5d6a5e6bd2cb28e7867bae726913203eb1af1efabf725b55fff60f6364fc274b0a1530959611c2d693df67265f44f53e0ba739656bc04fab9e42bee9ee9f77f98a99ea61a64315eabf07cf8f13a50fec190848e2113f010f9ac3215890067414c24ddd3df9dac7563bdca939141d9ca16cdae80534f2e4c8be7c0d32be56a5adf5f386fd313235fd6da46d0b2558d2d598f07ee6a53f48c3d8d80e070d4403dfd903a33600467daffe09b5c320010f21bef34510f3d0c4aa21497fba9ff14f432cf20a7e122bd1835e9fc639e39c3f12c173c507aade2749f60a71eaa465b8b497e2ae5c2235837b73d4123fc9b26b6f7e1855e131c5a6e015f3d4f587f40525e6076b78714f991929b054161c82cc61085cfff944cad41c92ca0bb536a623f797d9620752f0b71b7ae033ad1edf3e54709d4f393db69ab3e0ed44864c41014041339bff01908648cbe196acb3fecc1d3dfc7e52e8151b98667582dadfda31e97bf54bfc05964b8674b86e19217fb92fefde67caef2c7511c80711cd2f422e04ded43ce8a9db9ca4136bf38d0b8ab874b60205f8c009a98099fdeae58684d46fe55791fc5078e5cf955c55464350931f30f89c331227bcf5fd963bb8e238914fd8cb6a4c8a8f3661a315ee24e9b6589b8d9a3420ee5054a3022fba26ca6237fd5c17d5cb6b15e0ca8ae5813f038b74730babfbbeaa484062e69a850e3cf8b6169c514111394fea47615ac435e509fe3dcb8d74e192e922f1eb5c3e43b03fb8c73ce862dab5193d49f929d2bd3692379b04f1f3e546bf85e641bc9208672c2d583562143226d0ef487ee7c6757f6e79c67627760f404980c17af91d8f89cd0cfd837f122dc9f4edbdab4acd1fb3a55d437ca9d4e414acc925a2def5345dcd6e898470038963760cf3116fa5effcd1d26f626beaf098ce13ad14b1031fd707e13aebaf788cea8e8d7b931eaab50779f16ee8199c03757f4e4b0d9f350298f6545cc8be7f9c52871b368f5881195d3066042aee3f5f10890d4e9e406b07c94dc16295f7486fdc14c530cec774b652218611033e82e69beccfc3c5a300a0ee740f1d3e434fc7d4c42728dbd133748d5f526bd2519326b30d6b0945439c26727fd33849b409d4a66e7d2e6d76e2fe6dc07d9128fcfc9589cf4c3c01f9ae4749e6dfa962a05a1e49488b76f5821ccefe0c25ee6f852444f49e01efd5f47d8dde96b944916780a61a60df0dd060cc04e00bc6154efa5e5fabff196c5c8db023168249b704801946e1d6d1c0fb9c4cfc78d536fc2b0fb96c0e6fcd0fd714a4469103b928c15aac9368fe8f498c349afd26e89b7f6f1e28e2238c3294c9f9de6b93892fda203f0ac00fe34c736f4ba0b1bbbaedf58d0c68725289a13b6be875200a88717a81c8d9244e398cc2e5064b594b590530a39eb28bc483441b4fe68488e42a66a30201f3b5cce5ade05f6a41cba3272447d49470d1d0bfa177a02548af776f09e21cd5f7acd8733bd8f0f800a17753cf588029a2964f29d16cc9f928501d53568a9ec325060a01ad5b60707f4ada5f99332055babd481690b182197fa2d7c8891efb71002405312f663d7abe3c5ec56684b5f30cbe803e028f7f2d77c3af14b73b608527d0dbd91235af6da850b3ac504705a421b9ce1ed2cbc733ab3ea2d9b350e336f1aa8157d780fde0fb7b5767ffc66e2fd1d3fdf7c4839035173bed54b1d58718ca79fb58152aad66a995ebf8ba855cdfb10b98aab97d5b147ccc8ef9c6f00f51dfcdc9ff6261876ba71298b4bebd94aa2f633213d132c6a1fcbfc9b76213317cb38fa1f461b5a0af7a00e69c74e58df7846f9f7e13a4c769ce8e553dd37a2f7c406a4c044a86e0d22eec410bb99c0cd225346b79bb62811f61e0676b606b117bb03f43616dd8683e7bb46ea8c0f901df05848cb1e8b9c640797882c85562b4726aac711114bae3219f6e929120c12587c0119e761de38afa96874a27a0766508e3c5cb4d22ad1f28f404b305a4711f0598afd12e93b9d568f41767c6fe9d30fe64205edb1ce0f07523ea456ebbc282b050e1b4e957eaf12845732268acdb208cdde47d003da2fa1075c2b88f8328c206e5feef642373bbaa47dc60b3d0b680126e1385f16a8ebff26806ad333a2c73a67628590aa7d783786e3e0a3ec5ac70f88e79f4b8e579f12b7431bfc7e3dfc1fe41274dca2689fd1556d9f7d845799e97f5754690cc30d9962259cd966846ad465c01cdd96d6a602e749817ad33849ae4974921f63989b20b6707035c21807a3111d837454ebe57ef6d110a73fc1473fc8c4cb4d16033858fb3022f90255fe10c1e516c6890f02007358e8527532b539fa1eba21eb136db0df8b5869efe2ef5a8acd9445ac3c1dc99f7ef0b3268051c93b6eea9c321a9e6f224544a838433345d74f8a35128d13dd89e433df6ae0cc94af1df704c82b348636ee88a7809c4c17cdf9a82d5e00ccdddcf7cdd7832c150e333fd2d0d50ae8f227c3346afb86ad703ee7fc75ac6831326407e91f8ed3847e494fda154b0ffaa37e27d72fe6b2ec6d06cfdfaca67f8cde096702254912a238cdbe3c69712d93abe7e3d772472ac5563f7aab38d364de578dbae11366f1a34b62ee502cf6bdd3f0a8f18a83e418802f9adda6d6144c16c19c77456edeeb59203b6308086320e77201f380ffcce83d97d954a4569bb468efe15c715f1cd2a07f6873dd5cf581afb82a55e799295ecbf6da7933007d1724a6a51fc985a1969b7a6ddd9ca026c03dfb65cc6cb6149e8e0af1d9e968a148098895de381e92c8fa13d2a9009cabe9a6f1b39ebdc3c820566dc6fbd2a464ad7a521353693a54527b381567a62b4dc092eb33af3e65d2cf53cfc3c9065e10727cbd509ef13dbfd6ff54b0be7007f014a72170df8bad6706d088967af8321b520363dfc2580e1b9f115555578ea9a6a6e74aa8370f4df184bca2caca18c6af5d93467f23c7d6ea37edc538e6c6d3f19ef52d441543f60e37aa852eca93eb5aff4f7f90493efe6e3bd6216276c492e8ad8f7a1e87ea3027dac821e8fc2a8941af2564923a208b90377fd8f6219590ab687b17d4f97a699f3e431fde48f77b964047cb752ef314c34cf69b0abe9055cedfdd2046d19b2d3e1f901f70c42f2d4e4f6922ba98b19fd72c69dc8869c9ce4a2a34ea71d5ff9a80156b7cfabec8308491e892900dbba66a47aa947aad0823c7cb821063ebdedb3d00654f224aefefc4f52eb0e3b15badcd9f2415de4a08e49302d29dee2cbecf91a04194f03282ad46bf5d0f5531d8c94433b7c90ce73da28933176e4d87db8fd627fefdda51009b1485a8ef7ed512625b68dbaaff1282299c140151583ccc5b57ef53ca03b3071db3c514e318b15433aa69b99e27fcecf2bcad605cf498e13ead550418bbb5074d8eb2dbd5be6975c8b0188309e07d6e2f904131c1e57c296bec8b5d587d25377cc1bdb683800e6e8cb63c6b172267fc896ed3961b02bef9f1b54476decb0c4c7fd8dd1d611873775f74dd7ad1d04c4b56fba746061f970d868fa99c3c806103afb38a698e274003839f587f1f3175912a0c236a6f29207492f3c2bfe89af22d01be148c69a0768c04b0408bfb9789f254bf75611a0cd37f2636b074b05aa5870edf0351534fa918c4c071e0eb69c008121a002265cdee3c91bbb86f2671c3591575754b45d303d1413be0739a96e4e96dac8e610574d3a4613677c5ccd544f8d83a55ecd45d99dacab167bdf3e79358b49e80600515f810a27f0b67dab4b265908ee6b32be0955e32e6635b0f6f8260e838f921f36d7073b5e518fa20bba923007faacbc06686d6f09022e2b1f165b5ff2d844a158dd82e8b68bbe4ac9cea06217ac61171c4f65b23eaf8dfd9464b5cc45306d72fa46faf3ddc73c4b452dcbba641a197e9e31b02430ea6740a0481f910b45a99752da53579b17390bc48810795e4b6e56e7d7f540c7cebdfd5d35a13b78c2546a468fa8b9f2842926ebed804f4af08fc9e6ef041208de4fed1ec820db972b252ddfb065828f6f58c347fae9ea1282e0af6ed6e80e265c3d855441c6a122a246d12589409211e145a0650dbf200b4707ace45bfad03371140ad5ab4992a113277e459121b9a6e32e3aec7b8e9787a4fa3324c073c30fe21e179e8c71174fdc65fa5b4a7c27d3d9c738494131712985cc619603672d839800dcf5b6fa660e063b87be7af66804ce57fc5d12dfac9dcbd2d02cf650c3ab7a259e4a2a02f85ab1a33590083cd071f1f01d3e66283b243ec736cb7c90ab90d644dba671a5c3a91f911d2266dae0d81e8abc95eb6c66286997441b0dce4f07b6d2564cd15096532035d94db9618dad447cdedbe5070fefe0b5fc7817f00719987ef848ef194536eea404497dc7d6e512c1caf81211dab885e81f1169b17d24900af9f772fa330dc6ce1cf3f798c5540d3014fbfbfaa411743211625faec73a403d2a549a6b5d02aa4004a158fd8f150a7256cd1cd161ba958024f1e7648623608043af70bfa2e876a41d39664144a8c2d4aea1b20d580dfc2c269ed53c5d209ff8b10df832b748977d60fa58c25757aed3c8596c6f587b201b4313c786847e86c27b83e47d6870e698346cc197890836e058d9a713ec33df05830bd393f574a931810d48200817a7f00d6ef5220818ad757d858b5140f56f62d22896d701294f13f01f32d6876fbf650b96fa30e8d196ace5036b21bc86ce64d1daefb40cd5b0f12c4e68781cbbffaaf2e990cf74c19ae503a9f87e18d65799852b9630a1f04e16a78ef34322db9c4dd9bcd694e1f2198e7ba34f31b832514e6b7160579850eec27fe8c1a33e896753968a179e9c7e6b8a61bb56c1f2b6edf1c9e89c527b7add9bd798bf5d7ba3b0799e805cd3ac48f70a283b9661f48dada457edfeec7d50668b1990b6f5b55983ca3067160502671dd7eb646d97a25447a2b4b4d35add453e40802af1e182a410cb0757fde0fc545613c32badcffdb6b6ec0600a3ed802088df0fc8d5d6ccd18a5a548a330a5db06f1e65381c08c792576e004e7b643333469fe6291da2cb1dc258c4805a9393423f69eb0045e950839f1a2af799bc812fffd25bea5db750dd88cee7ef5612cf0b8473f9cb469929f7106ebe5581e4130f909c8ddf6fa9342f215568bfb44b304bffea89d5b277c54174685f10ebc8c0d9bcdaf192701bfbaee2ab6a5185d6529b957fc9478a4e2b0ccacea2571327b8ec0a7d7ade283c89ff863d30d24387d5010d826fa7aa0dd89b004d64bb06823f65ed746317eac76e5db999aee7e809726eca47195b70e234202e7c8ee5a0961e03b8ba8247ca633962473d47a569b0667e8c214bfc1ea75150facccae1fb7a66d6eaa7068e7ffaf48599390532673801947b562719d3f5985cabef66dab6fa6c98312dc8d590b559db7641434367de55e26527742816b5c669c9e03d870582befc35ac5dec78cd010a3bae2bccd6c49e9069c1c4a460f798371f454eb9e3e8fb132034870ae3f1ecaf40adc77f8737cbbc61716c1ed873bc72b8ed6bb1da844db33a9a0d68d4b9b95d7ff458213442b3573cda91fb100886c40a645580a9b7ae153a9b79eee8e45f9c41a43fc5e23e45d56a28aeed12dff4ba1024ff5b928ff14664be2978effcc1c3078c4d747018dc4e09e09c194a872a19e255cadd72a4161374ce1956f1dc32d6eff25db3f555aacfa8f03f2d79b807bcc68493a138bdad398bb095dc652694adcccd5c6c01a2919449afb8762239683823bff9cb14d83181d80ad7052abfa79d1a071444cce33fbe049335e544be0a352255548913df81d566225dfe2740fa4a31e5eeffc044e83241c9416e0c09e494a783afabcbcd6cccbb902c12deb835601cfb6f9efeca5bb8011ba62666262f6e71d2d74431a3c2a279e516a360cd7a9919bf509835912a31c447093d4c74cf984fd92714fe273da545fa5bb36dddaecf0fa4aa3428f28499738718877bfa1137e9a82b8000e43f2f2e029c1da5dee1cb4d71d988c8807beef59d10c2fccee1457383715a48d5e99caf3bd6643a9a5fe6d33b92b04d2f860a66f3deb90c3306a47a149b50dbab9147cd002f87aa782faf0e3845c0fb48a09c5573a56f60d1f4be0b0d86e73defb5f273184122935ed6c24659f3366afa8c27318201c77318fc552acdc72fbf6a1a1a89fba248e1d0cc4b9e0b13ea2e9edad74767aab1fd9b64f0a9f968b4e79c7f9ed31b38747e475e6f40ebce7c7b4c2eb26f66f806967cbd184afcc4b6277fe78661ac007e493a3e556e1202d89d357f4353120fff1ff7960039274097a36d02073dcd75686383a047be15f4c53b91d627baa5026cf93bd978ccb53b277d55223dc4dc64af05a30019dc91621790b382f8287fd39ee87cc48c8f2ecc58e07043c9369dc78357f9c196e4b272ea2fe9935ef1c5bd13079271ebff4c396eeb3e96ae47b56c5dbb8c16b5df949f88fac4d9e68348f865154785274e284f27ff020dc39185596ad0b5512bc5264d2774b4540351d99063d73092bade55959a1684ef444a3a87edae7f99bdbc44657247e2f4b44ab221cb5e2beeb38ef98d06bb169097f4e182fc550291d3b60405be7d299a8a6cad22a6c4ca616d61110f24b381bc9d121b775ac10fed795105740fbb6877bf25aa7c3887778c7bb374300f580565e83bdeceef9f4aa7dd13179e6e359f91772e106e4c02bf8554a5ef17e7c6c9d5a01eb21084c0c680d8906446399fec388af837e19cb423d980567bf45714e4224226d42e8609c6ad486c19771b0316c330dd8812352fe3e8a525089c6bc3f43d92b714b4136617a8a0b5c59d03924b552a3846b56ec60785cda56b6ff3e13b42905ecc05feeea7b65fa7d50af80ef76d15280d308485ad3f614dd303a6766a014d7e0cc3008cd52b4d489005203790ddfa8d9380e2ff3dd8acc4ee92a548dc4d05293f4cabb5680adbf98db6087f7cbb69d3a549836640909f5074f361d7f7955996ce19e5b1f2822ba5a32a554b5a57b07104ea5b31a0e21f56c86583eb23794444296aa6c39c4105a34ab530d95e0bc590225d3f6cff813b23a89e52959de957a4495606733bb725dd90afc78fc161efcd8651103bcd0a49e1b2d689f55b0760000f3c5a2f3bbd6b462fb84cb341606f94929093f97d352a2f350dd2aaed884987e5b09023cc4839a24e9ecab404909dafaf74741a65aa41c8590b3607205d254cc3a4e5b302acd93c7b0a3e08af134dc5492a7dd37a64e2bce401058fa99d5aa0d51cf2a6263cf0d545325983609697c9d3d8ede44681d1f589e472808fd9558ed09f5f9ec5ce35805e70123a7ae4c346226052766253744a696a0fdcd2a61ed32f59c2a4ad80c64bea2f6f09a37f3d2c2f10f475bab4335a9698fd37738a8b2a883a71610998afc3219079b07784246ccda965e2bd16a726daff4cb1e3c37d32ef01be9e79262c1ebcf63242f03a90fcc60e5b16d7bb2058e393855d1895072ffc5b7f7e6616c2832d7f12823f18d395f2d714bed12992d5e0f20b65d0e1559089f2c5272c4194fb3d4cc17785da605d7e7698b633e38279956f5a4a9f187d98d8f878b1ed78dbb3b34f40160397d781c2e47080e977f07ccedfdfc3b40a836930b999d676eca3822ca0323560d338d0f85060d6516e2f4ce85cf0b8451028eeb3e533be43e2645a53e8675345b3ccc8c4e2d8546fb2a3dadc4127ed6f093e5f74be37416cd957a20cfd541e9178c73ef710c1fdea50bcddd24c6f50d27d94320f1d9f4734a00c0b5efa4839c4ab9def67f5dd4a533cb5562773c684cf815134c25702ac9c15cc4ff62a5e7db96c1d4eea9b2cb738d371f389b7a428678423bc3d1bde0b082480f0f212aa703b54c81800d3778bec701255686140f03e0744c89a64c61007971f43f3f1c2c2f5c7a579992c7df863b3f1da147092362b694abc946bdddc3a530e4a962194cc75c1ac6229310ad55189507bfec4fed042a3e367d77db1f4d2c801f08dd06482e9cbf3b132c9e11a532c54888837c8d87982fcb28655fe7ccb3476f02c9200d71c48440002c56f9dc1a1c6d5900e727980e7b0bb45fee34608a03ba2a7ecbb50efda9592795da77899b4c71a6ff86a4bd2cf698feb7697eb2a456c24a805082a2b4ffbde79784c4e5247345ad8fc56706026d0d8e380b3db4a64c979d4f62436048778c99d2c4aae73c25915aed6297b203eeae438b04212706c336d6d4b1c9480135f578b957f24e50745dcada878d52da8826b521972659a7bca9ba08cbe1213479783303b4c732a693b104d032afbf9a945a1ea7573b3e7a0c0492e731af10b288f1ddcbb30e66c23957832d4b6ed4d3d7cb2442c81ccabe5067a26e6b0f4564abfc0d34bd8b811ec47f5eb1d48eb53a5e80ca8ab33fe06b9454137e2c3d5741204e0b42f7343f8c4d5be142c081a0ac37f0bf7e383ca9bdca810c850967af2b63f516630073f3f6c60665d1dfe01541e2637c0536f3f630563f2caf3be7a1b8b08a454f269cbd398ccbb13e8ac115b756ab7ac88c26b811d4d1e84e3e230b9c593eac3b6ae5e8400f08600af2aef1e71ae8e4d52ce8171a862d43589d38fd106e5ffd49eb5b0d0a03b74c757388a5767b45c2a2d85d7bb2f8eb53079ed8502c66a58e4e85a8dd8aa5dbfe179c41cacc321fc00be4bb7ba7050588b433840aab1fac80606724e11eb626f224a1b54f7ae5e8eba3381461398fbd86d98450f67a3a4d98406d5d5f91fef7ee831c32808c6981e7808733e635fad7da1ebaabeac8cca646954de26a53f5d5ea9ccff96e5470b5acfd4aa355","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"e06b548b27a7e7d8dcac8c756dd3f2bc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
