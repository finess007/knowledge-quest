<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"3b4f651d5d6fbeb63d7954c8613caf59894138bbcbb11dd1cd28c33846cd53f57a1b60bf3d37fd52135485f70b805f2183047ff3ee3a023f82ba9f20b4327866b8bca4d6bed22fb69f1c2d7581bfe5c9a8a9107984481270fddab2550aabd02063c7cf136af26bdcdad4798c1616a19266cd6b1c63f5a17efbc416da8d82688017b08665a7e0682888e7937180fd090aff812587634836b353fd6633309b4804b18443436ff2c78ea2bc6544643cb05c8bace707420335990df2bcc71895a96ac8c65eeccf70cfe8c1a803d84ef4f1ea3a03d68d82134e468d16d711dfb3f5fb4caacc12bd69ca2a525463a3edc40443d25cc39e5675f6e889234a80851c377aa665d5446fe655a0469427932241999e976a0656615d416458c0dcde28b25fa615ec788f61e0b1e60001dd019ab201399eddfa8daddab896dddb1727123a898292cd66e510ca5149ef07da311b528bd884dbc4e3b7d138bc9365bd75c1f1ca5bbb1a0a4326ef339350b7dbe34aea2d0f34d1fee682d3f766437ef48ad58ae131bfb95132635154c3664c7eee63bfc8fe6c3527f0ab12cc7359d438d138ebc8e0e651190aa4fc10550c34eef9c53731d73eda75bf3ab5604a425b76eb5b8bc0553e18681951ee076e0091cc8fa41b0960925c7747e740e0b364451ea81930ba96414bcd398b74a2127ff8e27bc7e3d052a862e1a3e38c7a0349310b2682b6255e6b77d50eb979b02e9d9e51a64e57c8ffecc3f5760fe8cb7f017954ce8bda929cf18f116e9eee7f363297527f06d8aa6426f065d3138f5478930383be3c9376cd1224de22a8bb3af8651bad95007171ed96710f5063a26869ec4f804c7222a5c18abd2c28b68be0f459eb343cc4ef6e5813dacd2da005412959be6f288adc8539a7ef2193dfe9a79f07bb56715c9e244d66813d86fde7d0167b103fbfc828ed7d70b276a22baec625748ff4c38f6f779037e1fd0d90cd5c92f13af3217c9ee3c22ad0242b3c11c2010a62123e2ff723c39c6e4adddf2041e115662f0ed54430648544cd422efab310fff7fe5c7246e0a3432a7b6bfe37946e942b8de98216152731df42f8fcb62aae01d89265acc284ab884a44908d1cbcc284206d577a41fc12f9f58ac0cafa82719326ed94f3db53eaf553f1cb0b8fa6fd34a030772fcab639099a8419afffc1d2c281418b511ea792825a0fbf326b13c5f116595b9e04e6e60079663d5b6baa87a79f97ead8fa2e552d7c1d6a3082888b4ac12297c4b8d44b4a859f6fbfbac2207671b19f6d4d22afb093d77bdfaa856b548e60d2d6e4d7d91178f026df076d106d82665aa24a036d90032b096d7503c7e6da48e590292ea2ddde16543862c47290791a630fe2a1ecfd9b92470368e94a93fbdd04d276ae797f314cf0c13bb25b3ccb06dd8fa12ea02cb52bda4aa9f4f9d8c5c869e59ad778df5d1a402b444a27fb52fe69c52966f50667481c4c2b852c9eab9a0eb9d085eff0a7067b31ab9c7d4fd7269eec628e98a57f6c46bb3fe48728d98916324662e929a5e132dd0f4b3cf7f3824cd10a6a62fa5036e61f2d256ccbec7c1b897c86386ae198da1041d3ac761405c896f44edc40fe5edc5fe082623e7c668268e09571097122adec84e9f81fac21e0cf370f30d94dba22f8e399b4b1ca825c81f684813f9bff94c30483bcd115b87138c24ffce93b4fe9ed3c373d7d859a684ddece108350fc9490b6a2a18bd29f4ebdb313eadcda2c0bfc641c661021cf11b9c0b0895a0bd863d5fdd48c06023b5a4819722d456048acf90b009955f15d1ae972e49768c5c1753b8e8073e8afe93873eae6d5b82b7bcd8d3fcf23e02cadaf5c4329f7eace761d180858ceaae5ffaa17abe79ec2a5e4f4ddf98361481d4fd9ced3bb7747fda6c94d612746f46d93263a93751727abf8b49ce935c2703cad631783552ddc7415dd26140f54467bd565d003be05b916153ccce7427cc1c2e562d60462185408bc7a3550cae7785e6ddcd2d59bf950e5be18dbda15fc2bd1278ef833dd4349c8c0910f6cea4deda5f6607e6cf32fef75e177b6c043970d48e8f0de548b385d4e4dcb1b1cc0026fa3ae9592126cec69b98aa700e4d6a71a1520a384c8efeb362e80b14e3bc2ae03e93438d8a05140758c5733d4d79602396a9f9a70bac86aedd98e790cefac3b02d0a9529f3cdb3904b73aa7c11ca5e6d9aea952fbe04c36d070f5bb79468a1f4d4dafcd9e6995d0435afb32413d1a2ad5c6bee64e475790221086344dd55273fd9a8dcce8f33dec769072adb9fc5abe79cb79371c11b5bcd480f68fd6507608f0e4dd474aacff86267fae28008d809d62dedbfc6db57021ab4ff4f11d98fb83bab01f79f4229a9b4245485811ea7c5cf7c377f6a6663d6516aec3117c3f6c52f8d0f178f9a5996c9a89b7e7910ea96149207989e06bbf78211cf5c5734911541709791359d96562dfa96d97a0d0baba128c8b4330a32b02778755c7c9837b8364a8ee0c00ddf1664dcb7474c0e9f36604e02e0087feca02f34e3b018dc6a127fd1e07d824a0f5ae81de161a7291830313b008d76e970438a3819c476330baa569a22ef039b332e7363f28d7d53541a77fa220b07fb8d2564d15c7cc2386b4a79099efb6ad520b1920a61bb41a5a7b10db33681bcf9a1ca125ad6bf63d6b24bef093c190c2ab8c74c81381c45e21f4b522e125411b72634e513414ebb3a9585887644af6d050c9087fd595f644bdb5fcdb786dd1c0d064242752b2ac332f261128fcce038cf920a10e3228fe7a0e44fd857858fd547847a3d8c457071d61d7d6db0843f803d1bdf061ec0d51e625c2b96efcf6916ee1efff5f54963c2423c311c47c9ad3b1723f289ce6e2eb68c19c1afdd69cc6c69036216c992d99d1983918c9bdc07d8605d226a314b6c113c3faae8eab1b1fab06f808d96870828ac8059d657d8878d110f9dabe2cff3a0ff0be58581ddde466f852321140cf8a895cb82766ecd97ae37a9df9f856442620da9844f8976c0baf01c27e47e1c5a350fcfb5d94205ce6119c36bc6ec3d5cb42a5dddcb8bc897b5fdfeedd53e6e5a9b588344a46503e0031d732a70b58f7eb2ad247c03699e38f591b599e3fee28c9a9428443732e2e52fb2e7ff1a5c4f186afc624b2ff323a09e32c42c0117a6ad8dbe71ed3c5f7021602c172fe32972af68b1737bf17d84d717f595be66bed5a05fed98452d695765460deab730059d93ce33695737775d33b26e4cf3e236487c27d4ead8ec31ee536c6f755382dc67c01cbf90ddf07da83421c32e38929320e96b0262b65664aebf6ea5fcf1faebeeb7685b4e72c8f39728ef7f1910d16203b56cc0c1f6c0969b4a6923cba2c8b946280d4db92ccd842d30824da9065ff0700094163b9af37adc84d371cf93110a7e07850e89abb37488484dd54d7efb4b6a83072eeb7b3c08985c33173470f2ab6fcf824a104f6382e469c00cf033e1847f4ee9063166ef78bffade556ef715ad711fdbc74a1185551dce69189d729705286c7c254872733cf35e835997479cbf60e769120cb47aa8ccc25ed3797b5ffd4f9bd5ce0d536bc9f1db07cfdf65f139ee9cb82f188835662e516c8728715bb036ce64cd7a220fd33eb399df328756845da7c1a0094cdab7092315ec4bcda9998a12fd4234760caf353a434e7f17b444fe3989528e5936faea880eeb2e64228792586ac214e0bdbc73b8c32f9b2b5b8f02896638595f7e32348ec0db78fc6f88da02c506c96f70d3c83a850ef980e55061d5977a42e6881c9ca08060e4f3104fc8921d70c931fea91584592d1f90d645e284dcc031e22ea2a55e15046cbc1044c4d3d60d46f0c3c7421b4519f6249253b2d9cc2f57ace42b94fea535332d5770658f543953e8f2a1749327dafe5af76126b191585333ba3ce970542198da5003cef3cf4067f7a8104709cd5d1593f87f70d291d0713e5ba5c6d0d0efd3ac490a19111f2df332570d14483db931ac549870a97794bd8732b1531ea200d961f510c1d83f21feadcbb87f879946afb8b3774678a6ba496265d4a466a992ca418db08de55c548b2055bb6b615a69de09cd89b1967175b156a7636fc2ea250b2bf3be2dfb78663a886998fa86e7c918cf5b603f48cd6f03ecd3dde0398f522e2ed647a27fa2cfb3f8d2e36a672352c6f620000cbc3c39b3c05495c9ad07cd188a8fe49b18e89ba08a47378c1cf7f1c70eb8039feb2216adc82b7a526341f58515501a9659203da9478fe6f37864502be9fc60c63c545f41b76ea9cdcabd73f11c923d72915c7023808e6acccd2f091aef04d8755bd2e238de35d45be35a9490b1f47624e362fd339fa1621c679fa2284cf6ab3a4a3d1b30b4351124d0c5b40629a2d662ed62094811de676082d218845ba7980db2c08b5fd245799b1d4a76a63822c350c05f276cf3e8a90cb6a27450e1b12f871f4a7c3742cc0448c937ab8d63f2ebe3707c7c220be8b5846cc2399ab553f404d384140208e88830badd91860933160b713899c3956b9e7d8d8aeef1f9cf25dc71f7c092192bdb3b18015103ef0310c810b8f354c1de6ac9afa33e5c1dc4d61843cde76cc176a4eabdfd489cdcf4f19a6002c38b24a52b9b740f8fd235da9a16967c69db72d958c2e03248e19d0e3782c4b90983d1eb810e38320ccbdd0e3b68d9e7d2032df53bed3e735453ee909984d238974717f6151c03a3be8a81a2d784c37381f2c8b95990d351591127371625f31b99fb04402fbeb902287168a649d86847960d759ec5647f7004309e1075bd03bb2b325d14e338c81e911789390ed297683b1f15d228779d5067960aa7746d17bb3e7cfa560d6d6d3d8cc7799ef37d5f1a055fc0afcf21bdb5c2a143c77cf9a5a4ae1e2d69012dbd4e3f893ac77dab680c63f6f0d63f5022d80fc702217dcc20de27a6c51c72fa0a853f6891bf72c3351017bbed1420f642c20c268bbea63cbc478ca16c611d8da93f5066de70bacb286483c4027d831c06092ac0e05c392fb8b549275077328676aec8dccaba31c29b461d958eed03bd4596a160ac1092c44ab078f1b46257bd7006377e2ed29a6e7df8ad299eb4a72841d6211f76d90777fad758331e31490a331b0af3039a4f44c952d9ccd5a786e73948275dbc0f8199bbfcaa7490ebbb0f8ceb0a0e4dc2e82a199662ba361d5f95ca2b0f2545abc1571f44cef941191a7c686657d0f0dbec8ffdd7a910328e1f660d3ccaa6670cfa8a55bf05ae534a99cf3c029d2d3927301054ed5c29c5ec73e9eeb240670f98664d17b918c590185b368bfd6e547c59fb7f083a741ecc5bd6d028476260bc685d54949ac497496a9bfa940c0ef466b28498e0c29c43b5351caa6c4243204868d1ac5722e7a51a5f6090dae2f6edb0d1fa664b19f6f9f2cf18b4ffb1d33720b3ed86b02e06437c417edd99c661fe4afd2663144eb41286d4f42796677518107e32c15de94f7b02ec7f3526b62ea0376d403cacf3d92bc5ad0256bc7c6a42fed7fc30306f33b68710c6541c548da18bd626eefa3675ba68bada9eda3c1225b65ef0569fced83c271d0cc807f150d80bfde42eb19bc1fc06b6eb5e59c7e59af73fcdb15f4ae44834bfb58dffef252cd5fe0ca36b2d99f04e01cf619339aabfdc62e889b67f0d6340e4191adfe3ce0f25e2ffdf96bda2781e43f74f434b96495c7d2837031a1292746376366a85db2491f0ddf3dc8f9452ee39bbf58a093f8318b5336dc7577f25ee7bb31b2fe3037029672cd5202aa36511958bcbfe4af1dc06188ed0d0e6573f0bbb9ef761ae6f7f57ee1a284140d1364097b7b556859f8fcd2673c2823825073e002c6bce98aa515dbbe13c3539324f9b48d84c10a85b166f7b7697299fbc09ae8f328523c721cda39cd061635f1377cb7e05e7a7979febbe727b45bd89d9f7ca9315b29f97a3b736b9651b538c38c66740fb22514a73e5a22f2a73128e6da99b8ae37cd0813593d9954ca94b0185f472755b108f7ce0e534619d03a2ac690faeb27a35acfc08469f4ffd5f43e4590b5652a3a82843842c9b1ba79617ff28a413af77d33ecb5fb8e886b9ba9feacacc1c737163c643f30ee07937d0d008e8ab9ac6d9d7c5c8f2fd196ca1f2ed99ea0f621ba58ef11858d7451b9fa7431567c0f4717fe63bffdb4db7d245f1e49ecc7ed74d5585fb6d48b661b4b1aaa5931266e72cd35c252cb4143de4e803f2a3d8879416f82627180b067eea1e307845f0a3d67af5457f71e42a2d2fd97eb17953200581eca76b634b3a6f2190586d042c6b83790ca96fe9dc56a703c749ad53a7212f0923033b724fc490c657f93c1b718c57d5ccd1e8f372937aca87fdf5f24d5e132148710ef8a20feb85f701035f8a3a53f690fecc3a129e71a6b3dac435dc3d67f216b6cecff641adbea52f03d5f6a276ed434fc740accab32c6c85e5454db8bf3a1dc23b67feebb47c46d68c2b8aaac8bee2f587b68b80360b71d98d92941935f6aceba4cea8a104c2fa80cde8aa32f145e9c06c513da0e43c1f2e019ad804cae219b693cbe0905d7ffa677f3d098d0bbe38f93989f550eaeacddd7faaf7d42352219ad25120221a90b1b6b9a804e0dae98537740dd4226f2cf537a57306d81f6f5fbfae25836cafa5bfeddc7ff25ba6e14566bc72ddc8d9fa3d6f797e7fc0d36c250fcb224a69b0aed8bcca0ffef408e7dd343a792373dcf0647df48d746e73c8a34d175258c02c2f7d757788636d34eae6bc309358380a29b691d0f0ec066e5de24c592fafae7e7609e5d5f58974db09e31c90a97e9f924a7498d9d0fabc2f5d712e10e1f0b3951f35aa6316be95cf65fd0f91ad904f1bb399dadb524df0809fb8f6f227c07f10bdb0221fac09b7a03ac1945444fc83174a4ce59891305986270da3137ef008fc01fb1921875485ad43acbc6a49411c6cc5f6621bd426d0df4641346fa7238200b9811b734449581846c53dc971f2cd5e65ab2338a8b0985221b194a7d4298dc3c674eb64a6b58037bec038b19db0f07e0f7ea68bbfac2a14194a215c6cad812eb0baf87e22fcfd2f541d97f97f60af22e40095d48ada3b4c94e3ecb736a2b5fcfff41e1c3c2a632baa604fcac71bc17d1b1499a6fdb8d3dd541d2b5932c2f7cccf4f459943da02ff34ca7daea4923d57ad84a8773aa661ec0c00ed94823169f42acc99693aba19e36e8edb6b8370bee70f9080f2de050208aaa53d13e10b5259f88b835727f01e3f633ab7aadbffff9ab7253c93fda59307bf60a899e301c5e71533c5ea75dfacbd96f384caf97e92dbc6f6b49efb7f8c2a6abad10de0ed3d5f05135f85078b318ae692c42586a482b6dbf9a90ff10d2e48ebb7b02c11e22a25de426ba49597c507ba55600ea4656faec0d563ebacf981818e4614c127edd3ce17cd7f1b7fe235f264e569da4e517dadee732453cb40bba2b01e966e45fb396082c49fb518fc71d117609157f4deecc32f056e2408d3bd370950ac67873f03da2b5c8780bf11b54f60f5d2545330feb170109caaeb19bc17683882d23ede3b402d65d7276cc7418a0b719dc76cce5d76cb2ba5e22564668b169b3075e85bba2497c482da308e089c1d070130b553f1946f250d1aee64bb1130ea73f120b594cd7acbe7a7f94a86fd9d74b67a589379a5d83a61ea8ccba24ae2aaea2f6a1560d918f77de384fe469217d6a8345bb8c0a5cb4af444a9b8fae0670bf13d67d7f3106b172790215ad9124350e66d38ecb04736d808fa88d5b6842e03b18faf9f28e4dacca5da4be6b5efd74166ca78bbfce42f32cd7ca15c0b26a75d6ba445ab9cde41c1f9eb2baee031e03a0e506dc314051d81b28240ae3e182999626c5b3d990e4a2846569b640a33bbbc2525eeed2d234b76782217ef1287efdfa774afffb373ae39dacd5969c25d00ec7664e0b31d91d4e4ec6ed1c033d684a77c4e9529b23571c42fd8245d6d6df706a89892aad5c6a2f6ca8bebfcd3b7ecfb2065ca57c07da16a6b6ec35c727e8f9546bce7c945517e64c348a842adf20f5a019b19f61637334148742fbc01f1b3933e69c11ffa5fadf676fb5d008152cf3821aea3e7ef4b0cf0702ba6e3386e312d11255f2af728ff5cf05d842636517a9f8a6bef6e2da11e2d3b6cbbb7ab9478a7ca6f8111bb9a19829ecb36ba0dfa7a907490d9783f150ac52dea0e81fe28728b50658e9a686ebe945f7398ed0ec5b32f915601291bfcdd47ee342fc9561d622d93d1b5a6337a9613d5dee2fdf47aa8978f2599773b8eb5cead2843fbd26468baf207546db43e84e9eb506c110ffd9c7525efea3510ec779ea4fd2ab80f0ba0a4a0a299b6ab995c993038254c4dc660f20b7aa12cbba57de8c4c472af3da1e714270d482b26263de9f9a93e4b3804240cde87871b463a4bf6d2a5c9a6beb75669be9ed5c61189442c6b40ad26f615f2a4cde0602c4c8db8fa05f9f903f2f0c8441f35b08975ccf373e0dd8cd87f742cf46db4433fe52ab6aa7ba77d1aa238ed0bafda30a36ea92c53c9bb6c022ba2eb2de79e816300ec33c59340b382867cecb8db0ea1ca591ee471c38dbb9fe5e5bd171cd0105746928404b4d16cf627f3909a9905f59f23158c019b44ac3bca420fbcfd4ffad808828aa3a9f4d0d2b3131d7749199a9d5476d42db62d2d95269974c2527f670ea9eeeb238b4870d826b5503077a6c9ba60ac41cb51554a687df041ca63958260154b6db3bcdf136ffb183c936ce0c37ea7c3e053452a93053089da6a768e4e36f50fb52f84cbad0532937fd0f21e433ecfbc6b022cf53916c40d1a52d27a9f973e1856bcb25b85b86d30d01812aa37570de05177b0d56c8593fec6c03192f12f43ccda52f7ba636eb2cb7e04e3082c3265dfc0a2370510fbc6830b494e2aca90cf1177d95b15d3bac7c01df579d4c4b45dbf077b44ceda20e3df54b391d19fcaf7535e7daf18457164cf74cfb508456c76ba5ab3c130d8e8a6a8875b0239026f856f146d6d45d8bb2b080f108556dcecd525825583194a2389dbde5a432e9dcf1c38211b0e7d7456997dddb0351e65629676f28103968fe5e8916f5c51611bd30203b65d4dad04e795e5326add718ea1568a94a26d8d6d935a907d460596766d27adc54b69daa71bec289a0457334b3c0706267949859ecb3346d56f4d952e5908f18a521893722d08b43a0e83b3c92e36945a822e2f279c224495d5159bcbe9f88d47f8cb72451ed119a473d6c58100827b945b79768482f4a6a3d6a3ab35ea6a0322a9afd2291ad66c72f311740c5d0aec34d20452c6ce68d4e27d7a2889f381d0d5e48c89875ae7aa42a9177565f23961b2caa822783266218c34b244dd3ecf7fa61f092328c80a8c366f123b35776de1112607c6ca954ac2adef8ba27bd14a9c67a6f49cd7b98c9eb53860005c14c4a56e11aaf3863143015d0dcd337f743592bee06638d12a1de8ed19c8d126b5a0f286829fead15e034dd36f7071611c28ea42f9ce8e9884a58c173cabd1b2fdf3757239e3b6c67b117e6834c1c8d02a877062c60553a4b24818d426a6cd7cc2c5f82045493da7e9d20b44522db0888698ca8ef5819b1829a747bb7c9d145a1efbb10af62f00645213a2485373a84e36c1a240f6a3137a0b78c90ad5a84de6f6739667bbc827d9d4a949ebcc9c465d077e20543ab67b8cbf8494cdeac1bded5052a5e04ae78953d835c1fbf4e9d9ded2a4dcd5bb87e4e74c9f2bee0a96d72d8e6f0cf7c01b0eeb9e7ba4180cef4044ebc373d10ee1c56847fa3b610d4b1567a00b6f5fad1a7cec2f00368561ca2b17468e671ea5417efcefa1b7204bff3de07348542fc6ad581ab7d37c9712ef04a6db38346d9a2a6d4387eaeb65aad5e9de19e9aa0f39f9ac488a3b732e41b1005d2731f12a86dc1f49dfc0743bf2039a995dca653808a0bdf7a58edc9601424a69a7157d3081ba851c8dcbda711017ee99d13504bea258750566840862618a1b1473fc740d3aa22190d1247c247d16be83a1a9fc2e93c232b82d7a08d9ddf69866b3d0d8f92214334a0ea59999c2cc0c18ad965a9992fe4972f73694cb9652215d79ce4a6fba1066337b5aee59116c3f1518b38f960e282101cebba5bc58dfe92392f0da159fe5e33ad672edd7d7aec1fed2b2768ac1391a3a6c5bae4d7e2eb1ebc1b4b9d614739e0638de05f0643c9189df3f6209d8edfc16003749af4f69b87001b69701e1c2a25169c2593442b5c23fc644d852f4545f8207e97d78a800957d5724a2a73096053b2ecb95c850d1e6aebd69612f2e8940b7bc5bbb7a38934191823f5f94dfaf67959f93cf46d32de4a214c1e31d57e60b8413b843773f5aa972f5c75d02f1ab641e0c340ee7b6566c583e3491f120f88341b1f5aba0dec7c60dce463c129002f8d6c07456f6009e5460ce44f6853e5d202d0381fbe8715627762b29a1ff4e42490253f7d3f8bf75dc91bcd9eeb4f3f60bbb7af10884a7832b5527f3f8d36db7d877812363ccfb990a94dc2d7bf0f720155d4d35b1fbeeb37ffc59fe8fa4c576ee17cebd7b8b00d5300ba68b3a3fbc9bec361b860fcb1076fe75ba7d035758203ccaaed0060ac5691417a671fd55c99f96ef6412c022fedb3677352655a00404a4af5db94805b91512805e0a2ef1357f5b810d5bbb3e10de52b19b0b9bed4f5f8e7121404f6a132d738822af1c6a6da0a27b0faaa74a1324db6affca3df7cf9f4d90e1e544737fc286b7daa4c516d38f9e7e29590554fc93d99676280f5f86ddb40efb99b2a3ec2f103f225b5f5aadf9e89755762be14ed5188e1d496cd215952416f0f11bdc855c039462cc9f08b5c35c6a8ed7d1c35f1257e2f5cd6c142052a4678669da87a0a88162aa378dfb05e1ed993a386871b428309804f052fc6525b3381f9b990895c6fd6514d9bc5bbb0bac409a6b9936e8a03622097e116c87bd049a9be98f97be48fa796ada07efd5f406eca24a80db8d04db6c2dc11a7ac60aa9a023aed2444a3a4fc190dd899445ff388821c30a2414630c80b20aaf9d9976cea7b24cfc8ab230ef57645e05d3f28f0f46b818ca1b6c59701b0fcba4604a4416befbf061fd948ec6494f0a7f86c966968487bea43b65f1b168bacb8755f4a5e418c973095832444a77bf21a7eba14b1e2fd3956ff05e862fb0040e70c665a31208490c701dd36ae8571e4135197cb636ba84941e2fe7eda309201e610632e16efbd6189e2b9bb8b74a314574a9d80071ea4a1a51a8f1853cd950461eff3e921e9863dcf1f6f6b902ca22aa67bd486366f711396b85b44ab7d98c94f1da894aad738740b23e669a50550c7e2e4d154c285c29d143cb784ccfd320923872a4e883f83204a4dbb497bacde12504238d4aee27d438486c4bf8ef7fe5ce3a79a63536b9cbd71af258464f7dd58841958a67971338640a4f1188829a91363aff8d1a19882850492e4acd0a094e04dae0cd3d7c4e9a9fc76e38e30caa5688078e795ad1648a41db0dc5a751816ab2b8ce5d87294f3f52ddb0eca859d15937cb149c3acd2493e6f408fb58429836ec8ea5f1170cd3d31643623e06c14e12eb57d345dd5171bcbb6a1f2138d061eddfdbcb95042d32486f70f284447b111d3247e6bab5cc3046a5a203f7b107604fea950a758f2fae2be2d443e7392e0a14834ab5bc72624a91876b95a521bcc722d8396eb8c16b8d90f056fd255cf504c88bfe4219034933efbd0e155990a58458bf2e722d173f4432d6e719140b243dfaa0ef45f43d2f06de987d2541a153a486323ba7e9a2d074b430d6265a00024c5ba75c434483e617a92ef206e900683ed6b1f0281a4ea41bb05300bdcf56ed94c9a519b60d955987f95e1d1bdf23cff3e1c919f7489bb1bb233db786a18986a647171b8bfa608e07b4176bf5ad5aed458c26367ac57afb6c68ee34881bbd3b71cabfd4f2aecb22bfe7561d333058bed67e65e7d6cfefb75ff6b57eb640a25f5bec9d05dee8bfa2c525e79497eef176f81e7298cdebe1d4f45d6b1ff66ad76fcd3b3ddc578ec5d166c8bf766581336b0da50ef9b7fbb7db73ecfeb6924a09ca582726a6371ebf2f8ed4bac392733a1636d1b98737af9b0a533ad00f9e52fd0b12015a344e26693f3e24aaca30765f3afb54da6ef69353cf4a9686e925ce05cb3e206e063a5f7f337cf1289854e7b0ac50306b685b77683b49bc1d72c460ecc491bc37b70ea3956b112def1e04ad7692dd46893e25591d87d4488d0fdeb11b1418f966f39e8c5e0b634c46606ec33fa683a7ecf0b97413d1d14a588d6d1ec1c4b68e4f38d3371a779ac0c43a4a983a8a6f780b47f76fbc05e27bde4067be177f8b0985acfbdd9a3ebbc14f33784d35314f1122929a96da63c389ec6be56eda6391d8e2f338eec974746e3897c005007e3f1e1588abbcc62d5550e2e71b105c7251ca17c033808f4624fbc23c491191fd127f1279a5c2d3df68169f7853d8ee3bfd82e1ae04f09148c3463e535a0d56d2338f5d8a3b009cc48ca7c29060fc9e35983db4801a2ae1f3feb16dccd4f1b9e7f7f3e8d1f6ba316a39d830235ddec85a6cb6da7857a364df88604943bd69bd66f59fd13c281f5b0cd9cb1f729c60f52e1ede5c04897107cf0364ff643522a9b18d4c164a5b6f2f032a650a261e588fe0389c1a357dc7e9d67eb0db23cd501ccdf222f35a565c983412857e4094d067d54ef982b497c602cb67fc721b886f5b562979ef3f435593103fd89e2b0cc616c1ab873f01bb50a66538975653109ab2842a924d2b84fb146fe160897741d344e63c4660c2f2ae36173742a23afb8733d2025a2418669d88713c2640c2f0db17d4dfb1efae4b9d5e8e8e2efa6b42d45d34759abbce95c630c9a593be45d49015528f1d2c624af3f2a8427b1b449e6d748cac12f1959e4cfca70c1848335da8d1b8d6c4a73714ca6d6638dd64ac557a7071d9a7a0bce3374a26f0995375c955f2c7de2968aa111bbd25aeef5fa5c9562938ab362e31aaec83b4c60b14fb59e0a5ecfe58ceca84f0f6a7e37a00e3007c4ad97bfb6e64da72b858cedc3d12e58187fbab95bbf714e7129b37e5606eb02a7a415d55454815e3565bea27c76b91efbd8861277145591900ab0c8d31743584ce35d9febb37152e53272b18f5bd6b17e1d5bc557048fe3012d50f24450d6d4becaac3e619236b8dc7aaf763bea73be852b80e09b45382845817ee39d425269f6545909deeab903d9b8a02a79d1fb789be3811a4d2fb17d03ea86f2b87d5c48be9eb001094447ba7e87910dfdba0c91fa69937c757ce8033b8f663afc673c71dea2367f85780706a1aa2930361c97d39d17d6cc6b846745c807e9ed426629130ecf028b77ebc57dbbacf4767cc64e04b6002df21bdd59597cea9e4988899dac36a801e058678e22898c6da13b68681cd4e9dc43441fcf3c5886605cdc9d202f406cfc985643acf2950524c090e445a561ed935fbbbe58271e4a84334369ab95f2209ed53df849db957de65364bd9a50e9ac400fa1b3498825ffc56b8a02d15646cff26136645e9b9e83a43d2d1ea9398dd950259fa69191ec1b2da0fe170803d22d8325a4bb9c7500805eab738f446028ff46fefaf5d1398988a7fecf4dfc8ced564a766af509303b151470f34c0a90f5b627750caec07e5443e9633177b0cedccb3f9586069a81ab35b8d15602bf2a7ed29f7267f0e6a66d81d974817571dd462d6f712575872ee5c8bd9402e3e9c0f94ab570a19efafb9b95e43f089d1f897bc61f67a1a09b4d6e6eb22ea933366324bccf41cf0f79d459bbf99b17100a72e3973f269667adf60ff85be13fd62a95f214567f7f8783956e15e96d2ec8c6b36eafbe027f8b5ae42d76affc39f9016e577aff9da35bc455a9b7198b191f045f69034737e70fd76a7b700fd9eb24ddc3dea8c3e769f30a5c21ec9dee15c08d3804006681738e3ba3d540658e5a6c6a6c0c09c76438aa70bda0bc5c48591d6839b3fa3e9479622aa74874b96b878dcd3e699e57d5c910ec6529503d156b79eaac56e1d3eea07ed7bae9d25e8af46cdd3bfb56e725412ee150969440ddbff6b496fa5f7ea96136c73eee881be0eebd2884862a40d64bba59ac981045a65bc2ddc959d6b48d2387a7ed59989f54c37d9b11e1064dea14135926d3f8a8f5d7c270b14a156968e2121e7ecf62796a17a5f5059114ed50870e56ca9bed711f3bea9080e000d87fefa35041e3547e7b90b13fe07231068b0768fa24dbea34e00b6a3cf74a98d5893f769a6f0e43d6c7477968d4686541b75f8c60def769304ffceca1335ff00958f470b840ea4a623002c27c9e19e54e597df05ab1370adcf546b784745b10b5e0ea50a92a93e11d78fe5734729a51deb183f37412a0a9d52af90282319827efd39ed61aa43923bbf93b0be46351de0967cf507249e7909abd87ea46b21944b656083bfd251e0519e01067b3b983a9e791fbcc5e165354fd1426fa3499d92c44b8b3c708f71acc398a1c405312a9bc13b052e806d674a908ba403f997e50d337026e619ab95ec201e1e46d10a3480020e8678c57c5122d62ce95e54a1e1308af5379de26eab6a1d891c3922be3cc80f275628ef858bec2105db3fac6c052235d993e9c8b1a6eaf922f308158a4138bbbf9b9491c1628ca443f9ab8ef3b1e07314fbd9c35f6c731028be976a5c8377424dfed6387ebd47d690d54440e4e77b7a270644ecc3f6128e9240c0f5b220fd1d3ef151bb12f9dd74f0d0db6042412e01bda8631e8feacf61ea6d2edfb895fb46586fa871e2f59aacc3ba3efe898c5e2c3ed810ce6aee202b65d0e9c64405b8fefa86fa54d8dc2910a039b06db7a73b2a8e4096c817fad9288d649446551db1304ea3f57b0b0fd6bb7e90bf7907ec884ce127234c9b1d11d3f942440468dd00fa714965b20d95fa993c870315b8ca6ee0fb226c96b3d27c65338021e7e65e77268f66e0b061ff18a2d51ee2dea7eb4b8ca5c088987e3f3acdfce3e5b5c6e69fe0e6d8968cfd4a3045e4889a755c46a3977adc081ea959417288d3bb7803b8d8ad08e4400ca0b4021a818fc58b94b8c832c6de99c2399cd336e75d75172a899e6d2a8f8cd4a782c01c2a9f43917ee29943af36d58bf8e42854b9a8567e23e0bf6f68efc6ae4565f5cbf334b2fae7c842352df48a37e5bbe8e17fd2ca26ee2ca61206a425f1d46291713f86b9f60657b087f92c0a00aa06101e48d8a2de78960a5d3cf2b38e25254c41ebcd61b79000ce0dd5e93db96e709e97969b8fa25d65394fa81e2f8e50f786e72d891ebcfcd13e069112d344081781c95950fdfccab03a78b1b409105c34098eaa180f07ac4bad4f0742e8e229b53e14057079f3874503eeb857759d398786d0b5992c1cb6a34cdd25f5ebad7be7b5d8adf94ec924709aa3ed85cbc11c07aa9bf3e3a0108a9e61b0e14c71dfa354403d288ccd2198b67df9e3c59ff4ee6c941befa7d55ad09e0ee0ee91d67f6943dc16ff22788e2724819a7b077ee1d9278a0080fee6a1b03386c2c3265be0e8c1bd9729dafc3fa39465d5dfcac13cb0bbf2f7c1d64b582d97fb3a72d2a405a4bf80346a3010b512bc1bef99630458efbd6d46ab54afcda64c133336c52f9d418134c0fbbcf1b57a1f580b72b3b41721e920891251d07c01e49234a0d81ae2085f0e4da62dbc7b56517c32982138488c23a189c685c83f87b01ef32b4d772140cc53206366c13eb41f95fc3e3692ac4e337d022046c0eb32f7753dbe172bf5df1c276afb0c85da888d761cbe01cac3bbc5850b272221294ae95a9ec8948bea8ff687f932500c76e38916e62f6d623352fb4e84019ae1723e249df1ab61528baf7381c5dafd7b471ef81dd90793525acf5795699a28b1f0524169a0e86b5ef12a00725f1d2067e03967758fc549bf8318b1dbd38e9cfd614d2d50475025c67c95ada1f8e7458ccad4230fd76fbe6264eca73caf4eba3f640abb2ed0620b09beb346f0c32b462b79a592dfe417a7ab0ac94feb40e88f28c4e274e758db2f58a8b6be25b4498c1d5bf3bc607df8fae03640c651980154e6af676d633ac501770cb71acd37d377b5633106067bc3b479458b2bd09160d1b40d98d9a6922e9da7af16c33f3991030a7393a1d2f58d956c1961600519fcfdcebbffc0f1cbe36feb375338a1615997cf9dbdb00a0342a9052c623bb77673cd681993275700afa9ae544d3113068306511b8c7255d2df0846614c2b5021ad26904ec5feac0f3357897c44bb7221341aaf35284f6fb52e3966433875381a5a4c49ec2f9850ba5a07ceb15b154171fba45cfa14974fb392c9029e938dfe3cad4fe01511e85faaa7d65c0ec35afffca5bd4991c7fe1442ee95f99c51f934d57d25e6b011da1fcff45a1b91fa2d7b3d9576d280ade0cd063a5db9cc30c72950debffb8037ccf5f712c8685e45ddd446eac43aa490f79d702081b174f4c181abaf57dd3dd9039fb8078570d99f2d77569a5c39e8e661f540613a5795aa014ea40e20ac559867aa7efbe64d451a8f152a07a7f5c74d889485aefb656db7a1cd6205605daca291c4534673416656c14922b48483b1a1cd773047f2b3f4f09712fefe257b5ecc5624001ea5f4ef0cdf035b260705db7e305101b9a4f1160c6a14da6dda7033c2b33e4967f4ef3462798c858871a9e851c8fd6db0ae47f18982b56bd86de934c7ae19c364f304550808ba185a19b574f8b4a189b69f0bf726e4045a8b75223cbd8ce84c04e9fc39166aa8b1128ca16811df5712124e29fc6a0969824d907fa335d71d34be6b5ef283925588e8cc1a36abbdc09aed3e64c297a5eecee7fff058c04d0db08d8e4e76b6c66c8805fb0618d659f10ad3376252f64988a7b47a59838ebf950301fc6f2e6e61ba8cbb476a225d01f3984cd84bde534bef1bf88aa00ca769a7463640431d686af824b7f088c42e013445c27e5cbd949c53865086c845842c668070be251b389afd5a13817d4f8279a48f03db436ab834d44bbbe92a7f34de381dbcd2ccf3c62be2edab65d7e1c1c15c0ae8de985bc749b4dad85d2ab8b493a94d64061900f09d581e75f04c66941e0345a16ffd050cabf7ccd324a736843c542fc3d205bb178e124dfb7debe10254e9cffb1f028a0c90c052caf0b2489521e922c0351db1fa335f65f99f4504459f9aafa94166b23974b417ddd52bf257cf355920395032e11a6419a583e61ec1e9cb5c93f3890fe467b7b647fc06847d250819c463298745c9b6e7912f8def6097b56ea1e453417cbd8cf11f976860c2ff1138088d6c12e162e32b0eeb7f4045b66540218e6604921292dd5bca938f79f8b986e0d52ad451211fc6a32c226531c65c58c97050b1ac2836499e493f43264a8f6104a30a2980530ccf52ad5e66b83e69c61e617f9c41ad00c6548766557918e41fb11085dd23e9176a7b002e1a7568dc4cdcfbe52619792d3f51bc157fd86b74af2f562e979ee4e0051858fd6bf2a49d954f7eaf8cf0e421efc512736623c1602b5b398ba7a9b3fb3c435a6b828706860a3692209d5246ff70092a9b9a3873b1bb3838c1a83a9e1e81bdfaf0d5cf645fd974032fac0c52d9c490a72e9ae15377a099b654ab249385890a0e2c6768f27f799f0c68d20119f712f0dd18dce9ee38c5594aa35aa00add7e12df289e62c418d6743ca182c694bc504c0bb43c5f69e535e24fca6acc79bca02bacdf1594915d9dad1e156166a4bc8ea367d369c5d2c471932eaefc53158817f4d4ba7d469c1332beeb0d1dc657f106be24ffccd39d931a05c36d5a3647d0f338679cdd592b3bc2096eede993618c5136127dd02d43f42a126ec5f1d5c0720ac3d5a02ae1a0504743909b30bf4bde838e7b4d7e77035eb14069e3036982e24bc0bd2d2d83ac88e4d16e2e504177da9fc98601b66ad80bac1dd208eb8765d6a7a468758ec790744f0ec2c6986c737d84e4866088ef77b34d51021fb4586da22b5e30e4766993806008bf00a3c758d2ee7d6cd7b5911e3193fed83db300938772454e481e3d3baab94cd3bff6a0cbc7d01210290e809537b1b977225066771682bab0937a65232ee1816f7e33c5bed76377d158ce4ed16f6d58696c65cf4d0aee378b2957c61e90db6ba885afa4f934b328875ee07ffaaec06f6fa22b9e3bfe61841231b719b77fd0294f4f7f4e17815f44c2a076f4f0c35b5caa61058d582ed5a8315ab259b319ce670fd4812c9a7764aa25b00bbbd1de04aecef31d63240deee96c48a36b9c4ff2ee85e62b5db7e9ebe79ee429b4928138ee34f27d73154bc4c7e205be98b8f6c1c284e9f335d270d7d034caf40dc93496b9c2ab1165157df5f5a0008b6ee1c4c8f97b78ab8bcafb5b473cf3e8e01688e6859a68d117f6ad8da12882e0aa3c5dc1e858d609f4844ca2ddb3fe27e2afa8f536c54c17c4f763aac84a34ab80e6a244584af5cc0bf0c43cf078f328d556cb76e64c03377105e8b28a25a6212e241b9d800b0064b47d6835ece24e622916218ae1aee9b873e5603c5b92225c0502779f53504ffeeb00858b3282673b333c521ca9a656efe2745e0879531ba673573c9fb68dfdba3f640d4ad09c6055dd5ceaad66117346a0d7d2973a58620a555e25e1acaabb6ded1b1dd2fe5d3d251663ce030b36358b00ca20a785d7bec8f960f217c0cfd7f8dc5790c19a2559c29fdcb616c80f1e5197fcfc9ed32abec9d6305896a1010019a77334e711ffb89c373689df06d310a41b00880fb46c7e34a36d0413f298dfb75d58bfb0f93328f7fed23c8979b507fe084b114cd18d3f3a1424109d70cb1146b863ccac96bd6d4d4b48a6f7f421309a8df3c2540b529c23a2640a64a6cf3a56aa7c6f5ce3550c651924990342a55e6a7ff7ed7eb8644d57eee9108832901d09f0e54660147a472ff922b0700250bf7cde4d299f0154ea233f7c7ef724e0ac68a8fbfb7107e20060ec8b6b4629bd8653bf1e3d181304ab4786f8c79166880ea93cad83f9113b7608200fbe6becb11a8431c5ccbb8f12ba2cd7f207e40a2adfcf8ffba5a97bd6f3bf81782529624e7bf875edd349243c79283fdebb2555ddab7befda34239592170829c851d8e20d3f7390b2959c09bad1df0461e876f15617352c39fb6ed70fc96cde4e096439893a3c4dffad315d8d9b2175671f6115c163dbaaf2abd000528ef16dc237965a5a426d883c90187fa53be33c4e1950de003ed26a2629c1d274f3a6035c89bfb3c2b1337cc441eab71a726755804bf60a0c7b8a5c7d8226d74fe5cec5c25e6ec5a530e9ff7329816394f5ed582426a4a621fa0c11d9c86e52a8e2c18a4845c59bf1691aa6e13c1d8f33a865a76e7ecc546b95bf73f5f0e5378147f624ce77c3fed58ee6787fad3e7e9e463e2318365ee7915cfd812d1ee9595b2d57f50361119f93387d42324b06a314270788365908af238ad67e2b15fb42254a541137bf9ced7e53fd573e3ce618633fad95d306ee0b7f0fe2e89bda31d3463f94e996162a8a8b2f34e7de472de3a7ecad36dcb7c3dc09e85d7f6a8ab91b19793b8537e8782ff4eb0bb9c6c2b163cad770f9478ed6e7a8717b1875dc9e6514408496cb47751c3cd9168e2391786fb2477f7948ae07d0cbc4d11a97417ef55f34fd3cbb641130cdb34264a99b8400e0cbf8076f80870811690cfb3814e10613d5b961b4355a5daf38019c9939dc4abf2e89c994c0b410d678b917d9a7ee2190ae76ef368edc5c443f6084b0596622564dcdd91ff7bf87e70492963f0bab3ac42d128fc90d290822fdf21ba729fb4e1c859f143a2ddf55ceefc3f48cd1440a6374b9f3e176fd8d4e3a7572295e33819d6f10642a69e13a99a17a430b83daae68c8ecb0ec19c7fdfa19b1d9b1f7faea6a705345ccf69d6ef103392627664ffbf6cdc151fea33257e768e93b34f4b3cfd714f7b16a3ad6b24e72a3b72ae28ad471d7bacd90c39f9d48ad5511bc6917356296ec7f3e7624fc842e11012917c4a379b87e73be8792407bddd16b0fdfe5388c95f2dbbce4a7cc2440973a8dd01c08d5bbf4fbb01113246a3ebe9d156b4a2935b86e56076ba2f10dc42f18309fbd4d798b0c9ac9f24b5e3c27cef1aeba97b4b3819903eacc6b5bc93eaf9b0e092ef12ef69b654e490bc67f05cbc73115e628df9c78224884926bf6538b9ff13c6609699a1340d720c83479170810dd3c44fc197aefd089d43f76f6a980b0b99d3d925f350262f76070dc66db8f8","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"e06b548b27a7e7d8dcac8c756dd3f2bc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
