<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"71c8063468015161ff9982bfe07724b61eb473e3b3b26005b6f0083ebf69543d1ee55cf6602ced8bd2e4d832596c399b79bf6ec3cba9b85d89d97c439b5099e54a308b70fe8df8e87fb507e3063fcf4383dae643d85a925f9f49c4d47f00f6b6914879c142a72d341f84187cf8032bad3aa75663a93610d69db4439e072ca6a9b0ea9455bda282e24f7107d7eb5383a588ad4b68bf7f249ed97080cac3c70160408db589697d03ab5a8fd042bc77bb9941f58fbb420a30c49b01d7d588fa17b46598227c49df2c2c2c8f379cb3f2ea786b92dca6641f7a6ef9d6f0687207bacc47b7a4d0b9ef4ac106e99f222509d0d0aa8a81a00059584698eda24e1865963183577da366378714236156e9fad176f743fba889407077382f7ca80c43cc21f854aaf595b07ade25c8ffdcadb3d465e7966b0b16fa4ecfd780f4d678e47c1da69d9365d948ffd2636905f578abed48fd04b1a54c7dff359ebec17a4209544140b645ee4979edfb1b3c1a9277273bae37b036c3420e7fc55d60f1c77344f92af3e895c3463b7ec0131e78a6572e3674fb2c8266e4cb7232119cc030fea4a957aa7a014c1a31b0b771e696986027854e44359ad40b69568cca9cedb5969bf9ae26cbead76a5ad19d32d9b85a1c8c7e8d471d1a4f82a6b6fe6f2aa6ab1bdbaab9fc1400556bf5fdcaf03b948279eccc66eef4592a1ff6257b52475583a94d729123d47549c208cd6ebc507da8cf43cf2ce311750f08af2fa3fca9643371049ee0cc82a0df4d918fa0364e9d00de307316a66297b4d16d5f45faa74ea4a57aa88cfe5e658932735a222e58af2a1c1add143ee78762936da8f8845183c8fe356ab72460bc64c77420c4c4401d7d59f03f301b97a8f65560fda94bc88ec32dd0c36aa7e48e474c5b8744c6e6415f41546797c7b0a3b704cb33831a7445bc4a669c47d21c1d40d5604c57ce1d39d1f4e2b1334b82afc24624ded2b27beccb12b77ce466c000412e6d8d1205b5c49639055f233e75e6401e76b8eef7727b0e5cd53c5e4d220780133f6b4857407a1bf3fc18402141c7d58667b50b76a0aa93b7640061f615ec7c7a8f1b78ec65ceadafcd428ba9cb122aab3628b9e6598b2ed40fca460f0bbc832c9e6ee6b814348563a46928633558e37ff6077cb82168510c41a94967e753c6536ba7dd813910d7c7c63d22ece93a7597daf428c16f7742821399bd440d9e5bf9c568721ae32f7f9e8d0655b425c5665cfd1c20c8b8e96e236b9cbb436f67bbb37375d5e57d483c53c83a95d19921fcdc9920eac8bb2d3077bd5bf0385cce06d63751368e53a0e9d0e1c48118e67dc49bb3aba21b5dd36d5254c1c4e467df63705022c57fbd703d35fdf9b0dabf68d23976f513797edb6df000a089ad58e28157c35973bd6d4cf70917fbad1898afd1b57670ab3eb9f96dd95ad3caf7df34c237ac5a17f6cc3f4f5d1b113b645ec759c2d5eee4550b2709634817f28d8e69ebef02c7d6d2c6e9cdea6ec79aac8b9381f28085db9b7455a3312a092659a8239ec03be38a8b09b0167b7dfa1aa44187dacee3db5d32b3b973c41fb06f74c9e03ccaaabd0f160ca37d797be06b47b3a457e317901abe3651cc377d3905f3fab23e687af26b84c057417d03849fde61367fe580f557f5e60bb4f03618bc2bc6b015f77578cf8d8baf949c1fd4a5edf2ff03822967f795d3b383049a9e955de5f6f0de0cdbae922c3d7a06886d669097a40f21da53b391a986c7cbc066e4f2702634ee12d8a6c9b0a73348d4321cbe074c7a2390ffd7015594012587ea663a37d1960c263a9be1d6b5d2773b5a1977b9ff77508151952aa77ed8494098cfd5592189cbbdbef8c98b99f5c8884b7e864fd07cd543c8eca8b0df08da0df1c935cd7c19da65e4437353c81246f2dcde600622e04ce65de3921db443dbef35af0c6994fcf055c98495c7b2f4de09d24fe7bacf3f2257dbefac817f8c57da4811cabbbcde0de7c8f941d757e5e78de3aa36a04291306f44731fc38429551660a39fc4ff32ac259d804bc234dff2052c40a29b3fce5b9b1d8209cfc5ab7cf5d5867e0c52bd0617a51b6dee7fc220fc339c927b94edee1fca660ea2dc1e4849f46023d30faa58f50e9a9683f5331168bf1c54b0ea4d9be2296f21784d218ad2bfbad9c64a1eb1f4bdad1b85c2c527983fb586e61411ce81d4eb84acd2a5ed3863c4b3edbb3c71eab7f417a59dad1bd914d96c9bdf67042d95570cb2479541afb8fdc2b244a97d6d11e0b9674496c47f94cc5ce88cb5ff8a6de46ac691e89604fca2db145acf853bb736aaa7375ea1a47a5e0ab7dd64868f49d3d3ae423935e8efc4768080cfaa36479896da39f6e111d3beebd0a1687f9c7138eb73f76cc5eacabf21c8027452ad62fe6fe6d9f966656d0d5a2fff21e7a0b900e0771903df147e43cde1a9b42e99942448723cc0cd212648d88f03b0eba6547b7e1003e905fec8326ca6859897d263771f94072eca859983e2e88c28ef5dcf929ff936c3381680f659ca84b919c22068d98e61d1e011918fa9b51b8a81c07e0d9a132cdc6f600e72fc967a27fab9eb4f8da48ce7f63588453ef829b8a0b9eab438246c98f3679a8300ce71e5ab1852ef6b24da302a4729eb0ccd97f505240af845b722d4fed2ea569b441ff9f0ceb600137db52f460a171f409037a18621148372d6471481b97318a67932b293844b2c7a6b540853c7d739205e7a371a4ffbbd40b45f6306dbebff912ed9882d222ca0228b994f4ad04fc2c26e664acd6d09e92f8a85f9e98b03e24fa36d9ca9b4bd051de00c1861726d511f9f25e7c6de84531fb773fa147678796a6eaf06422a6c9c5df27634eaf6790d62c6112bbb531d7b948f6f713b2568e84c3bebe180ef28d4452e52330ffcc6c3e13fcd94dea7df92246f833a5000664462264f9e95281b3c6c69fb706ecd6f57a73891c127794e0e0d5338ea59c36495ff9ee7bbcad3eb9a0bbb13119b9e592692cb0170d5933c6335013bf8b4cb0f2ef6964c0fbeda5ac06f23338bb6ba0bbc9661155498e0282513dea21b35e531f3f1a1bebe0c937ee807039365b5100cad519feb5d4b7fcd2806f73442cc7f8bce8fcfb2812ef77df900b60ed536f41e70b1b40b73e41303f13b3d31fae2ba2a3899aa7e1a0d6add236ff79b7581023be2ff91df038fd9fe7dbe9c2d930fba1e9a1b33494e391c1822b3eb35e842ca8ba04d2295cfc958591af5fa62ab80d45b8a6f9f66c777d36d739a625a9922a4786b262e160efa31c81c9c97ec8104210f6271cfd53e9774d4bb6b3129924e9f47f1bc7619014516c6879607487d8fc284ec0dede12955b6039df87338fc65fb0dc643eb86c5935b949d23a567ba70fe551fc912f1dbeb1f7001fd40608cf98af81d4bf9cc09624b3f36614faca32b4ebadd05f4cd908a00c4fcf92beb2a4f66a18d225910b7d3d2b10d9b170cc570590689c04b139fe1998c9927aec81e0fd1a486dd2bd004bdd1cbfff1d8b40606f9a6addbc634da2aa99206c516df06bf3f37609eceee3adec3639a85cba42c30693c3b7aa5a425101ff55cdcd132baba24e588c9ac8185b67a58649b3fb18961761e8503ec46e40ae10d02ad652a758ec90c0a118df8bb02af17f911743656ff983fa68af9e978bf1355284a61a85eaf5f8a0dc44de26a5c16a88fd34d9cc7a23a59a3c0f3bf905bed624c68a10ee14f02f8f271445e4f5982ad48548fd4e6983ab0c8ded18b08461a2074406ac391836140f80e36f2f007bec693a60492c043b34ced7ddd30b9f2121f37794983e9d5a1ee3cff74a2566d88358a50f5d0f35dbcbc1011b89648386f0e509e86ca1ac302d475f0ea145a1a4a43e9ccd487e9a5dd04a4d6bd749c97ddfb1962f396c5a56f56cc9b752cf8e1715a27bb9e2abc585d08eca89d583829755de611717724e065e543326a1876a0dc2f19146400d68a22c65fb933edccfebb61f7a7d3be3aa0e9c424fa5f1381e8b95ebe2116f4b0491fcbe436d906722092c778fa405f83a972e6a99e997952d6aebb92ab776b597d97f0fbefac5cef29dbfce465641f121827bb74667fa99a8d29e6a6132b678e62ab2f8a95e087836ccbc42890a8db651795b439b4e64ea4a3ddea1bdcc616be8659d0931f4582d91d3f704c14ca4abfb3e26f48619781ae45937a1b4daa4f3efa3d25c37f7d7bef5582e28375cb75090b9284449f0b468e6ddbb50755bc5352e1c7c6eb59d2797a62dd768194c4d7cdbbe8b25c1e67225d125bb06e9eaf44844c221c67b2f74bb9b09fd0c71de4f9563f672b624a2d57b4ce3d8f585adecd5dfb4076fd9e70b027e6607d1a9bbccf60b953c24a1fa8247bf6bf53e2d98ca80d0e77ddce637f5497a17cc2ad52ada660fdc420e4394f23df6717064a520b8c069a08dbcad8ca6fa4810894e8feb22dd5c77c2dfd682bbb4395546396f0c9a414c610d1cd83f7422b15da17f794354a17fd2be7ea65e08e31983949f0140f4f5cad2561443e207efdc175f04f7069a05c3ced0700fe967c6384e309bc149bf40a78d4ce3a9e9a63e5359fb83040985c674481f3842c9492a6c22b3f6dfc29d2a79f65815df3a503da9f59188aa4dd81e90631448a651b24ee3f501f56d129f3dfd5e115aeaddce3313e75ad898cc1a7a5325796f1865358fd1fed80b74693641687756fb162cf23b4f3d7423b793257d1be169278d77bf805a944ec21abe6c297ce9cbdec09e783b452b2c6f4b8ad4e9cc1cd044912d04e7deb0b336a6d0de87f8ebd7328d8882b95c0ac158d371a8d763179ea27b2b56282806c6164973841fc5bdfce29b5c8865e4769dfb5834db0f575eb7b78d0ded6685fdeb7e608372ebecc093887bb3baa478187374be8e871ab7e3047d9961425850c734e4324d5227849012c39be1eb1681640cbbe27951b9468679d7eaa07aed6fce127e9c6ec9cb14076d213c5966ce2164f81ff54ee1eb165994c33d513bf21e61a5d927ff0b9b40926788c0ec15039e29df8345d0b9d5a51f0cdb1f687b573fb37760c78c7988c65bfc4703b7a4ea4609a7126b57030e55b8b536adcc80303da16a87e76083028a11d9fdac0ed7dce967d6d00d89489a784a3b404b33c48b70d7fd7dd7962c6669f918518391bd13c860e8a3f5fa115ddee3c12bc53fa27164ca02ca048be75195b852642b3e10f5b2982ea063f98f6d61e0a7bf0beee77fbfcac2491a3a1dcb07274eae6b5193cf9266a6243930f1d08e24f1ef4694ba96f30966fa7ab36b7f51c3336285aa656e0cecc3eeb1574f66f93cd8681e0c697a4daed2905b8a6a35bc5284e8168bc7e1fa638354c515f16c21813902c6d1f7c16a632e817c39490cef0f82128a9e73588b70048ad106980efe7ef9263e273921c6fe8ca79862eb6ed32f4dda91c95f2f284c1dfd60dd2ebfb42732086bb01d9f5efdfe8f9b1b4eb960d50c1a3d97a5ddc87de85389999a4f02c1d9bd5db61152426c1667ca5a5c1b8837cab7fce078c337a4abab7c5e123677af5e895c9b65079b1c5f7898a89918b3aa9974b764b78583457af0adbfe104186b4a5d6edb84eee777321641a3607b0a7876ff9080960d7aa1e847258f7124981d98fccc0689491218f626b43cb48fb1a3076a21c1df820c5f1f8ae56339a086545229fa642fe28da9cb5564a7e401cf98d0149ace84335d8e7804bcd0a681637aed7c68348d7aa8f3d6acd7b6a28f1fa2ccc739e09671b6e374e0cfcd023bce74d651eda4c399d2de43ad922f0cb5271ec0f3d5e9f9bece87ba10ff641267bfc597301c7a525069983abad1d96d2a634504f84f3ac869ee2e737c9297f1777f7f2fc7b7b7a4329d8023bef6b819f03e45f987313e7f1c8230de77050134fa56aa38ca780a41f4f9c02fb1a0a222d4c1b0397da1d44d072f0572c6b1911aae2f23154a7ffbb6d5eadfa54c755f4cf042e590092bcdc742ed6b1158609e67e9efd990dc21a77664f2f16e94bde462fad92d874f5770cb6a039086b91a40571be386ec41e78570ae4c6fa672c91307c4a914b45051c959ae65320ac7f1669e112b84fd8b91b64dc55822ebb41ff64c512c0dc0c2b6cf8ee98c75a5284e482395e771c84d1cbb8a5ea84a40c9b0472a1f5933b86c49810dcc120c2724575ba733793dd6a650164c91b0168b84d8adec620b07d93e1426409ea884289430c0cadb106ba73a8e295f0fca040102da89acfdaafdd4f7c8418b737f0c01a5f70911ab1bf6e57eb6b3f917b1510bc42c327062a75cf75e6df4a9c16b5322c1934be912ab08b263fdd1969eaf6801a55fe10dbb01e7e6665e2a3969b5e21dbd39aafac28d030cd285b6dc36d7053faa4ecc6d8c042633ded0fe14bf009c4851339feb0f97becd6054995e62ddde8a05a79d08e13a933400449f3d562039a91d13e923089f716731bcc74db0d8d2f528fe2b0b33337b55031712dcf3149ac7ef904e754e8e40fcca12f59400d17c02930fdf2ef6b716dc93e06173953f9061d80746d161979bccba9f54d03aac07ad05f11bd4a406af080a87dcd4cc384eab918dd6d0f026cd54f6fd9ce5416173686bc44b539cbc2c2820074bec7df7f311b97b57e365837ca2a0e468911e9df943ae872a11139207e91f0fd7485b311718df42e83ba74627bb0d188cbddde172a71012748b808d1b46c8fe3f57f13975c63baa0969b50b113fa6c41c0f9d17a7e0745d5b969e94a28cb917516bba0499fd513b563904c267f030cbcc312782ba7b0f956c6dddfc5146125c2a6f1a9d03a49ff40bb60d20804c0b8d5f061760a2d64bea9bd6d1421ec6e2f783fc08a988c2d03eb5fbb0625f8d4e67fbf4f86193599a7404dad7fcaf9a499cda2619a639ddb6a2d599fcb5971d852e3083ce00f7a855ffdfecf2d42e410e489eff7a6794dceba129d7b4fe41f77467c1735c919fe6ae20222969666eba940c2d1933dbf7b62f5f9c079bd02cb915bb115000a224e1c3c140854e0973cf130191588eddd24f461cb3f9dc5fc0576787747caf67b9817bb21d736b58c863962856d3cd6f63fc78878247aad53b1ca37001b78de925f5fed7a2c84444d8ecf1af418ed22addd6f62eae22dda2e4c076da67c59de7922f4e7ad8578fce70cb17092632d1ac1e9580800bb8af74161ced363471068d66b22f9e663826057ee43f48b7325ddb42df97bc7ac688a45da643b440452eaf496281a18c63b202bd9c34cb2ac628c3ef9475a1f32a083807499a3b24d6d8d9746f756dd894331a48e8c4f7916c45444f0595c848b8d27840d3fe50e8e28b2bdd8037c8d4e65782b5758fe22792a4a7390ae6558154cd3c74b7ed1fec1676bdc39a73223a37d4749bb32daa39cb27b09b21d78001af7000c4100a2c74b980ef0a4f70f0676f918bf686e157ce2d5169ae72b05de4664d660c8af2159c86d1a4f78861d8aeafe90e848445407b29e8b858714b7e7f8df9b76c74052d13598d85c3c6950e98a7c68d9be58fec90d0dd83e92ea49f7396fcde4e42b70aad9860eeb06c1f10aad55783b1a95294aa81ff086ae3310e15bfa63dc71f7523bd5a00cf85385a90c1febaf3d65222fe543d9b969bd8758c6c5623eabc9cdcc2eed7728648ff27651334dbba0c19b7c18fcfaf64076f7950731f1712a20f8f52d38054acec88bedb5c32fed59150ec98bc501d6d1e3bd375d863c253cddecd6e7db6c67682fc03f29dee6f565592ba61f0221adb97bc1dc2c03a6e15e550ced880fa02b003de206656ce01da070d5239922d6f8b8ef58b9d19f900a9509d7ebc8e0357b97a916e7c67eabc4ca56bb4ccd709ca9e3d19a31ead65c62c42ee2b829a67fecdd134ee115891150c9dc5a8cbc722e246256998defd39bdf9f8421312d96bb32915753d904f6a857df2a534a783925a84a6d6941ca443382fb69d2bf3e099f3883be1fb7f1421614ce0f3b0e82f23c40b8a0580f494fb33dfe53dbde8eeafe1407992135304fb6bdd4737d7faf50af561857744961f2c0bbe9fbd6e6370f7f019ecf823de0d432f99b11f6e0ed51facf55c78f43e1b1ee6cc60472b70dc32392fbf137fadc02792919a8986d1dc716eed8fc4f1bb1c38f178cb2eb8b5b4914d007fb648fb3b1f7209030e962bc499081bb7f77e9f00aea7e0d82e3cdcf5e854cd1aeaddd62c59b24364c37371bd6ef85aaf561d3818a3530a26d09169bc3ef7b98ac370f0a620568e1457fa243fda348db99f60e66850fda569eabc3d91020bca713bed52c7835835ee646ec85b5785debe802fff36f6d4af284565b10bf0c2eedcfcc3370dfd4b277edda740edaf68108337473644c320562a47dbebc2d203491bfde87c335c3244dd5fb1854db40ec381cce9515f90c936b486f8c2a6e30e3dc8236bfc08955b5758ae63282375d84adc6717b035c6d2caf80df70084d4ddd9c2e75ff14c7c9f62aaf82c6297fff92f4a2d6eebcd58a6862c36b1d8bbfefeaf6d2949cdc37c57c0a38a038bcd025b6fa99b8c4a28a17e5e5bae5e675ce0ef135cb791c039ca1ca4a1dc64e44ec74dabd9716732975bd6c41526da2a62cd4bbeaaebe9ea1aadaf32292ed97630acaed4c01157c5beb4df94e92d6b7109b85be0fc904ad247502d4c887dcd1d7b83ae820b6ee8612ad103933c54a3c85c3b559c451ca72d79e33560f03f02d0cc9d5e6b8dd7b59bb3dfd4d1232fb47a83272e3fcb876c195006a453e2a9e0fe3615d494d04d2996b3e9cb494c5c3e47052c2d7554884f5870daaf123a71de6592651d854de4a8f06732facd210e14f64ecbd92304085390ae7e420b40b91a43394aff453e8ec1fd7bcd5d5e6e3875fa13b112f604880b90f303adcbd52a9562db193761ea8d224445227b90e2f64d3e632b964879b9bdcc628939bbedf9c967e058da564daabe72d8498f1ee139c167a6e7f69e5d0c4b4fc3e4ddaa2e8212d877849741de79e16db94f42597749edef677d684c818599169a66ca725da68ae66df6940af90b3f24e1c886f391abb29704e0e55ba6b3c4c5eeae0f5d53a02c23d81708464050776c92f77b9d8cb921d54184675b4dc558457579ed51e7dfff6bdf9e88cb56358668f26a1d0b3db23b179d3515a8e0c1b6299d842c508cbf1168a7ca3095aa33aab786216ce51b91f4f15440080e8399790d0c2f2feeb94029de45330118d7944cc37b302ca3a9983adf513204f347e4424267e522495d5c0464839dcc36e0226993ee59f0c5b9fe46292afa151e3da5d0ff5aa679056e453703811a2863c0a8b435cff3cfe8a29891879dc7ed2ac5e01a8816682e7fb9015abc7d24a5538ec074e7df2919011d73d4c59dfa388244bee3f830251ee3f625c093f5ab32b014a82c32578e9988175b4742a7812294e4d53dfdbc499aa1cff8fb4012166077439caa59e79ba36cfe34a871e5bf53054a14589d82405f09df44e4b75897dffe1592496a07fcfdd7a4d4ec7a0819132489c6bf367dc50cfff1a8005dece9ba7211cb41423c53c41d910e83db6f6b4c0e497002784dfe5706f3701fba573bd89cf3d4890c43b0dff0a6efd6c71cf9abe214c00daa27a1337e2f6325b7b7e0903d98af626ec0cb5aa9b83c94bca8a99b9ae8605b046ec3fa0726fd099e47b970a3177ea3fa7db93433a636fc83ec2a20f250620cf1aebc9aeaa02c626f3a9ac804ae2a026b61a926582c56e100aa89994d1376eb6f5e51f6b18c80ae7e47c8230229082a7c9a9a16fa65733f05c8034b17e8d9017f64676454f55e36cb29e5d7e591f58de67fe12aa59d5e33b3ca5cb0e3694cfcf1838190070e7fd1f15af23e7dc1649a664f44a49c22885811208d354ad5423371882411f5063e999da91a3406922685ec6598917b6f411a7c9babb1cec4ebc224b6777813b5b26b199997020e02909725698261278a77a91a491fad45273565279074dfb4f7f33d507842b38848ce3235a0b7f32d4fc2dab863183555dd4dafe3f8a268cbd75bf2c966b9b816df0de5a77e7e03008d6dee269f1f992983b5aa418bc9e72e15e029071f2b3f08c629fa1a775aa450650181a3029bbbde41fa1932a6dccdb2d4c1ac4d45aeefe0dd50aa222db30cfd3ba814a68ab70900b3acbf97d86aae2968b5aa61e867448dc7853b3b824f3c66344e38371d3cd974e7523d67c8200cb58007b0f2afb8e9f761233cbf16bb7136124173559efe2002b2725038f4c172a52ef90e6025160a351bf3282276fa736910f7358b5c0c5de2f15e4acd08cb50652ec9621b50ade23b087696a81332c40a94de17f08260edb775f35107594d9a87a855b9e312fef0344429ef6764f280767045e84d243af5e7729866872cea077d6402a2d1d8230f3eb4a208b11ead9256db57b8b8025ef10eb98865c18413b2704a7ad53356d31deebfe72c48e9136ca71e6dc0c6a75404f94f8f5922b8308cb68c3978875b679c79d4135584426e7c74d09a3814909c3523d2c3e4f981cdc70e1f83fe50dcfec230c19d5c49856751076676912d43f8ec2f1af3dade4a5cd95bad2b01c7d2528e745d5f4612a8a1c11618d8b42328ba3b7b1474c35e7cbbba3c4e34e5e46530e952387ed6fabb0a1c859854eab8159c1aaf7dddfd2270f442fa8358ff5688cfad7fbfddec33df35a7dd85ded594cdf36910c8575bf678e0b404f3ffd8f11b386b311b591257dd33b11393cc7b6823c1ac1d151058354a93f71d7f0e95175d0bd7ae265ea643254df620ca7424ef69c6f2853759cb87ffda6b6ecab5ed3b1691b29bf57b84d3661ff32d1337487995c7494e604ab0482bd51654cfb3c2529d3106cb5c6d5e1e3d3fd62797eb7608bdcfadb3348a12e618a02c97ff811da1f6c30394500fd32339ec22d7e168ec79a8acbb68080ea36a051d663e8059a71c21f21453eb7c1259d16eaf57c50c1449eab1ec4c0eba08cd77204ac13126ead13184df2f49439df97eb2fe88c18d1848c3248513e8dd7b3e35e73eaebdcc8729f012ffa0c203687cb291100ec918797dc3cee1d8e52838b5ac396c0e096c55f72a49d22f63917f91b7944066e67fb9d99c98cf4cf853947f2c82a5154235a10b8662afc040f03bbab37f38f1109d3c8f3dfae818e3b75c2f9a493ae118b53f79aa785996f72613a3dc272f80e9666c6004362ab20203fc8f703d9fbebeedb30232b1b0ef73d5fa6f2629be4971ad107d8bf32f836abdfb911131c3a4628c5b47a2d326826ef518a014dcaeae3b30e2152f6c26b456350894052d6431d18a5bbc7b9b9e9e9e9623670b6ebbe7091b5c914fbf713615c9b765238aa2173da6df0ca1b4040250c2a99504d0d74ffc93b6f2217379ce4a286311c0ba1b28eebc517153f6976a125a97d04f60044524190f9f8ebe13a05e16eebe1cd18bc4371eda812a2069c2e0116a15747f80742c376d479ca1e18260120acc1c66152fb186ff67a7e86fe1979d3fb72ae8bd29042325ec28e814cd291302188beff9e37246cc87ee1a623cc317255a8e349aea8ad7260bc397edaaa0c10a0d9bf4132befd01534ff507590df8e22bcb4d7bbd990227b28f5aba9ce83aa69c7434b4f4f60a3d7d9db03eeee8c6e9b2472d8a2e7e528e147e052480b987d7a442a7ba79cf3fb929478f88ef8aa4c7e63980de48ab43dc7fa7cf85f6947abd12e37e420020c3bab7e82dd4b17146498d80a5157ae9bd95f48c87386d994ccfec74e91c85ea7cc0e6546faefa8d0905a81067cbd42e922ecce3da22565366b82061e692d2aebdd11860202ff6fd7f8174cf9273b4d063642b627c64cc75aa37bfa9c82715bc06219d8f4244ec0697b2d5c781ff1e03268a2feaba3bd4a7feeaa56bb59295f11e16ca50aee65aa9d876caf5f7ffa2019ab392af06e4d33052d626ddd25adff14395613bb32636ef9a3918599a82d61a2d3cab51f1dfd3c6e88efb47b3b99c7817581b4ac61d81faf7618578faa7799821b75610f6faeac6183bd4f6679dc8a9190767521f96ab76866a8b7748e0229e3979e0cb75bc0c7db66b9a9c365f6da5498be3d61f4bc58b327e2be9ac3f557e6130e58281bcd2a8546ceaa474afc78d7b67c45f0840723500871c756cf3ecd58e8775afb46dfb9bd89ba9084079159ea28a34f71428cde4a2d8531b173c11a92b0e603c0faa2745e3208ece713b568484819d1d1e8fd7ab07f7d70e314d01bdfaa88c60cb60f0e981e3a29e2cc344c8081c5b57b16acd018c0f11d8f4250b01b05462546a441c11cee5186db5297159aa6516e8c1a3e6ceab897c03b89b90366c09011541d8d23f002d43fb5e1cf57c3da2140c79489501b854cc80b3c9192824e15842a03ecbfd4efa511d33ae0a8cf29f027c3fd61f36b412f40aa9ea7e013e3df0bb51e158a33f092b599ffe3a8c5110d33a3dee78702e08247030c572e8477b32f453eb999cfc1045cb6ccf95253b50c890de69be860eb10bff677687210c3e99d72a180f72ec0eebbbb250884e625e3c4ae3a53c43fc5742749282129518d78e2c68f61662fd54fc6df29a10e526726b13833dd6e8f28f46b727ec391752339b2a8f2d7cac5b6638580315b9926e250712f2872e7ffa66ed32a6e7b033e56f2ad674d47fc798fe2798cc1dd5d904f1f8d48032b4f2abf4b2b2928aeceb2a561f28fa312ccb018945c0c01761b97ae2dd653a29ca0d3ef6ca91109e03ba44b7abb0f4a4e75474a28d6995b0156dcf24f60dca52d24cf3957fb2fa475b0c5fd6b1f8c9ad523a3663c798c544f5a49616ec1328988cc48ad13b76d6737d1dc3931aabaa1da4b2b43ef6ad760fa9f559a9665b4be8c273fa18a91c476bb3c52ffe243e3d7614e2693b9e50dcdff40b9fe5c6a7a1a6addfc037d6b20c3c0f7771907483c4262ebe7fd0164440735a1a0e0d4889bd016d558887bb1af9b48a76c00663863d2eff82a418e5e4328f0dfd12d6721a07319a43b5fd1686129cc87c11c770ed69eb45c7004c3fd1f539d962befdd01333e17e96b1dc46354c33571e2dd0abf798526aea4c6e5d8d72bebf73d92965fe6195086e0924539243d80ae44c9bd72e179ab39c168e2c0427fe44ff8babb676126f08b734dd80876e5a6e1329d3259ef51499cff4a79007ad9f89f86f4ffc8181664cbdb305f622fb5dd40b84265d5fc3576a87ba2808d87881bd4e4322b6e16ed87b6034b5d127568918095db7f28a76c5ab2dd8c3bf610defb7b6d6160fe4c2f73eacbd67cd5eddb1ea495ab5fc7fb7f154101f8a74cdaf7d8941fa956899df4c1fdcf27aa476c00954b8e088d519a3cdedd1b5cb976af99f04b24a8cb92d3554377233d60f8a4150ffcc9d80ced5eb79b61e9e361de33aa115f623a1b98b251e5ff4783d5043090c9a517ec1da0c6ec050e7d99dc590222c7c2afb569575cb92e581a90b1854edbc56a2e545bea55376b9eba56d7f3e7cd0bef21f8f7159e8e53064e0d75d32aaa23af2eb2980400f80399b165d73132b11ba397925fbc06d586b4ff85bbab2ad01f157d634323c866dd14635f08cdb25f22c2a680e0508bf7472ccb9115285f0cf3f1fcb73ceaa4843ce2202e5ce1a7d27a4f59d546423c85b70993cf88390213cd4d78dfb1bfac336f272bc4988123600638f2454c089065b65e3b397033d6c6e30b07b5031e448750b0af4f58d3a4a183ee5d697f8c842b125780ebca5684d27f3ee3035b85fb91785d10a9450b228a706c570d0dc65ec5072e6b01f2f4727b7a729909ec77be99c12b5382379d71f17d545350fb90add368a0798367af0b837441238adfd2c5add89800ba64827b3ed82e4ae0e658ffa0e12316deeee3963068ac494e89103891a5b9388b562331b20d9ed22291cafed2ccb8f1ca52d1ee29ee51943607d8c74724757bc8f5605d4d1196bccad56c86b813e6a7c84c00047d545622b0f801256334ac2ce2d8b10021853efbc61d87f3c117e0ceaf9d25d373d617ce3697a9eb870abcb65e7a64813e7adaae5d0649ec401b9d2d285c16112481af30d573521909821375af42e2449dff2cbfc3c253b04409de6fdcbe18e6f264f75d7aaba9282505ddba9ee432b5c1150bb086748f0d366f34cf24fe74226e88dbd5a3fd3d732349d58d9f8b17d79a8450816613a4dfbbe66c402767c1a92814c5e44a276ff9c84174d6c6c75eb2774a6fb3121f82a5572a4cfa6fd9a76f35ca1f17a7db5eb8283075d989309bcfc6356c105c9d46664f38fd19ba8db5e743181b66a781ffe051aa902f29e05c769e26ef179d0a4cf2658b43be71815db1da473a63ac72d5af745dea4ed2f89e9a30bf7dfe89d3838c8e6ffceff8c87fd61731a11e9d7c59bb260a059d1c0c7e42f517125fe4c6d98c5bee5f55b36a83815cc349a58c6e4a3cb7a990dac5c271f3b6b0222e9c9de6d5b8f9d749deeea30aa017a8bb382ff2698ade6c1c8474f19ef33930a15975edbce61a7ef0fd4ca24c29db830a7f04648c47109878cf879fac45dd171cc2be44ad2ad94a6f0796a5c5f8feaeb35aee534f3c4c5aaf108f7215dd5cb0e45ced21883d05441eec9b7447f762098b375e0a66637540fbf8ac963f61948f7abbdcb55f29eb2eaac8df824f3dc4e795700fd53b7d957118115b27ee7fad8a3a67331e49aeb1aadfd61836e6f37dc66389c07ce7a891d2c80b5bac52417c82aea8299a51d095b30b31f3db100b5c5f8d989ce22610f3ee2b233c69c70b68105666cdc60be307079746f0e2fc3cea8e0c73990cae89a17b2b4801b69cb3986d88af6bc60c8724478f3bdd5e00fe8d0f7adc62d4a4a3cac13660a1c92ad29053a8fead54f6f4a7570f7837c0d8e8bd8ad78025ac95daf611e3af8ddf2c5c5e12769bb27cfeb56ce9db43cbbad4261582f9fd7f891eab6869d2e7440cb6ac8a3e3cdb6a01256f75fab2aa23419fe15f6f185ba7aa0c0b974425b3e980ab34df0b643d66a054fe00886a1d4c96bd5a33c5d263a6c617bb6731f9038751f55e93d725811d6ef67ad8bcbf6f5022542a5a7ca91a304f5e9503f740793f669a0bd1d7d6e9b5249695b817840fb6e419b40b3d8f37b78a69abaabe0579780f735eea304b7e975f703849729d8c29df00780cbfaa34df626266982317fec11609c1a1632e32044e99c2d18f9d9eb30b5f85012455cefb6c05228b8853475d4914ae05cf53256309f8d4797e7e97146a6177ec11f7838660d2745a7aed2d44d1fb0e637ec8e685ed46f84abf2921adb86ab23c2029dd45758f70d095d5b80b5b163411032acd0e112db1835c864d2de87c119d5d00c79234c160e7364487b089b593e0298108b6d626e817702e73eda56c98451838d474e4b58435d92672c36de035b08a31687b9de40afac8e4eb14818d88c30082d007bfad8d58bb4e00fd5d5a1ed3e5d66e401926d5c8cc387f4d06f868449ba61f2d625ba85dde2e3530d4ef064152ced70c58ac35ddbc6107c15e838d3e68c55fde00eb107de365ae959bea6bf6b6a025ab4b4a34dc35df1664551f1a81b73c470996150065112aac54164b811e61130aee686ac0d784e803fd2af6fd13233a1bcef56302add345b95e13a80e87624cadc9e280df64da15c3b44202668c6b6132821af32ec1d309839bcb2bd8582652704d94ec81b164300f085d5e25f9cab4e2620f9d19ce63bbe7a9520961e00aa9645de8e50a6e037fe0c06824c896437bb912db042af589273fceebbda3e8cb10ef8e24ba3910a023482376149cb3457f2ecef978885518fe27aaa97b3aae12e282334f48b154f212d5399a5d6855d03a4b73be7528f10126d91ad2bf248271713ce84970670bb16c368b767132843bb170f4b1b87a7a0e29fcd1f9840dd6984e4331056863db8b69309481a2876014ee9a35c7ed88c191e3c83eb5bceb7819e337b60a454033f828e09cdbf7fde7f14334e5d662258eb989d15acbbbe59889f9b79ad098db68fcab204df25205ef078d9678ef86a37658df4c488aa6195bdd70f99703a5a5eb59d3efbb9fc2c255b751dec35c0d60d5a68fb3b8dcec078c8b970eb3e65cf14deb0bb9ce02574dea50a27da640a24c4c8c8f09a4a673ee01266472fa1c47a05f7415182b05d7f69f119f22b566a711bf7a35e3d5d096a979d5b592436b97f3215db9fb7b7f2c65abef5722974ad501d80c826890c06b4b8623ade62099be0658f21e482a7cf98ebff9b6fa1555dedcb319b4833a9dfdaf21f0b05efa08448b49307a5c09862be60b96cf70a4afa4a68eb2baa66b77687275488804e6b64f95efbc773d26e50a4f2236b389d8f8a2babc021cb15898f1ea96f30ec26ce42ad2959f33d4d808c915d3c11eb94e560be266908cff36946be78ee274f2c1fc799b3b01795b75f0df4e3ec5ff05a4c60a697576cc70d5dcc0fdca94e6a1a90548d174cdb77cdfc70ba3a540995357e65a0e6be839c3371410ea6efc19f07bf4b8fd4f64f96b78f9325498835ccd4dead6bcae1b04e41e12ed19e528b94eb5f4cc2f06b92e10cbcb41ba53fb6dd284c874380403088582e1f1069031cf7795b395229c4a1cba02e640290d59584c6ad538fe3a2d6dc370b3ff474c9ca9dd3b581e58e911209ce137690bc915825fcc08443b7dc0e1306a72bffebc143f4daf34008f4f350995eda5504c52352b38e5463c0d56083a39f98a56dca8cc1ef2d6f60cd82ed39406b3540352d1bda13dd1023da6a546d2c7cd3becbbdebe3992834e30b11058c45f97ff6ab52ac73991fc87af527d60061ad40e27e818d71da56d804cd6ebb737e3f0a8adc349ea4cb7366774f124a567d4764a7194b96794ac9a838c8744739977c3f9a8568ac0f19f4e476fe456f5488acd571233b246cdff400640e0aaf66cecdb9fc3cb02aaf3e2ca03ada34b7e0104ffb3fadaee6d20e16dd8d22b74a4d2b0c60feadc3fde2a3afe55deb098f1164635d9982c827313f235f5b3222755542ef1eb78cbbcab34e4b4dc913edea0a4208140c94acbf46c5da75f1c08b5dcb20b65a4d3bbf87d3e6eef51e616b6015fcaa58e161055f07dc9907433cc48da2ff4e1adf83023d4960c25813b78f58bd62ba4817eb450902f9a6522ab0a729e5acdb08098617945c62c84aba58151f02c650e0710efaf2bd2abfebe4bd0938ca7edb7dd0feac9525540a90e50c51e1edfa25bccc9c9e14203d193892c29066321c6f2e28bd92f3b4490a71088de08e5a7cb68f6a619acce0d663c88f8f1a51432917fee85bd7e0fece2f82ca91b3cb758c13c5f34ec45eca29623b9041a81f3b0a6b7c4eb594c293cd485115e4aaf1793c78dc5d120970f38cc66f92525dcb5d4035c7e38087f430b5b5e1647ff7da1474782aa6ab82ddf544193d496129ece16735703def0d26b88a9765a426e557c7c4ccffee3c2b0a099bbbc258d49158810c7c719f251c7a41880fa964aef5ee721edde610a9d35c04921c94c127610c443a02945ac7c2ea78ec4224359e355d3c9c67cd10c3ae608d90387de0b80d502a6a66f92c862de82fc31cf5e15f7666a45802e6c551bca9f40608e9f918e28916ac3943349507a3427ddc3b2888bf71680124e46fd440a5e013900269687573c8b91152d18e00a620569f80678e6ebb9ab8d92aa4e3b5b093cdb8e9161419be58cf0ff39b20ce7998dc5522cb1ca10c662b44d89661e11dc4152bd5b24bcba806dbf8e56272cffeb6289400c69c32002fe76df645dd9087dd9778a8233ca4536d61a35634132d3ce9f0f9cc5930fa3de2d729cf18ab4596e681a483bb833212b4dde9063ed0633dec83d1f9c2d91700e5b181311f50363c4c219b2ebd51a47a51a61c34021a709396e7085bc6d88fd02f38953f60f00be5f4fb4c13fa29810111ab618a57455b418a9559da59dff5e63044147ccb2f32cea5cdc9649b32a2c7d1fb5a2a9f57c6ff664d29133d46318fccf39a1f2588f6fe0a219664f3cff45ab8d292f27286186d2e3c2daefaf271025d77314da65cc80586547d7d606674dddee9c8e5e4d2a3c88543dc3b8ca714c1f7a066c5153a141844fd7e68d03f9b3ffcec68b8275fd44749c1d51f356d83ec9b767a8d67ded56862ba54a841b0dbfe201760bbf337e5d287ba367f4da4463f87ee8b90c5a9f96d045e8b17b4719cf889dc93f7287b9493e29c846285314ad074dfcd052ea2c2ede6f73183e5864b57eeaacaf19056f96dde86b69c780ad20a1f26b9dfdb802b4e8dc9ae2c462d66b765a7a8aaba0406f45778d6790800ba3fecabd720d97edd85e169d8bab21760421b19942249dc31f70f4d8174a399591810e2f147fb62050e127a45d5332a74ac2aee233620d8fb413137289609f83bd3e816ef2bc7a43350ca609febed9c7d114f7575035aed264acd9f88137ee06771a6a91123ae55a742df943d581723b563250a3dee6e007a4d1886a299727315211da7d2b731b5e07c1cd11a565568b1cac9408aae1c930edc6cc363e89daf10b963f92e45ac3924dd74d393c5f33150299a3d307efafd964aab6b117c04b4faff24fdc947e212e0feae7699981e814ae867a2f33cde3116be8a18e3519a05dbc0da774488de1558cff69bad6918c04c8278f3264a180084c5e73572187b208b72a26e38535b5f31216caeb954359a53be3cb4d8928e59a4ceb3be9b58d8a31e25fa5d73887df32f568795d84f37bb17762876dd3f715d047077778412f0ac428a4621fa746f6c189ddcb3e1b7d87c5fad4012d67df4aaa4e06b401f8bfc21a268f5c415c149be7d65a3106bc6095d3b476b15fd74294fbce3a296ca8f3ec13b2b59d1e429f5885759255c2689fc3090f838919a171e84b41b04bdd352ce4ce6b767a73860fd609299f3a8b61be91a1f6fcf6c6782414b04eae95ad8a94cf274f9b3d54dcb45b039bb354330659c7668993d0d6ae436c664100a051f9adbb3cb13ef12996d3034a100a91b90dd18fd82833f71edea9c4722eb1417b647b76bdc83193a7b6531abc3aa85a3a63d3e03ba98139155ddbcb0f15ae769e935de296779b14cffe337d570053eb3d9a22ced42407c7568a8c4c31bbfedd365b65a53ef1fa0c9218c5aaa13a63653f4eebbdf6170023a6fed1ccf65947493f78920e819c091ff43cef99c3279a831a037b3d7ef571efe561d6c9f5104b8944567764c0a0974f3f55e65b1818b4a185e4526a2ac9658f2cf84d368a789cab25ae68e9dac810c662826ea7260312f0f3facfa392aaaf16d32665ae2d9ba2eec8407fc8d0148b99130be70dab7abc3bbffe23fa6883d35ee68cd4b93641b2922e6e25f286efe732fd2cf14f322f945cfeff8ece5134f40c37aa8ed24f3c954836b6f058a27bc5bac89b1a945678eac0d64239f7924f2fd59e200c250cb20d524c703e753960a53814a8a5641f00bfe18660b32adb4e8894663c4ef860d73596bf134fb417d6ace170277d5484bb428cdfd0ee04ebb4169ae237eae4f09a255307946ce502c443d563a065dab253e10699e4a682bc9c1b87e951500ab42575d64b419c38140c619f64795f1a91d69772ace45c45e85b4d28fd73989a3f15718e35ec147b75525083a7356b30883da9f16038a7a58a42203ddeb0f399d5b7ffbcc4d09238ebf84f9c6bd884a7accbc439c2ef2c36ea264f352daaa5f9989bc4821007810ed8d1f33a50df595b699500d89487de88ced7219ca96167d5c071478b67253eac6fe0bb2c3a0a4524205cf726c9cb318cd3c7bd80536a80e12fc8de12c27bb76c3158406afb547ba01c049a1dd6719d7","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"e06b548b27a7e7d8dcac8c756dd3f2bc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
