<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"3032bd0166bdcaf3f0b3d7f75309a3b965c0f9d6a5b76a4209d9c258da7bacd73b2fcc02aa4178c32eb933b176aa6e3776eeefbdb8f8c9b319059ee6d19b59faf7943be13f209a714ce4b99ccea95d4fe816225d88c69f279ba1654f3d8e387fa985e946e593a5085582a2a2342c858ba68b708c342c0c239e30ea6e8a7098dfa0be4acfadbba2a0733f91371de69359b74eb48bd6423c4ba6ce26dce2d84ac974092390da3c346fe82b7d7e9a2b905ba786898e31edc73ae859bf81cb90116e9b7f25f9bb45d8f36e61daf9f82173f74a97ba26491da848ae2621ee3abbf10655804ed2392741127a622bd5d6b412929b83c756f6142b7dd6b38ba44cb435a6439af3ea1fffbd9a1df7d4ac17ec7bef08a962e3d09c24d977d7ac1dd5c7a367391d792c9b864efe2e3d11ab62227b6593c64dc7c37a6e906f09984943f34bed015427708c9c63528512b914e373cb6f165e065d1b282c07ea78b7db070a270ae916140298d48bf0023c6accd8038554534a29818a8ce8eca851ea9223242bd097155f744ba1ffc456d37b4c7bdb39995eb45a32c50fc32e977d406f3cfa947d1c912ac7f35f936ccf1b47e57a82a2f35163636bb12beaaed9b2746186d4c6c50c834800373073192a958ac8562e814e3382381d68b393e76c0583cca2a343176cc8bd562921e965297de8411d3cb3666329469eac6248a5eda67eb6089dee73e7b7812ed1f39757ae87d58ec7451894856ce6d2376fada50e971136d08930d07af1c8620a713dc3e304fc6e92be02363cbdcad7d324c3c54dc8afe11a243a144538cc04e46311af4e0f98b747f120aa141e6ff08e8489384ce78f4dedbdcc1fcb539fe6d1c53198750e758aaa9c2100acf9031702d32d2b04234d7d8aa578bf7c1a9341cd2eebad37880bc92f93c10a28a9c5e59dd5982bfd3dfc65252e5a55f1897103e7c1e14a7f090ef14c01387f8687ee8e381d2a900ff4f3808d5302cc7de5ca2225d985e9bd7c0862fa36ee4c52a95fd104b90a65bc243997f9d0ad584e8523137f9992d1d759679c2d715d83be0fc84e932e04913f408ce2cba8348d1fba0db8f67bf264d1aaaed3ec6c449a6970fd4b2d2958b9b8c52dbda6f1b80b4d7d8d1d3950a52349610c5d1dca4cbbc767afbee047e851ae9a8f0cbb2ca0edc84c4c3988499375c816064b08fb156a75177d0d46518ba583eee348ed24a3613ad7a39e4c19f599f59787ea66c6fe2dc39903aa4d3ecfdc81e4884ae30af07a0c61dad4e1c78759e9053765bb01fe22efa8d8ff63a2774c2be9c471dca201ffe893f77b401337a0db6736589631fd2fd2002c67df8db140827e72cda80d143bf32a691ac7e9cf6ce360106906eee4dea624a22e2afc476ba94362087d508bc15f3a1049543a7731fafe87a44b701929a27b87e3dbd91c7b135e846edc115be085b60a8570aa3a74abceaee80fc3f21d50f4435ca550b7495e508653ee2958522df38c755d32e55a5016187fa0466f8564cf2905990286cb76dcb7645b04ab7bccadf63ad821966ab96f67817f48c8cf4be1a44e244692dda8776859909e087bba30db2164e125c390b0b39f222e9f764768723c491033937d60973c3c72925413fbb6ed88cd1cada91d1a0085965f850bf698b3ca8943ddc743154bbbaf082c800021fdb537307c8c13c3f2b407962af68fd8cc974852bfe93f36c6a6b0d35213c97f3836e3b821d6c84aba6228042f6f2c23a597c9054751b3d5e8f4b97d01b36c1a7bf3512d10266834df0d14c5c21858e3cc5ad13f8956fc30a74d62f9f267770efc59399c3059c09dc96e172930ab896d063cde55907c4a81846c42bbdef3d1eacf4a344425e11d9ed4f70bf94ef942df84a6c2e6a115caf203ffe7811c9566dc1d770b0cbe39559285fead5c5099d829bc7a2d1fdf9fd3ee14b7c7cfa79b6f8972b21632146addef15389acf97a412f39b333479accdcab8eb38c8b7cfe5d76a96e723d415a22600552ebd019196af319b15c8a380e1f956b6ba6f75766f8a32e17f5995cd546bb83d154a1501f2803b7e52b9f2d9b3f38fc19dbe25e4c8cf8a54691c2d53af7591e896cd3b5719ded3fa4286aecfb5ccf4dbd70922d2eaa234512b24f43d598202adfe7d7dfd2cbe266873e52bc4f27f647dbb4a6763990df1f325db17261331df427398eadd697a3f844f7e45ccb369f64d6d7ab6d7394166fd58da80cb3c5c2523e9e77ad1322889b0fe9a9684e5aaba3ab27a34aea007a5b5667843c19c499d04ea1c7e3ffd5a1b0a3f9b9eb6081bdb62b3f47fe2eedb80f1e13489269fd338a3b3696ab1349e949f7f2f8e8023559a56f136873606cf945806da5db7622cae8b3aa91561420eaa17575c333f0744d0de41407b2798e42cf613c530611a1feb69f4a8a491f66a22d0eabb3e99e8f81d54fc48dc9a1698454302144595b0b96a002e7e92dd0d820bb53b64e55a707c56802eade42668ae2d2193c39176cd3b80eed6a63693ae2d8195ff4ef7b0727583d4a6a2684e6f10f67f94768c887f884ff7f737f78c57215c496af05fdd148ed65e70267ffbc0e1d0ec19b16ce187c44af2e9ab83fc6f98f60c58afe8f90d305fbfc39f912c6d1af6ed696b821979cde244993c9868b9fb99ade8724c99ef32d42c6a2e009a664df4b9be90e4d22d000a6a93bc3eb861a3f8bc655296b26d1b66a2ae3b37100ab75bfc99bca7a512b2da75c508ea881ddd881596b2dfc1210453e403625a6d409599e4f384f77aba92f0f92d2bb4287b053cc267608b9c7e554f0f5f40612e9c2fad0038af25012e6f45d86a990c9c7aac9f0223f61b807bb30b83d20b47228110db77cb36a5025b7c7ece89c3a2ab92453fda0dc9bed95a46be83df5a983b06e73b505305f36191a4b1792262903ab8e5781269b760bbe9d556eba976734f82dd0d5e46a1f541cabfdb108bb6647f221eb5570379e361b6b06ba8d95d164f8b5ffff7da00ea60e2e015e168c96bdd8d2244c2be4919ee3256dca07ba8ab3056a826309ebef43b5ad21a816700727b8843060fe4d768f4b72348fff11a70e7949b905d48b6f7bfa4c6b7c9739b89b10d7f5e71f21a675f1e42dd74c569f1ea3d65874cfad8051143d7800b744b5cd9f161d0a43badca63e32dfd2278587612ad0f7ccff73eb39cfc1e067fba043c5d68c2b5da24eea23c2793a1055e62570f13adfcc56b422fe0d9512bff1de8faa524eb6ccf9e53a7f8c95385bfaf160ffc7e15d8571849d5756063963b665db7459267cbdecc468ea856f686876ef38a2ae71366ceb6ce8b01f5a32462ce3297cb7c50caba9d28ba3a0b92e3a83c3da87aacfa2bb662a7b442a9fcc016bc8fa11512896b392706d8025270b47b4b645dfc4627406c402bb880e4255ce726fbb95d3f5b93facc63980b1535e33cbbddca83e51a1b2078588f2175741cc381355bb01f0b820f34f77955f110e4861038ec8aacb6c221e553ea62177a487249a6571d299cc1fa2fc6decab43c6be6d059addfda19c4c423d6c52b02ce8d9be044cfe52a8aa4749054f1b023f5fb063a77649e10ade9967c15efd4ea6c672efd02893f109eeb6afc2e0cb484f64ec4568d875bcc5e66d04ea0886ad67374160385fa7bb7e1d1bb3a0a23e190361ee57523bc9d3a80bbbaf49510de0ce6c51be293cc655950f625a223636b336c45e947a30a97cb948ec7345a1370c076b7891994432663c02f52d0b88940cce1f933194e7353bd4e79a32b69bf0a6aa287324f26141288c8cb028fdae64368ff3c59a9a6d0214aa65657d1b1333e2ef5c377beed7aee613de5bee448ef1b1e56799fcfd1fcd45e1bbab0d6fcb1cad2ba50de7e0ffd6dc1a7e1f01efcf31786eb21e0fea8a7bb09e97cbbcec053c71f6d8f969853a4408d522e9a21c09f3fa5ceb2d92b577a734e934fa3cb1dfe65850794d3f6b7a96dc53d2e39e2fe93ab221adebc8f3cd04ca1d271154f753f816c290dc66bc4ba3a2e4a0f996a2e6f2b88ae37878cfdfc35a79c860ac5806ce85b1bad6d269addf463b90b34cc47b8a17117743e5e356d8dd3472b844826b4d2a67dcca7b767b77ce58fcd457b1528ff849fa03542dba4f0a726fd713f432c7c98a0306078379e2fae408a5f75ca33a753880a3ed061b9a6b1fdf0053dcb73141046cce5ea2a9a1d7b6a2ea8b6b40fd12b021a8a497d0485c423a2c5370f296426e2332810b303557ec47828a00860f2fe89d1dafc1a3c85b392ab5a89cd432e6e5b3a14091ae6b75b55336d0833ccb23a17108738bda0c4f540b3f42136786fddf1ad626d19f84c2eda85d64035d86ad85fdc4e634e717f3a3a1afadd2552be097c5e3a3e46a38f131c1f49bfefa35c15af1ccce616bc8196318b596fd6530a7f820f5c94cc0827ea4387e66e7bb601675092c7f9360f183ee5c7f9d04dfaa983eceec8f9ea90bc4aea7156a1f3ee5cba498444b5da13080f3c8450b753d86a97be55cb9acca0c78fff220fe614147626de7a41ba4fcc8f6fc3fc08452a06217481aa3e96dc20b9512911be87b8b79f521ca41026152a9b8014ee047b6fc79bfa3921fced80b9221280ae4828c9fa24ff945957a2a432b2a504778248abbc61994ef8d8d71a58d5dfa342a0c3acfd500dfbacfedb062fb96a7c7d9ea110c6d8614827a39bcf14425c0d7079aa69ff1d5ae152a87ff7296214e3debad2e416769a49ada4ce0b56b0b8ba67b9822f404fd58cac442e85753ca50b980272c24aef2c1356f2279a4f8ed76912572282b41c66b7c1d59b92277a5ee72f46f258f792e364fa25f38ae8f244e5debc9ea0bfb9e454c90714130efb818586da0a5931546c136e7a3a826f7f9acd7af5d9f4c8e90cc5823b5ac11d037455b9371b17d9a10d78d53f9376c5af20a282c3f7741ee6385c6e341e642a8cf31f8c25cd1e338e1cd7d339bfb6b7063dcbce0325333dd3abd83703004b1ef98b4f3b58e7c40a16a9a1170ce51c2c71d7d8a9b5c9cd9d0622da5fe11a06b0f81b765e9d64ec7827d4faedc3f223273cbb5c7595668a1aa089fae9b8f08da002db423fad205fae30692da988529306e27a8ae022d4a0c1a4de6104b54492268475655bf401a2b677868b057ae7364541003ac031414b35cab404df214b5ee04e37b3c46209385d7f8d55552c83a0ae47a7449380b61f0119258f00901c2f719db221acdf35c78fa97db53b091512526b077a965d4b22f9328b72c5ad16894b35dfc98b728ad28bdc11a58447eaf4e51a424f320ec741e26bc00c5490f2b1605994a852c576fbd4cb91727b306e9d03363f5e83bdbcb290589051bc26ea02ef71200ace42a9ac5d47cb14f7d23ec371b3e3df44d0f6f36ece03616dfbf7e9b1b2512bf1d4b41f27f3f8aca9c4b1efab33c3c4ce01b9edda0ec3bd4d5052b75648228b4d9d4273175da56558d9faed3da2199bbe3546976c2344c7a1a8c7413c9bcfe937a5c9cdc191cffc408db4a87799a225eb106ce8af462ce09c7aa7f2386aad6550b8f452ec63384593e3d24c40d4d4271846d12c7a3e36ca9303b7d282f0c4f998d0a22149a665fbcbe201dd43b05c4617002ab964264636c1cb200520952531fb31d676ca867dc171c8211cd33b290a40b3fefe190bfdc3699f2ae1d69b2695250bc3a21e654960d6ab2d2b371d583e452cb9683ddefe33ccfd4f4c34ddfb1c1a01ed7fec148856160e0b09969716b7d31ce98650b3cc8dcc5c82995097227fc6677cbc5f8c0c2a12fbe0a0c8f45ed967fd59cdf285f92bdce30a412d46a931be0070aff3ac3893c25b8e1d1555bf6930ce87e06719d3ee839089d1036ebe8231dafd7b6ab000c9e0df86e3a2583551f83ab5d1f86570474982f1cf526b7f03a38236036725948bc688ee96dc3d191c337cb095a50f2be8e423bb00c7d20d89498489fdf000a9d335714e74e98ca3086002980a9cbd43d4cdff2a4f0bdb8ca8a2391d81d1362a6703238fdcf14315cd81eddb68bc4b089c16dedcee85b498aeb4074f9d818170ea04b3eed7705d34fd4c79297518b911d674d0587ea7a8374d772973010b8c29905973b311901e4d1daadd33c604289027213d1f8e2880fd92c14367293a906e3467556e8e2cfa7d4e091bd767056e471a26ba3def0228276ecba8104e325122b151718f75a0222e81a813ba9f48fd5419a52c526771145fe462f89f711ee7762ccc8ef8fd8027629a598619a13894d353e9dc0c10b1a25b7e7d81845ba48ba6204841b77f249062878bce3aeff5d6b264335748a1d6294c17be83472c1fb46207b6d23a6a15019a434c14f7aafea5867e15a4ef38a50f427e1703076ca511f0a0bd6a7ef02529bb3e4e7ef93bf4ee29b183afa3ac1258b8045ebd1c08fdd9887ceb6421a1ab17890aed43ac5363db65bbf123e93bcf298cb73e0ee02168775d131ba22fc13a5647c154d8340b5d95aaaf775654ac3612bf18de335202d299d3dfc3aa8db71887778e88c18c4984b2fa1f0c477659ad22655c11d86cc309af5df7d7e0b9e2bc8329150734d5df0d8624c8be30097fba9667fb7a12b95965565011c1de85e2cb1afb363415fc9b387db0345c791700031c9b6096ee4a38c03ccc09059577e258fd1c22b96aeaee30ee909b93b12c6e5f6b3c6a8995835d81a5a82ef7952788be712c9a8e7185a4fbe584a8712a8482077e23025d71957b45d573f0e1e927cb0e8cf13c63cc3c0c0e9d784a1404c729b4eebe375dee8dd109f420331e0f8ce19d08c8d52e6ddb0795b2097042aa9c7524934acf8d5d918ce9d32f5a0f1a52f43901b69129795f36b248f489a07d3b4d7324eca012f3b6c23b012b87ae39594f65c77eea1eb10a424f3887f3f796b4849e7a4d0c0ce0df6a3072f356a64711ed1bb03414c81c7dcf40b20e7a5ac003c1d1ac2bc0329f628c6dd3eaa36bd0b2c7cd906c0652ad6b0f750e768cee3371ea629da9bd34b9dbf700c7e69710d2fb53c88549e85b4500f41287de2216891064c3683fd7bf36c21a73efb7ac3ad3ef004c8d6c19b5fef1434184bb2f7c241d05cb8f2d8e38f8c44977fa5bfb87bed951e7922c67c1b1423147d9824320fab040774a0ad7f4b61fe5e105e1c9e55da4164a4f2e6a114802927ff96e9a8205067e30f66d9d74c21625fd45f0a773daf32cb7a99824c0d6833b2f53b94c4fc67fe481fb12d42186d238737829ddb84fb28e548701409931e1e30d011b529585a56985f6442b0abb39ac8e061a65fe30bd3af0dff9cf50082973407aa16620b9b1e012f5ac9b21e336c6b85b19de5fd370558859d8b99057d8de4f898a70d753f451bc31399dc93c1d25c16b21ba83ec10c56e7d59b9a98c7d85bc5ed33d20dd4d841afe1ebebf39440eacb3a977549b87ada65fefc18dd79ddac0a9663a260311cf948a2c476e3c7eef09a8e56e624d1eda3cdb19316d929eb4df330096400aaaff69c5c806362ec1c859e2cbc936fb61fe77b0b3889ee6f68843f9a6d613b016d1f332588dbd94efd71c210187ce9793c68a0d32361fad38a16f56d1bf433025127762ac11d3365533b4053395c55d6dd79cb1e1352a39160f13c91d5b3f5cf3df952a3dcc1390a0a99009961ce2bd1bd650db18e49bed2fa5a000d958a5c2b6da23f49e34b5530805c6780a9d9de4224cc9684b29bc371dd6884436d7d1cb985d379ab8fd5f1032bca215d2fdd6c3576533f7798742656b6a3ffb777df05e8213ed172d6e4ef2a1f6b158334aa8bc333bb0f8ec1bead33cd95787b027df86102428e6e9963d77986c03e25cfe2f9a6a73f081edd0e52a5929393dca516e847c6bfbed48dbb87c6fc351213e0b3cf27443f60f21b2bd8fc43395af18e2a22a4dad1954cc72995957c1fe13c05c6d68611e6986fad63b86db09183e62bcd15a8fd798e2c13f5e2e71f22d326425fb9ce9454d35ac2ac1268c6e7ee8d0e4d2dd28b404137d09a335f70943c41f2bfb91d193b3dd440a19657656e58bba9e7bfa045241210b36f75a9076918ebdad32c93165c332b7a6edde10d11b75d06bd233ce5a6fba2c2fffa448b7995f8e8918aca521649977a7ca592009c561ef5cd7eb7a413285ce7f9e4c4e8c8983c06037ee9ef4d031ae815a0941af78051fd36c879aeeb92be4344a73d4ee852013caac2b79d99dae86ce492b6399d86237695811b261cb7914275519755e22c72249eba1f81821cfed8089426ca2f8e4893af120e2d0b4af53782e055f97957bf50f5f48ca658610404fd1f3046a025ab9239b1f5716e1e2625df8330b0fad8c39ffe753f9852213648c329de90c2f3cba17625b118733f2d9f308001951e302c194a5119e4e98b037edc595de819fa9f4c28dfca28ad84106961117c620ef798838cce3d2fc9a08ded89e337541deba721c9d3a5ef38154c8de1a35e1dc093f7476fbb386765db10a7aaa5343ba9a0363d3d719b63d919b92fa9bccd722f3d8fd022b5f23ba69bda17eb1d2fe48eb49d0e07c7d4c1cd750a27f4e9ef7e0a1476e4700ba0edcde9850e68ced4ea1b73f68ecd7de6b24856db7adf3c6b5a04910c6d5f0772cb211cca97a28450a4d4385e58df7aa7b0b4f2607f7f465abe66e127e161941f8c9bd5e5ad5c1b60a5c8e50fa33bac070b85bb7892d804694845498aa3f9b88670d607d535119451787d6f7eff93dd2f224fa703584ab361ffbabd02cedea838a673b67de628924df819271da58f715493e61b8d60183c4695e8262d7c48bea63e224f75e2f1d9893cf13b2941962f54f03ed1017acac5efd6224cece2ad3354d178e71efb3bab352ee453028080931526b4e7106f2ee663b74e9f3bb66312364db5d6fff0778c7ade77c2bb4bfc4b7e33ef3a3605a8f22b125f25c1e1f82668333c7d000fd27ceeff7feb75fb9cf9e108ea01ec972b1e4a2882cfc3df013a1ac2c4d898e5a0588e8d0eaa603a837582952e0bed4e198eaeb322330f3f8528bf297319620069d02fd672148b7f5bc264dd67206b6eb96f730c6538bcf1cf0890492b61e0b56734361bffbc07786919c69319f0d02cd99e9d586a806527cd64475538967eb354fd4e592a9bddf54619902b36b96d23228146bcc8e8c946084f7eb2f27e7a0776f3702429fa75d92563fc4121ed4f093d68d8d6a97c371327d602523ba43ccae5d4894e9062f9a28ff74d1e606bf594c9f3260fea8c47f0d20cffbcaebdbbe5610c53f5f479cecf99db74e4e0dfbb362c870ab5e0a82430194e142f0f36fa2a1395708e72318735a2d10aa06ab9b53ef9da67be04a7d548e0b9c247c3516a71a36b18b2b50dda41002df1f6383b82d34f47911cf50cc0a9b560e1604eab11329cd80bfdbfeff430d912e6e7ab6ee3b28bdf2b449dd6aac9214e13916c280d18fc59ea373ca6238f90ab203600d7f9d883d7f5dfa2ad6d1365bc1af13ffb58d6dc7c8c18ca76b9fc372f603a382fc2b99d44b1d21c1b60b0ce2ca022ee9a08898f5dd41468eb212214153962a3ca820f9376da3192ccff828f5a1001afc71669a76e02c8f784461262401956028f7f9a7d1391470ceb2b205b71fe24815c5461f97a9be0b6ab4ae263370b76e99a4db499ee5cf3e293521fdd472e7ca52bfd5092365a90a6c16984781b0020ddbc8748baf52a153537fc626637006ee8223eb6114f3b608f58310ce710a80aecfc5670e748abf9dfbf5bebde08de574ce66dda754bf776de663200ee082a7c3221ab4010af11f4d3d5be1f2f756bddd1e5fd8489a66b75ba39924b935669e3b9771c977151685e2f9180dfe58a3843ffa4bb08ed9e03f53f42c81b40f6b8cbb10275b9cfaa9eeef1c8559ab92dfb8bca785732e919724d1f99ccfa80c28af3f3234023f2fc4e66d232242bf5e26403bb2ff5d26e0fdfe8874c891398b56e41b711becd6788fd80fd5a10310d086765be1389ce8b0a6f211a34847ce804fca6e1ca3e2b348fbb7e203b3f258203bca3a11f06ca9bd0ac93336193a2c94ec3a252b8e9c1ee1f7b7dcfddc20849ba0dd5073137b53a726916a24663cd66d736dbb73f6be191acf21ca9179fa1d49cda4c8469c7cceb978511e1e3cd6b56fe7c5564feccc5273f5f836e5c9a463f384342ca1c31078bed000f8c387bd2124932dcb0e44c4816c6f500d7375b1209e1d0d777d0553b39954f83428101c15e0b400d9b9c87406e30cc0a36f7cb1d693f9d0efd49c7ab6d34612f631335604840f9f6ec486a9394c9c82f238c664725ba76af05cd4b50f86a20282f003dc68d0f3133dcdfcff1870a0e26dd61402be51c97b58db58d6182651dbae6a84662ed1409cac2634de26a31adabb550a9a655f68c31db1d06317839ce8c52a1c920306e0818e53f19743c60c00cce3b0d4b9a2b99721762ccd88968ae0c4076483cfae6fb833ee2029752702991117d2a699806134e5599b6632afb2a1d0a9d56aa96a75d7ae7db66d788d71b60e6a5ec589e459abeef59da1ce2bccd1d48ee5c9745805792451834fb6db60ea1f62baedcbd84a792f2d7674bb504a9e874b2fc7109a4515d5511e7970630db2b81b5722540341a066092f80c1bcfb89156f44ad743faa6244dd5712ded691398cdb3a2b0ae4e95c7ef7ebabde17f0755ec805176d0c55173cfa1f3f9316e72ada836d8c32aedd2b905e65d9ff51b7369c6191b7b1bdc38a6435af9eb145eb1547ef003cf084516532e2e3ed34509c169908a9f3c8f8171f810960cbac74fca3bc9f9dc77c7e852c804bfb035572c87f5c26b77dce31b6159e6e46f07d577f25141124a7475fff3c02c8a49eed5fa41709a2ff89b09c5cbc1ee1ae12002fc383d2f838f9a4832b4d037013402ff7acdf088a7592b46b64a5d12ee440187194b3af506f9bef9e9b4663321596101e2d1f7620dda939658890e26b1e9c9ed57031ed568daa558dfb419ab62c14a7cadc384b15d792b313db1a9f5355e487144b9b8f48c77790c5dab3dcb5d1c9e298c3d0993c8e50fd172f5a547f53278bd95fdd588ee02aeb0527441444ce6aaa9756d056faea75b41641034eb160fb3ff028965bf153e41081f3211fa23a7f3b34b03b6dda127b6e4579b95624d59cc7ef03b6d503df4cacf9b0d1c0eecce24673546bf9491082d74ec87bc5e02db36f13c21390a5ce0e6b954aa7998101cdac70122b007eff9f36a33d421b5fccfc4a351c14eb7d5e8b51f142b32c18929ce7ce7baf9e0319a98b289dc989899284d68f11abc70cd93db377cf1f74453c4f207e73a0937206faf633ec279e17b0ad2a751f1e1459cc55c9c3f0f7e0b9af3c4e42ac2e0323d1523c4379d855352c51761e4bf2dab512506006692b40c12c376b2dc07050b212616943db0decf03520a6f689c2b414273c288f456f01d9391a65c85768e409e66c30cf4bcf4ec7925c44c74adf5ee5d557e8e9e5f4ff74f081bb86f35cd9e33730a62b79e81956204026617cbe6457276012aa49917af0b71d9c8c319b3235dbd8d6b77dfe6821d7c2ea476b79ebea90c0b44494c207e2c85323dfe4ab1033cf6cbbb93e5cf81bd15057473df7c1a73835faa494edff96cf046929d31be0713d60578a6fee8482adb5850f867e9e34859f578d411b46db7d63ff7017c04bd813f1706e7504b59521d52912b1aab50bd99a1aa3db6bb419be13c6c630a036de1909459cf6b8a4a699ff68d8c2313666c008927a436769336e65d32809b8a7cfbcb9924af522242f10cf9ca7f3d3fa1a6e2a369b3df5047749157ec9ace86b3be038a75dacfef4a2a1bc1f35da396915d70cae29ca34c70992c2aca72aff812fcae6c87573531fdc983187ef7012b31aabe0439f741d641a83f7aed08f350d77f145719ba5bf81bf5cbd50372b1ce727fee47ac4bfeb66d10327a6cd5ed8f9ffbe7a155761fc8a696eb2baa185b64b6fde4c5b7db554396b27734e65ab4a511e1899fab557e3f2ff23ccd4ecb2d5ac9f9c54af0c71c3d1d7ce3c2630f136de11216a4ce28abd7ae26a05d60598e87cba4a4d78e41ca8cc01d1d81b40be7c2f51e24251b9d25e8e77e48330cb0f6d3129738b257b04099a3314a2e849522225ef5b89ebc1f12d8ab8ab7910c2cf676c9c46a9c65d187ad619f550f01d22bd29175317ce034f9eef3a41e478d4506633a124f2eadc22de029951b9df5432bcb491b4a4393b9fa8a7a4229790ade2f6259d41801aa7bbc599044a3aac48f7b881cd296e1e419018eaf4307271decae1c6aa4e429e73021505679ab06ad5aed42f6f5ac3cd6f9919922480d8e70f639e877285220fd9373d52a4ce7c35b44800c5c3745b3fb1a5aef7f4e999013851de8018a2d509a52b092d800d5e2da6c82f218de24222c64ead59b7155458e176222309ac8fdae37a5d92a79b50dcd05f6baa2ca3408675f37659c32a4d6c2b782252b0d1098b13281704c2beca86b4b5af016b39b2c36a8a0ca17117cf9579017ece7b94a23081eff305eb85643325ef04d119af6b9b4d6e49f978c91a7ff7604c1d1c938f165801241494366d94dec8dd9573adeb16f8b3b070495bb853bb06bee32a4715cb626b7c27ff94c0de02fd520fc85bb1f6aa12b425581c38f6c674ec3899fe666a1f5a5a5ff6ac12ee6fc7e4f478cda7515a866ca32c5d1e8d1d5ce1fb4bb797b67430bb7b2d31d42de89543caf6c99bfebff9d7f6bdd28a149b56729c6c768497fba6bff81707fe339e45210265a4bd790fb3d90279f57ad8d1a5e4c4f4bc3e2688afe932f0ba2c49fad1b883fc32c470396330fd794fd82e225172a78c92d768dae4ecf2123f93e4af3d07a024f26ba8233e084a67aec7f52a82ab7f8b2670dca942430417917a1f388549ceb09f15ae18eb0d2d5e3201a0cb7ef238df2ce71e88f9bd543431798d11f00c0ec9bd47c7238325861349431b411c3b93063a907cf0d3b44400b9c29ed8ff22f94c162228289a4b807328a78c79eaa13bbccb0c814b6bd5886570707616a823d500a2dff5553dc6bba5ea9d0d235545822503745d92303d5d7f796d71a0b3dd89af1e05288c6c29cc3dad39ed799702b05bc9778a658fef21c6e7227d4e060c43c5165c620e5e3cf602e42b3de75e5b12faa6d86eb6f5d2ea98c3c0457013ec66afbeae0c8533cef7358af473b193a27f7dd6b1fe9e971e050c426a84b3bd801b7b7cdb9adf2e0c07e299d20fa5bc38d7d5f21e86e1a094ffef81b94f49ec7c97beab36cdc53483ce6ad318a9db7ec0e25c24e562f83c9c5d8f1ff92e9f940c6da03f0e651d14e2dad8c4c15363b5308f07903bb8542cd3b6e3d38f31894e3b3ee602bf01ba9f18d5f7de059969f0d461e3b9e385a5c9bcf93fe4540dc11d56b02f039a00013bf83c2a67cdf7b14480c08f5a38978414e15cab43a55e10e518c56f06a4705ee03f7fda9eba7c901ad48ea808e3f3722b3d9ff2d1331391ecb0f1a12154cb1a9b177e725b0933fd53937c3a1f6305f4174681da7a43c5e4372c70d3e0ef83ffa4b361284975f144e97e7700acbfc449b3cec73fe7c2210c449577f1969f1fb97dfcf3a26431add1712b6c51ea4fefd43db1cf7faac5f3968087fe148cc8ffb2825b9b930da30d161f97979e70be83bd9874c3b96bfd5afaefb4729d86505ba920f48f65c1a053c59662862bcc26c821b09f3b0b7360a5b4ba2b1f1d209aff1b3548a024ae502d4354bd4a6c7e6d378e0cb418152ab475fd5ab01bb406272d703e587118dc42c77267cc3fd5c26adbda174597dd82d317855a5b4e1f1381e414161455e960887b8a4d6b73e9a7a21821da11a3b04ef2667c3dac86b11a8875e83bd2ef1826d4aefbb060b2ac95fb9abe78dee843a85df1f5eb8492bb996783cc20cca39fe68876378be48da2590eacf81e52e145769690f78375b1494e9907baf0d5bd46c6d63ef4affeb3b1b0a0dd50bcdef8c599d34407cc4db718d1cdbeb8b14c9769a80ae897a00f0aeca3aca4508d2cb7b0e198a1b85210d70cea9208c63b58af534137d62a447004f54f8b0af5474a94c9be85c05f16fde25df195025350915cb4736745f629ea36fefbd6972765eb23dc6eeeecbc78cc3b7bc744ac355c61db37d65405f1b0720517d1842d4b080043c98206e39b92b549f3a111c2373123c223dc9f55120a62c5cfdf22d183ca6e9328596a98e89585500beca4b24ca1dff4fdf26a4854154b7e187b0d6bc41d8c9a4ea53b9de8444a59a5036a835cd2ad2174c118f06848a429c9e8a5c40055030158f9afa6e5f367e89764a0432121729672f64aad06d4bc4829752290e96525cf43bbcfad6c67369f596c823844d9d33e15ff63d4d943cb52f239286fc6e7106f92baf4776031f910c5aa6b401566ad47880baa75447feb52a6c7ac3a3bc86d3c7db723ebb15d65ed2ea7dbf01c2a31b7b183560068f92e457c2e55aa2d5a24f01bd8830688c390e5ebef7fc2307a477617d45e732a460c6e5bd3e32d25cab76d23b67f1e358af31131b0f3795260154f8a4d358a84924204b5b8d097f5e3d3efb68bc8788100446bf9808b0d5cdfe751e63b5c9643e8ff32e5c2d16c53f889badf3619d1b90277c044b993bc47c681e796f770669cfd3c743c7d2779dfed94356fe082c838b239c6c8b19894be2f109413b15bd98e8ca895fba6b4d10b53153a033ae6f2172d154b477bd3517a472c00573223cc2d2d2d0caaf65289ae2b4b88111175538314edc89a87920eb04721ab66e65875db77bcc45e294f92d65d2891db1a6112fee7ec7b76fc6c4d808751a46f65f5c41129dbc6c1f9e09b598a46996a8b1ee36096887acaa5a1a0f197b078063f2fe9d24ebe1dc3790ec9609a217435234e90cfd2350c1cd9de64bcbbd3a257f1e170be86c2e5a5d3ed31584e360d8b70ec54f31cf2595cbd6a24bcb6b13dfe753d6e8737775d3c6cacd097e3f892825cf92db2144ff9c7fce4bd370ff314d892d2fbae24ecb5f5d1afa00894f1900310240a4f78528bc78cac100ad5e33f6746389df5fe28d98728163364fb541b8b334dccf1db25671f0156828dfd7660c1747bbb5d483d40c4c2d363059de0469c9312591606778e87dd12259bf9179d0a4b4f3f672c2354303281b174829a9723e948634a4b97e91b0f2af5eeb4e819d01d3cc9fb3d0bd22e150757b5741a67964032949ac4a145aa1b2f419cdac56952cc200a066dd5d75dfc12dd3c1eb2d32e7ba409a7b4686843e873deae2c9cf25118a016da63ad5ba5f9cf5c2b0eafcb13ea008b5f26058c2614c8c4f9c44f4e5dd75d1762fb697516db23cab7ae4aec393496ce36d541df023fc37957d8c91a3ee3685003b335e1e9e0b5b3a038874880b382e0a34e391be4df0ef246a4e137f34996ff733f69daadf76cf767a9cf1960d73e7525032e64fca15a44403df145be7ca0b9ac10fbb1459fd89d6e1bf31390f47e71cbbe3bebfaa686ceb75b00c9e582950f06c3b9acdc96e88f9cd04668ff8aae9dedaa353a8eb36d8be5edbf3113e1b16321196ee20c2831e0ff85ca51181089ed24eee1daadf8ad0f7f264a9720d8e90bbc06d8c0e2260521c14a51f4f8d148629fbf5d0f4825a730c2c411beb7ca8c173521df5a57368c92e1420b4b22c729b53080aae931ae1fa219db925f43feaa25ed3cf23ac82d2615f4d511e4e4e6881ff7686da05825c86f2e0c677950a8a3084df8b1e0365e213610f032edc6c5bd14f1d6235ffc3ef1037b13b512d4f00c129a228d8b07f09613bb597b31e1fa395e0967a516417edfabe92bbddb03bb0c36c97da7c4eccff004ce7d97f3bd3328262c0426583836a88b4e7c45259d4fae5aa2ed00a4e7d6480397b360711c71ee210f69d4092ef7e1e81c3b7973dc31306e798abbd4bf54672ff23061d99e64f23a9f0625ac20513535178bd86130e3c926e9401ec52c99e605e35ae6af386d20e3c4fa549e7fc9c8cab7a6dac71a01b73ca0a649cfd2fa5a8b9a29d332e204fb1542747b170e9e629065c08f418ed452755519e65f0c053943e31054ba8eec362a2b42b04309ea154d64023bbc2f144b45972bddd692d50b56e7937d44d30c52f4d05e5e7e649ea6d2079f2ac85bb54f94270d3e479987923fb0e1e46b6d8caf9fcc3fb06c10a8351c4a6b5a4d0a6b4e1de49087502b69b764ded4dad134f0d0a3930340ee31af6a5afbf43cbadae5efd20fb86cdf3e000c5670856f44cbe4585b1aeb7f151baed9cab71d380fa5dc88b5f86af3ffefa84d739aa209354b46976ba226eebe24b32463d34fa6e3d3f29e0d8c2a20b950ffb70792be7625ed0451daee049009173d87aeb730e8f2dff1169f66cc72062a45a6129b60397a491dd6cd423dd4127b4ed6700343b0335729fb36c173ac11e06c695e9b0931294a5dac1320ae4aa7a568020f669e94581a6a6042c3670059ea7c29c31612e43cfab9523692413c08eb3a664a72cb35648c41fe790b9a12f137d725369261c559997a6d35232019861b4fbd211e8ad6b8543cac58453e2a4c3c2e8e2cae913c5561550d66f53a40e72464bc8b8704f692ee02dd2b1b2543bebf19bc27abf1e25a9b721dc5175493975fa41a6754c18bdd4f50e79cd540274d571eaa5c390fb3af59e20116b58756327a4941543262c1f0de788389ecfdf52f7af94f086a224518a1f428b960a015b986901b51f0df749c56aaa889d84e4ccd7467052fc4d2cd0bdee597d2321fd090864287328abc1be7e88af42ee56e561b1fe2a9aed6f04e00da02f0f8c582a99e9a5d738533601e7deee7daabcd41e753241d9c21fc1cdab09b5cc2b5593acb275934f744a510e43bfd8dc6634a356aa9cdddb6f56a4f03bc3ad8c70ee84cf6deaec7bbe2e392a14eea21d5878799d9e32af6e58d71290d242674b80c74aa16c34907f50bd09de16b9c98589041ec16aa2fe280c9561b0e2187424bb36d4b13fc97d26a16ac7b82dbb08b50efe2bd5d04ffcbea50ae82a56a65a54a7cddfa09a3e05f9c465089c30d544f37ca9adf7875fe388c19f3893d9586991c14848f214ad991d081766ad9c961a67c9db5a758b0ae9e9145471bf1de53392de3476a6db9bf76d947f4b4fafc0c4fc256f95690b069f7af28587ae974eead3c135880ec5a32155c140fd8d8123f5e02a36a69077b56f804b1f8d18ef220423a3727a2d1a014e3725b62bc64766afc8921facd61bf6674c193dfc167ee58f4ed874ce0ceaf4a7e0f83fd068afc885eeb543ac5019440cdcb5959bbe59694b330c1672ff4654cafd307a6e8f261eb29ddd91071fef2ebf8d9bb59f534728dbf22330ded63f68a16e3a519183e66f915cbd5cc8122b9f654f5fc6ad8f6093bc7b85419bca4633e7963fbaf12c8e621a7f0a5a20503bf2bec8b3303b1cbd0dc0a57f59a5a6f920a76fcd2d21700f1b3327048bb58dd046051d8130afa7a0776eb870451d573d608a0bc103757c2c342d14ac0db49d456cdaee9fbfcfc3095ddfdb030ed7d0f08752550c4eb49fdecb01d3bc993e9041af891f3318bc55abacfb3d8ea0ec805aab58ecab2e256ba364afab3fac621beafb54091319a1d6ddb5e428a2220004b951c73964ae445f6a31277b215021578c5305c0d6bacee4875da21bb7ad9aa3685fe085f67c33a524fa1f81fc3ac1faa70997311fa2c53c4001c11ffe97004e8fd00929ce05817bb52aadb8674a757785419d9de71fe8f31f0abcd0846daaf79e26f1747c5db9bd9f31c89120c7663c0301f8adee54e61dab7d7f05a110ca9dff95ca2438b6c9eabfcf60711162bd05ddfc292efb2b355492b69eabce7d930d54acbe2f79a15a49f75271f46bc3c7afb2c102f1f356aa33af3e4134b14c4186d7e1f5b38390549f88ea2844a40cb85fe777ba183a91a804bfe013243fb4c420cd8c10998b3b3fabddd54cfc54c5ac122745fed3f8434881ff908a612e54c0eac817b455ba27e503010d33f8c9121cd2b7329eb95028deaa3a9258a57585b55f62baf3df429fd47c9fdc287d77425e096279fe8a712e6b49e79046aa71cb3815208de8bf061c067cee5adee440c2adab12d5346238cb48fbf680273ef672185e23c6cab267b074c303aef752c496b4d179c621ff2fbdb97162cbeb4d8b2789d715d7b64dd26e5e7b53bb58eb3b170caaf14a2ecb36f950bcdc63f509d7cf2dd50fe5e50063477f66b6515a8338ba3311cea2f6b74b32ea37342267bfd6799d3cf91eda3cc616b1c83364bfb6710d144a79a840254208f1a42e858a7809e60d93afd49d57ed1c1527dcc286fdce5e7fa1ca3ed28efc8f32e197b079931febaf44de6f207f79ec0a3f9996951dfed7847f028212fbbac58279083455a27145778409f7227921a7089e06f102c7675de217f4361fe37126e5321247e1d99ded109af44280f66773beb3389ec24913c433dd182b454fbf3f2eecfe94a9592c3ec45a985fe91b6fee5b15e7d0194bfaf4c7370162ba072420cc41d62a003edd156c0be012960ca3cba16fa5ffb00b8bc02da19f71f46b50f7d9dc89a29ba704b8660db547be34ab1a02b2cae47ab96b9b6743acc69e03f130e49579f318af721d143789b12c0aec0a66285962155f4c93b671755321cc70ed4f1465350edba1488625f3545d94d680d38c8ee1bbb10000e8eddfda7bc5eae93c6dc137c26b449c963efc925b9d4ea6489f108b1faf2114d6ad905646df4bf8526a59e40d5c5aba59d7d757f21b09c363d9b747d551feeebe89be724699263d98c00c1290bddff07b9be876257abbde35e0dbf63963d8767016f8c949d7defeba6e35f0cec5c9c37ca9ea68b82810c9e2d79588db7bef82abb93f960ef6e4170858d1ac58701a0ae9c98f9ef54c49cfb8da9da5a7adb9a0a13dfb9cca0095aeca57d730fae33486c0bceab8650d9439e705e4205c978a282012a05533ca8bc651b0bd9f0f97b77bcf7e7bdcba4e371c12f44166662de76ec5a9d25dbe87e06f8dfdd975b7747fa230f43d0aed7c6e9fc646172781a31a2106ddec0a4eda1ff9cf03736a409e5ff11130c84e0baf227fc7293a3c897d90c2da9b99636a12ee774c5a7441d579f0be65e11185c8c2b56afc0b7f9c3b0495027bd50652c985dfaeccebcdee9734a8ae8c3a708a2e463227d797546c69499f1c49de03c55ff974a617bae3b12449c78f6a4b0b6921a4fec83dfc8298a8d3f24ea18dda4d2dde6b6e784994c48536411cf692761baff32ee2e07daf158314e9c9467e4dedd289fb34a80a62e12cad01ae66064b0da4cd9cf34f784829ad676660b1623312bc3538505871bdda24d4ba9efab56890e8251992f6c9f8cb028527d5bf91b67f7274da30aabf940a1782fad15c08c5cbbfff45d7df8f07d7de1514a0ac34708351a2532bda9e0e68c818873f5f6d3030d674731c6c18cd9170c82e655c22d90e96cf2fd3d5b6297b59744943b2f403201b8803e81f9f77a660f6ed9211757788810733486fe754df993ea38a12ace5fd5d6733630d533124d1ce5c7b8a3e5347cc98f83a96e06d99c04c3268061650031c9eaf1f60dd46583799eed2ec56e73e5a232c2aad1907c314d0fadef5c8409d662f02be2d9616fd30a81fa60832966ed76d1d4e20e237b25cbff76cdd598d32e40eb78bdf83039305211e1a5fe812d4e34760f69de7c13911bce68acd3b1070605693ba054c291b576222e4727d4eb23f3032df3a183be2e20e6e31be7b9cab9eb98f19bffdfecc13af1da3e2d7d8730affee99cb39bafe8957ba512689faf87c7e0e23a9250f88e96","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"e06b548b27a7e7d8dcac8c756dd3f2bc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
