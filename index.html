<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"6d51b9cdb172270ffe35bf5cdb82b91cce1f90099b4c4f0ec5e3f7fe9afcd78a113e1d909f8ec7665467fe3576c4b8fbd7b4d9eeb1de61fec97b99085f7242bf243a4efa5051c54b8c0f56ebba3604e1dbfa7400491b9611913f730a2b3dd3534217a05b1fd1076d3a20dfed5785a0efbae9e7a224af7cefd2300e3cd50e54d24ad859d119e03814643d5b971b4e304c20d3fecc51dc2ff14be19c4765a432e01f09b4ec8a6ab2153d0a4928fd3c2b09ba041dd04148a2cf2906807fffe93a6b3a512a1411c82acb1086ff45289aa79e532124b7ea63ac347f8b1c3abe4abb8854b838357956f8912f9c0b6e05bfb524c975126d200071cae8785601bf4ee28a6da25773708488f8001c7e38c438047a993535855c233ea3c8ae6a08f287d1f99cc0fdf0d1cf86ae444fbd540f8d9d6639827267b9d9c12d7e7c074bc21a912dd3678a51b85e08ad01b31ee09735432cc42708a76ce057b6a2259bbfc63272c19d023678f6a739124205e93db756105e939e57b228c1d520b2f86a19e3842e162a4cb1b28d1429706eff2842cc6023d47b42f6bc133938f5052c58a274ef0f865d538ec0834576d2ffba08b54eaeb5f5cd5cb1b4ed378bcbff5e3df069ee0e55896b607a9c00bc86a04d67c25649849e1c8f076beff501e8e4769fd9710f76baf144c4bb8abacd5b67a6c48018e9e1c1fc51838b3b4f806228d8159a8deea5e57a20baa62e8796dd781f7d99f691814def4b87f6bb65a081605fdd08088eae562f9889649e319b2371a0f55268d5ceb571759d2494b33e4d4ad893bdbf5487be398ab1f137fa7a952ed3adf43eb631c593b80be1163e1bc2f9f2ae349a9e9c6d8ecc57333873a24ce88d901baf82e1e97b0e1b6f19f2e748bdd38e8adbb85986e6371c27cb40d58ef6915b677de0e555081d9600845f5c5a2a673adaecd2ecd0f6651f3201b99a9b650d9ff386a317b475c4186c3b2f3a2b43cc57c2676112f608dff80786ec11f378e6d4923f04245aab24ea31b884a87be836c09de10ef8202911bf3cae6f3fd9dcf3cc14ae25172a0297bcdbeb154e79c5c6b9d252cddb6d64569e3861f946f293bf5c91cf153a6985288186b377e85dbbfc5165a7cd97f7f8d76626281a31ccbce867ba17d298879aab842e41c501118cbb92d9cdf7c1781c8bc3557ffeb832e7e9fcc6f22d18a4cf0a703035369231e839fb223ada337deb5ec03e6288da8bc510b0dbe5180f529e85a243fd8719262703d4b722ce11a43f4bcbfdc930159ade6dc62164c0cc4d0d8e3b05fcf5ade872fdbddc55db088d104d868481614112cd57dba07033b02788f2a123e06afee775b00f714739548b79ce999f6f454b7227535881d2f6a5c7b87c21116d0a9a8cb3a15a3abdac6a022b18bbe5ad0d51489d3ac2e9178c7ae41d88e5b1644ee231f0030e79567305fd893998e192dfbcce2864394794a2dd0f6297e5bc67734feba3b7e2601be215b48366079a166f11e4a7251407ae9010ac690c01abe5ebb8686d1669531bcadb61400939faca1cb7038a061a16a6e635dd1199d7843e4c4e423a1dcde5699ac81d52058b546ee106de6124813987852c745dfd33a2847aca39e8c5305ade254a6e2b6465c8ce237557c5c271a03049fe44a4fcc9832fba63e88ae6b09ffa9040f3d17761bd72fcaeb7dda4475b1b46e382b1f0b9c366184c203c5b73ac755fe879ea21cd2d02f2fa0b09d6404571272079412ffecee6cd895fdd40dd1ab9f4f9d0717c83338eb71400ef15853bb61bc79a6b11082d3b7e7628ffb98901324d61a8c4d8484238370e79bbc68bc8c5f433040d08f61864aafbe49a0de7b16194374d2cb2fe5a9fac92954907ca8d69d453638d402edde6cba09c130ade0b8fc9010a777cdbb8dbcd1d5d37a5d8b80563e1dd1f335608abb086328d7d3bf03686fa1edf86637c81596ad9e0254a8f646c1f144ac17c11122a1692c042b00aee375695c7fac474d7a6fcdffb4278d01235396f531ec60d26580a519e7861621a9cfc96775b249f3f8258a4708035645482a40b5b25cfee6be33cab09546312cd86f7a81702b5e30ff7d16b2043f9f693d9b4bd2ebbfbf9b02a6a50668cfdddccbc43493d584d79d41eb473d57f762b4e2d4d72b59bda960d50e82caf773a176467f2e7e2f76e3c2cda3ae80362a91f81f60d22247a122e09611d9ee193063156b5c04051476999da00e9c35f579751a7167d54c18ad9de41b53e137aaa5fe065e806501672a7b8a394a1701b7ac7ae2412ba084191da3dd4c5f780c6d64a91399ae28958f064bd3577d6f881b90da41457833554e4bcc4411c9c790e2e38f343a8a44154ab2ab5727c3050dc560a7c0a3397dd9de5945a2ddae3a9d15fd5272a1183c392757dff8b459e66134efcee10904c82fe96fe9dfbcf1d7ac824e1bde958f512c4a786208415886315d261d7191c38bce5a1543929684a0f3375ec2230d1bca0bb265379ed3e26a57301806544335d7ff038bdc39ba4dae5ad2d0117859c2809d3f17faa2e43b17b5f8c48b7d2cf54494e2a45e097139ea7b2d6671485d142120c484b14e1a53691dc4c7b70d8c7e9590d6fa5fa01147ee0db5381bfbbc8a09e52438afeaeaa0b3a2b6239a11b859280900f321f370ee43e5da90a0865875be794ae6b07503b69bc8b8641e10e663c1afa842e5c1d007942a354577f0ab952d663b1d7c718003b846c73d6f8259545e14ab4e34977d9214065a72017f1b1d1de55a6bf190539a01448b14b5bf5e70ed515d7c77a351068dd220b5f41bd5386e1988ec2188c7facc211a2350fe9feb2832fd34485c0ee4aaf72023eb3132400ef8be7057d306b61da8cdaf52d4c840f840a72836dae5c45cd913870df3c0f005dd035b6a69270b9e63c615aba335d9d04cd014dce31f2705329c59c561bf7b22a2a423f634ef8736f72af7ab378a0294e1057661784215ab7679a003d14d2155727e78b797d9d87f71004044459d4ad97df76fc2a9d93ba1f547d9900461cc3088df67819fb118d1019282556fc86666406dd8adf4f8a9f4a037cd73abbbe4f0b8d12878f19736808d618306d4fbb3e5b30b7ba0ddd47665dbb752a0eabec62cff1f3d79f31926ba50f6f62c71c2557f2619c1e181c3137833531ba7eee22a986010f34656ca33c8788278eeb735c44b348f59e5e41af9bc58276d1b9404b496378c59a57f924d93a40e6ba9940b5e9759f97ce758b630189bd7f2f61934a1ad835140a20245631e4992e996a5eb408bf30c03a8491e23ce863f50b92d0cbe1196e6a5590526c9d615ec1b0b367931959544dfcb26f3e9ac104b6ca1e239c1ad5660286536333c91373e234fe771ec6a6d90c00dc0a15507a9447de75b8ecd74892cb274bd178e09660a0e9ec11b96b651f142cb8c25fb0dc1ca2916cbb0c84471e6a2e820afae9d0daae030c68eae4d26385a40df1145004ccd4b9b625a6db48b27f207d8bdccf586936c82a541e7cd03ac547821d5da3e30e3866e17016d5392610e4a854507383f3a8b63fb95dec71ab8dd451587a9c2b9c51b769081ef642864c780bc6c9a210eab615a16baf79870d74494718319d73143081f95b6639caa944b814e6675fc642e250f46c80c2303abcf3f1c20b2e2086dcb6bb5090ee8313f613e573528fe742d5abb25daf66c76c7e7c067c557cac7ef07da462dbbf7ac94ad19b9ef76ba5b38c180e64c7d15d138acade35204ff5f5ff9433de3b3881bbd166d1dbf508026a52499da847b255fac0a8df9249af000b1cd7a9594e6f5cf45d1e436695ce8ab7a90ea41969db076f840a6ed73c1560261c36dafb8421bedc44d385c6a2ec5b7b5071716929662cb31a3c1f8583374f557a081f18f3e55e33b25cda5b3db6ca8130fd5b6bb852cb3922fe622c3697bfaf6d441c8bd4e83a75086e1a500967b2ea57e426443e9306fa88e92fc335cc9202350d455fe865785d01829e2c27f979612bf89ff9516b1a9c74694bdbc6f19dc17448fc782ca0856428ddb7bf84d99ab669796d9e5ab57ccae5d59d12c84fb6d04ce5448d426722eceba518592d4a5adb2f54035411a4d7db0e1c75e080a51103e41f6bc1ee51fa1362dae6eda7e89fc0105507e94c9c87cc31622d34471bed440579a5728890419ff82617e7ddd6b3ea9d7e4bda0b72e123b33502af4dc476cdd19d0b5daf18939d3c74dc4451bdb46caebc767d30cff0e2ce45aff994b8c9dd0e4645d67514397da8e56fecc464a008a7ee629fe185991735fd2bfa3bd4966178e04661f135d94d935a02b9e3298dd7f98b947b6dc31c50b01bc13902b09c971a8607490b6926859e5dc91f51dbf875e7b5c0fed8c9f66a6e41ef71d0334b21f7a4dcc23b49e7bd7b114985e44c994f79e4f2b5d89eab2240e936183d5b2dab149ba7f179e820f0e202283cb2daf2355dee2aa19cbbd270a284ed1fe94993ccfa144ea68c050504fffda1b68b7fb7e59d300e61c53be561004e5d7acc535e42d2ca2b65c160c1693d8e02e2bc216583dfeae1b4e1dfbabe2249d891abd80cdd3c5830c8f8b2bcd9c56b0813909613566189a5dde3ace823d52e82c8949ffcd1ddda35a503db1f113f8ef9cdbe76bd51cf38ab64a2a02bf5c716ff7aafbf6042348a284be97953c2bccdae71a78eb24d70d1ee3abb483767a6be0dcc4121e13501360be1e3c2572086936164f52ab74d429c85f70f6d80838729a307776207074bbd0cf86ce212169df3460cb70232bb77e62784abb4bc6ac48c455270680d18988bd4dd0cc60253b934e41ce827e14fe5b1e27c562b43a0c4af838b192421502f2d75631513a1fdfb122e7361f665d64caf1d2f1cb0f91276336cc210bf1c63059a05e7b77da6d5cb435ea8d13243c68da602c2ac9de7991e840b0eac7732d8e6120fee843943c16144d280054f8765a446ba20a7c9714d68a0a1ae243008992085e19e0b93fdd1d86bdf3b6e15b877ad9f52894e34b76766dc8203256494b8a88387bf83e4a2d5f165bc9ee081efd4878b15c7a729377aa51c2f233b837b74a745b4a082729aa81b24f3b7d8ad5ef9acc7750c65caefafaf4673def6dc07fb6fa55b07396a6e966c94f65fc93ed853fa389af442857f1007527fb7609ecaa7472393ba4e7cf208231bad510ad40d814bf74813303e24156afe323755e4ccec9d986a30daa8c1801e682b6f78fb5b5aae31e7ee9aad92659426321806176227e832db6dee88b9e6510ab479e2f0b1b02a84ad83539ee21992a769474a8f990b66e35391d0b8d7091c948fd260c7762dff3fc14e9fab5facef0046e5eddf861623b72797ceba7a016896cbce75a0642c9adfa64955ce41c022f57e9ea61763545bd2432584df022e3da5b2df60de9c3e17a193892c44670d0c7c7a707cdd57c9a2801d343229224430a68bdb25fdfdccd22eabbdf6cf60883d8fd62f306565af182452680f3105302c9af2c4adb4b947cc635240d41b5545bb92ed6e78645674461b91e338ab7281daba40ed37f13d4739ef3cc5aba5c72af3f73b9a6ca7e9e7350fddc84d13ed5612decb05934cb866c3e1d2363462c97b4e62447f3704a9e69d9da0502483be5a9a198431ad240588877bb2ba0ee0e4fc57f71fcccb160e5aa3fab956263e3747933670f0dd15e485fe862086f084fce9f391e1212131567ae26522a6eb39a6c07c962084a4b3deddc7049046575b5cc9d8890ccdb693461e0ece6b2f77078f00f600eca1cb62ea480956f6b1f9396dfc25affc01a27df3d1bf77d4354ce2f3773ae241f0bf2c8d0b6a226218b074ce16df30e3584e773ddc03cb23c210e053b1313481caf715bf5c9e72c574f69ccff5b221b11cd47909d33a6e24e62c39dd909ea3f389079278c9203b133be25c14fa6b5a986d3280d78c9c22a13eea26962b2af6b77b6633540619d989b49ed7c84443a8f38e6ba8c6c4e6933529b12ca2a1df7059e642f335f47b845aaba27a5e3e12f7cd76a7c441d6a3b40930c28d57dddfcd4cd0459e584fe5633305eb8d6ed0e89223328881e5e2df1c98c8d29cf3c2e01d360b01ce534c920ae477dae88cf4a3863fd45b40ea72d5973c402832ac5b9bb5db0c94fb3372b5947db170d7abf186e0d9286ac582e58dda17d315b06996064963ed52c3eaa9b1d8150f80856c4e64f3b9318b6f0942b44383579345e6ceec91101503c07c5e4251b1161d33abb3a35ce1c23e590cb7b4623ee4eeb6c6e17ab86d985eaedfd9b2fe16689f23a3aff4add1261e2bbe06e90ff030ec18621c853994fb69589aeb733eca08aba2e050621506fd7cf5f896d2c019dab479dce92e89b3dcfcd726694c587de03a980bcef1649bd8097ade9c27898c253d3e7038a2239a71e859520386e73725c8df4e45fe26e44d4afb17cce5e508b97b6c9df63215aa58452c892a1e409a378360c4816549b9f8a26cff5c132dc6dc1fbf884b9b26de7f81587df2885bd2504bbb6f859e61a1a0e7edf7dd6f3bd222666a45a4e0aa571924cbb5377396520980838217845bab5b2308e9fb648a4f1b18bdbaaa47beea0eb0090a3adbfa9b0c85f66c1362f4db5045389176649d58f1505ccd4ecac57b470dd5c94f340132b11692974fe865e1d8e61bfd9cdd6a75d619306ce7e20ddbe49cb409d529627676329980276c5a9200a40d786fde30438edf16e272541a2be6b9f9e3ae4f8b874cba375c1509609cef24b51e6f509ae9155245838379748947d584f659f2b63c534a9c6e5e32f0810298065bf2d5be2e814eaf4dd8e179bf592daa604507d93f38a16038b267f00c95d8f207751f2541d6cf557e310b4256dfd3791117f8eaa880ad460fe518ddf807ec4ed72c3c72231d78e54bd9a0225e348904a3959bd2bde630ac51108cccee0935ffc7335b351273f72d85f4d143b9f95b4ca8083623a0443d2e331e7b4e7a90f69d74c6aaafffd8e1680ad795547d8b4ee4b858b6b41e422b8067ce63d22e44d7c0b186fd49fa1d0a4bd344a86cf769ac4ecbf8aa8c8a1eed8ffef19101b8f0b70efe58d1dbd1759d5b148732f5f380751df0b549e608885107c75fb0aeaea7db00ef9b135aed2799fe91b9eb06df16323cb14b4a5044ca31002c3e66bdf7761e5425a6cc9a2fe8d0f9522611edc77c160c64da47a83084c1833f8d537a657a94386ec21facd33ff1431855ede2cac26c5182f9f75bbb919142571cac8130a4e82d558937118897c5e6df505d36a46800ff5920a3c7f76dcae05da019a57ef5bf6a90568f23f5c97873d0bca48e092cb414cbcc63357043f40bb1eea9c52059816dd56a52af539bd44529acc76866f6a2458ad01463af40e3c98c00541fe2ccd9ae589e81c58412eea81ad7cddee143989c1b3445989d6bfb12507c5d095ce4bb70b2c0f0a8d70b31d7d44766e83b76f6a7dfbaef4e9d9db09d7a0d41fd78bcf82afb7007de09e1fff7430aa6c27c250341f4b473df03c933a040a74b24157fb30a70a3bf8f5b6912a972a7373722ca6feef357488bd5b6f97a59bebc07fd71823cdcff383dd42b27c56465c716da6f454653799edc599db14d1ad9635c24bce0f7c4d587e61637019960c80022025ab9ef7958fda70c0f6c3907dd74af8739f031aeea8bc32bb714c14ea8cc08421cb1a916fc5a666c9f08dfd4de770d870d894102f41c15e57276ad8c1853f3e0830a4713668db477965a42a111bd17c8af6d9270f9c0f027d5025252c1269cadeb50d25e44ffd803437de36e774c4d263615fcf1de0a7e2642ccafd64787909f70abf593008e0aa56b2219c24a643f7f37cedcf255191a88e2faee405f6660b07b037c5b3ef5e43885c0e972f4f849a2ea47b8c8dd53e2fe6d22e82570f178d00ea8e410091cea055cec8891c62e3081609af5a8138080ec6918d5eb287f79efd7c1b339c45af05c9620ab0686573ae325f63bd82bb1c0244df3c8b5c398cc8064b0b20f65953fae46b73fbd5864aaffd88f6ada8cbe8be13a78dfe26f116aec29eb79b093c1535c2e69992f43bf8636fa67037026ad73e37101a504104e9d00142eed4f610691e17e9dbe278d35172ecf3b40172acfb175708ca5ac63fbe267201c0a885b5ea071f1a8f764d9deb232b686fb5b80bbc54a904c383b6a77f3376b30e94cc9a4cfc9727a299d0a610ccca6c7410382263881eed8dda2cc96c6ee8762a724b93f5c98f16008ff8301254d070a9a2ca8c24b12880cac7b99d89d115d70c33b9482c6c1bd4aef06fd335dc2eed6a0d73c13f01e81e2afdd5028379f023e30923f369f63735ac0b659efc9f267174fd745ebd7b60c56bb1d62fbbce4a939df1adbcb2b819ea01bd156b781db5ef5278e9473bac9e1ddada32c9622dd5d5e3344a920d5e813821073442acf39c757f7ed51e5d32ef1d01deb0a4f0e4d3fcd840ae19161652256f0319123a174e2666290adfcfb8854580d52ab81a8c23338552941653c312f9ea9914dfe23beba2fc279ffd6e6db348bf08eddd5a7fb405372e613973112239f73ec86e66f009c4e1699b63eb1d4436276b24f57715dc5cb4a602b81ceb6816f405dbd032ea5d83a80e5ccfaba9db0eaa6751e32335ab22d873662ea6537fb2b7c21883713374a79f77e9b3eee04321821fd89743d0b6b84fa7207db604ca28baada37623edbc8bb71214b60b5666a31bda4e98957433de5bbd3fa174c860c6f6732c051ef71233fb145796b539947cbaf6a0ac37df02218313a94f61a9c894c20a1eda2e4467405d0e7f9af4c534b50cb42b43492bf950ac1c14e687015c6ae01b519e2e753e0b16f6fe5c1f9a3a0a0adfb7f237bd13c7245063a0a488b5d95502ee3cf7aa872a2efc7a7cafb5b2602e92b6ccc76ce26a7457a4d695e0ab5e01d12ae99bcc9309fd80cbf3cbe5ca610c3136b15cdd5597ff32cc07d42f7249285131f61ffdd29735a4e72ee031b723c56ed207f9f346196f03d22049356922ee35938c92c8064b03d607d4b5cacbbdd6847a8c07afa7ba722cc89328143c1863327eb585e0652f9df463cc3c50e684b4a977454146baf77095419a5e6a8610f6a121d2bac9c18d9a63b0be21fbcdd828e1c311151ce17e90935c2926effe02f7a83132a40bbf9f8917f3ca77c530587ffea779db3bed2fe37b00af1902dbdd07d7054954f655159943b717f6ee4305c6864a73c61c20b41f6cabaf9a77684412d1e8c32e5440564261d3c66c4763b273c7da63f4c1645db674d3293e61df9abb07bfe7d5e677a66a41302095775a305ab1d6569e4854c93ed2245ee0d671c23f104f63da6263c4e5fba2a9329bd37745eb316b92a6636699ca5396e5d1776df73be44b0a66820fa38d3e92c43247f087d71f092311fd201a7c952d3c50a23e4f1ba6ea5c40348a375a740e1db9bdaabe43f8eb9f7cc54b337b5d70b5b3541a32796f437791d35ac0cfa68a58001997d1a14c352ceef7d9b08ae4f92c3bc04d4b46fda948cd4852b0897753678881102e29e28a9ca18d11170cc8d7fb26fd3bd9edb7b82b4f0b404a0e9d29f85768f82fdc64dc2f4d54269985e47801249070c01db2051d7fc2a949031751226ac1bb928956bbd9f313b93eab43311424cbcece744ac6a818abf899af925642d075386b628fe11fcaca7ff4bfe8a7cb6bcc32301fbd8d978daf1598ef8082e1753ff0ba415a9510fb26ca90bcc5347d084767c1c48eb05ff6ec226fc928bec4c9323bbf7e3fe8a568dc4c818239019ae9c2dd510131b4d1b0d74b5b4a416417db3cfa41dee41bf833ac07e90f648880771935cc911221eb751831345a8aed2ceb4e4bb67a3a801297c00ab0efcc585fd3570593751fc599bf1f3a84ccdc3ddc5d27d571b2ec3a9d341558c45b874accf155253de74db59f6ebfc8a14b6bd000a06eadcf716cd905dd2568c9a3b0645e1c7e7433beafbf086de072a8931e21d1447d3358568e43673eedeafe404ed5861d02e7957e25b7af2dea126bf7f251ccbc457a44eb028ee7ab3877a769ca640dbc1b4b780eaf8df27d5db24ee1e027deda5b84f01acbe5257780db980db7adfd75ff9a700218433d32935897c617eb40384a460a2c14350470acc2004336f7ddf5e0e16617e20058605ff76167b926e4728ac9a461bb722e07b8a9f1efa72f7f99ce45f0bb8b3da891b868e464bd490841bb36ca4eeafcd6fa37ab34d6d54fbfd2dcc87bb708638a7a1a22c376a7afda9264462571af0ee882fd60bd09a011a30926db0a436304e61a827363120722d958d764a12fb3a9dc8e9ef2e9927d6b11f28cd11b1b5142c259bd2d5326bd43d20375fae48e6d04bba9c8950490258666ade8fd154ef8ba2b3a98aadb9188702c4fde7d7ac5150e024b4a510b41baddcd7aac6bed80f8fa13dc92b5edac8c79fe575e598a6f16e251438db1af98c741c023d857474c99b74fd2ecbb1e6566665cf3bca20ff8ce4cf048ca789e2fcf5c88bf04b9bdf46d2675881582b2ac4d1971b8a6d79643bbb16bb2a54103bb09c905be083bf5e432288ad8c2a8f04d1ae5251cfb2fb3547228e69c8ced5b04998ef91ace16916c8c8f33b68ee6e99fb93597b2b6bebdb52166b00b42fc1f1f5c8557f7e858fd8db82e30460b85d88fe25694d6e844fcc0d0fc4d3f82b997e87d21595a5bc3d0d8fb60c20271eb556cab9acd4b653c835dc3b62c680922060ea533317e7b0f3305a3ad9598dd39ca71c0427c5bab1b0ee61a053df167cc87bb110dcb56b006b1213f8674c8a531e335f295296c641a284d611f50be2cc398b1b5aa42ef613428c3617d8068014e0cf57aab4d8f5fa318df173ca1342e8c4939ef5e2bf1112f2e6612157b9aa09819fe4705a3980a50aed51f0716f38c0a4ac78fe0ad97c0f372fa36c3d796f3cb86855eff7e7b0140b4984895deee54dcc1e8cf50f422e4bf9e8f36c93e96e8b47c35c4526b10eb8f78cd9ecfa388495de5f8c8a68059f376982395469154a64c789430fad68132e71b6a1ecba7a038997f1219582b11972c2641afd1dcd3864267c488b34a824bc1358b4b82af22aa13fa39f01b3e42aafe16677c077acc18ad2511d491c2d89144809534e6d6ce71c60ee70ad3a715c5418a77c6db52f107fc0e3d7c7cb6766e4810352dee3b5e4e243f92d2ccd83394b71b1f015f0885de52b454c0456d096c60e772aecc740d55daeaa9448a28ef92a93ac6c4d50ee79321758547a6ad2838d752823a0edec2c517a97825547b2e7d4d8d1a3913214ee2ac25462d9bd713922b6f42be0c7f3c323a18b7b502c4500b81845321e8304cb65e88c462b67a00b5c390b5e47cd8b82d03aee90e1a537b576481ef51652e7ff53cfc7b13a02ae7180723eb99b81055283577e4ec5d32284bb3707587bda6af2e02a2085d7af5d53d833deb8123d724e1775116961ba3251b74fe5fde0a11cd773bf68a5415db3aa384da7cab73144794294038b7be27f448c82610a6bd344391b9e9f802009bbfdc2bead25c82e5ba1a6ce8d009c696718e52c9c2db84d5d1aaead7d350b385a06df5894d5a97e598722974d6b0125f2e3cdab7bc0d36aed449cd43d3e5dcc092666b09af82869c7f9e583a05122629d24e54b2d7f336818fc2ac7f0d88a7110bca673c96c6de2b1aea3db823146fa59b022eb8733c950247026fa3e11df931a1d63eaa864972c7a54cc5c7b29ed4a05cda5e868ae670febc9763b7dd9f4866f4db33c430feeffe5f3890c3de87938d9ff432422279038788cbf9a22a1f4ff2347eac81fdaea98276533b19e86848d35e9a35537022bc6d1317844acc2f1f5e980bcf293c6f1d32259230c382e134f65eace413cca509ab29f844b1be8b5bcde37b5103021fb92a9555556369b6e4497273dae9f7fdd210fb45fb99775eb998006f0bb8ed860c42399682fe1126d925b298b96bb1eff67e27b5a648fe05ba1c478898e91aadfc74aba9b44fb868a7c17db288acc4cc650a0ceeea816ecd8f1c2e052968cd72b527fab013702425af8fd86ee42b487861604fcb86c66fd9209c648145c1746866d30e3834a9a95792f4058d46465b4ae80809912d1eba00a71775d313352b40538aef35b63085acd6bed7dd1424ed78123f4db691a6020fa60833ddcf2d49613feddf2f890ef890544dbb795c167a9be2e997d4ef8f36c8c5a3828fec6b5b3bd241a7eaf108168c28cb9ad872c39625aa33cc1831ca5c4ab2b514b446c35fcc56d7f2dcc323a652297f23653ee61a84ccc70b3e5bdcebf4cca8b4ac153fa19ca8737267659e45213524a80e871599ec4ef12404b595aba0dc91115990c27e0aa9ee712bc4f55659b308cef2719fbc4e7a8a091e40db5899e7177473e127002014ea2790b15484a242f80a969cea618385a890d54f06e7040ac3bd1a9892d58c28f07c08a1517ef5bc66d5c1e2480cff9a971a4bc6167b082ddd115de703f1d5d7aa0bd0118419588a535bb9e74791c9043ad2ca9b9d607b8fdd2960b4e74341f1531d3d086201ed093ae578496635189dd6dcf979e8197bda806b5505deb07507afdd3b2840dcf7243369d05f5772d42adcdb6e39a5db19667b023bbada44dc6a1fe560f51dc21792e591301bbcc512b695178119648d748a6b7a1d80c29835042d2e48ee2ef4db8ddc2008d2b65cda658c0982b95880df2cd231c27e7820528209b3e103f5eaabbefb9bba8b0d7720b68b1de2ff187f35574e8e581f2530a6d4a792d01f6813d9dcebc23899f8e8e9d6d6e8ad2608ccc94c91e648392d229faf300d91ce011ccf13a80b1478649a9b7305d38ce75d462b951ff6563e83e1ded1c80db745932fa8241a41bf817afb1b3a120b0605d5d30bdad851299da16697856397b79dc06128f9cb848a5124549d7da0f099b0523874a5025bb8e7b3cdb358cf3b37a7f41f7312a244ae6703dd8d03f7e09dea8dacaf8327584f0c0c6e3d388c64ef89f5ea5eb76bc71648ecb0a4d6d7a895dfeb8da5051036d70d5a107a00b19d1b3764a8c1427aae48ded19358c421173ae41955e1e801ae8a0891cc16ec5e51673c5d32b8625f4dd5eaf66aa5008f30a57075ffffc2f1c6686f0efa9a7f3d07b2341ab9abea67209ccf3b5a5b106b3adbbe3c4d54fed5d953f851e10cd044cbf0ffbbcce7be01ce034308b505dad8e37a8c0c58583f7299645b616b8262cf9bf0d8e0ebdb222926b7610c81bc08549c41ddfa01ba17c520ab201e0380a07449cb256061b9598885b75d0acd56ececc6489645aac693f5cff348e32bb4e57749541964b5e9d568f76778063ed899d5a15b79f42ea22ade2780f1de800af5a5baccdfecf0592cb0a16a354fb321b257eceb696afe379f3af8bb4f6c5ba2e4ea3cb60b4f2c4e360389c86a86121158ddcdc8d692b232c4c17a8754d6279268e1fa39dd8ddf8b100e131e2cd8089eeb356f6e44c4bfa6fb39529749457a9464b8681b292fd0aa09554c447ac5e4ce8e0da94c31009068372c3fa391d23998d3e37b322d7e942b7fce9b6c1d3cc9ecec7980680cb102cc110280ba01510cee175d87316bd59da61aae45104342fae88907d501b422b871049bd14413075a5d98967209c2bf2e778077e4d9f214a97188163afea83380eeffbbe2811e34cb6d22b2fd73a8a7194bf175f70aeac21f2ce0be6f83353edb94044fd7265b096d4bd8cc68c296afaeb58e40f66f57b93bbf6fc9fc320e10cc91cce9530e01b5c6bbe41b80a1fa698cc13beed0865affab36de5a93b9ce8997b8c3ec980c861b093f086e081e5abfa6118d441b80fc9afb86fbb3fb2ba99bb48da3716e321b3fcb3be7c2b0015989a942e043b6c93acd7568254ffd93085e68ee96cc23b54c5616366c3300c4e5a5c49be52093db0903d92aebfe07d903511e979afa3ba9fd2b739a9240e858327fa21505268a6f121a6ddf0c3dd7009c9a4b8dc577f2f2eeff4decd6b27bcf2473cac8d4f559deaf03dffc809dfdb44b50684d11ce151a3cc32e3f3e7a3d06cbf7be665a0dc3e902bdc43928fa546d2eebfb2e9973f2bbc2f7ab949494871eed4bb45c40a2dbd1b3167ea93678c9ebb59aea51a713d7ffa3bc08642d5ef8885a11a17220f7163151ac21026cccf4a95477ff1cbdbfa172d54adcfbcb673e9402cd5e77838f9948a00d2a9366394d38ebb0a2a30462ea44591b71d08b7735b353a8fc22d425be8b829b3fd79671aebeeeb58f50423267c1ebd73ffdc380ccd69152b40dc4f83f134fdea1671cf90695c052db6d9ebbd2d73b6d8fbe792fe8e60ea75033c2bb44ab50f8cdbb68b334458138d0f10301cfc58b03377a3961d8dde68cdddf9d7444dad931c141a14d8851aa7e5158359c40448edd5551d421fca4c2480566f553a8fca39c135d050f6cfb57758c7136264329cbc8b3b33a3b2110ece51aac929a1f0171c992d102b170343f5cc1938b15bba85aee236cc85ab80733ed2ce427dd9810dbaef30f3be930b07bf8ca0b5328c6a7bc5fc285022761c3c5a523a00b9738bf831ba190a0d04cd52d642e6306d289533f39320f68c1efca4045e31b145f059c71158f96b5337d57478f2fe4285d775b7958b50a2ca1499ee864ac71e315d738fa1fe2baf9aa17ac2dd09cbebe24a19f52977b5b5d9fae21b8fa130745acd3fcdbcda781e1fde978139fa12928d7964b17d3da60a1604c6d0fb08bacefd63af687ddeea9690d0ea9e215bd142f4ce6f3b461848f0a46eb8961b1c383a5b980c4de27c4f28e0930c514946f17be8b12620c2196eafceec762a9e91362251767c33c606924ccae3eaff55301a995e5e418b2cda9ebeffec3231ca377de7b44a164673690711f0170349f5103c85a7ec2ea650231789be462d446a9b7daa74c8811679e9587e604e380efd905011a0f78468cd06fe372e0567264bd72f37aca91706bdc6eae2a5f3e7f80a5c2f7d80ee6c21e15cfa629033f0aff5d83284b05c1109a644f05c81f85c7deb52a8c505cc022fa0b4cdcd9dd13b02a7959159b6da1f6eae7f6cff36681d81678ddbf89d88d005119378eaee4115674b103f05ce73b9cb266f7a258efe6468ffaa5a5d32870292b1ce8ef2e21e3faabecdf8e7b69a592996f3258519afe2310ceedc65587668ed2afafbaa3a2aa0d637ff48f90fa2b7bf1a9afd9bc1e47124b671e6681a52a07688c2a0d9546dfed118658ba0e56c55a4925b1de63eba2fecde6a8c99e87c16858b93d9d0e984239835f39ec69907d227eeb2e6b2b9cf7fa0b3c910ae057bcf58a92660720ab87cd715da0f15d92002b7bb138d36c35a3428f37b49cd53e649cc5d997e19432f98b08018bf95ba3c9049df7233887053290eb883c636048f2ad9787131da70848a5283862dccd5aa6a6c83379ce0660d41a69dbaf72b040406b6854c92b3051aa5233c22d530adb3343c274f9fec5fd531a34c9c152dece701fa3c94c70032f6f19d28826fd62d3c74f45d7c7b44d61a775d2588b2f5ad5b1b7bb2dc80c2f496de402aad1c299ac7e3479537d2aefa99f876123e6251ac824aa228a2af1ead81e003af09754b81fdd674887ba71c686204284c7cc9b7c7e256c23e78c0621cffd6bc4a4d779a352b93a2cf8eaef8dff4ff0b65b6a390b027816a6b613f59ea277f75a3eb7efd922ae5f6f1d039f220ed9f50f0398ab1acfc1fc39cf1d73493c02bf7884fa8ed6d7f4f491712b274272867f1cb7aed1311f89343a4bbc195e4bdac1c2a6cb67b906e3a23fa644612f13e69321b6afd6d6fda10744e593e4444bbd3994f2fad0f89af9d062395ef2207286d4574cfa85fcc45ba918352c4f31906b9efcff3bc163f77d7b154dcec758ad2d7bba53bb4f0cb062a2fe9ac1e406485e62cd5279e99490aa7f3248c8b6c3626e6ee4513e88fb49fa81bb1e962ca962bfa85edf14886b20d3f0f79b9b0ff7f31951e85f607cb6723d4828e8a95e6d0aad84f82e64cd07d3f25f9e552831c269d6cf9855fae2a920b74e68231866806b3addf1fa040de6b78375ed30e7b8fbccf46055b4b9912bf7e92b3b12307630eef7045f9098d5c0d7e542634c385c088f44f40c5e21417794f7ef2e24d81503a11b84075a3bcd2fce8cfbfd910e172ca6bcc9532e67df0fc49af7bb430a3f02e26e43a91f58259c6fd30008c87f76c37e2e4087cc1ed25c80788590be7b4b049f4456be954c8bbe2a32b4b44c2bd07430f985e4369de2556b1deb03d7b140d5ab8f086783f75370d11ceff38f7b100d007d713ea8118b17e7280f22608ab1121184c8f7eea45406e3965772c5c5dfcabb500ea4dfa509b082cbf01a402bca75682c83d317107a37e9e7acf93a0e449b8545ce476236f8d0f110ead10c3b37986cf4a4b0e12a6bf22c36d5ee9c1c99104e9d23f5264d2935543be51232112d20c8b8e9c32098b0803384c25603f32f6fe7621b3ad6339dfd73a7e003fdda3db46711db37710e0906dfc230e94b9377b3ceeeb1de9313ccff01d66654360a897c6a16b8c89c630ee5143df3cd8dbdba0066daf133fc7ff174de07eaa2f3e83428faf9d955b460fa8162193b7a4c4988aaddbdf88b22d1020e79693af13a018e3c7a8fbef7b0f96d9893b06622b0f95b4964eb7e18803cbd2f8cded83562fc46a8bc02e7510ed7db66b0b82f3a8a2ad117bb9f0f7f1dc8325acbbc10c49b666f87ed3df5df2cfcf3909ed9cab37e03ce6c0f302367b2609f8f855aff48e9e00107af5be3c9cd6dbc64b1944ca861059337e7f9ccc7d912c019643d7f01e2d8b1f04190d391b1a50ade72ea57a7e0fc90438061ea346409d59564ffd8b07a394967e8b995fa9f97ef7514341036882f2354beb52db10585e8f72738ddbd3e1ca8537bb1350c8c8989cc4cf21409c61993e5cd722a6eedf5449f0051e45722867f4bea7e07cae42b5eb5bea478c4f58c20c22e183d0f3f4c076c2ff53cb7f014459e2c7756604aa8a3152d3b2e17bbcbfb8671d024e87dc9a4d63dccf33fa3d0b0f022d4122d1848e7a77307bb38da936d7e8fa078a0b473b7335e8a071ee937cd7b0b59587724775b2b67c486a3461bfe62b9f9a9a50f4411e5376af25dcee0d11e955fe27f224c061c7e876d275824d04507e9d554efd4ba8163483944bea6136a720833f81cc6f51e4e73aafa87d0d4e8845436d74fa6d38b060a47f5814b616ec18b4ee22a2162ea74dca6ab7a3fafaa53fa192c61afca37a0748d28b2bdcec3ce312255264bd38debff2b3b7dce3152945377c29a8bc7717abd7578a6f7601e5724bcf6884e82e36c6f14241f02b049ffae98c8f59213426d4913f4f2f21c6337518dfe978a93b7e962f43b4114af214a6fc5d07d31915d353c76a8d0213a636a816975d8d9d57637bf611497ae526686aa516dc8f3d4c4ea2328bcf8d5a13037e2e3eaf8fe51c4f5d21ee9f317186c49ac91ba1dd993c4fff29048904c56800337a48d8337ab08a4f00fb47e6bb41a5f3201595068c580981c81e0afe4cec162b4c3aec7dccc8fd84c6c155f9206c2b4634bf7bb18aee68500387fbe69fd4a408ea1e5ee5e9b7a155e5760699ad5cfe927bbc181d3a4b822e392e92ef9ee49689f3f95002f0a15e5364d192e03f3426f8920a08ed3d57ae60e98bc2aa599e1e91973c5176f859bd4435272f73aa80e6509284d9151c590826991f50128bea7898fefefef8abc9927607372c879905c5fa16c2dde21b6bd7788d0d8cf1ad02e6b2635ec30cdab786b23dd5b52b8cc72ef19178e4c4d40fbf6598a61dc2eab3e3a1e03de726e04055bc1041826bdef8ea2ecd7cd5e9c72aae0616f814c8f3a1832081324f2a572eabedbc8a8d6cebb351fd6c285037b13ae6c50098409c4eb6c87cd0f3af4a96d681c4abeb266263f911cf8185b1f121f7a356913ddc04134766679dae618d987122dd6a0326cb015eefcc4eab4010e6ca7647ddf2061235b08606e80ec6630c18587bda097057cfe6d33469e3e7e41d558ddf3628b2c100d5b0e2c00c2a626a906c50faa21d3f5852f5107eee24f7dd26943d2fc1a98c4d160d6fcc2780293993ce0eb59a098bb6513ad4f2ff70ac65985bb200cb28c5c903150cf6a8948316e3104a5a88bd6bb5a39e1e8bac34800584ea7592c0b724aadf03c89e5f8717e6064dbcd43f333eb0ef2d64d1bf109593a34abfd82bd3ca4cda97202c634fd5068fc50c516969d9c8c520bab1949e6734eb8a163bdc16e340ef35cf3f3fc126ce5e9809b9fb67b0c9443f5e948617e0e26b82ab7b60f3c7b7219aea39af01744037b33003b2de40ce35b028034ac5bdfc3d99274425fffb1e4a221d7e95afb579aa4df522ec78100a1e8f1f867a4b5f1ce7c911a4446424b9637841e3c835879f169f4c87044d3855e5fa06fbc158d5189f3e205aac2d0fd0bb5bab5145aea3a5be8c7acaa5670b4c85aced820122ff78c6f21e5b69f102bdb4c39e9c33703f764a1142c2feddfc4f506e7f7cbf3af7963748e0415f45074ddcf32a9ee0c089ba7b7bd94e83b03b3aaacb3b61b9196c24ffc1227b054f4a7a71ad325f0504bae1244d51c39a0ca3354ba9c58f6c93062d91fc0de71db5f831797c7755d3fc04ac04d26550a3cf042a6aa277a66f4af127f7e3b0e3e05da2b5c7d4543512da1d03a810b2f12c292be97a13a2eaa31d2002a4b463822aef72f657765f80b4d7c3b36ca11b1e733ae3239c4c6d15e614047c2bda95e8d22d38b342e0f357668811496d01da52a4e7d91761906e6cece2da1bc8dbdaad18f7be52f057cacdd89e2e13050669684314c95868302140ea1b61d4ffbfb2eaddcc62d16ac6c9e32ebd69ffd4878449e1cceb932989d80d1b260649e7a89509ca94532db4c93e6e6beafce10d33fd4c8781e01eecfce7239ac191d244a9eb5cc041c3ddc721a3c049b206f4ca543dc0ff57efed12a70edb015ad9b3428c0aa3172cd8cdb377e11113137ffd098c652eafb09c6b81821c238901fe4cfd3ff90820395e7e058e6a848f5e84b441db7bbda30fc7ccae0046d97057e805b506d6ed232cae809a55f17b085c8f9cd58f89c11100948f9d66cd58ee399f186acbcf0a18e7fb58090778265938df123c3d603dcc6334abb39bdc4d0f0332cac678c5fb8e6ed08dacaf75ead0d924c02363148766b5bfa6ba234b85729b2eecf03c2c8f915746fbd12c5875c3b2ad9b1e4b35064c311ac971db11d2977b08ad37855f7b0401ef93ae75d8cdf46bb78d87b2dd16837938abd8aead17e5a2ff22da1964ae9aa172b6704b8263c52cd591bd0ec7c1e85356a6df158ee56db5b4e4efb35e0eab7495646f0b3d61e337aa5e617f8c036ba685bbc25d42b565437785982207bab8a4a6fb7f2cb555a049004209b824f724c17f81ebc4d70b356b0e9f330af74aa34b28667901c402777d955805ddacf4b1a08b24f525c23a7d8ea1529152a53bdd08409e1440ac6b99f82a568a98961876f0eed9f61c65cfc83d6b56537b405ac6edabcd4e4a2a805b8f267967187b4fc0855534d2d549732ac016d3ff1918282c1ec6b494d15c89ac03eda726a0f6f04c5355ef864fcc09d835d7ed3600e2f6523caca49b625180365ae688779fc549cdd4b05ab0d6c0552500458efa7a075c7b83ff8807021de6242e1875b96e00d1eaa872aa68e43fd39a757590fddae76981554b247800d3fc949e466db6968645df23957cd2d4157065df3f581e4bdc8a675095dfb37d9f4363d74feaafaf2241e0205874d570f91321ffee260f8c5891b762640a","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"e06b548b27a7e7d8dcac8c756dd3f2bc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
