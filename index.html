<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"99fd2c59debf7f6551541ae82b07ce93c939f85a431539181a7700fcbe28434f52fefdc5f2670ef60d5bc18d9dc2f572cb516f249a93974e37f53f90fba403d14f2c612cf1cb4e1de28246c74f623b58ffe1ce402fe630df711b6d43a4c8e3829d3b0fdd7611aa643b0c968808c9f2e35f3151f0b807a5821bec66baf3d550328e448fd3e68a1a31d246e3be8c7b8a7dfe64796a88bb12d2d1106bb360aef8377cb4764896705d3c971741c9f2905386d8a4b726673eee5cebde34421f11b0d6f71645d1eaa4ce0b94c469ab1fbdeb73be3516d7ad4202271934f24b7cab3c6c783548873bfa9a31ef9df06e5b789ab5eeeddc15bfb0352980bb7bb354b9b3f034c053aa43e554582be321b4663c392a6c8f99b9e1835a71228751d5554123ab7eeab0b80b095bb8c7bd2223ad73e4d0b4bdeff159730a67808d9d9b9a8b5342fc84e591b67749ba995952635b4b2b293dde24b4f58b87b63b1bcdee27c55c80b93602a9a66cfcbfbf32fbf96b9f7f8ffbecabd3296c159ae3a073e6b40289015bd07b4767743594adcee4bcdcffc047cd681d4ac749b53bca568da4430d983bf13742f8dbc4b4613c2a92e4743a66549ac38f19a9a4eb8dbf1802ea5e5f5592fcc4d267917b78f0135178df1db420fdacc0506d10b5fcbfdb15466dd148f66ff716c977cf21107709192b0deaee89aad83c1971c30640bd47169cf1ebbf8430acef09628e9ef8aee6b436cefa2bd630d88670c3379b6043f2a703becdfb213542285092076054f761831ee8a49af0020bdeaf67ba713d1523c66479ee7ee8230ff7b995891c41cf1e7a0f26ce314bc49dbf80780f8965dfb221a0f5b52e09b7d2c8a67d02c087d75e521167a7dc4b5320d57657920ab0c0139bc04406098771be8a49e6529b62abfdb16aaae0d905dc1771b61941bf30dcd3b5fd20105da5206c7b5ef09c115dc42d4855e3c560a48cfd1e1f401f5034244764f02472025517226493cecbe2a53fe1c4f70cf1ad76227a1bbafc64a31e8c8cebe4b9e50362c0529613cdfc112816e3f2c76355edaebbee915b3dcae7d0b1593714f7ffbec3c714beca7baeedf2adb39c9454233f230c4fbcd5becca86cbc402012ab28b48af9827745c15b8c6a2dd1ecd2d4f46ed80a4c29cfeb2379c10de71c7be5278a748d7f260aa824343a15dde335d351c6c83f50d34fd3cd92846aec117db3be8dfc7cc487ced3dd9c1b1619da7be34fa4bbe48e8578313eb6096475a7fbf98c7981580d5fc0bd18af5630124ae2c2a093695d596228cdfbdef1999d7108ffb85a736d7c3e99a36b8d4c0a7fc969b0a6d95b1ecd4dad85658f1fe61a5b028833319b4762d5d83b9454b4e5f54ec74d09f57aa60835022408d8a07ba517bf533df89739ac0cdf51cf7e1ee599a587cdff80a7a599ab73699bbeeba6eacb04826149103e4048027c040b29edcbbd5e1cbe116e9c86cf9646636e8d49d0b2ac17b439f3b3ae524249ad5e34d29aad9cb0912285eb7312e952fd51105b9a7c8ab39a4ea7420d398fa790d1c168e8cdd745f70cd79a8281ae944d68db0ef86cddb31efd8178b48e36333a82cde4bc0bf8b83fe8c8d394f6af87d2f692991055488e0d315ff86a8af4edd64dfec022957ebfe2f24ec5980af2cf3ae716ee8e55cb6d2672736ef28979f702d9d5d0ca5b81ed91275f4565e1a23104c602272869b834304293d8e354169802096394dfb7bf73db648d8933039e46bc7d14ed10e32d859e12004fb6ad4f63094945e44fc687fd227ff32b26b295fd3b16d4b4a169b97d00b6a1489f82181c061ed2c05818adadfc08606a9fbe3328136210699303ebc8ecef9b9418829b907f1f82c537a9b107410e71bc6091401be4e4468f9d2edeae5d050c19e4f55eae23080ca18a2fea3dc8cc96edad80effc990445ef95a4b8ec45b1071d0c47f5cda0540550a80df3c38ce93b69d186a93cf67023e812db42b49fcbd6f144635ec8b0cfeb809529fefab154997574715a07324c907ae48056aa7d0b8e6c7fd5ccd731c269c476cd79419e6dd5b5f744c18f3bbd6d74a7329564c09fec906e9bd03c6e4e44a606c313f93afceb4a6823d21b2a32f5016fc9446ebc9b31adc47617aa3a6040ebe986fd52450eb3d0fc4a33a005d102debd4473c65cc472c90cc0a505beb5cb860ee81624834f97b4e5103b05f4e5bc2f0409d3bcff7b31e24673dba05879b02396f3691b8ddeb73c79a34b1c2707ce73e74bc57592823664960a94415101a73f0a3ab813a30d04ce590fad3e7ba0343cf2d8665c499441a35dfa386bcb72b0ff1cbde7e64b34f509bd95198d37dd78a4bb87b582419df67039c1373af096244487c1e30cb0b65f4a876dcbcde3a81e61d979634590010d4070879c721ca4cd3ca8ad2ef96871241ee7583ae759cbd3b80d88396e2bf4aeb1c4067c85efe525cd5921e5ef19309a2ff1c1fbe03a31958cef3fe5d0c44e23416a63749e18a1814d9b7eb8efc1e5d548423b013623ee66e801b3c2a697a5a3bc5f204006420a66c311699920082e6b862e589fd0105483ea9c3c272e92361905bd45066afa0e2667132bde7386b7565dd1f90932be56935e5495fa8563bb9650d87df4f65ad5673f9d4f5728f0522cfd44b9ec356bf39361367124e05e8b08bdff64fa7fe80029fa39d548d00966fca08d54bfb7ea97877827932fa31155411c3f978990adc496536321e6910f0a9dc0b4921a88aa1a33e578edd647ceaf5b04fb5a1c77ce527d896ee345e48b64f9f1d339bcd7716e079669f7fbb5826395397c8ecc7a939d61f19d59a5a94686b13366864200aa7d898dd102bb08e1d3d9e8ed5a91e1100dac3e7db24c468a884029fee948c07fb8698a6b461739a5dbbd49e070e4f8b9e12e7704e19ccd5ce19a4eb782dc6b345a9363e9b96ba059da906f705ffc3e21612f88be94818544fedabaa03cfc493cab1e065e760f77426bb4bd4fc1a56cd86038558161a8446c1685b25d97168a28536c0ece45e7bf75f5d14512f71fabf780c666591c49ca923e6f830f8f61d52bdceabbfe7f074652471c51caa614c53df22a7abefc41d0e1bf21882ad89a7dd23d59e3da86e31a845ce0c9752c2182467bd3889e73f54b10bf41379ed9e47c781f4daabb4851391e7bbc5684975ad1ff1d869716a47b0ccb4b5d70aaf3248ec86bcea4ef8e78462901c421b24f88fab18b469162d4af104a8a5248444a517e81aa49824b6c350ab1a3433bf6b77bd7d37c0197d307b2e227043c08962a9559d01e50e50691cc9e839c7fad6958353afa8467d6a76111ff141ae3391f33613e4459085a5d6f8de01f07b9961823a007fd851f4271b1c686d5aecf01fb2029811aed5819ff2755d46dbf224dfeb97dddd50d3d82decc353ee2d90303ca345205299c50ba894cc304f85812abc12954315175c4e533ed96c69a61f44c09c7b467f130a88c91e2076d17794337334c1bc3279a6efe014ca7748dbdda0bb5f1dd476af1b0673088a969c89eee0bba73b96ed8f89a87368e3959c2965c0fd6c92e9442aef8850ffdf03c4488c6861f8ced25cca04301d452adc5ee944d78dde42aeadc7d60e45a4fdb0b7e801cd00f9636225d14a7432cf6c6bd5062d561e6531876e06fd2dbb37f7ba83acfc36a144ec8569ebe6456f33dcdecfaa63fcb1752dda28f22bf4ad151d3cb1d2213a6d4fba99013adb11780311d9092be7aeaa8491affcf2b32aa11c6edfb7effb036522b5437f5b574b4e5e77f449d5cf787672dc720fae80334ca568371450a8475383ebc0c024b48b12865e51da7a506ff6306401488af96d4bbdf3587fbca9545858ef3769366f0904e79e79a10864c41def8a0332c93a9fb3a87c08ca844725dcf93d86906d19c106891920d2e9a64f4188bb2f496c6a97da629a7b4712310530089ddc25bdd982be6d7e954641f843baed624bafab9f434c0f71a6efe09b144deb878ebafa9990f5088f141159d7f824f502d2bc23aa88e8737ee87bfde80251a3d8f1a20ddde214204b6bf4f8560a7d74167a70cb148f298564c2eebd238d5067e2d41444bfd4dc4907a5e7af50678bf2b5455888b1d0ee63d15f73e01e3abcbf78e43cc038bbd13dccd3cca3646300d89d04e1d25ee50cb75e065439b97cda7824276671108d6d4f189a1b55234de67e7a6490b9d5aa9230fae449b16fba90530520547a84e396766293479d9b5d2632437bdbb2cd4902bcf1ba81ad74ece19d40dd9d2add807181ae058832d7ed5253a6d95de2b76789da2f6944ba52004521e43b6caed060f39a042cb4229cdc46c0c306b4ceb60e11ffa0ddd6c4cf31c2efb2412986c75c25a8e365b8d1ec70a278f1e0c0372ce18fde4cb0e76dbdf191ae85b550d774352d0970f962a969482c75161156f3ad8f5bcfa961e503b96cc7866dac5c9f2d688a22ae94def0071fbac4672fcc8d7bae6bbde81abfbdd157333654d2f8ee8cc4b6af1ce0834dd998ea96c571ad337ced313a99de908a82acf7e3b96a5ff1276fd99e0051ed31ce8f16a4259d3acca38c1d631fb99a82fcf7b145692380124857e49a9536ed5a401dc177cbd448b48efa55c4f9202b924cf2461730d00f89ef7d1722a1c2ef2cf02807ec4faa13ddfea3b3b7dfdd576498a3ba6bea2ddb37a7e4c251b9d5dff265cd2da74ca51159c844b6b83c3121a93ec9ffa6094e0b72d1decc645f9525939fcce645dd7d9bf9abd7967d45a899d4f33493c4a4a82454a4faca7a5aa70b152b192b6b4e70db5adcaa539482b0e1417548050a683da5ecd79ff3d409766976995de145de276d671c10c6a0fe25629091e4df62769f9de3f9263c8a9edb048d16c119b34ede7289897e2fb286ea7793aa4da03379f6d40dd4527d64342e53aacae4aaf93c97fd2e7066f053d324d5006ad42c8e160444ddb7a9c09bfc6960af25f5601bb7bac714465d850cf0431b750b6316280b938505f4cb3a42aea5e959627f171cd1d9a68fd0a16edd1f7db70fdc67a9bcf157931ccb11e4461afc4622d9e838edc5a0ed03d4008d8c1d611e9861f1156e2dcda2597937aa892580c064d0cff89d6ae9b4bad85afacefda938ee1dfb76367c8a90a1e519cbe48ab7e31cd25067b3f2149aa539828a6167bcd13085af61fdccd8c0e2cd52620898106032f2d1e911a6ef09569d2f391c3b5243ac6edeb6f4899fed3e14254befb838c2121d9c9789dc6c38e39e47beba71f19ad002f8c99a39f1f0583d379fb00c14b9aef76ec3fb6a9428c2fc306c55c9c593d5e864857b045a842eb10c80516b66134f839e4d0df368098b0c69286f357f3f6269e9169d8c1a00489f5e2c9ff37417be5ad2e7f04471a2caf16181998763c9f84a5d269225fd9d73bc838760b20667c52fd108aa3b3b3a9c62a3fd7ef0f686f85bca332dd7aa593ff27453bb7e347a66b9cf02ea7901cc00c38b183c0d5ef8ada747ca15f2e1be76131f8b77bcf04b1a937f70822e6e318cbaf9183b53ba3840ac635c7c7df6e7966a7f5214bc74338f1dc9c9bd264cd50af7f942b5875bc1e6a02d30c8135a8e10e30c260c6aabf3611e158215f57bb161affdcf1c1f4b7ef82ccb4246dbebdd2c5ed8e672a96d30e6a33557c3e2c2f7280a652e07bbd4fdfb769a26d64291992404f6ba08734cbb44db97086c67e345838b98505ddf5f5615b950dca7dd1c74eb3651eb2b5dd0f6eabd44190aa5de1fe934e6ae000e098e92dd4806325b655140a309db96969b7b4c418854fc918f53bf78c1a5ae456e492d529916595e62f6e3117b6f60e8da5678e580a80de6f1267544e827ab0ad2ac326092edc716db5f6f21c71a01177b8b816a061ba958f3896483ce2e59a30711fdcd13fb72fb9a57fd1eb82ff0a96c86ef511f751cb45124ad89be4869def4bdf4602ed1a439a290ddf2645c53bca64c62a3b39cf44055d9df2b742d8ef313d23e8a4fea4ff7024ac76cbf2550fd45c112b1bff01a5486e4f2fcefd16073aab263a9c2ba1f84823696f6ed0f8731b36560355f2cbdb121904ad1569fb5e0f3fc90e196bd45baffba030ccfe05a293243d5d749fe605751af7fa1d3be7b03983106f09675891d084d3d5b250d17d72b790468cc5ec33ed254b9aa8536c8774480b1d6c6e355c427fe9c7feaaa65c1b0dab51a29f4e5ab23d9f7ac3057e3c34b5317cee0c17b22e55d748b77f1035f9b5e7b51975069bc52456dc37f715d876be6228121725a169db6f6ac5cd1116d6e9c4a6504b0c8e22cdcb6bcee6976971a048b4b428a1a57d388c9137b61efc80bb2811fc28105df54cf05bdc02e387e1f8302534ab5c40e3484c8520628fdf0420bdba57cf8db30497efc988c8906e5b9d37622a36b196553fb0dc0576ecd425f35c6e8575f519b2c159c9fbdf7d7982e8cdee83fbaf805140f83a2e1677c91d2f54c854af8e7210daad087f7ef32f8ac420d6b33f7af58d9ef1ff8d394ea3e00eaaaa0c9bee822e7b67f6cc02e7a751b07cbbedf3c59ab5b661914cc0c0ed70514b2b94a39a63a5733912741d127ff7669a29ecdd18f6f90ff9f42d0891adb20772be99c8a217b4fd7b526ab7fe226b7dae4c9c497f5a25bb75bb5a28dc8312fc93c3fc329c612bb51153985bbf9ce7d4d64432a710d51517c669d12b4a2350789c33312d0acc15cc4f13cd7dfd1b4f5a93d00c8c529cc26d3c040e9d441631e51ac68f2a5486908c462e7d1a0d9a754b4e9974e1fc225e08e11e2cc51b236ed2102eac17c8d6540b095a78ef125a20ed554f2714990dd19edafbb13197667981973bf20fd5da8416cbcbc9ac50e5b20aa8c48f86c6e6d77bae2c4e6a4bc300c7f204cf594ebe3b59e78845271d94988416cf721ee802709a150f648336eb950f41d5c0628ac719054f907ff54cf350ab43a88ae2f6d29c185887651a4f8349f3a211f520ae203cfba03f77b8a4874be5a6a6fc5935db0a837865bfda52d8e0e2f03c65b3201ba3e1e9dabf969a03b798ee106d37e32a9e0f35cca68e353d1e28b01fdbba8cd44882945916f06147814ea880c2a54261018e212ac030c2306652894db004144d476d724d743ea901ef8d88d237500e75ef614148b1dfc7fe4d40c9c3c9d3c167473bd54bd19fd634b124f748088ae1cff7f4625042792adf6441245e18d656e59ad521ce358d58b9253f708228bec7e10c285e0d73fda1fa3ad78382886656903def6ae5f4d77c79ad07a49bb3fd680796e636c853e4eb6d58158ab0fb4216003043d9b8a857e308828c569e0d827332d5276e8a10f7a40eb90857033a81bc00a5a0922d8d8a612a59991884d976b405873e7ebbbb297ad4fad6abdd698428e4fb41c34a617c1ff24dc7190dd40d3bffa16dc637775fcf89ed7d37d68a9c8c4a8d6d9e42af282a241fec4e798fbf0ff6502415ffba6b7c4e6c91924068e854f24c0b19c0441d636a4e9a18b98e7c1614078ed878135bd9f5ec5319550b95419f8a0a537fc5c68d0f000f23038412991c2d93444d29d5fe81722352d7945a4577b113222585c8d478651eb432f07e113451d221a2e2ece875c67b3826275532773f98f567b225785ff22bfa96dc2bf22c3b3dd96a59420937b5f6076aeeecaa9ba5a06aa2c7733824be0e5934fab58b51540b934dc70e46d9d132420cdbb5b37089bfcee5143297e216794ccb0890b3522e618c6065f86c4224d156faadb5e9351518ea9fdb23bfea08c37297a060b1cad5620041a156ccecb6ec931366b98a70f38e39db518efdfa60005a83352dd6ba0ae886205b93271969f8ff4ff81f603b2ac19231b3179773d3b2c9f8db36fe48768556653b000e3472a4e2458d07247b453face6064c056f06b0742ecc21589b0e78bcdb79452cceaaf75e2bba3b5cca8d6d19c7b3383dd393fa9590ba2c5805620f46c374ee6b24aee194131652c2fbde1be9c909fbf4db9520829d85243e2804ebce320f85e836cc3e680b5124c14348596550af77f607ff2156d1e9f06ce081b58316189fa4903bce63d70a24eff155717f767577daf7643cfc1ff32effc578b9da98f2613941ce7e35e910ba0760dda67bf29c3b80e80fc0499117781fe3d4cadc25de5dc239f328ac3c70593be066b94d45df5ccee5456af3299cb0c3866b94fb785f186d9412eda58cd4c99fec8533a9fe9fc9357990c6afb414e8732372c5d49ac59b4f730565e659afae16a53843bcb4c0bffd357cc8a1c85992e7a820d732f1d8c6f4f94bd1fc06045b5c6e63291375670892533791286c6764808b9bcc4660f5ab041905a49e6edd20f5ec54e1df8b9ef77a181dbe1a8b95f3ba594518d4e36d17de3544be41c46ac457bb37055504bba052deba24eaedff175eb54a26ddfbf5715bc554f05f93b9726df939f6d04b9b2ed39f8c06b473e1dfa4bc397877673952d5e8f0bf89adc44e8f78fe18710d4f4dfea7d4db08a4ba034217edfe0766a38632dec01896651b1d7e08b40f6f7820ad00a8877399076aa8af63ca161b7386c2877e5e430f94c860b4b0f38048ecea3bae5dc9bb1412449d25687aaa9105e6ffa4f5bcbf4ff76fa36e88a28f6da5c479e7873bb5192fc168e5544c4708e4f7042626c13ba8094ec00f02e28b297a195dece6626379c64dba9457ae70e84b7ef82e306ce2fe7525c9e4abd7ab81546ef6f124530bb82ebbfc769699686e5ea2f99a3e3f3d7027f815ce3f2974053228487eb2e3d063e0866cb546eb2b744788f36234936b7ecd7beb5691c618ff20ad273a2aac3508da20de1b6f523810d623f974f5414461de2cd20f5646fc336f1040a5ac2548b481c569e4d3027cebd31550b7ec82675cb1f75a5d5d2fb40092620835e4c2b0ed8fc25fc96aa6b842de097c48071de2e0227a3a4f5376eafbdd0a9d1ef2bfce90e323557127ff7c99ed1d19d0146df6972917039733166f2fed2c3ff8f239b300c993c22417cc1f64b8430f999f2b0d3c818b194b27a068284a2e753b8000a913f2b3406fe44cbc8b9d84d9c9adeb6d25760c1984cd3558e95f01461832c60799f720f6041d99eceba78ba221127dfea8efd8c13087f29484ae902847adc808fdb440a6d233d772fb6826affcb1f4d7aeff353d54abbc4075ce6d649e1ae61bfa05d2def407c73e70eb666d9e0cbc65281c7061ac88a38cb04dd2577ea499e7163e9b97472f9d65e1626ff11bd863f1983149049e6e89fec6ee855d1279b7fa044f32689d64c4a46d95f2c95e7279a57859d7aa2c6502d69dec3fd4027aec352e9e23f3578de18cdcacce45a0b7612adac42c80bb51abe2dece9563907840565aa63ba9bbaaaa02c00a3a9ea66ec9b331b6a110c62b9a8381401ed6ad7c3da105cf72b546c4727048d2642905aeb40f115c6077d6420eae9fec3e03b3cf4a39d98c2e67c52870cb30f3899c6e4f03397efc3347a74841022220b39dad71a69125082eae673ac063144276c046d8a0fdacfd1cedc70fd3db0ed3b08edb2341858285b774c3d8e7dfcb7fff98284eefd3d81963a7bec02fb1d9d726dd534c34bb9f97c95b05a0bdd40276de75717a25b6a6f8dac650f325200779d470e9a1a3058346bdcc407dac640d166ced4ebd0643ca49f4a821856468f1fff06f76d4c1673952a6a9461076eecf6edac16ff64f71b87828f321c1649d112ba97490f80b0a0f4a753f4dcfc52ac5cf45f92e764c735a25385111aa3259008adf3c7db4e0c64d94f98a1e1567d27e6d7ac2f1a35f2576f530b86e941b2299184002ed99666b6c5f412ddf0374c4a8cf2c5411a43a5fbc51b1eb3e2881b47ff244c712bbf157a89a72433daa5b89a65632a7015d3747f8e0e30cde28ee1b3319bcc38a622a6b582c1ea28a7fc3ac8e64da73f211a03fde89c558f2a01ce7e87bca343ff07bfd05446f5bf6ad6c78d4c6f642e81d47f816370579ad1590bc3ce4b1bf8c6b95d4b83b4312e5c84c2bfec8aba7c8c6a1fd18a450fddd42abcbee5bf6e87e434dc97681a06ad004ce30ba70b6cc75bad64e8d8cb127febfe4f3cdf91a2ab76832739e5fa3e9589710425e2af41485295d89a2a7a0f229b4c769dd9ff07d404c0bf7d8fe29adc17a7eda508d5bd0409017f89c0892c3ea971b1af59f3f2e7209d145d31f1e056b6bbc42f39e6ec1967ffa0a8e0f9a6b2258d3d318b54752b621523186ad981a9c4adbe09a98a9d6dff83f969f33517511a372852749462e33419d361d43bb2f7f40a81b038962c456af593e1bd6d0344fabfc30e67a78a887f8613576b05a405b186162e9db4c0b5fdeebce8f076f1eb91dad927284ac7c6cbc71d2e685ec48f07130190d9db58b7758e55f706a8cdf3f9c685653da92bc8f49c504bb08c53dc7fd9a13ef5ec009bd88a186fdcf68d7d2bb17ac7c70b36ddcd79c7d5700db4bee89e4c45ce7694bd55bcb28b3e60d308b509bd0d65dbed95c1c021caebe5746f919843c44b2f38336c61083a7f0e478d76e3feb06cd9d15925f68a5f9f5fd28cc3e09f222670247c7d4f62096ddb3ab48998788f0e63f93d4a82b91adb547c735d429bbfb21026601333eee7ee25ae790d2fcce4b5807a297ce4d79753375ab2d8efd97712cd295199811fc70709712539dcf35d0765a8b5a3846e8e7d668f3cc77df47abb60b21eaee41fd5c2d19bb346382eecedf7b0da6591de7459e5c9ec863acc6630e89461b4552b867d5f243421f6eef078c558490e1d79767deb3a124dbf63b46008d7bb7ffdccc6fe0a1eaa8b624ad61450fd9a0e82527de391218a2c652af33b53e4f7626e8c04690f378885064e6f50bbfab2726a3ec65cc41546c4e0b92219e74a6edac990dcf6cd8d2d35b4e3f61a45474b00b9ee53456f0917f0a3703c608959bd7afc36aa8c07ff44a69e2bed58ffa91483e60d54556250ed3e8dd3d3c8beddf9ef8324c63224280a49232aeb61e31381e138e0019186e9ef080231cd04712b10b449941374007170243aeb903d23251647111753c44820a08f726ccb17db886e2a6bc0efce32adcf5890c317ce991b070696eb53041fd92cf09e8d22e2c75ea2159f4be55a2d15293f2795a2a097f1f3d41269cb9be0d8865912a5c7ba1eaba819a88abf1421fd7abf7f4eb5fa531b8e0bed1431a78fc950dd6bf8a6ad244f17eddb7222981c50244a69188b3e3583a368a564246d35b522de835ded22ade520285696a4106dcf5d2b78f31146dbe8f59caf400b98d53f6586102f3635bda75e01562cecfe77ca06135097684624e4600f9eda785cf27f15be706c83dcc62fec295f65b5a669934a4ec9b6b6b3a012881d03ab9f2ba141fb8b457a52c55436e56deb30224d533fe1d6d91a5b83f50fbc0a10062916b55bbf49a86b2e6d2dc16cf9053b76ec06b0e730025d4b5755560e96d57e353bd0f262bb2b3b8ffda30430e9b8b426a4c4a6968dc73bef3d715786882bd51dfa461b6adb3e74cf1809a17b9610c1e755b4c4174f1445ba24ceca56c92313d4fe19935be394ec4a003278baf9dd11aedd294a45bf82d50b31ee87646bffc0462ac81b770d1a8db911ee6af7d5c1ac9831dae10c482369c2e568640030b0d71ef1c230ab9df3c01195931043cf3b4038aab36c7ba91485425b43c00d41f7cd8583bf1ca0f162e10d631d090a17a5406447f0a327601db5b03040dab3edae28de37c2e82cd764af95fedfc66ef1b561b913fbc5a8b5648ac199506b08c6f67216ab854f3e86659642600bb046e81179f0d8d7dbcf450635c1e74962ef2adb9ee48bf70cb37cd9026b7ee7dcdec87950bfb568fba5b332b7a61229509fa618a18ec3fe52bdac4cb68081049f2c7e4e37b38cb47020ccdc2c8d38eff17dab836f19389b0413c096cfac2678ea007c9518a2bae8611094d093b5e1dd6d8719b06f886c539d5b0f316525dda573ca656af1422816ffbc0f18704d8c8e4d49c034126a3a6d2ea29de3146aaf481e90e4302a96c07d5d4aef36a7ce0598ddda5008377daf25fefd41198c6d58ae8dfacd1da1e59a2db4417011085a443090a0041a1c9a6cfde77a9e37763ecf1635d62a82ddbd76def81058f16fd75310ffa7e6231bbc8967764ecaaf0ec35900ec612e299a90e8c1f03d4fb2b03a675a19fce7f79592bb602f9aa67938f270d833603eb80f420865de5f1ccbea94016437a7368ad64647eda5c52bd0de7ce86f18e390cd4632c5eba24cffa4e9edfb1404d72133c1861c1edcbd82a0e2f71810e788655ff221767250b5615c8801a37c6d4a7792b60ffbbddf04116afbe81c5eda91322c2c1fff57bb04691e06d7371e1c872040e709937bf24ab26932c41c1100cb1be5e35c6934315a57f1e67a423e418c524a8ec9fb7e5a4e3ec8b4c3f0a5cf442ed0417094fac56cf0c7224c4294b58a6d825eb08e34e9db0edcb677d18ac6c15561691b78cb4f49b30ac4d0f7cc6ee6d2f1becfe215d93afc69a25bd9bf4df0c4f886cd8b0d6346b745a0e80c6c07dc62dfede78d912ad713bd91fb5069a12c76614cea55740f6de4307ff8cfe73034eb5a05675ede54d36f218c3160b0e05fdb25390df9ac21ce5e603edac5f49a69191b12901bdc939d8ea13f9c924b5583516dc188610d7524b04df79d558b3ec54efdf94e3f879782f4200531d4330532825df7a84e06ad2446534b861a789ca5cea175006edba84d7770d6092660704b71ca40571ceb3622724cffb47b510324b35280d95e099db48dc42d3ab778233f24647492ba98c79aa009d02b4171d25b24f1e6088f41d5f799b6d1e3acc9846f1a6459248e2a6bac2b0f85e6ba0cc06a9798386bf967a359d89228bffb35f358370153f915458d68a08e5a006d7d67349730f58837f67e0873fa43142dcd291943779d59e1ab0c95fd6f52d7ef49ee09e1b826449fc3358721cab238ad8f2db4e88290341db3738229bef1815eda52f86ccecae39fe15345dd861fcab688fa6204452b574b2aa4624c6c312e85e683160939c32905bff13b012b9dc5e6fd803af07e37099b9ad6a8993f4dafbd4ff12b694ae3511650b2a5b331ef283566ee608fa519d2d8a68a2344f2abe6f699f1d6f059f35bba33e5f54380eeac9483b169ca05ff8ece1be31c8b835a1a0dd66c1a45a0b1b9fe8cfc94eaf3e4ce2efb05e794684a432c948c3f5cce98f7ef05c21f2b00c54b4ea75dcb41c35ffbf6deb4bd93df2655dcbe3e79a614c6637f58148c0fc7a7e0931c43642fc8c28d354640abcaa018355983ab390fc326f7bdcd3e0aacc4fc042515805cffd7fcbb48e128c9296e3c1619e0273c5769267259632898dc13e4bec464a78ea0de44111b5a5318c83b1af870e576bd7f3b3345b3ab8ee1e356e464e970bee1a4d0109aacb52d5db0638ee50354a62d7c22916a34e60a8deebd47cea79ee57f67c65fdfdc25fb84620b559002b3589aa9fc319efaad62e5f68fdc3b88b08bb6fe8a235f32f500857464228f1ad5b325925271bd6e3239777410ce4271de170184185130ad4a8656c8350de689bdb4263d9cb6e225f81a1396307d8b1fea4456a99eb5b7951a7f40138572166d027ac94ab8bc6856fc17199f3308f9f3a94952376ce6c7e99494ba54af3873b3491b2798d2b099277a218b43f608e4db0316731123bbdab53e4a9a4e7534b082d384f1a85fb0315376cd25d15bf95d58b5a133a8efd08a27b719ba0900b4324eb34e28a65b8578e930f6113a8994741fa228f276edd763f5a4caba55484a26985205c939056002de13ffea8a9617008ebf77d93b4d38a582c98116b6d4b3f9601e393c0f47935a98a220db68d7469abc4bbf39f1ad6764137d78acbe29332bdd3ab90f5c254ea174f61b2800c64378e3e6f39a53b422e5233ad4b9ac878ac011fc98984221fa2973de3f2a9b8b08258166704e1050f2bae7096880a433ac232b626964860fcd9e92ebd6dcd15272a7892417410bbd3e520e543b5326fa07ea844827ff17345104d645fad9b9b1bd1cf1293840ad305912e6bbc9b9179fe8aa020b71fb425cb634fe505026b6c674f53ecd6bd4b8b990aecbbd2219c4ec66a7d5e89becfee7b2a67972ad9b62af388bb9ffd112f52cef89c2924b3da2d7b68eee47c104ea76493e1e69aab90a531c3b1454f1f387e9554fc1dc5ae78ea0031cf89981b6bf6c8ad8bbef1c6770746bd75823ad07c969ff187e0a302f5408c662e58bb08fff05f5a8aa91a84ecd8c7c8f1508cb9adee235c67764f2597739434f865c07f93a8a6d64ef37a3112e8f2ccebd37588b17bef5766a3695c45b803c3c6d9c0884999f5f0a93aa83e54e9f40f439490506dc64f5fe4edf72107557dc3c66b43517f0713351984eca4c6ccf9a8681cf985efbb9da7faa5539d5972d65e74d50f61b14f4566e645968b1e34c9246dfb1d5cf1e3f6b957be5e0d71c4b1dc13d6d5fd76d7f1d778e9770b5a2c100d2fe2338355e0f6b51dfdb7ceb748d158333b81b08daeb6fc74c5188bb80c4013df8541eebf004660e659fec31feab346a10c3cedd58823d79b98099418ac2f73074f1d11729d204a14b65094a6021c1cc84c4b64d770c95c420ada1774fad2ca11684aa5ad13e848c1bb45b0a11809b76b1dd3dead54e33370c914ffb68354e3b2a2a735724c03991883134352625c412f815dba6e5846c5025efe4dd3956fe7fd114ab82d96d62b9c801a4208dc79f5081769c02585b6a60c99717d95eeef8164292db7f8e7ea25bec3500ccf8359b4df197a779449f1c419349e93a2a173df126c6e3751344a23024ccec7004231ae2fd90b04754f535d3cbb636ebb5284f6d1454a5c2235b3b5fcda3a1fa8b984f0ffbcb49a7308eca6511f63a6772159ace5334dcc5706b0afe37ea581127d764c9971aeb5a304df27086316016eb3f2f35ae9d0b240789332ca2d56dfa697e44bb3478dcc1e50a094f7a6c632a9c705e0acd9dfa5b66be1b2f4499459e87712142770068c6f663db26a2a66fe9db2dfd2599ad93f47abe6b0e92bf4ee0c6ead5f024977d9d1bc52e8003c791255a6f5b5a9f185a08f88f4e472466bddee110b2e5c3748d400408f8e190009a868174d86b606d25b93c24fee51ff02ecc77d184911c64ce4bddeaf032ad76f070c8024750a658784c05c778585066e132ed9d1f2903d4b1925a616b4f8b8d171f3f20fb9880560baf7464b4915d5240dded0c97bb97dff2257e69b4ceec466b4d7dfd5ecda9c3d8258b33721457510f6b0dca1b801488ba55a6712ac420c7326164af7cd9bceae4abef13f2a2427142dc768d7fe0238874269b44e012db7c38a9e8778351b1ec09a6d9a49d0626fabb5e96e7be38a2238af1d27707ad9d5dac9b67a77dc86c9fda7e8e2b56d2f35902cb73ef36967bea2d788fa5796bd5cb803a6a8dbdd4ba0012c262e3d438de18bd79d794150c85353cde3571339d9a52e944564d244431fd73db9ca8748b1036f7adb130d9f3e3d52ccdf497bb37fd59f44ab5815e847cee6fd934419e544097c50d4ae7ba305f9fff8bb95cbc65128135d98fafedf08abaf7dac3bd0d4f59f8c2082dae3c12c1bd61ca02efee8567f937e396174a8f45af506b1b207c7994302ba13947a910a3073f5ea163de9b670d52f22e858eea0cf0b514f2aac99abfa7c46285565ec7ffca8db7b3f74b58e94f4f6130d2cbd3d9ac38421248e1d56effaa6671345b9fb8e9f73161747fff9a25d1d62500c80ec296cb74778ba5f4fa679800b0919b832ebfaa98d5dd90b7f6a1815ab3704a58d0654c873df290e3fd25240e26602884f841dcce0a6994ef9216fae4b96b1a9e71f099df3c41c0a37ed5332d4da64d6699430e86358db6936b4c3dc19f98d8621668c6927a18c2284868c7c31522a462ebd2eba7378dcf8a0f3d70ba9a3eff0ff2af9d714a37630e10e81c947aea45d0c9f3d930455e1f71ead6e0358a563583c4d1ab0deec598ac6bbe8a9192d323f322bd67fc4619060258d725dce7e135040059bb7c3d8ac0464d40b3920f71dd3e6befc583851f43cb5c15da9648ead5995aa9759e42a56a25326eec22098f676f9402428a22333ed5defc38619a015563785196a184ee34043b2fbca74f54255b01519ffeb0a6b444d1c455bd4509d1fb4e17846cf067da33b849e08762050782523960c15389ba9d1a03a6b8537d37ff94551cca8a07a6de5ab02f4b8cdb14ae600200fea99c4274300a5b6b27c6411ec85b38d8c2007d4b7084e67b2db11058637ad46fa1156ba85096746a3848e1df17ff19001e2dbef4283c1695a6fe8ecbf70ba3786e735c0a07a431b3c0413316fdc9818806f7030dfa0d1454c8244e25178e443e7fe1f587d1d2e0c665eff875a107e19c023644c18372a83923d1e0404608d2c6055a4ca0d28eba708485eada0788773f08293b934b74dfd163c303cc3982d6a63dc357cb01c43db2d1190ad9b9bede49f384fd4f003662b179bcabe3641cd181fa09232b63fd0338d6479200991926ab6cc1352eb1d5deef87a2415d3d0aaf25b018d326119b99673c0bb2b2dbcc08d70a2cddc2c7869615252488ab45495db55cf21db99c76a4a08ddf6cc59f9a60fa21e3623152ffeceef6e64b80f76b5736f5e1fa9f53eb0af1e921e91c16ff79db33f9ea59125ce57f25434d8d16b7bbcf23bc76248afbfc1e05f8792feff4728e3c9dff4f80701c2c27605e565c935cdc53b50749bbf589571e33ed39881e7daf3bfc83b8d9fa11a44021e885f7d477a14760a1d0c6218d95b6e444eec032961728cd9cfe45e1bbd376b62565c1296fe90c24050f2a1cf77822a05ac1aeadb7f19b356784eafa062b2e4f150028d0cdd062ebec0bf0ed0f96c8b9b6c36f1cdad072fbc48ca03afdf8a70f779e7d65a6a609a2df6a8eca0acd3a345db5150775999a0ec7c85575cb50f10530e21096b6fb2413820701c0951585d295be27b425c367b39874ea5441d4b41279fec17a3ab9c1bef1c8c18511d1cd6b0eec07e0c9817af059760c8e3449cda96043279a6113c5c57dfec15f1a3c20c1181b72786b51983fdca7c9cb5b9104e60a638f1ce13867027167f0f9be5ab0a7872a98e7dc9521f3dcabc94d32eb5135461eb180b93692f8c334190664a07f410a37619e998abb38773fbf3e411605a7905f64c03ab298576fbed5dd4efea63dfee86f10b3e71b10ae0fcb886de9c724c647d2f90b7239d225892675a71f1a89e4f04248c3893a645e76c741f18507819c1dd5628df90200d8a8cd5088e7d171a67bcf75e7a1561fc3925da3210057986b3e9e1635cdf0bad27360caf40e252c3278084f03d7271ea5e26e99a6012babe140c3063f34411a88059b7ba68b8df8f21586111e606831cdcd0be95716303993d0671e7e582a89153a108c18b27b36067ef419237a233e26609b0649050f98551d0a49dbccc73c7acd13f8b9946dbab4cf7cc988401da42da57abec480167f8572f7633fb562241bd24ead555247749359fc10633e4da457dd6e1a9d7873b88020dd59e2001675601a1e1be59ec269b5d88462a0b4655328fb154d05830a7c1b7f6f89251c6b24d6b2a02833006e45768d8c995312036f37e20167fbf501d63ee448f33342b010e1947a924838074ade435ac806a0ab7fa8241f7dabe0064fee16571ca9dcc1090513d150db25f66b171c7a8ef91650029721abd5330b3db3d61caa90b66a1b63d2fc81c0dea37843ed24972506bbd172015c9f1329c98a2d77d28eeab015d59b029ff6379439a246f6183c32ce8ec65dd2a7fcdcf8b582d646327118e9baaf2addb7f5cd6326bc14da982474416bfe8eb94fa742c1d957f4653d3b85012ca85e10ec29343b5567408a312b778e8abab35ab2de979bc16cce2503fd59577ab131bbd76e35ee95a76f2b40ade1be39b05c8414c67b9924824956e737ebd7ed3eaab9bed3b9b2df2318eb0b9510e449def237f2135a946d6f12567b2700853feba64a12f5cd1c8334a1a763e5f9d6eb481f9cf1611f3fdacb0fcb920577bdceeab3570f346bcea77e4d04667119ae6cf6cc850088c0424001ffeba39928b1c5e2e2144fc700469d8676282aa86e6a2e3f4cfe43c3dcea603591ccbe0cdf6bd47b22a30001068d78d5c49fe381512a817cb2ec23edc031ade1b4e46dc848b9b0b9ea383031b269042cd0ca50bca1b5ab6ba8f2f74d47966a54cf80f81c284a4f8daca1970a2a11b6cd14ec72fd35ee474e40961cbb554c3b5dfbf8616acf98777df0cec0aac6abaa58e2d65ac91630205b61f77d3f7effdd2f402efe61f2205f6b516a00918afc6087f309a5ced83434ed77ffa26dada20bef508e0202a2fe40dd79d6ab24841a45fc0a5f71ce327473bd556c537e2507bae7560af517a9088a1d5feefdbdbcd9bb4e31a576fe2bd60af9562b5ecdbc385878992a6ef7d48084da367e4759b2251480496ee6311f059f5f0bfd2eaa1c80d57318df282800b8bccdf6127857dda5a1f9736c9d4af13f13a1915ae229b391e87c28a28483405c84db4dc4c1e2926296edfd95902dc06d25d8ae4c56aa7dae0719dbf0199cb320a0ca4be2a0ca68b5ae8be0709df7d44f0b7ba422a7e583a42231c87bed1966491a8b44832d8cadc4067dbad27986afe4d968c4ebf539b3766391e34c1c022a902b1a5f5118dcdac14b9d4b88902d0a4ed15fdbaf0130adaaa742d41a5dfe61db2d1a4271e0170339ededc746f0ada0ec04eb5c1be40f19703cbd5ac46465c73434dc3166d4b46fcf031c3ef23b58c317c90dc42d9286e510abff5792486498e0b65f2933fc9014ee11235d2045b48b267d549c0433bf6f94fedfdd8015085772c471ea9e22e25951565254aada1004c509f246b53a6fa2a367355093f2e59e33dfcd3a23c3f40882caa18f4f8c9a5d2396729dc09a77fa3276c41de45c1b5e26eafb4e89dd6a10b6e444fa2813d492971782db2aa0ddcaeebcfe3808b2d2b1c8dce219ef0291b71a5770820a0b857c7026e6af082130cd1a59b6bb9d2f6703c0269fb6c832f6c3336ca13bce50af37766838fb48de45ed835adb07e654edb5217558330e1f4073700fbbea9e04e4eb19f91e4af7732bf33f8923f7fce8804b3ccd298ee0fa8f80a3ef1ac8b0370a5dfc050b57449c88fb229d338c02f39fde409323bed970b8cb9670848312fdd480d4ccac241a54b78a6945bc37e624337bd121089798e254450bc6c4ce7f591fe802e0020d30f5edf1acd37f606e3ec34ba9847e713edeb2bbb0c1a66de0a0e88f588c946f3b8f52fbb43b7b8d89c3edbf8f8d3711f1e46cdad18b255acf05b61472bbfedf90739426faa23f4362951fc61494206172ac3d8eaa6c1833b09eb1a041ffda5ee9f8fad8b543a3a26bda2150851c12d610e17057bb0c589440482aadb6061924a809e391894ca9511450025f5e89d873f323b1ad33940ab7abdbda27a84443774ca441197082cffdb17e6b0ec6aa25d45d76fd6609e155a73c2b3702ebbf5f0d3dd024a96054c594e922d0f049eb8f4fe4ad290aa96da8da1bef24a7bd89a6de69f0268ca13b617faaaacc83019f62a5d7b4e98cda314aae564afe622a8da8837d71a8fa06a1e0577ca075e39f564b3a441f0c18643e72ab446b60e6bd2c8224d7f33f14e3286dc0a6a12761c5465be7dd10296550bd1bb29ea97cfe04c5c7a1e987911fcfba706f3f3eb24b6e69c1fd63f0fe36a00f1a80bbb6125c2f81713ff6f019e24fbe80766d85f62df6187130a1ec6f4659f56352e96d79a0505","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"e06b548b27a7e7d8dcac8c756dd3f2bc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
