<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"5256b5f3471f2cbadc83bdf2f50c23e2a71640c55f9766433b594b756bc418333aee3a62b52195c574e1e4793529c1fc168ee3d613366bcca66c3d86c5303e77f50ee00cae388f6e29db337b07316515b8f2bbab704b4c5f927bc9aef8b128e9a06ea957eaa379a2c6d3bd14b6801f270189e066c6bdb50a97e23824351f3239beaaaea327ec44e1068fd67a127c961f4353fe49c829264cc747448162fbef1883d395dbbd1942cd91b93ed3f5bb2f022e0eaea6bdce02ccde1381cbec8bcc22d8e883006b5ab305b4c5b242d0c6413515ea69936d00a2bf6abff6d4dd7fed6aa85f9e2921198c2359e23141545ba9a8fd6aa7a05d12c6743830e81123af3fd6268e9782b5b8e886b32f443b9e3758a0da899ac7184dc2ed56ead9142064ce3636f34052c1c0460570121295bfade0c76bf820347a4c1643c7b0503af9498c737b183a70964fec9a701b344e92ebe23b18bdc8f35538e38f3023be98686313ffd188669a0416d9707a29f0e1738b5c772ac155467dcb9269c80e0a7e1e1bb0c4f67208dcc7c05c8afc8da9192093a1cbbcd6c9312d05e930c61d99909b31c20451d947a8bb34524965ae9ea8d1c8c48288b1907db3624d94e851955cc27187bcc65a645877d19cb1d623dd54c96c32a20361ef9327dc367326fd76b10dc1606f48192a4bec8645f50a84778995f2ab4b17ebebf51e23e6bfa2396a627797c6bd69e09dc2bd96f1900f1657c8fbe612fb91443d26b22069d6b2a386a85c9cc6e98e8e9d0ecf23df287e53b7326fcf91367b971a82144e5640d3ffaa95a17f4015a2fe0a195d894553bc28ab61f5e3a777bdbf23a8416155ccb3c77a7f21dc31027785530a293c4fd63b085d2735714d31ccb290b2fa16f09a7811e9ed63b3f893d9a3cb5835877989844dea0476808c201415704ea345a8dc46b4597d2b7d089796af7e11ee1919d26c35d123abeca9989ec862823291ea673f0997a19985e2b793c77159c6d874b34f007bd4c65443788ad624ee7d8776bf0a6d074399ea62bc3a21a6a4953e6fdf8ea23a4a529e9c9ba68bd10a559757ee92061ffeb82f47b5ec84dcc28cb926797ce7573ad54e25c9aa29278a88c57b537dfb3a329a66803cb7c3136ee17c107bfdd162d1738a006889f16373dffbc9f5ffd79f57bad5ec1f0d05cb31127fc6e1a1be2b33cd0de0f62a1b0a48993b975a8eddf257844eae3207bddb3dd53b056f26288e50e578e3f0d20e24495e0daa3121badc0156d32a1aefc9ca71ab7b42ab97287ccdd27b4df881ce3c99169e0b4403c766785895312795575b08e463c9172fe7fdfebace21732766dbb63452c56986888528f586fb6466c4d0a41a23592dd8798477e45d00e6f791625635f3549dedac15bad5f15809ac82f1c32d703caede59bf8a36f8978251ffd761e4ea1dec89501d291db3f47bee83796629efbdf42938dca395635b571fb338fec0b364a1f01b820e1290ccd0f3a93f3f8836197a18ba45709d78bb2c2da49ab11a38ddaa27351b9cb081779d54b55a8c4bc3eea2bbb201e58483c5c5e6a38a19e19863075660c9004d330347a113029707ba1679bb5ce89184868d7361c63e086a1305ed7766316d74b05cb2b17c77fd0ec47b73c3231cbc578184d6ebf11eaf81d00b793fb7576a49cb45c5c3b30b5d6f0bd442b0f7501d627411349a9ff025cefe5e0acbf400a96733b1bbf916746b8c1d08ad3c2abb17b4ad9399ccc4641b15b0bf5876aac7d6eac248985b6b0d570811e186e61235ac13b476c6d659b6cc0dc27307de3a0d7b404007107c56458fcb1c903853db0773b5d27fe135028d54fab180c9bb58e44a285047283e5dbd732845dadafaae90a57d2b8b77a63e629987321abceda200b75da93194d11854ffc12e59145811df1f260ec2cda5f990b35d50dda614b4da219b2a98d9ca26a33e2981113860cd23092b85e0515a4c62f484b520681b05fc1a9648026a443aa8473f15d56bae720e6dc8e26aad68fc3276254da1a96f81cbd2d1ac97c1c723dd8256c734825e413311a74b3499592ece7fb753250e4ff32f0453dd138e7cea88636c19b2daa42b63a36a3ce7e39e4320a9a7f8e5319ca34209c474897000d08f06b0c665e51e6af76d393852fc1be350e3e68759c14dca0b14a802a1ab7d4f8454f5ff952e895d5128035c74fa62119e3e2e036a6752dd523ebcfe3936170bf02483fcf23502285df6b7e3a6334b3ba16ef0c90a0c4a33862362fd58e2b03e98895aa80e3412fb0014977a0f5ae99ec9f724b997965576e83e29ae042c3a78df2a85e89264df733eeda31a08429ed826fdbedcf760493442351676e7c20fc50247244a60fd0a5d5ffc3316bd2d9971daaf4c51af6a82f4522f9f8280ad5f8f2e17dd6ff93ab532d3e1e5b04a2ed127a340515ffc422164ccf1cebab4e5822ab3f5fd3ba3f2d9c344515c8db5a8e4cb43a747d1213f2cc3354340cc66c1f79ca4c5ab30a2547d3276b429646f18f30831bebe708cfb12dd08384a3738e718ad7622aa940a5194bf8ec57f1af5ae92d9cdec0cb538939a95d8cb28b1a44e1b853815ebac6e740a03fea45e5a749ddbebfb673762441d945228691c5b4a823fa2a87ca43754555a9871a0dae5f39379e8b43ee17c1fe1242cea80b7183b87f260d34bf4f3901e321c2931ba13984d39b91873b0e258b66c7503ab323992e61d47016654ff1266452defc1ca90fd141a71038de0ec39942c9fd7690564bc546c8150ce5400f341d7d0814595af22f56ef9cd4c8c0da755df388d1bd9c2f0b0ea2ad117e0055badbd9eaaab46051014ed493dde0655d3c2c2c40576a2e8b0fc78f5460d98b572df422dfac644d396bc1484b198116836f87056f4cd4d951ee4ca15d3c5f1cade24af51e3a0f89c2944d5b72609a2f1a28abccae7d55cdccaa71a8f4881a8f0c96df5625a859d3a4add75a7edd5c5be7223901f69861698c2f6de7dd2e4068a3f2700ef34f368ab37080a656a1d127e4bcc944dfba0e002254ce58e73b08aa33b4a1a791c5f059bc537568858e8261a3986c2ce30691a0da70b643a67007ccc76d193ac2b3a5c248ecc1791d97da251c8ac11774d6b2378b17ab183dc22d276c8323a20a6e1e9de6c3f2a51308626e30af9aa6146de74a51446d6cba005f2ab192a0a078f957c767c576e89f6ee548adf5eb6e6d5d245dc07aad742d660e4bb78406031e49513edd0685a5cbb8b6989dc8254eaa9b917ec1a5522bd6c3035159d4c1e8db34abbb8b2fd2618ebb9f03d2d39ba630e05892c67a963f82b87485dbbb2468c90575df9b7a98caeef8be595c815f9a399af6c1050a1a359c50ddd635e1ddabcb30cb320a90ba2baf1467ec242777cf781fb7316cfd62ac12176d86ec10273102c2e39e2e7554ef7be3e61f5ac48cd461d99da3c7d908cc26f31bf91d253ca92f28879e8be8d5ddf58b51e83c56d5e9bb44c1c2554ea276bc4544fd7843934536767eed6b0941575ded710e6812b19a8616383f4f0a5a81083f26376e83bc86226ca16e3fbbfbccc83d102507a562de7b918efa1d997669ace514999929932570fa3fc08e8987cfe078743be247eb4fde6767f0b4680c1b43b1115a32b8dcaf4c693f3f6f346f6ef44da3ee585578176abc45ac53124e3f55f42a495e1dc9c8f2d4f72ad06c35d6f57a2910820d7b279431a0a655128bc8950337ceea34be722e33ae56ae736117b2f3a38b4bb2a703a642f8bf898b8b1f836438793243559a1efdfd7b93add84cec20e4a3a6d25ddea49be3cc4deb68eacbda19c76a02aecae368dbd3cc049382e4b7557c6f8afb5ea439fe4e74929954bf42205ddcdec2b2d832af367901d1b76b5397af485f48ba44df6741e888c02a6eac5a97280f82e7346b10e6b9a53b9347bee2a5288813e25107e78e0dd4925f6790fa7bf4c019903206c13b1c8d4c3ac5c1327a72f9546ca2f1b73327cb7bc0845e0c72b1e8ea5614e4d34d6ba696635c648457b6c0e0a9d716c3a11c2147a0d69df6d2743ee7f77b2b071360d84d8a1a7fa508d49528aa364b441f8b881ccf2ab600e35a100f410d8adf0eb991876f5499ad35ef61d993f7f35979cabf6a2d7645a61e73bafc22027fc4b25a8f63237628b58d5e5e6d688f8605e44af3a3a3f7505ff3b5eacbec4d3c789f46f1ddf37b57662f30b614a8a8f27f701f82b733a726cd8bad6a56142938a92ec3f8e6db0d98b70a02d2b974568b1af500c3804da164029a3af6058289e05cd90657714651278c7790f87f0c4058e8f3863faa1008c08303310f3c4fed19f4684ad25ca3881108a162a6964855aa398ada010707acebc0f03866670c1c3c23d9a2ed947c77b5428895976de3fb93d32ffae19a3ebf83587ba29fa0ab0eddc9d38de754bb2a57b97159a613f0bbae9b8e3854dccc593bb82c0ac247da5cc2e850a58690a0c6e66eabc13d6d71aa5f8ae6dead73393000ea7719234677fcc2edbdc1bc3775a3b9edabff0ecff37d3bfef9891285ba4f43bce1d1d83c30b2dffdecfab30b11bfca955b4eb36c017c0ee40a9e9d8e8371ee0c88645477cbc6d385b2df7cdd3c6d39751eda5aa1221f36c81a2b5532e5dd0d54dcb36d6945906beeee3ff3f745266c6100a55fc6d94b3404ef453d0af346b38b7500e3a978573d623aa58b2d5c5b78e5ca3b50fdb70a85918a7cc54e7ef1285857ea6279341c9eab6446c6f769cbf41e7a9bdb9de7e41f4f74799cf5e9a1d4f1bbf08bab27fb585cb18410ded66e2dd0214a635f4675b5d406493fe88766152a75836b8fb813b05cf3b6f888c5ad51b9303049d64b46abf804088751be06c2f0a88d24e36c3b295c7fac3e10900d898ea0081e395b3a6c1200e7bd791e21c645ff809d64412c8568aa317075ecdabbc260fd2858eb24777a6675154c2ff6dc5ff8274fdf3cca45d363fa8e3e5db912ece96b5d33c6b7be91ec42d2180ddab638d42d58da1893b58931f9b2be89626aae93f037548dbab1be05687a9968ad604a2ea998620f45ef7dc5cca16c9a4c507ce99e97d35017d7d8f6e75d1449086c4c209a888a43ed895551f7ea41d95c6e155412538984cf71ce8cf81b41946bbd0df0486040fed13c646236df2e52dacb00298118bd57d732be4ff2505a80f8501bd5a50abd64c9d19e4f06f72f6eb816cf2cd881236873638be78e1a806a92d69cf344e6668f1ac0b57b07e1273265b3e1b9b7bf19fa77f63ca55421cd6a3ac57fdf8368f873079e0b105e295f0803a320a5d0e07c7e041f45ec78f0fefa0250084be554efb2e248326cd6435263538e2cc682e913d2033b05907c85b2f535e6f150a88c8d6e273355c928b0b7a78492f70b13af84cb70bacaf111113728e93c17a417e4f4b1fc4e03821d7de069ef63c190c40c008e2390e2f3f268dd7b1e07c9872203902ebe8c294444e041d19fe076e711563796187720b039a0fcfef34da23966b33f4d3813829ff9eb79b59e633df86b519b2fb40ed0da458e0345d54756b845d44dabfeb36b5f9b7ce064eceb21e8794b9d1d7dcc359a235d2543dcbc04313ec900b99124b9df36a90c512d683a861d737dd5859ffdab134949194bef465dad99229b699e26206d09c5cc4fd9d21a4a4c3603e68324c688144a5ce5634f87e2fbb14c0a9a7abe745a5a76d819b46759e65391f2f1bb917715cfe05f0e3c692e55f9f127675ba9688d7bec3ceb87767864c9a1ebff4f5e23523a9d7f26fb4ccc74d3e642e6cc3ab736670a6d4050cc0e157062e8d7b87bec0aa7184fd4efa9c402cc03f7352d27a291526887bc5e9e6acaab238889760174c4777751ad96da675335e53751ca8ee783587f1c9166fd86435712e0b23a745ebfbdb7bc97eb7feab94147f171ac68cb8ae45d085e4f1c0d04c8c894c786a6621e113ab0f16b961cb929c280225821da17d57728e568247abeafdc282534abfdae9d8da39dcb7410099614bfffd9c41bfafc831a39c2b711c660bcaf7dc07484a7a54243777ef022bc6185eefe560040df196e54d2bf70f7151b2537befc64b6ea6c198044d7192886a89755b9734b6c1277145cfab2eba53b51b033c8512ea313265e7602d84d302fb01ea129afdf0db06a7ae3a3e50da37f2c252b21db4b21564faa3e871078decb699b88998e0182305f74a82cb2adf8036c068e0983f5c2fdc2a5d40b243f297631e878df3c1758cd971d5f49fbb8c02c07b002d1a58bed1e98998de4f95f945a89c20233471ba7215002c03b90f311d772b8bc6ce465b42673becef9b779e89b7d774fdaf2f91d816990ee3526aff4dcd321519fcee14ecf0cb6daa883372c2a9b9d50218c2a866017fa48d0e1c53f22a15d56ce3f15726967b2f05dcbca2cd7df698033bf97ed0827f837ce94873b9c6b71eecc0d15e3d7551287db04d5b4813d3065b1f5aa0ff6cc070dad6e7809243248b1730024c2d39a66e50b7822855d70f6f087a8556e164fbb7a741a78dacdebfbc307cc29287472b11e851ec2bcd4fdc2cc7f6e83de4b0628e2590bcdd0995f0b03f2e744d2fbe5b7f483123cdb28928ccee86f1254856a4dd266b5ac543fa05313b7b49f899a62ad3746e26e776ed02969c3e3aef0e1ba915f7dff1f89e5948551b356032988134641de78b76882980080c4f213a0d95c0b845ccf21a599da742036b4ed6b537cdc8bf430a3a96b5044c907e87b8c3f41cdda65c9d8661ecdc89a89bea845d12622695f7abed6b288ce12d421be078c3c5ad1ff1ac5cf5b15e793a5fd2890ad5914580201856c92f976d73dae755158b6a991db48af9b17d51a5a33652e3f2e696d12628c8658f8abe3c2d74e9bd79cdba67c78c84328c00958b42502ed0930635ac01a675b7be28ffbb33c864973f32de26e0e9212bff99a2e4cc8d2085ebf5cee2ecceb1a4912e9a6617b1a7679eccba1298613518be5758c9703e55a036358cdf5da028d32bd1cb092858ca9636dbc5c2e55932d2d836c39dbdc41bd6f512f1b6c9db9fc1ff0c9c00f2db686c77c24f023b8a3505660de9aa01c084b5399a2e3ffc7389d2364986c5692d9c1af3de647a54244b8c6bfb772d18b99a87fcdb3f69630b57bc531ebc121c49ee25ae63726bb8339a488810ea4efdc790e5ec04072c10c53ded2b466b93c6e9c0e8a3f8b45d53800336a9963c3332ff78f7febde91932d29baf432a245e04040e7ee7dfaf2a794b34e61aa7b88839598a6dddcccb6e8fef5aea1e58d47ff9ed52776407af2ce85e0ae8c2e8feeaaf5f5c5f8d327977f555435730b49dfb0304e5b0c1d0a3d1a1700c91084398ef78fb9ee8b9783d11aaa9174b9d8d25fedad4b548d26260d5c0c0fa3f817dc3f74325c1549ed0049b2c5185ffc2833f68e38141e9391261c9efe23d044d112eabb41f361c5a5d8be16a3895f8ae3d6bc8a00de2f3a57d65d7d4692e52b373a262cb9466a5fcd7ad4993daf46f04cb1ef818a984ee18a4dd4d40263c2c8b7b354c581a0cf186d0a6afb14bb42d7ecd17e3e4128553cfa3792384aa73236b59bf00db05758a094019ebf8dec6b1cada2f6bff944fdfee320bc2575e1d6da3cc78a7e1ea21ea33640e192622b06c1de5aba8b4ba8aed49ca438913367e6b1f59a258e4097e0b492bc3879766ee2546ee95bd18b9de3cd97d5b1053f18dd880d45229871d0977f5ddaa635b182800b65a91e711f6859b18418cd1f80f1cdcba3e5e0704de29110199cf79b066cff1b5d2e21cb2cb3366bee2117889e84e6e8e0afde5356f1a0f60e30cf9dc5230a40851f98108998871c277f0fcda82e4f3ee62fc49019ce3e5c4dd4fdc63345eb28027595ad41fdd4fbd8be7f805b3f130264dd9f1c7fca0aa583514cc7af2154325a55b2890f7886f7db901882dd0cffc303e2a713cd6f09beae7c4d54f568e577aa8a09a9ff7c50c365db2ef894a597a802dd9eb7158d96525c27338c65da560acfad5cc70373ecbf71dbf3460e30c42e8c2fcc5aaa76f31c7fcaed29c8fae7b04eaed046a2160fac14f4fdfe3c489fbf113501e31a7f56f851e12f6deed3677149f313b87471336137f1f70da81cd6e6fc601951235da0b6233020a078a873b5af99a23361884b09effc8f55157417bd9183e9e8274e98abba028c485061fe60db03ada84977d80311d3b2e846ff00682ab9009afc65b179d98a5b2263990670da11eb0e92491c2caa086f0866f1d86050b75c49dafbbce5571f5086a0a694c7968189a2cae54bec52daf4c55fdfccb11112337169e1c9d91ac7ce1040ea4bdd4cca9d00603f18b40f448a745906868fa61ced679eb2119340d7e2b916ad9697625512bcba397e5f78a2786b2c58fe60590c85d5d2e1cdfa79d8ace2f0fec5e1ebb2b32725c129640445d357719a5eba5178a773c5545889a9ef52bc9440133314505ae314f5c480013e96c4f4cddedcc7f81704dd657b24f48e9de939bb0877a4c9ce415662514a02af99aaa83f353478f9adc64db4ba7bcc1b77e6ada3b24748f42c73acd5daa17699793233fddd3fc795df5917550c6677a5b92b83679e9f2e174221f2b9c061c0d0cf70ffbb292b418061a64227dcf31f6c924294d519e8e80e05c978420cc665a6429bccc90b441875d87279bc1a3e82b16f826d3406beffe9eeb3a8db9c054b6fec454a334586a7a66d2e1598bb6e8ec083794aeff3bf50864a61547a2e551388569666fbe47715fa0c0dbe545cecefcafa700b348e92464ee02dcdce316728835a8573265a0c612349a7d8bfe945cf47b266d4410893681891e4fae3123666bfd1ceca4f323ca4073e9cee308dc7074d36e22420892ca6a5d6fb9c7f6b2f0844481fb37052bf4bb65850cb250165f73ff61f9d475074d722be3b10ddf2d821d25be591c59f060007b56cbb009eabffc02ac6a868c5636ffe0d7f86704ceb0b0f3b17677ea8fc63a47ec300d84779717742c3f3f7ea99cab96e9ff62bbcf8d96d10fbf7a1bd822c092608a163daf75416ac49ac5f9dccb29116f3ea04949716278de22b0d9487b4db9e2cf4dfbe3637f037c26ec9902b518132540867c0d1a852829259d61b59aa6290fdad035d235a936437158f00a7585fa7dc0260e4b05f544bdc27bad3faf81dd3b7c04c88073c773cf3f749325052f3f235ae1b785b0f3fe675e4c0ed623f6462b9a34366176ff7b688e57341c666a28b6ac886e88a632b6b78df7ccbf8cf7304187ff0ebfa3e1bb6d7ec655653a7f3a63467ffcacd59ea293bcf1b8812bda787c6f8415e426c88c61075a0f0de54c6b469e9b83985fd72371da91d106851d4efe31cc917293cd71c05516d8875afa1ece04928ca8b16040f72271484629dd1520bff04fc93f955929012e9e038984f5106ccda887beb5d146f413df292ddb16f027be7c2303a2198a02f19e31d43bbfefbb2f9bc277b529c824a98d3764e05403be5fdb54e1d308a3576b78c2066d173d4da7c16ffbd0e1e192e17389e761de863469a9c336a095e891d96fd85a5fea47b7deea70d29c1407adf889c71957ad6c4f488fe3a67559e8d83456ee9fa31360f8bee39c5121394e6577a13b2cac672ddbc9c86b5a47649894dcd6dec4ba7faca115e1f624d0aaffbd8d632a730884d8c2bda70db5846e9bc6a36ab5ce5f34f60b316a9ea843bfe6f0974d3e8756c144e924135f2d6862b92f05722f92bb85370eec8e73f86d916a4f1496cd622b01299149041370895dd8a7b52ad260a8262993f8c846c55ff7440bbad23322194ec8ad019c88ab89e07e86b6e2b7818bf981a1c9864e7a5a1d87a0f9dc7b1a62c8b094e01edf7bbb11cfea7dcc29815e558fdc0b43c2d405bce45aaa61c7c84eb83c42682d7af82457b34b62c7493ea529f2724b819b29a9ca293bc88a03f7b53cd7ee0a1a6b71b206b338871259c5447cdaaf6b07ea7dc726debaa5cab2689784a41f423e4de1714681fc6b1a2c4a614863a6a05513a476048422aa7bb064d7611bb647cd6e45b037a017a8a003809e7f524bd1edffd7d7b8424b00ffd0258c1f84cacab1591dc2c461e9551e669d50cea096b8f861025c563f9fb378bd2570b665ac4031710f9f3caba115e83f4608ffdc11874a50892fb432705909cbd423e874eb0a33831bb503b1255a3e8b120a5b7281bc10a51b7b5db2e6034743aeac063951cbc994acbe3cb39298cc4f9ce58e44f2167361f4c790b5929212fc3dc98c00f61bbfe764f3cce3efc4d9fd479ca0c1bc8a413844c40b3d7b2afa5292560995327b97b7564b25c83e5aee0ac61f92b3adeedac9b55390c2fe5a4e4b58d429201fadedc9a709ec0067a8742484dd1b3437ebd69f711c0f0de53dbd01086e45a5db12213bd8b90c6762c4eeeb5c9853189962330795cd9c0977749f60b163e4bd3e8e6d465f1cfa3622d0deb7ad86eff10279484edda90127390de0c217625a09166ae613eb64f299dae5ef2f96b1ebc69a1d5ee5e9fee5733487d157da52f82d7ad8597aa99ed7bab5dc0988ee511094bc2b06ed651faecede4e868507211f66368b5baeba7768d52aab09e7a4fe3510c941d40b9617d5aa6055e7e3637daff206356fed2859f657d294084e270d84c42608b3a8c7ba6176c94d57af8a1f2c1bc7326253bf503038052ee17d02ceeac82d620fd71584ea40d2671b0216b40146bbd5156968196d117d1d4ed95e0b5047422f503979e7dfbfbeee7513d86908ae577a1a29602ff0c7f923d446fe270ab19d6a7682e790f4c4bf457c4d9c91f18ac17f3ddd817e72828d4f3a01f7cde2b843d335853adc49a07edce2b4855b9f1f8874922b6a874babdfa12c8d46cfaec01a6a70b00c08c0c1284216cf1b5912675ff6d48edfafbe3cb145074867c22b8bf893050f34d31f3f0b46118d61fe5e099624d8f94b48cf53c253b642a0fb3d79e7dea01ddd054faef8d9e9844e65f78e4a4624de90633e305f587a810849532d40f505b748e2f8349e3512b923cda0ecf9bc5bc72037634933165c8a955efacf759133244f89a793cb3692ff2a8c6f22d1d1d389cc7194ebb1500e8a772a6807f56460d3c97bcc6c71bd2f522057207f666f987b6e8aac12adc4bfa89973c697b1e529a6eb4d15af501063d5ff81ed6ad2865b862ec3d87db37ca0d9ae6cb81f753c8d2461932bb5789888fb071cfc29443066b71a78adf7afeb506dae8f77eb99978006e28e900da81e712d2a40454154060a0a426b5e3df1b67c3346baee07cf384fce3466c1aa3e662bb0c4ce5dd8f09c5d3a373d41a9bb98df6891ca4e221d667f46e6a8d407c8ea60c7fdb2b98095a9707d46d105349c5779a6efbb31536826cb11fe5ab637ad353d70e37de703b52508b57d40226a83b1ee4ba56ba5bb3ddc167c48a007c8f4859f5bb6d45a4b434db9a8501fde9e79ea0d13bccc1254c1c332581d5a6d05cedabab63f35a357d53f752b41ddaa975ba2e9c6be257aa771e13f9d47b7ad80655a19913fdb40e9d10d2f1e8ab4a1d11e315b9aa6246ee501a15321fcf6f27086c523a8f28a898013af0905bedc87fdd2709be2d03c05025b333183fdeeafc5e33def20f8c2934d99cf1608af947522e8e6e6b406bd5ecc7b85324f3628af6254bafaf111ca3ae45cb909554554aae5b29d4627ef0c9bd30cf4c4f51d5337f807c4e0e7b5c75aa27cb23b87a069e847e81d637775df24fe369a889869de56cc136858627bb661204b0b0d5ef4fefc8694ba03720e2096134581d1877ffb20aec8ce3ed5d66b6cd62e7e995a7ace04a0bf5777fc8b7c59cc534bb56ce076fdcb679e3f742d65d1df67ffe04f62e5ac5000208c09da5d9ddaa81ab916ca42630c01d7c6f5a0f6daa6687d8004923184a294ebc1522e2fab2cfbe2acb9383d95f7ad497ac979bf5c81d50740e5715aec67cc00af6e290da7b26cf925cbfadb9e0825dba830b4bdf8c67f49983aceca619d9e48da6ad01f2c9b960078cb56019123c1bd60333792e647f4d991f6c5b0773d2e09e580e6da538035158a61f48e68dd05063595235fcc5e7c3b28b8426fcfdff61fd79370c30d0b31227008e44986bc989b1bfe00793891ed68aa01aaed1550ff843909392d0e314891ca596feffb40b5fdf70431271aecc33d4dfac347aa06e080f77781222775d5f5defc950a555efc9988823a9ff34bcbf9e1211fc7edd7fe6553ba82851de4d422e12348801ab105cc6b46b947d701166122470519642497dadeb3f25aa5b35a154d6c83f7c6edea2328a0438f90f4cf2906f3822222bf56541392983002bba4d591358a71c278ca472c372a955d76b7887886d119452d2ba960f28c01f2eb6a210413808103577d504ee53142a7bbb0d3474b2d2a6470b8a85e05d078968f418e885772750843e98214f226d433e4ec95b8857c020fa84241a46e4fac4725711a9c991e8cb400cad5b845c1ca2595a88b9cc57062a47d213e35d2cdcb836d66df4bcb72739df1a0028e0b70ba367442d9e81532b17985c5ff22ca5f9f5b53e7f8e58c866bedfb9d41449ee0234b699bbc2b90e2a5055081038f4123477258a9f74aa2c209fba3b0849e36125a29f0ba2f5f0857881abf98081818af7a7f0f59b5b1d76a8df5c2224c995f68f204be25b0982aa956a37c4271d84dab0fac7fb884c676e57b16cfe4ec14c3f130abcd14040861db4db619dbb7651d85e3b1daf1acd3bc7e5fc0484958d2aa75443811a2edab796de1b2838aaf66c1d5d6d53151d729bb914dd739683f194f31b26a74bccee300f7842c57df0cef7ba4725cf7f890d36db5e883a039281688e90adc85773ac4fd0a5c7ef24d38f6e57712c0b06529d3eb603e54c8a3dc0bfe40fa822020ffdda1b3272419e2b734511dfed516ca9156f50f0718c737a30e3c036d4f2ee297a126569db8fcf38c7b9c46f1e048d0a3894c792a0a153bcf78bb05020df9b1235169ffb1e65d123872afd082a801b8ad5167076b39e25faecfebfbebb1c25104a2303dbd68a01422ab05d98d9e0db6051c2a5ef521c75a98c000c15a65d5fcac276829d0e5616635c09bf87f79fb25fac60dcf2a0aa8bec0f6a350f7ee26bb8c945449f2dba32a4a2107aeaa34ab5facb5ca57fec4d944a91b7a55d418cac4b3b5446af5925ebcabab31dfdc35b12539641624d68b95903c731dfeab126640aaf7b4efe63ec05600c5fbdcc0a58fc380d86e2d0db425814d61e23ec49c4a4d831d54986b9080c1c78e343aeafe9c502f677f33a094a8206fd6d715e2c4d3fdad8679db68891fe6dad6ecfe446b7ba6fa44298b2da9b40d86a6e0493215023a9425fadce9bfd316e0a6c58fbc0865dfbe6d0072c28485ee5807a0fb4ce587be9e02d306ece1b2042c5729fbd6aa1154c55972d970a4f81dadeb98ad203ff8c42e58e3edbe39ed21cfa06f875223ed43d1ce935e83ea8c88ac56b88a2725d857f500c623684cdf5799fd578b5a276bbaccaa36957d6153dd2ae2161ee90fbf65e4079e9e8c4163c3a9f4a44d661f25e606c76998e761bb4b07051ce859bc3374666fde64115c0b102ad6bae49a890c063a5d2d997e3a9ea5617c43803917401619a5d91a596abd8a462dbb4b99b46a55a7e1c1db2f2c760c28dcc09b2c1c924d54eb609ae45c8a8b794cbac4977178a7d3f227bdb7fd5855fe95ff4831246232b4ebb9e05d77a181fa8bc133a48a5de0baf3990bd4935bc423967c27f71752cad28e26837e6a6a4494baa71e19f368bbc9b6e692b5f454fd3ba7165fd0536487f01634c06d4c05359b76b86ffe1a39b05d6f1f0fa96e28e3a4d6f3097ffba5adb88c8f321920b9ab6026f5be86b3ed9a49c89fe29be191ad7847d73ae7dcca8d970abd2892b6df476f817f307355b7511c6f1cff1f7746b9b6c74142b5db409f47a931d4e7bf56ed6733af25e4fa8cf1d1c4d747798928ac27ac8df9bcf84f2234c3b6950345bf696b4512fa7b973996f24922efcdc508dc2f13b60f7f04d58cadfde4c1ac21f0fbb92eb8feadc6fee12acf16cb92138e37d8334740832a80b1c2cf76ba728c15848e153a8c1325bc9397816c55bb5d4c9352a6f845430c4304acabfbfb80a5ea9c84c466ad57ac86d78d7ca3f73445b152255d3558c25200d870981ce272bb68b48e02fcad93698c37f0ab6ced7ca2541689585f5819996e023b43c8aa33ed76c96b587730fd277ddda74b29a776493473bd3d53a7d513357471537d0c96b87ed3f807262d5977260d020c5e9bdde12481495ffafe2f529a2f8ceb3391ca08d26a8ffad1307ef475d33e1bc8b2f17da8bd9dd46a3c384f8d547a36b0b4a2531bc6359b09f442eef261dba9af08b1609ea83f1d1422779e4939aeac666c86ca90bc48a4a33e8332ad3d8c01584f443088d07bfaee999ad5e13a314ebb5c82ef04633772d9b97a267bfe033a62721a032b22f7f58ffa592ac574fb8ba477ad86d95c24db55bd59be632c7267b0d1d91e57bede40f77cef8303fe772190b742f2d7184eb8640fbdc3e6ba5450f1ee6b4661592d3360429beab7b57bdf785f8bd013c976778ea5aefcc1fda00604de95d106cec89604b44832d2a78cf3abbbc1c054f20511ff802dc78312cedea4d7782ce43504daefbb233edc1c0a836e3de76e7df3cfbdf888620336717007141a45e95c5735a814bcd7dcec296527b709cb74657b0abe989f8609d4c8d9e30457197c29b9bf9121dec709d07a2adb17d7bca77790fa3de72782d80352b24a6857b12c5d505a8cdceb49ea89d4106ee942f8697c6cac23aeb324d70a52773d5b731bbd678502cab791ba0991e6c341cd2c5011dc9ea9482fdc85bc588c48e72ab00c70bff4075acd8e2ce28fdb4304394c84f2c0cb66c466f80bfc778cd9e5c74d517f7ca1e9fa04ec3b581fe245d0c89997d5e4873f9c850dc52454a18c52c2e5ed2b53e58fdc51bf3af2ea63b0c07dbb36487387ac5dd156f55cb364da6293bed956025691605167b461420c484a0baa56b87b3e8d3a772792697bd8677c2c0573787e664965572c18c9c732e98819268649b7bf5b3aeb7a6c030bc74b956de3f2dda79a83ee090d4566f9a3dfbb269a6decdb60c9ba2ded1276a6d378d1e65183c28ae9070bed799106c6958ca81ac5739dc103925ce80ed87a47a6228dc8f927ef2846e10d92ccfea5ddff43d1663e9d5355abca795cab52d5703bfac17d3933de39a4ed68d96000ae820a3033224f96f4690c3855dc440eaf97cc6df980bcdf2925fe351408c01dc9f31714a3c8323334491a67fdd4aa7441f9d5163def48ffc9bee76ad607b6fc0a3e8231c8f419faeba623168b7e585bbed7877354f2daba6417a3b082c2046228df03d73774d491657298c6239c734e415692d357bacc76f48b8e3df0f4b696f6b021fe70ed2dda4bf7e2d1476b8bb7387c9fe688546885a798976feb832ee2b9b04508104f506e1f6f392ec051a9e27049247d03eb36ef0a7e7484fbf9d20ea101e16dc17808290ab980ba9c3ce937f3177a3d68d40321f4e7df2e01e4956ddbe588871470abdd8f53e4085e159cf9b74f963001ccf249319f279ba62292b0e2849a286f3260c5e388a727c2e4abe17e2fbe60c6ed9f81318f088650898c0446a7241666bdd454b42af9dee36345c25d10f6723f06937cfb19367d143125468a6a8e38cb1cb551634078211ec90bf900425fa67a9d94808f9e22aaa08400d74f289d68e106877964396ccd93d0b3fa461dd105e9647267e6c67abefd099bd9d449a7fb47a4def16414be81b32b0a0bdeb509a0efd219cebe34e313fc5819199e1e4df0d89a90d8cbe2f29d73289636be0bcb94729fc8f57e12aea2023a10dfe378e8b4a9c9a98f7d09fd5f044f719ae8a92a8003f2e516945cb52bdae89f1ad95bf01de71d4fe6a32fe82cfdd26458fb83cf920d330379dbf4ca1ef1ccf94816543d472f3c03b2c5a1992529d1c5fd8073b8219638669cb8913f2d01abd6ff23d75057fc909f9e5c3ebd3febc7c035293a877557f7d3425cecedbf5de6aca4e629a738dade0da0be34e0a49f2f090b468a6ffd04d89d528780081f9adc70ff2f1cafd089887fbf49e9f8eac58754f43a81067d744598febd25c33531cff50b45f97d61d8f2eb59d8ec0e1e468c9b478b04ae577b142a7ff1773865f35f02e0952fcc5f0794d8c35dbe1319cc9220210ef08d24eaaf9dc2a059ba74ef1c8248b742a403e9b35eee8cf51e45189f27cd500b147f0abe921be7c573b143bf329b750746ff862193ac830665cdd964d6ee669d14b1ff9cb4750ccea8651390cb3b2d7d0ad16cb4f79c0aa812ffd638fa7852a5b55726d88369eb22c58e1271c8c36fc02751c3186c25006389a48292ede6d80d84a4970fab20a0f5b60a4f0d9f6eb3218bf6b5ae234c0095287acafe2eb5066902232f19cad9d9bf4ee106108a37a5d8970dab280f06969a7118bd120971e9d22d95d0ab000f348f2bc2bea881e119dd112c4888d1ebf48c67f64b2b53c24755064860f374b5735babc5a93121f55b6dfbce3a8660ea02c211dc4d59371d64721d0eecb39a50662bad51460edb8a13c03ceaf4b5867bc0ef5ea378d61e7f4f45ae11b575ea0beeb59ed5a6367c434575cce7466796f384afff917527825420b41f91db56b7a1336c7dd896584d5cad7eff1c1fc06ab821cd0545ad6e1c4bd9b006e088812f3b87ea657e6b1bad31122634729792ef30abc983a19e1ac3dfd3ef865b4edf005eec03b6a69565229352964f29de70b077dbef49090d5d3e56afe520806da5e464799ec4e03c84c6b41d353a5fb89227fec084b441f5fe2e9a84f17b5301ff2fcb987888dc72f0151c79874eea0d3757395b678cf5f02184d77204abaf5c9be5aa61a8f44d71d2728276f4af9e4e5997694199abbfd0fdae1d5850e2aa0cd5a3ceed3f4bce0199ad30de9b7dcbf4a1c6ff9344b04e806da64dcce17fd198f4677c1a84499ffc93bc61dd1ec1853018a525079707c5e822af3b5d7ebfe98896aa6548c71462cd273a405163943619d70bdce0f130098829241f5a8fa570f807671f8080c36bf2f68188deda52bf2a3ffd19ba5a60de820c2f3da006e15155c887650633db6fcad5ff7cde163ea9de982b49347816587c37d0641131de9390851c16cfc80d7d37814da87c3e1d5d9c69ff7a4c39d90a87f7f1f88d2bcee4edbfbf3ab645f1e8e0c3609c3d0302b622e37644acc03532b9ab398d64b5aa45a9dece725e1a876e5b903c7d60635dd4354ae3d72c8d60de7f1ad3b467dcb32e206c345fa9645f944702741aff45101e98683ac5922527d71d85eed26359fc18e75f85b2eb0ce31a59a40c359f938e643cf58f6e85cb8990ffb79dbcd1a584809fde7415b2c4784ad205d9511ae6569b88c9ce8520c672830170727880cf5327a65da24c621ce4f2f93f03e5e4420b92d59e3dbc0360006c7ef741f7ec6132dd917572fdac0446ff5d96e38ea6715f550918df22fd809d53284d2f9708bd6cba2d1f3af8036e9abf1393f6aa9c7080b0f024d907c5b69735ab42b7572355dff8a43dcd018371b2800a4f997e8cf206a585c2fa097ea8570d73e10614eeb43c3efa8b0b9082d4a9d51621bb8f4755ba946158cf6e5a90bc3deb2319391de6089de2ae29a15bcef5d9f097157d8df6762e88b36a4a220f24825d36d98ef0c595baca02e5bdb6222e18af3d5ead86ddd7d53dc1b4e40671265d1cd7099860f9f10846c8f61c5b414408d6d2d375fb68f5145e04abd7682a88afdf0d5a91187b3950dd519488852b8cdf15da76d39dba9944f0a4ed13d8ba28df690cc18ad36b608fb38821b847c4665871e4147729e6807d6f0c66fccef891926529c55af9ce786972e2b2b73d97b98f51fbeeca992b823da75c6ede7d81b8dbc3a4500f890b6dfe878ac805fb39d20ed9b75cab025bf69d8baba7685bea10a68837f72b50087d0b300d0e35af2468b253da3725c8c5b9540792d3549e9448e8b33fec1452cbdb2e3e2ada4100dcd42f0c2262fad2f54360e9d6890c11bf0104c185ab8b65ccd91a2f5ecfe0ab7ff6b5aa19ae6daaf2cbdd5f8346b218f8a845bf02c8ad8e37f926dd85e3498a9b9c0da8ae14dc30b38689b4a474d4969bf0c0ecc23be5725766427796e52175575e2d9080a4c05c95fb27d4b7dcbfa00be01edb65c583648821cf5f68169a62ced11d212f7e44ba9130085029f6d82515068d620b692097966c34ee7a9ea9cab38db92a88504e7690850987516a2b358eb64717af95ff7227230f3e84a8ae1a6a9c699a75102275b099f2ed0b9e27234e9d76dd65b0195ef509da1734d5a1700745168c72f09016b04aa2491ac3764d40986a1e7a5a9647467b89008ed98c52310d7511c568210dc40dc078407c44df2d22a34c89baed36edac793a3df86077c60a6c9b84f4ad190746dc1f2085d046ada56883369b710c812b5d5abb96bbde69978b0df08502773ad0858b8de7c141ce9eff05df6c6a0a2426cb223640acdd6f14030966bba0c8074067cbac4c5cd7dd62da4ac2c8d241ebd368c2105e74cbc3aa4b33de7b042f11e4da65f483b4beb2acf82a0602329d17a5ad7e7a8b91000f7c626e9afa6177e81eba260a86d072654afaca321e916ad330bfb33a83c0c2fd0561e0207f5d196e9408b1544dc6045e10dd34947efcf41c477dccc7e6e15dfe4104d92c201ad6f3f3bbbfd2210ce7843f07c47a9954693497021f87cb56097dc3f350efc43a12d611d69b7b709cddf88d9226bf3fed9784d9ab76eb2acd2e9bf2096e6dd4598214e816ce53fe1bfb7ed963cd84de364d48995846ad8731408e79d9762323b76bbbc69da07d3533afabb6d9b24f21b5cd3f1bd636db125f88e3b333baa4ce8f58d27b0720cb0265a8db5f2436f288b2f59f335d91f72ea30e809faac60346a29354caeaaa9d95a30b41b9bd132ffeab7f07b852b9c849a4cff8f93156b0d7ec2f2950657953c067876f8ee9a7a8cd2f36dc456b82c4390f8cc42bbd87aa4842eec39b5a90fb3a9fb4a0fc4f919fc13611dc89ac1febff7d8c0ce670e652567c8cdc407fc5296a36e0ea6b4dd9ef243152e36dedb01ace74d11faecc060123e0cb21d328634517205b54bf45a00d10403f4ffaeaa4fe3891f8b3f54b30f69e5efa9f637a19509db19e8fed970c1d13d395aea58bbc22b4b1e39aa763608155cd5ef9eb87c2a3b571f5c81092da8abd7a1e1e1b4c038b992655ad0c753e2720bf7574216dc1e788ca4b408d838583b66a95a1d2480c78f1971f417c50b79f3827e9a5c23d171df2655d0fda4fc28cdafba40923b99b0b33769e6ddb9e157861b88642d26f08daffaf26c7978c7849eec204c73bda417b8bc1e3583d377e802552ab26a4f6d0e6efbfd82904d60aef5cc8b62d59cb8bd56a90037fca2aa4bb0d765f1129db7179bbde7f64ac4da0fd2501cc511f86277df9f0036bda6820b06601644c87be8bd8f357474e21dda7790fe99a2dd78ccf1ab03515847cbefdb1dcf4c0dd80075fee5046beed14236ab9364fcf6b5f8109ecb19c7a30d66e25c1ac76799929ea37378648448e41eb28cb40400824cba80f5cceae3b3cd6bef65ddcaf1d0a101f1ecadc1ebada356143a7675d12c5539c733a725f14afef08e1f8d12dcea929003b761c162833f8fabe6bee09490546b207428682155bfff7afe51c1d30c6d06581e06616f7d2ff8860aecc493d2d8d699a8e4d0052f8b65a4972801e1e2f48e94e0751bb","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
