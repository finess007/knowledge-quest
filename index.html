<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"42a59a50c1caedd4fff7b862d1cce98fa4fc1844fe3255bdc678938c649c1cc1b05b2d1b88c554a086fe5fe045e1209c01510cf40ea4f6ac6c7e496949b55a8b35350e74e05b9e5168701e5df64063d86e9c5f27fc526a7050c73f7b857182204278b130242f3bfde3f2a12ccf5b844a76397707994e0f9ef424dff46db8d444129a793fce42c9fe589c7d8a385d1e00add79d0d05fac57f7ca0bdd00ebee1a3764a3be4edaa76f9a6ede723d010b42ef09e6fc2491a200495d4157ecfab03576ddf727d88264f761b532be7d9b20aa4715e1da924dd18b72033e2238a924471265d862851b2435dc7fd1fc18296b6aa0aeb691891834c49dd67c530ed7d9f88cad1a630958e30ff8e5bc78b3b70b492c6989fe948e4ea201026b4da7d9fc77a31b363069294c262bc96c685da425432e9b7adbf8d143203c7d79b7b38dafdefb9289ac07b13170765a44023d37809f8e341d7c6086b9c9cdecdd283a39f6ee824bb971850b3d85cdbd51db13b4d7fde6d42455d54f354cf2919b59c4b1ddc393a74a455a1f27d676e4c0e8667b7c3799f2937123aeecf059df4e66ff7defac1a3b33d15de2ad42f89fcacf3f22b52392b908de629a9c8ab723fd05da7291fb48fbc0ff4faf3764d30210853252245e104edd069562f43dc76e4ba3fcad8e736435fc3fe00c05453c3fae3259dd8d44f00c65ab79e838cc3105b023159faee3d7eb5760558c78aaad88dc4f2aa6f61024fab00dc2302defc08536ad26d6db8599f0955b3e9d35a0b5802a295ec1665b4aa60e47269d09c2c0600c4a11f332e0f692f120a4ea77bbf4a433839c0b497b444864b49370ac3b28742e26326616bfe58769726879484802d2637097c74f1e931fbf63ab7c41a24599122a8fb021b0b63481f9f39c3d91922b7d7368e76549dbaeee873c72b072f9cdc7e3650e464d558cb4d20205eda1fc9f699cb4a021000c98bc162332d2c1b34623d41e3a6e86eba7acbf8f577ef79d7791737642480d8fd6daf71e1b2294a612e5e6fb26db00a2cd7138917c3493875bda5fea77b79c95157d6da11f9c9f6e7b58dff57ee3471bfd92eeb674453afda040915da8a1f200290d947931872039eccf9e54e37e2acc4a7cc4ff44ea56531115131c6a922187c4098363a323e75e28c7e8cd7e6d2daeff235abcc91ef9a09b3e3d28f523bd480e5bacd5c2bb673bcc48d702b9023f618fc716b47d53ac9a62a1d79070ea72517731170b1a2a6a7247c34d295bdd0134024aa5fc7a3eed13bf6937a273202a1c481046d393b9691ba9ccd1d08a806026fafad93c138de4c7d44f0de3f89b21b2aede88e36b020d32d92505a0036a0a2d228e9a7c7f7ba410e104630718695bd7f4c7808cb6b2bca482e8abbc165817a93e6a936227eca9e41f9c5965779087419c58d66035d0b845f2d1cab0f2010dd15d86b52774852d5b8552662bdb997b7b016fbbee7e5dc9ccefb9de76d669da527eeb1e481555209036c34f6383fc8154875226cd576f7264e0693a89ed5b6fbeae4a18c4a38401f61e3c9b2cb6f7b34b1b2ed36b47dbb86b79fab588edd05464012423a111d8ff906dac94da1c2dd2caf7504521137d0aa562a986a781a8c551666e0033af8c8cc67e59cc582e6bd07d3712d3cebb4fbde5df7d93d9ac554b2c9fb48cf2db61db75d66060892085ab2fa62177094fcee05f11232c56529330eb827b5849b4a3b88d889bf4a342a031bbaca39a74c02f3c27a1fac4300109e05e863ec63bd9686cca88623238fc95422c0fa0f5b5f2903d2750790046f09df61c40bab991ade3142679a1d52376ce1b05db4d0b46ed5e3bd379c2e1710922a8bbbdb2285bbda75fe453b29e4373323bf862076435dce500be6f15574fee44e5d3b8cb000f5c9c7a8b38da30433813fbee3ba1d47cc31dbab9e6659fc8ca9ca5807998d9f2d46ed7416fa3130861004c025d84965412590d988629484e5a2206b3600b29beb8bcaabcac91aeb9a8cf129b95bbdc6c178f96d75fb1665657d5874dac38896dc2541f9bf5339d515ed002287b1ae079365e393f5b4e062b54cee2f9ffa53e66423df684110fc5f3f717c6f841b890f05408f8303b6a7f7fd4a724a07d97a40ebae75a725fbc8c3b861f1c394c3ba816c0a848ba9c20ada2a9af5e0eb34f7e702aaadc325739b1ecd52b22733c9ba1ce8e9bc08722629c2bd25df6dcb19a27b9cfa1c6f2dd91d05194f1f6cbd14a77e1a3a2d62eac9c80e023f7d6fbccf2029991ebfd69e58cbb0ccfec29fd1351a5f4e341ca0b431227320887bcbbf06834148d50d1477829223360b7b0bdcec14dc4a80ebd75662484fa113242337966e74e172dcba607e9539262cc24c5ed93e1492daa90b09f7f28a05a7ac362802d643622a98c63d4976fd2347058f81a6297e7348f1eb6399d10deabdf954583733749b29c47b4212733728f16a84d158766f1610933850be9ec9dda6e008e9616677c29feb9e1b8ce7d9050225de9d31a7c4dbd60fc3d1d080184a25b496446bd67d0d26b502d029afc11c729af01b4967bf6b521a3bc291c9d8347149c7e1ac6cc35bbd9c670cedc45811eb7840c2608e2ef7102c7f6a9eb9dfc5ee837bae1cd926ea8edce6352d73f90602f14885158557bb6922d6f7416ed8693a614182722cd0f23ef063ca1497eeb8cdaf822ad3d2bd504b99dad999c591d1d6a8c344bb5f36a33fc28933136ce509af1ea9ac05a8921a6c6c30f78cc1c1fd6377e8213560239f8aa1886734d312062b8a6cb5cf606594d6efc7f1d5620dcc1a1b9a15b5fa31ee3c80a41dfa99ea1b9ed5b59fbcfcd54fc5c094e8bd528642457e648babe8bbf65c09b646ae18e01f67db6cb219506112240a93e7ba80eb37c682f33497fb22744dd9a1590d577c386e0ea8f5a6a9f34bd6b41b7070daddaad44cc09d02949a1729f526445840d80b470b0483be1d91bc87ee658002fe96935c0d38de762bf198c35358607ce300253502b896482fb4086898d408ec3a0847152c5635a0b7fd2d01226e3204e009936cbb1725d06cb3ba8e5f89d5845a0aba06d67daf5e175dc86f1acbc3748153fd50b1e40b38584daf8916fb0c9b20380225121c5355efbc74d5a337ff5e47cbd58d1bf4da20ac111f68c85d24c7433038d82ea5da63f304d0191f9606af4c8946141ed3764ae614e763855d4740a0c091780ed900430812daf80b48a146d43060f77b5e0c2e8023b1dd44ade00d39ef4ef01e7d528fea7b8204ccdec09613afeef3edf42d42d104af57ea50f84b3bc36e07264d2d56a4394f5f5dca4ea5b313c5be1592ab0b69d1f469dea17666786e63a2fa828cb7e11976c4d295f53bc5553a1c2dbf5a671d0fa6412cfc4d4cdebafc10ef24694a21bb8fd8e6048f2fa5117300ad833d5ef227abcc462b6fa9a5c872957720356da7a06c99cf06dbb03b15307e9644b806c8ea83ec2bd02fa01d26936ca41b540ee2a0bdeeb46cd4b937157ca9967f8393d573e5201b66c2cee09408c129cd48cb90c7278a68ab591911e9c9f55bedf402aa1451e0c78da0a2ec61d493533eb5927a1cd0d6c3d2f0977e1823ee906a92ba5e82ba5a8dafc31ebba0b643ef2e6f88870c702cababa9c4bf1658030e7542598f8b05fdbcf0532b7d51fbb39d7ec9e2e169984757f3a51df55f6caa06d203d3ce55d6df2fe050572b78c1cd08f2392ff13cc12e07f34eff61aa1ec38b8f4b75ba1959c653166369be7dbd83a17dc9a7bd60a09e20d41a0d3f99c6d8866ff68ca866b4bb42c073f2ba78b6c12bbf579a52235c9c14d51ae392fe4ed82dc37f96ff8b15e18ad18cb03e537981211744cf470471a1354d339ba69e737aa382f358158cf00adea577ee5c04b03453d77ccb1f81e26f74365a2a0477972a5ed608bb34098a1fae34181b0b4807e67d99c1e40df738f54b3dabb7a3f0bbd764e18bc899ecfe70505ca5e15c2770428be72584789356173b1af2402dbf3d157c13315fac2aa5c9696e5874f45016986e91931415dae2c8fc196eef2a774aaa290a206526a478c8ae0a2c777da934cdbea1784d54e41330c594a9257ca6b9812fa9dfc75463f315582c274c71539f279801899101635550eea8ccfc34ed913286865a2e71b8496e9531f90a09d4015dd1b47e1bb803dd2441fb33de01d46a1e27a3aa97c9f4031074640c0ab3a65d5c01de8373e130fb5ffae38a74fc913ea295d1baacff5c6f22f1f88958b1116967ae96f7b5d95fcd43ddaa5dadfb0e0e7eefc4984db924cb17886feb6a57812f28c0a1f5347b4f9c9213f10991690c66c7ea1c10a2bf398d71da816079162ca46da99c27a8dce5d891120e4cd190114cdedd60ef439983dd0f07f584a82ae75f69b206caf4517338e87c18f14320de138ffa9421e3422b8d797a7fdc10e3098cfc54378246a9201245d320816b140bc891dc4efc843954e0851e7f46cfc2eb66e7da063c13c897a884a77d94e7003aa753b6ff33e79c674928f06704506a15dea7ddc3ffd1655ec51a40fa57ead4b16c166059c7b6b2361f2f60350edc5db927e5c53c9f61678da1e35c63efa0621a95aec59f0edce2730bfd56003c806e8a3a8071f060b222ea398d2a18a8ccfa448982c8d951bcc7ef10a0a9f89bce6cc18c76e8e63aa93e5d40372d63139de28ea2fde940adb605ab8833f13408308a877db0ddcac9401525559f53285cddfe228df5fb6593e39b4d3c712d864a6726e1bce53aa5c075497fff86cf263b4ab90c284b35852ed395a30a6a813b150659d8ebba1054a69055b6fb20fe3a7a8afe18d7d952da4d9333e90210c0c001803fe327c72f07ca111a238c0f8e3a0993c9a261964da24a58ac8176c4be4304034b8b790f4ea7eb87c22e9025485e40fd990c0db413bb2fa66d4641723b3bebf2bdb98835f843f25d28eff9a72fa42c51da51a70ed6000be2c59463246cec2749fb9dcc8d3e06192a88e7ce60e55b2a34ac2448c1f87cc5ceab0a8c78470894219ddac8ad02c6aeca50f794ea7fdf3bac9c17f2bc6fcbd1fb8c43ac998262d9456d8ba20f8b45abe869ed2a20937b16158566384b722dfabf1afd3ba7f478c02e8f756f0c579fb3069480ce80759aaf54707bef3a0d3161c43e631693d2ec66826acb5afa1ecff8db38251e1eaa3c207115b246627902807b10dfa1c7d65878e354bf714f7acb8bc93841c0d47a7efb525e59342183344f65ec30909f1cf1a5394f4470993e6c9376b54ab4e36e7e6c69c40a449e191662003bc6518734c0b92ae14b4cabbbb3d90d1d28b16fa45214ed3c71c0c5ff64d6d3fe20345a1e217bbe2531362c0416c1169f68a69ca365fc838023379e80b18801cf94d0b897fc284f2973ef12795329f98b5a7b41b0140d8428060e67853b74f3ab75258440fd91042691234c3591e437214d2caef563db7f3b1fd42b42296a93a8f1819fe91ff4a6efe2a0cd34e0adc34185008d98670b3dcf15d57083e05575d216a6e796676db6788800bb9ed98e01ce80c3934f22d85fb63597e02ab5e10649234f5c8d431bd52f0702979a3f30ab4f664e6fcd103ce2fbd1115e45bdf41651211a1f5957a4c8d6c29b1526ba5386e98c3d04eedbe058f15912c893c70bb59dadcaf2b17d9a806789596cccaae5b933b41b0d1c3ed4d44c2ff62827c6a196842acc78533ae3b8844fb4d47c41fcd3a38690fc4b0b936caf452616f6ac1591c8b0c3980808a219a3c5fd09a2142f6731e08fad9d96d5860a906cb03e9458c788f0a76194d3ad0d7003c7f971bfc7c478dc4ad0fb87253b52a0bc999f2b0c7765c8a6989bd6ccfffe93286e4cba8bfee8622601f72777bb92d88ed4362b213b4e5351d8ee1b09b779755a922ecb9351365bf5db010203f91ed9cecc2113ce9e563ad7f449420eb4aa58bd3abe6bce85b2481f79a95a15bcbcc8bef09c45c0cdb659da992ab0da579d831693d0ba5566e0e6e4c14bc38d80ba1e0b66c182748bdf5bb6c4ec5077a6eeb2c100a0313de8572f3db2f89225e779ef4a2dfb15f4f2d2392d8ad9f4683810dd1d5a73f4614c0827b6b55a103ef96d796d6e9baca83b8b7beb8d99d6e7d28e28008e8b23cde645bd32653f45d3a549b87a522dcb4a60730f90331ff9d98e7ddce3df68d9bf32421c2119731d3dd0171c31993c70ff4e2c0049608acfcb84c8d26d3f62e631ac99f6931493811ec2fd17c2d15332e68fd0668773f62be5f477c3fce037e384306d9b9d4489951eb3f28ce469585af851b8651ea106b0e94eae752b5f9765ecc0f8b4689e8d5644d39b6530416ef79aeced30b0b3e35887e5866ebf7a1b1f7a39770c662db2f69b3201f4027a66c750a68b5ce2d1a2a0871e543a7068c6ccb98c5a3838e178e5aaf8e5a39fc2d26c503c0e80b4d90dede1ed14b07a47859553e22fddf875d26d6101aa95d60e16320666fe6ce85018657a7b9a1321289110f8bf34ff5d420441dbe380b30c2e05bd187783067b9d61fd195999ab6d89f425445a7e72005a18e02e2af0a0488e0b7e48196e90a204f9c4e87d18d6f8c7425d5d8cce7f23251a343d76be29472ce57de8a2f4af0924d330acdb4b2290f3946441d849d93d7d566ec5a692f8cafa818446de03abebb922e858ba5cfb215125c0848831a8e5cdb3f5c78e655f990e5da9615d19beade65b74678649b6e5f33dfbba8f0e09dd4fcb2e9a4c02dbe9b6b33abe304c90b0ffccd70b74a356ca73a5b815ea613f4fff5754cda7afdaf1cb7b5868c6791667dc90d3177e15fce3fd5dcd58f62b4b5e7ba38c229d262f2c194d35c1d9baa6f42ee2f2292fc13bb31414ea400bc8fe8a1f162cf6ba33a642e72b03fc27e146ce6f2b563184c9aa20d65c54304d57ba06b20164e9e8fa23d835a6f7b9c4f4b26df46d997485994b162227de3aa520af687318d37cddf7b47d228ea35efb86b0ffa5d70f0cd2e75b9c9ab76cfcc1cd4c8f055155bc141a5f41197b96ae7d8fb045ec4ff2e1e6218502aee28baa9b745d6360b4462697474111646bda81352ef9767ec7f3e71578ef7f166ae3976e03172780eb11624073944436e0685e85b7666343994a13adbbdbf873175080d2f3b9e54b996d6846cd092f9f6fa7e5e9c5c52fc7357154361b250a660d7dfef3374809937f6b1084ff9d867f80779cd01946bd9cde95e620fdfad879bf0dc1b91815f56cb3a461fca9f94abd53041075073139795bd54e012fdc37b8432f560c75b570fcca45e6237855734ec759a11cdf65d00311882d23df44b90720ef1f4585a43750735e16b8aa725eb33ae031daeb39860ff119d71ccef7f739ccdba6da6e98ba4c88042606238d63278770f2f472dc3f5a89c8f4abe5202fbcc419b167b7d6935646908d12f06a6756919b4ff2f75fb2958025e8582e5fab76068c3a0d766b64f9c11a0b22077db94aa61c75948dc3057ca92ea60511386085e611f4079d101da90f9919c88d9c20cbef1673f1f5e28aaf30ab2b66219486c26eefbf57eea988cc0844211553a1b748dd5028eadea7f7cec5f133d4a4ef573d410b89dc9de344caf3ee486fba1b69419748a87af197396c247c823aaae6b88d201d793bf648f3da80ea90c6cc52999706a5b3a728846c8df61cc014a2ce953aff7cf1eb285fcf9ed142e75bb481d30bdfa7388c7ff51bc79b65332f4d9df31dd326bafb96885a18556cbc4050c928fe273c86c41f2bd110690985cf0a45c8500bb094861b6445dd7e1bed9199c0ab2c189026e98f2fa6c88cadf0f102b7b600a7dd91d2c233671558526063cf43720a04ff167acd7aa98b9ff031eb8f4ca0197564b26b9eef445df7444ec2e24d7cf24f0701eda38310500f8f36dc39c4baa91174450c616435c7e975ccec958f2f1990fca10330ff8b2992bf2c392e7b060a821884d5f7ec0b5b024122c8f943e2326955ccd9aba07175f43cbb4d0d0db9b0a5c504c3f0f8b14370134ee209f355401936bca1992c5a42647be162eb5988a7341182654cde57dc2b48fec79f5dacd00665c9ddc37e17ac71e3b6624f4f5e429496e5db39311d13a121258c2495b80a1f46d8f4757541fdc5ce8dbf89d3adc2238c7bb9b4c94d9cd2b443e87be1e3e9096598230b228dad650b546d9ff0b352097fc0522b40432a95ecb973c9c9ae764d78c2ffb9c69058a5753262bcca74add43a8ccee88fb5eb00d377c38357bd4688eec75a0cb80a658183afba17bbb5d8694524a975f93b6591c3afda00298832326583b2bc2176f90210a2d83f2e6960a25e45e398ffb87015685d332a8956159c006d93a18f2084754ffbc43d96a38dc0cd4d218dee6b4cd64c6688a2dc513deb982a78b7d4d974192e215305d152dca5e2615046ae09e82a27afda3c33427bd5dce87ab7cce83c1c95b7e5d3c2de4087744cfc4dede89fa7d8a8973c2f3a924961a8a017424f79bb1c32ee5102dcc629d9516a96118af49011e382d7272032520dadeac2ea4cc02ebce34f602fdd31feb9b90bc5f6d5f2e453e6e0b1bfeac7ecc71214703ee94bcca3728c8044863598dbcf64c4d47ad438ec7ae6453ed86975dfae70b76c8ee087b1b72234ab4743345d24d1fabf4ab1ca8de3e83ebcd44371d2bbbb2fcc00ddfe97e396cc85b8bd232790f1fe4310279c4a8011efcad4434b3323d176b1b546fe0f6d60d2574ba76cdb953f94e73f1793a7fb9a9268996e3e01bb8b7454db38734af771973b73d10af1e9307d1d76c7a922c3f8553799dc0a10986a29ed347dc92bb694ad50d5d7bb50cb2206e4ab589b9211a40d5324716e1617fc5b9aba281c94293ffda885f49fffceb0346a537228da121e5161b82d6f7d06051003d115ac5887096435f0ad1eabc4c0e830ead4ae6afec097d221c7aa3a372315d42765ddc42d1b4a7bb84668bbce30abf71537ab2f64f8a4bce36bc50d56ffa83c89d7484938055930fba7f1921f64e7dfa9ad065580db6d3a9376e85e76a4843cc86adcd134fd6dd54e67e72f12d40bb8ef8ce656cd2b98eb70a1deef29da35796554b37504a0a6b7029175731bacb38f8b92b800e0f6876103f80584c500ca5f01d2aa0c0befab4e266c76fb1f0e5c03073d792a54effa25e4790b7e77a0195853b580b1982f22705da3e4cde2b192c25f9b49fd643a9f1d9854d13559b45ccecc6f8a1dab5f48db8c9cb809f7177c0cd34681c5c4324c337d61ee71e12329be6423475db447a2eccbdde5de06eb0fc977dfe93c9c719c50fd606395d32316bc714a33fe398aa2bf0ab721aa0d974c21c5abf296b9a0b9fbb18e0df697a0dcc818d51aa9c01569de481d031afc65430e9c69b34ed48b639d6905a2b67a104d27977fd6972e122dcba09f01b5e18a95a35669783fbad4889e0e311d650aaa2cb0231e08ec2ed0bc46a5743f19c121e4c167eceb88c3b053c8cf323b4c0b65be1f0f7c51edc64878a685f65bdfc2773a66192acc158239f263b451802ba7f6db0a4eb9748b9c683198f334419f64be28358d1be5a9196e99ef9dd221f7a6f61fcbdb3db60cc6a92364f3c82bab3fad7492c05cb7950b48340b16264f5de3a14c2dfc00e556d6189524fe214005b39cefa6af3f219406217255a13972ff6fc1cee22d96ed6bd32b4e790a7772d2e995fc101309c98c9c90a8a406edd2906d71edba224163befebb28ed24baaca7fe8b16a449f329868457727bfa94d3908482e02cc0684e82c3e81c807ab3ca15abe0dc3dfde86e73289f9f39e4f73782bc07a49028aefe4561dc863891cd1f07b0d395509e124be61d858efe8cf9e781ab033a4d684728002d497b6007512368a8811a488ead82ea6a8d45eadedba309752e63ce39fc6b1bf1f15481be4e7cbf4d195ea1d4e09c4571474f641e59b7fa8b379f6af73604bf048365a72257f9ec8702c6c46f7ef589229770534fe1d8589bab69d2d181734f6ea63f29fd89b3d527d5c0674ad0d12d30efddf18b2ea6566c40f9a29f03b515d320d5e2351f5714eb1482adc7cc58172d5380fae2449eab6a54c25ef90cd6a30c1ad111438d095f0cee6b8ae942871e0beabcce25d1bcf266105a1ed55137fd9fa56844e9a264a06ad96875a66ab02f71c93fa83d65291ac554317ba67fcaedc77e09570ecbd26f2abf54a96de5b4fea820618e3b0ef64c6019d9691ade2ec99f8c7e2b3fa8b0f46bd057895832ee2331fb3fd90108276e0d9f5db542d001e39283daae1c3ba1697b4d98ba70216a5637a0236a79d4560a03e837322e357040997e81c3ff80a03aaa6b05c245787822848acf56eea26ebe40234f762e3a407e2458277bfd944e915abd9a6a637e4955b17798d08b0bc6289b94172abc0b318a2b48b450ad40fcd4a088e591fd14c6d9d47f28b166c229203f26b12929902d4ca89cd474548ccfbe10267500e40d3465bd18f484a732b1d9c9f5c5a6f57b1bfca2edbe4e03405ba306db753941c9210fb1527e41bfe646113a8288b832a6d7f699636df98530b6893f00f21b28c3a220484d9626a91958a73309211da808808757d8487914e648886e27003dbebcf0d44e14554ad9664a0d9e85247077ed6fde0824450e6e808b8f0acae6c66c716b597a6ca1e39cb8974c843805954b21efa38211f5ea98d0e59cb45fd0593e9655da29d8c854f3b4669909e648ae3c568f2402110e67427ed59a4616dcb8dd2807f90cfbeec755d046874ae3d86bd8fa3fc64d443ec7fe0500912ae6a6faa4e388e5b6284af0e856bac81a3ba98bc1f97f08aa6344875d197565dba96afa8d0d4ac1b411c94f224759a6234add46a7738b56648f348ea331cdea8edba97609af416c7856ed0df7817831341bc4ecef36193db170ada2febec431bfad6a543f4e531c76ff62361d9e9122907d16be50682ca238879656abed31c662dbc5f2f7eb4c69aeb4ff400b5cfec3fbc74abb262074b6d5ba8befe54ca8209bca5eaec6efd2cf01eb9bdcb6abb6019f1418d770f5cab746cb8e6f73e4c5d1b13a3ca730ee0c2b18fee862fceb5b81488ea642e550cea4101792fd0618cedef363dbc5ab733da5f9cc1a0daade0c3a0310e76634d2c55a4e003ce7c200066d3c18597fccfb1ff9f79abad3cbb302cb353ed8eb7b5a46689caa2238a84bdd5aaba74c842ecc6f4528058d73690695144a6aa7e0cd16a7d6370649ea47fb874b68b5fa0e006f0e6c5e51be2546843789c2cd0b31d238cb31b655460b0d9ac31be276f801ba1504f106db4698bfa4ecaf3e05eac9403e043c08cb1dfcec4b4feb875d23ce2b0c052528e02c1f5ece3c26f9d3a69936a7df245726ea0b24b41eca96b6c0b6b28d187695b19ab9b6b4010876fb250a8fa0330bf96ecc8a75ed90cc2e03953f49d676d5ff127c48f5810ef53c0a3825150b213d41b93fe4cd18d1f3167578d5ff1396cba85a5f9a077d6fa055d04aad4b8c31c6f8959fa47a0860a6d23b3dc8f4fbe3e188e45736d0995e49b92e2d4af1badb3940a3959428bd2cade9f857756a0b63d67bcb1d6b06a07d30bc34176b2bf125583079772eedaad5290e4d5d5a8930dfb8daa88b787702267bf23d31aecb4a1716f3c9792f5dcbaddbf4ab705abd6b34b0adeb2dcbd939ab719b2243ee7ca55b53d85c398702c582801c45781dfee58b631ab3c5106cb13b77769a75024d1f9359c96e34296a9da653e8ed10983f04262f405d55d6b6734dc2e00788d8b45c6c16d838b31089949cf6285a949c5df95fb7d915b4e10f55c014ffeb917bfc37d6b9d48ee0d1124598d20d436ff0995d39deaeca5eea44c493ee08e21bebf2f56f81b36b96988258c049c0781a13b172bc8638b3ebcbe12a673743846a4e7b780f00a4e9e998c719bcd8e9798c391510ebbb7668a2875df62bc5b1b281a99aa0c58d20df837f3b1bb9fa4ce292a1bd84116df802cf4d00adc32084ad7e1ebc23376366ebfd3046a7d467959ccbe9e92b34eeae3a1e037afec8516593c2f373a2492648ad9b941bb7be97e3a57ce8d23855c57595ddfa1c317ca2d439fd7867ef1d3faa4c08eb0d884afdba84c57e93ccc67b18e30c25818dac9c2745011648bfcd792d1b79ac83a98edfdcc138e038124a849f8f1c5fa24e34381f766de6165a57cac31f745cd5dc462be0e4f1d8522703a0217d8282e386fab6ab084b5b8768e5386ed0e5fbe96de489c3a426d322b2b5fea19afdb96e373150ea06317809484e228dad13a1e99980dad86e6fbc12038921bedafcc3783174f141b4d5576759ba16c8146beec8fa60ba3a1b1563fe18865e4b0880b25f573454f1e757a5b6cee2f06da535131eb87311c29901debb24b131cef8f8727b474b5f6c69fd1d16f59b421351128741782a95ed1df69122490fe1e6eb4318bdda6e3673100ded1bf793e4f3ad0933743ebf003bf252902b2af9e4242f312e3417a7ff4acdf673e0a259be9f71581a7a5d22639971f83c159b4968637edc64111d97c12ebe98eff886b19b1d2893f8171891d8ac8438b1ee5d36891211a5c02f1cdba6676eab216dae7b08763fde540bb86069601137cc4315b4c10892b5e38ab1736413a126cab7830a0b8c085dfa6e7933009358a2176d6ae85186ebb96a7a7a08d433f7bb13253225b580fd5f04502a4ceb0533aa04682fdcab4e203bf667a3b061d18f5dceaecf62f146d5d5110cb8d0ba837aa3a7ec9e8067b19e3bbdc1b478cd63a1c57b092cd1cb5a7584abf8cc0f0a147d49472ee42f6ff8517f511ab5dd597ea763031d6b150c8886d8ffd26c52a1aff7605bd25492274194739acfc0358715a814232a558297a04012bf84fc1494afb1011b1f9f7c09ed94d76cf4dd5c1aa775de18725a4eefa020a44f8379a97706221ecb205277f80ebbc01136dbf077d80be1e4fdecf1a6a7d6025b609e79b302cfd15df8f8760629ba273675f5dae2277ffc6186e43d11dc860d7d9de595aedc284e10f1d6b23ef0ad521f2cd6a345e8b0969a9410447666b11fdd29e86a4e39c4f76446548f0e7deaeb0d8e46fa173c529ef3785b059021da06614ee7fdf5355c497ae71549e304936b6e04cd7efd8ebda6e461dd2e55f7cb240aac45f1bc7983dfe2bdea299d53e390f60c67a5f00edb546e8e883f99cb42c64fd0f58627150663c37bbb0aea33ee9b2e61ac6a54b3874c013c407069867caee4e0a1af10087737b7511f5c815c5dc81a1b9bd32193a5337a4f604ef80a7bc9e515058919e934ad25952d106e69159e6e5c73d736aad1c6b53a5fb3c6c9ebca804fbeaf25f0e6cb980f9090a229810f1890c8e188912d507a918a794dd478c0ddf2174bb0389741cff95a2196b14cac133e10cf11b0f91ca05b0e4f31bf47996471aaa848b2ce94df296f6db1ced162d024b00ccbf9717574fa9dc3540e66d59910852aa9ea4ab23c7c968294271489467d03fbcd4d18886ad5fe1140a706ab8f0d03d371ba3130b54644b8f6bc1994f198b5268838387e14e3905b05d8e3b9d0469955d12b0ec5c32a2295b494f707bc52f3773b5cc7732173134d656d6262ab4323d3f878dcc78fc1071dfbd6f263238a18dc4ce3457a89c4997502f3815e7f63c8e8aaab007c1e533458c74238d6ac17cb905b500399685519a7377df22ccd70826727c766c7d93f0d77b99477f58e5d185fdf7397c56c039e7657d266073a51444eb65d38247e363469fd1db1640083d67367234efe221f5495fb71ec83fc2e0acf1b762e131a155ec13a6f42659d0882731f2639584ed240e81ff4f41d230cbbb7aff48b67d0949154ea007e4463c3f804317742e4d45431777ae874811795d85a1a5d4ea5cc535ac27a45fa085a897b2d14b576496de513b94c2c316e045bf24c5452536b3c6f62df23d48d2bfed35b3ba2de8bb364aa8c11deea91f234aadc9b9136c3527dbb7cd7c0d2ff7c483d59df7193eb38b8fbf7a0d85cf0f565a6b0b8fc7c1171bba6a08026595ad49476b6112b96f3466e371f4b5346539d947f6608f9157212f11f22769ef051115f66fb026835a06251cc4bd3342feae1b10f24be65f677dd3de17121fda8dbbd79710ba49a8d9f02ddf90c3750b3435b77490e6969cc437a0b72a30c0ad746cc7c4ea2a941b01d7d09917e9176c9a0a0a67493c7adbb332b63d6bdb9fcdb940855e2998e15cafb2df7fb2828abedcc59067679d9a5a73847b5596d8850d1e9182ad5db666bb2399af5bf85b8f10592cecc172f9d7867a9789984c27d0491cca47046c7e3d5db5d931adff093b4a87b8ee300436fb8e2e8651edde31836f76789b1474d25b699eed961f4feb837a9be737fb02364d53943fff7f981b5074d3f518494ebb0c9df824fbb658f30a387a0053f644f66b0d3aaf4c7d80cef60c9102774f658433af29e34e169b32955ca8289aac2be3bb4cba48e7662246826529684d11f4abe5b85fc404eb5ca0346525803cb8bf1813c9dfb122a8e3caba90399783c55d41c63110bf6f6ecdbf762da73d1b92a2adc8aa67b9b1ccd1c6c23fbd4827cb17d4c76de25fd938211d4de4c8f757abcad3442d0987fd0f1d04867e32f8cb1cea019002373c957759dd45a8ddaa2e9ae11b85145b70b5df4802a8e2964d0ffd933fedfafb9d65fb938361ca7f1ceee5a5a5fdfa80951e0cbb12a3f860f7f9c54b8bd1e01ee96635c0201c0f774c3ef3e252c0aca09c67b1b144fc463558733143ea30f2330ebf7de54516873c35f305cb580d75167cbd0052a2711b792042038375b364cd5cd5dcd250ea84ed47ebd424f3451f7369a0a3128eec6798c32d1c0e1ca4ca6014883d6a3876a30c3916b68d7176401ff171194ccf41d0b3fd449b44292e727a486b790a15c32ac301bac2d43af64ff3b50645a6175238c8b60cd50d40bf6e9d3e209b9c037a43fde3fad29fbf09607758a2029780058579bee3d7ad1e18d5818b148a83acad25277311bedb2ac2348a78598a69b67cf77623fd989422323209fcc4935e0b9c532e0516ff9d37925fdb8827c0ad5c8c39db58ae3809f43d9eadda1e0a1a077e3cc1b4b2b4862794eb090528276c769298ee483e77c02c67204d126ed494a089cec03f67ae39df34dbaa4a63da4b4fdd7656211cd2abc937b228a421e434a3d5a92c299325b6f5ed8448774cdcd1961bab1df5540247a7c95cf178ef8ed60aeb37d3433b4a153af606e086ed62ea69aafc59d1c7220916779337ed680f35a7fd4872f2c3e419695fb10b801c1669cf1c85d73e2a5efb4124f6dd48dda16db10d39c418188f345c9e95f6b9b4c7693d571b1b15fb11b0a069546e900546140bfa2f4be0a19d261f9d24a4b44bbd2d8aa3c9b5336f785e96d2af0580d038c03527570a7da94257ef2580cc24499d54e24c9f86cd75a5feddb2928f2d4d9055f6f524a0d3521940122e10dde13dba42a7890b88e4cbe3d737318a3a216cfc73d22af43729663305b88f3939a1c73f83eff01372b3e5df5f8d34b3b0e17edf8a8bda141c7e422caa09390875d4f1aa42f8a0fe53aba3947262da03fafaac476f76831f68881b1f9787f1ad23a5843f06453f54a1d18a4d832e0c997cdf589921c8ea10a26841ae67aefff3a5939a89eab0ca9a388f0d3eede7664be88e55de644a66ae7019a18947074dc5ebdfc194e2cdef1a4e5831f76d3f272da6e9d21273d56ac4d4f558590f6b254171aac10c6e3e64952412e63bfc8feafa97ba8f6fc46504ea603cecf6f6acab7783d5b08f4a874c47163a6c2b0b3cd7102948cb107ae9736786b48d52e998785eabdf43551337127b7c9af96e41d14850e9eb53b56d7722eda7e34ab01251a67c51288bd3c6319ce0213030bbf24fa7e52cb54e7a0486a7324009041fcb9c3c8aa4c22a35f6577956325da7b3e4c1eff8d8c554add8f763a7a044715f5531d0dfcfee7a9d435b23210abac474e9cc58642afc004e775182c7fcab6e91b1a74355a03444cda8b313434e7e1bf0b00fdd40cc6766c2305ec0c83ed9a80f651a2197e1c5f9fb0447cfe9d15fdff0266ec23fd684d00ba8c973a65b75777eee9e3dba55ef2989796de918138f9baeded2f1b6c3f63772d63ab8f802902620d99bb73e694ed942d67cc208d368561cd36a3f96ad9a3d7371d08eba8ebcc368b93ec6f5a638ea389af877c77125722214df1a50715592481d4dcc40d027e6c93f482455842af73c808870a3101222359b0abaf124a3ba14160a6a7868da913744946cbe1eed7f7b6149095165ebbb154ae8cfa2c018d68715f45f4e66d41b7a5f29353cf8053f5d90068bdb931f2e7360cca7930f14e962cfa9a388eba86a7975bcda89bb49fee469964e1347d8420ef9cd61ca3c4a7a150023198ab280a9eee89fd1933d3f2d6236b270d2e50759ae76b3e071b4a1863a3ad4631e317c830e332d09a409910d6bfceeef817ee11fcfbbb982b70555a80de3122a1be1d6e15afca89c4bf44e2129a5562b19f7c9bda24dafd991c6d1a8f769f28d6f0f8e1c7d5ae8f219156660e6a17b2155068a83a176cf484c69915928aecf40629f0ebef5ffd697786a71db8a8bed987b72fab1deab4ceab86911e2a9cbbd32ce7ac911f72b7f5762423578afa4a56756b2d14378a67232758b5a13af8e84857999d7b136aa898c498328aa110717c2826fde7eb33abe8c5b1a220d875df67df8f10304814206832b3d84d17f990baba7b017a8cb72782cd766ea2a6f6b6a7a3dde431aed8eaf7151131771d5492f256274d2ce8b7dd725b0831e7a251970664d9187b03fd6794a242c5d83ceaa23227d2fceef403ca1b4493cfd3d4516f31c887c75706a7f6d5bad40b28b5b0fd8498b8ce62566d1db229b13b95c03d5e808c86dc371f38fe1b69d5a84917d9755c5e2476e0063b9828ff8ddb4f3daf848d0642f9f71017bd6f97bca9e813a4c9e7e87e7c4c7b0a94e7ec8cce8796e0ba4e330028af81b764ebde87ef7ace30f4160e489a38c1de7ab7e10a497fa6c1c5297dfeb079a567db477f05b1e84db395baf7e00a83aa43c0cab5d0fe802d46a53b196188647a3789bb642eed536954dd90a29ba5b468bb5f2c4c3daef142bad4a50b7d039d37dd28b88ccb997e4f16eaa9e755038d59de37a99bbb30b988584345da1419f852e1d3b936f26550076d01a5ab34c62d973e72904dca36aa7e3cc2b6fcc4bf0bed2a32d1bcf279b1a50391709c0c96092faf0acb4ec764674bbeefa015f374f0cbc51776e86ccd07b91db8445360c4003b3ed2e0293f23bcc5e9a3ad7f59da87bbc7b0b0b8a4015b5ab157ff65f2dcd2c8b8ade1f0441c0608fc17fd9122448381e77b3bbf594c20c37bb04ca4b7a59e51e70606d018a9afbbe345d822c0475c5a26fb453deabb9ce90b8669611a91694de8d1b22de014ee11c63faaac8a2eb36bf9d0510f5e88a2d39194b9bd85c6c6d459211fb1e6b297009f25437a880bc040886b04288da2e27239c883cf6236137b42609a0f03efd3468dfc7c24ffcc9faf77a8d3f5fd2140a1c1da801e9d5e9e7032f6c14e539251566f28933be14c783e80a4a073babb0528735d08f3d956ca623449a640e488a78f93923eee33524e3e8711e389ece40bbb828164463f8ec9a42a5c61903374e81a2bcaf15bf0ae76007d364b81a85729b7dac1b99d63f4e30af6e09cf0cfa140e5d5012e1750176b88d9beef8f8fd2376b3a2d3d484a4e48eaf629d4ec5a98add5e2b67ad242fbf73eb6e27f31078232042e746bff13dd7d5ec9abb62811a96a1f9e965c813b2bf39966f8b003f8db9739a97e7917c2da7b8f9dd47271b64274b85ff92174040dd7a6e2ae7febd75a428b6757aae6d1961b55f62e6a91d4c12f461a7daa9fdff474ad04d5385315688bcbec9a96149a0c8ad5a06883f6c01399b9620ddaaf0de8a66dd9e2da79e0181b45c9d438eb611b12c1c01158c46f3ed8f86f33e3680af95b0b4aae5e9fc206cf6e1e2e50fc4312d74de84f8d423dee830bc2accd9599bddf1b520934c34ffe3fb05dc06fc0563c949bfc5d7863a4ca6456cec39c2e4e054f2991441eead48f6d18e02d1a29149d54159564cce88b570d329c6cff43f4645ece8c5df700c6969b482d710e12c1d3b9d4df10ee596eb53d25313ef72b3f2c5eb06f995d1abef15d418a5e79bda65f00182288d485d3aa59c7aabe585cbd6cb097e6429f971af89fc1edb15308e2f261df3ca099d40dd2eb7284bbb2eb1fae3c0403f21af7b2e0dd3aef7deb6662b1a35366dbfdca98f8ba89390866228577c6d689c4da8576a3d941b07039e81883da1092b739a87995dd8bb1da0f228645acc31b2c524515230723185e564a6372f3a13fee23c4d9a2787af7996a81c809168795cdb788f416511ea89c3dc92803ea27f6e2800433de42813793b45461c13b10a683af69075e112f2a82bf5386890a0803042af996ab1349114036bad99f4e08d82edd5ffca0101322c86ab3e9586f4fe9ef7069713887ac93e92626fb02ba123cc2fb57f572080316a94b6374a9ee62ecba0adc","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"666125d2285f1dab0f009ee7052c866f"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
