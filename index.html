<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"70e29393ebaf9332823f3b67b3583e663b179558d141f669b4a2153b07778ba5f5b39273e1f40895e9575b80088bd97f19a3a56b23dfcef4b4586aec9f3b0403373c265deb11ecf5ade84c1e9c6100fa150b0591526afd32e895bd5f5b578010691098a98725b63a598216c9c95096da353642fc106609e23b507c28fee95dcf7960e354b716e46a3062e6b99261665d936ea8ec60789c6a2473820fe724cef42134d29e2191e28b110df8133734e73ee09c6743b512c0e2932166de2ea671447dcc5cb2aa51f556890991d6adbcd33255e6eba6bd706dee11ace5bca8211b13f5605448dc9a2c318a9c11b7a7c6022d4155ab8e1f30ca846a01b58e06fa294f8c4384468b91e80515010014ab59d6a948c8670e49d65a0e1c76502af5cb93d476f360b632deded4e179fc68baecb6e913979d4f1b4b08f3f645cd64855cbdcd1ac04addacb5592948f1ec9bbafe884ada7e60cb862e7709c1017177d21aa5efd28d4e1290a50f4ceb1eec79ece5482ad8c9d21c7921cffda84d1684183b6273baf8cdb2b837e53cc444d92b97bdb8b6137aaab2edac2ba9ae03ab4a8037458d74080d04cb96d9f722539b8e7e40086ec2809caf0227a3b405b0f55a56203733c6f370ddba0a986569f2e0ea2b4ec9f8a5ef26fe44a69dce4f80dd10efd9a2e38ed48da266ac58ccf1d58828acf02a20a3cc44ac419732eaa25c105a36b9e4ca0fb52d902bef7c31ade68dcf9808d42706856acdff27b97f729f7e37c7d96f5e875c8b1e025645742faf517bfb8671b01ed43def3596c8ae1b73db10220ebe342b38e34ebd5b42a473a49d8027614bf39cac2e9323204928a72ed4d8a08506e7f5f2e9235d65de772877145f353781a2a6ec86d2128a8db5beb63c3ef0949d19168067237f35dbaa21fc7bd485db91e21c6eccdb6f544475eb558e4f36d13ba8a8c380596887f7a9373a11f962a5ac80a39625c2e374f921ffd72229b8e928487a44038c20a00ef17ad010b5687c447ed6583f060eda68f19b88fa0ca253993bcae744800adaee918b6a8be0295fae84c3f0c2ecec0440de3f58a5811ea61dd40fbe5c218de43da7e103bee1e2e5376dbb54f19b3ddea1b902769ad44d55145420662165eed57dfb54340b9bdc68c13d932b9b59cf78b300723aa4836ca509b234123b32fb08891af8554ef8fb713a9e50b2a8363e71a692c970e9c5ad74bd4092221d9f3c1fcb20a5e119ab4c17e456f6cfdf3e1a97dcc80f3ed86fe281e17c2065d91a7bd3441fe3d820d03e10af1c6cdbe0d80d36383a24c6f1aba109d8057ee4faa5aa3bd8a369e61792c020a2bd4cbe7013037e7256d5080e989e0042c4da509dda540c3af78cb2bcc8a5c3de2ecbfa24b9ad49abce1c32c0083116030e8011b5904ecd03966dca54b95c3f2773f87604ee49264518484e3772526f24e45f7e7114416786e191644f36758dc25a6efd043f8615a525a797d2ea374b072e8394ba99bba855875092f6a3db2028bb0314ce5323c210a68c59760c4aba13089b46f4a025e6c7e9f7dc42b50e25b71a04872c9f91c1264e2d9f34e2f14b03e3d12a6b58636ef5b86fd69157f82567d5231c7ec6f65007a1c0106729e3c3f2e070a97d51617047ff48b03ddaff2298d0f7cc66319b00b260cdc0ed87f851a322b7789e90296ef422a42e218262811ce83c4c206e41082a3ec63c08c5e279d26c3035aeac5b320eaa5fa4f463ae75fe9168777c456e17b4501a5191c3d8d3a0244e55f3baeef1351755674b88730e7a9597311a5dffd18cbc71e22b46ef6904dbbc457bdd1a845c4a3aa787bf56c4dbfcb2f38c51535bf03010b55775ff972548b295a0cadaefcf553ddcdd49af6f87a36ec9a215e5c5950c569acd52956febc263521eda5e0b2d71e1854641d429fc66556d5b1012ccf7b744c5b5f126ca1a12f02f6431d2c0ba2f631a40be61778128a0eddb5d94cbe832a6bc94a134f0f337498d3b538ff51240747f21c625d431cac01b3dce98b49faec2ff97e0e13b3e4d35431cf8ed1b3319daa3a5a0ea188d9497498d53ebd119e4aea564231a3cd5d8a3d381bf1833c4b2a052430b92169e7387d56f103fa86484ec3483a37aa838452633ecb67fef059b43caec21577c8ceffe77cefddda43d208f51f1a014a548dd4dd8f9f83427378c8c96908d91664ac9b2c6cb669396cf080038ed0e38cab3b9b051afe290050c7bf792321fcdcb3ac9d44b9384cc6517d72b34a752f14357a2d5545c602047f059e202d0fe183ad6ccb36d2622b117f19bb4797c5fbacfdee1f45344ecdbc5e1934419aea907e1e90d6111acf40fc6e0a42a3ddb6ec328c578acec05b70906d0893db08b92d0a8214b0f40c91701d81ddae33ae12841d8fa500294491e8517bec786e0f65befd8d552af4b07202f5eb75d74db89522e430885b033a6d2f979724a8a7ba11d753a9a4382f5a6dd182694cdd42a616a5647d623523bcacc137af77bc8c29eb8700e59dce4632cca80b12f60d4aaf51085fd1460764992077ec430c73e2d6f65b14add66f0cbeb21f81bb7e6de2b83c08ee9a2bbdc9f3aa5a3122a16e868fee2a7728369252f96c522abe769450ac0b0bd77c600fb9bc1a0daacc9227a695cccd43e7007564214ea214b15abfd8266ba4de4a01d7fa91ebd2c862e7c13bd18edd88ecc9ada0e46f906b74d49c56292a52df509cbba347e51224b485318cecc6b68b98da582b10ad68e694d5571f188f732932af8d27b6afa2b84d5b0fccfaa2e56b3b5932c9f6d7daff35375d94ff266655eada194b5f564d0808a65ef9b9e8d6b8a666475b82cc395a7ec108408f7c672412d1d20efcf8a022d6408e32ebc676af9da6993d96efc7b665e70a8191652754e7c205f413e0b11f642d9ffecef285f8cb2e71dc706e4609b19be649922063321572e5baae81e2c674b1f7af66fc5eacbace0453a4f4c67c22e30654f1d9189715536e3a14cfff85e7e023e3189753752b66a2c402c71ad9fcd1ddc305f32ccd2b33e66674c83bc495203ce1a4fc7214106e71f97b01db8607787418b7cf3772c2d2de86aac9c3c4233439d5469c707362f08e3e325ae0b2f33f0ec10db1060e213fdb92ed47e6f192eb9d98b70204cc50a9c07b589d52e00a79a060aa1b36ce5d7331444fc2458e5f4690bc152e2de05bcf9b432316da65b7869b9bdbfbbe3935a9e8d5dceffee7771619363ac3473b318d948c75cf28b1e6e1047e8ac6313cb4fabcd9f4f9a098d04e695c29ef0597310f60155a3961d83e5d4e48329f1d398b189a52c86161ceceaf877e775993e221b8a4cdf5815a6bd5e3cbba716ebee06f47c4fbf73d363ff2df33a0a5241efc23374813c5ff2c314f28a88f62d42f71022c450438ac9254c214fce72b145764bf0c45a7e1ee7210781458c8798e1e8a989234364c83a1cff271c5be351924b9db04aedb5c7672ff061990e2d186d4908c8165748109365c2680be2e37ad3a1da2971c603230c3d786235ab5a0e374bc8f38bf29b4568b011669a92a7967edc92873326f8e04beef1a95b0b01bcf0c084a303ef97739985120ca6bace90b1da24ea1993edd9a5f8b69335a33f055505a38ebd37609ed6339ce2237ee33044877f17e97da243616a5e526cdffc0d5497d23daac3a65936473afd0d6539004fb4bc19e4ef5bf7e55018d2a22a230ba93462eed3ad9d348db40bca30e530bd58131472f95b88378756996b7f193174b2b8c02b0cdf2300208a52830b280aa3c220f6c4c77834eeb2f6bfd38c739b4b0149301de9340c62a0dd5bdd0a75b5bd7db2e96f7b6a4125b6dd6adec31455ad70c58beb723e781c73616ace4145ea26e29bbb77a158d0bfd21d34fd29f98afecb8fbea71a146517810de8859555f5f9849d99c02a427b283c7525b164c27588b3e92bc039d45aaed426fd64be4820ec7d82e17b79720bd025efa9b3b3e3eda9bab3c30b2f05162a519bdf1afb6ca50572faaed75ba7a699ba5f045386a75a3932c0ca3574f6f827bdb1ac9c78656e51fb14cd4ba26ea4d0f7bd95c4be32b54733438d31d3710ba9700b84525c92c7b1b26fe4204a96389a5522be3ca7a0a5fe9eb3ef20d02b97e402d94e269c4d7613e811351d2948f4369bae26300a25a7ccf8accad194fd98c5292bd26d018505b9c2de9afea509b494c5c0fe58574808ca19e87a0621f957f131c0c73f18c2f780701f08ff6dd292d81eb2cb9820c69b1cc9b5a7f26db895099eea4cf7bdbb4f201a132ae70b2722babcfc1d28bf81889b5e67ff7846d493916f12982623f27d1c67b7a2af291d1e3ab261126deb70877e93d0f62873ac684dc8e6bdeef2656e05f8a52cbbdf0dc502f1f39ebb3c761d2d022c185a422588ba031756d9aed3a3b86644b4fad5d9867548e67b18fa6d2179bed7c50f5288dd44122c7d771f5e92ae8ed2c124315e67c770e2c28471fbd5549e5b87d032975a0200a438371d266c180d90406b4bbd382dd72023411be95cca358ff7ab8d640f8f6ffdd4c9bbf031e3d5c01e018fa0c36474be20c783ce6a732c4397645b771b1cbc12f500107ed2fbe12a1b24e17ff2d9f2bfdd83f6303e40c3ff14c7049bb77a475f20453368c8e95a77b18000f93d69edd894ebc748fc1c31bfbc9acf4bbce97d0c491470461dd6062382a3443e1ce9df54daf8a4de84e4e11b3ddd3184f49f09d8d5c754755aab744a22b1948575c26b914441ddb78e4d9366aac591aa09e14d283234f86c09f04792bd0feeb2a28302565a7156ee3f6cd7536dfe3f53e975aba192fdb4003dde5c879f64982b02d34c60c03ace818fc948f8035bd46c4ffe000d1c5dabc7a6cb851581e42812010fe9b17dde3629064b70e267547349de616605b9b082d80238ac95b4f06c616cc188d8fdaa7d68a8dbdae1d17254442d20e9e836e4d5c392b2376a630bb8cb164dc6c92a6f800003516c6af32659ffe64c7ed5b35ef01a3b491e3feef13e57c9b5ea1b4fd7e25a143cd57f97add562fcedcf065317dcdd99aa5f9d9dd7ecd86bc3faaa1a7e5bdc8e16bfcefcefe1ca4f3fbb521a0222af1e8da592f86698a037e0afb165a094e39ce824d16b1809cb1ae256bd54d3c62e4c1a5a73ff4fd9b19b6b0f894cc691c1010b80ca496084e027849e2418ba7df9a542e1c8ca4994499f1dfb820724da83f9f64b2721d17fe81e88871d7b41b94efc1e7a9faf747e1bb73692d6ade92bb9afea7cf9628f47c710cbe004c7c886cdfda6e4138b3c1a0e749e610439ff76e51f52a42f7aeb8f8a3d57200d428f87288e24a848135a1c12a8289b74b875642dc0677cf088f78695a7b9f529f8efc4a0ba50d045ec95dba6b5a623103f7069495ffee0070653aa00f41244ac0a3cb8f8ab848989fc8d24313621bd8bd6fb2f36adf8cca3fb0b49131091fb4608f8d26d5b4b30941a52a56dce78e76c59c5d72c89037d22b5e7c43d1e79233d153ae3d447c8bb001223a6c6eccaa7af2b0cb3cab63acb97cc7fbd64072392699a330d1e820e6e3eefe48e8ec3e9cd61d92510192fd42d252d1085c4db7d5402e66b06cf13fc5f4c10cce3bdcdbe817d364b40f73e5dbd31e83af8da7e9debb71dcd9f8dd6b569b08ec97100fc6c5250a7be634397ecb2f4e2f72e0e9ca937dc4cc1ba05510706bfe82d12b05ee9a673772ba6d9646527883a452b97a7c8b756e70f842ccab02315301be0975577d915f7398f683e893b6edea87d477902fe41bc922655392fed26861488ee261daeb5416cf30418aa3b56ece1c3abd5905c83746d74c4425d392e1d3b7cf422960f405b1659268aaaef01664bbd80037a787fcb83a3cd5c73dbfecb3d9ac106b5517c5966afc30361418a194db5ad90b34de3a7621db36fac2145f3f3e906bb664f479eab288d2ce8c88b62525d19def1f6f7ecd77d1daf3bef2a20ec66349a9c3723a55e62b1c5140b66ef4b5a325c5719e2a9f0c592423e9cd3c85207e5459e06b9726b811d6a6ea4337b83c21475895b46b6b85aa55e09eabee31250e0ba77ccfd7f5ef11583a07f30aa5be9d39a15aa2d1793330c1a3ac79c17237879e867836ad34779059cc1422c5674497191a16a972f332eb5d7b207424850df6ab0771f8232573c9ecaec3cc380293183ba44e66de075400d8837bf4a225bea36c1005bebdecaef8ae2400f71921b97e44cee16b23d283a36231ec068e8c857869cf6b55ce55c1b4a222d4b44ffe6fa01b89ca24aa474485784e257128d943fbc67487f0a65fa01c96ae7e81706696480023838a71b6a000ea1a9923374fcc867356415f00e10780d270cfc59cf3f45ecd474ff92d98997292fcb78b3fc42c37aefc7af227645f89fb60f0aa05183aeb3abc93eb0acd5af80f7246405601df6167e47f2addccb83d997076ee38b326947a30f68c2209d20efc872cbad2f466526b1f87405658419741ffc2778f5a5cb6079d2005304c5a4bddc403634b6c9884c17259d1072bb9715afd65d159e42cb588fdacc95cbae68dad429cb5f2918fff0c259a6ffdb1d2c9548d50be0827dcd2e76c40257c4f63d6dcc95a1ca9616c1b01a1312742cd54b7379860e4cd0cb919ad20b641b5787e43985a5ea6a1e562210cb2b69c6d3014ba42ebea54e185a2272415abeaa9841e313ff0ad8fbb33e33d4f7731598773ca45d6815a63e69ab1f6e0d26b03bcedb132bbd6bd57e976469587c2acd7de26bfa351f8c51712be5afc82ad408989fb5a700e6a0076c6c8f5121717513bc7dc5a94bd678b4e48b55e378a398f5f7e2cd4f057732c8c73690a1fbd3c84cd1167ea29b3f5f912bdb3bb9b834fc4097724605313f766a701b1eb9d0720a904066d2cc14cd29561e051d588403ff3f9e671979e06ae5a1ad80ee521bf1565ff327c47e69cc8ebf03716bae982e871a95332a4fb14e17c32e99d8579d481543b8c8d187f04300b92365f1c9af2eee0a57b320b77cb3d8cdf8916b4302bc1c59c9b4bb889c6701436f928a7f9521b5641982370bace730ac48eb27e303df768dc271633bd8b00acdd20d6fea27575667107950bb1a013a0a13d3aeb286036023f5b7acb260021e301d83be016b2c0b9c171d082e2288548490d9edec7c535883bc1a09440f06a7c79d4fa4e5c4902891504a7c711b9965d849637c070c6dcd0694eeed2ac5de4f8b766427ae8c7f09dd43fa0568e890d4b6a78a4dc487f32e9490d73a1e3295f7b51b5923f166a277fe0b2ee7b88584994f8f818212a47f9506f233d33751f52535afc378fd3bfbd973c41ed36defcf48c643dc6e14bfafbc5828e30a90abdf9ab41533b21129689e363e237e3d6892fc48a6a723bedb88a31397f84aafb94f9449270ece8f3f6a5d5a30a014fcfdb08b3f4fa8ace114776b1c5a8670e83482d0df98a7cc0475e1ecb3e2dd6e4e2f2bdb42ce75f6d924f4c32c9bb42034516a71157f869210de951fed3de00f3e33d8e7a080e62213ab88e2b33e57435efd9008a3b6aa522abf26b822150eef8d686b311a2987d2cbdca038009fa61bbe5022857fc8b49086d761060319376e1d88e2cc1c59252e302d1712203c82cbe1e949df69c226dfd64453234348cfaa29f0a70c648e5afab87ec4299c88a9f007a039c9dd1f0e9a5e5d54de07d764c29f419ca30b37dee1360e7c02ca27e3c12b3bc19cd62a32bf694300db2a51e93242f09900106a7b1f24f9abe5c8ca95f98c14a5df47f48aa85246e94716bb32223e12f3aa60482a0912419404fd0423498d4d34c3c99b2d9ea7c88e0c7f7868bcb133b3a008451fcaaaf743b5b85523866bf516a446dfef16ba5d6d78d7ad75fcf6bf74b30c8e7601e8c466b5e9432c0a89ba9aade6c9e5e2c30b00c7770261843ce2cd1fabeb795bbcedda54fffe34f038d1fb11d1f3582b5e99d658692b7e005cec47a7131abc21f1318b1b2ce7b7fdff9f24ec0d70142c5efc8a3a95cd7a0e7c39b8a2b03900042cb690e380378e58d9aebf7a4551e6e0c810de1180e1f370cb31107d96f15951d3b8688a20a6df75ff9e9693b67c2209d92f9956cf1c6048436ba26ea60e447aea9680505b9db6d8b630c93d8b6485fde8412b2909eb13f539b622b22674dcc7bf72fb97c2af4d4ca676aff43e3bbec17962dca06056a05b5e075f3708d351fe97e5c6d86295e6d40d5ea4db817b504902569ecb84a4bc3167639003353d2570a9748af3ee81131524a7319df7f4d60c9c909418aed06686d12be6189292ad73c99881788d55b990f4095968a752339a4d7b81a4080d52670f9801029ea5f6e843c8fd0c47c519406138facd5839a15071aa279590a16faa33c33e99289ef23f41ec014004fa5f4696d563fe0ff911b31d6c9ba15d1f824fe507e1596700f001d1f06121db20c148694054cfd85e9021794d4106bf044259c458cf085553f0e42aed79c54c624f63cb67e57afc28fa2b1076985d5e4f92a1124fac641b0c2f981d8561d07a502c1f6abecd48fe5e6b30a9c110493e06ed8b337fbf91b65606e7f79c3b4946689f56db14ff9eeb0d63b021cf71aa49267209643cf5033d555f88b76d364e18663589c941f045d111020fd02b69ee9fb6d12d7706fee038d3d7394e7cea73a909bee622a1400c8864cf89df0e2a0cb084b546578080a581ad3bf06f051421ef45c76bc496b999dd3105ea9a59bb91af8d0b1b554f01e9a1a922bf983e2df1e1baf1002338b850b87e52237ccdcd6175f915dedbbac76ac00746cdcbd7a463e3a77e2deb51052da69394aff01fa4e16693bfb1216d02708fe76426a8d4433c0e6f6258fcc47ffa8c0a9ffb35223057358b4704253212767b0a122f0ea3fb9e416127385f1666cd9b0d6f46ee3716cd029354978a914dc285d02edea2f18ff56bb7db3cdf159bd974ed5444ba435fd9ddc2405e6f6559bea43cbf293ec0dd16921f6212e58306a316abd6866e5276d7077b015c6ce84ddc30bbbc63f87b5b73608b7540cc98c6d511a5cdf299ec2f032b1a1400babc322dcdbfa503fbe384184874f979cf713ba316418a54f527a4e1b6f65debc8aa42e04a7f76b894d1bda0035415063d4ba53d2896ca5934341257993ca2e890d3937f43f39e19e4587dd14004412dbf2799ea29692b61724975917455ebfa0447480d81299929bce620b9722d710b6543395d2c33a935d23f8d3fa0f174b05a896b7e4d8999cb173bcf64975f85c41d3fe8eb074a50288ebb411eb39bc141da23262a1667ebba1b032584db1d03a649e7989f45d36264c7fd5bd048e7067c74a9b95dd52eb012617ad01b4bce3b4192b9fa4d1d59ea4e3b94551d1551d3895bf8355e1aa44078ca1035be54e9591e595730a69bd44af1ada6b3f12f96f68b18cf0a33a8d600df829868fe608bd9c3d570c1bbc9063a4c33a84f8e748f6857d7dbceb7f8eacfa61cd50949ce8d52727b375b27e716fd97aff5f5de755901174fd706fb83a35f00ff189bf16f2842117d42c8a22c16e49a9f75670b841d16b0160dd4d3caefc6cb676198556604a1d7a5e72b786a2785515f82eb9d5d3cdc09ff3ec010c823f13810750f27060d9e46f6f6b906a9454a60dee225006d85c0912cb37a53dc9e9a039f63f3d54ad2d613d30ba37ca5da625c4bc08ef7b287b77b1a90c62e4843493526d2f25176a08189e122f7bb0ad7f136cc4f50aac4d0913c227665e6ca8c1bed242fc28b8d4f5187d1157943976794ff5c7172d788155603e1d6814d3bb32c1371436420ac5ebe4a1caeccdb568d0a31dea16ad3a863996043fff6bbd78ac845c2a69a0a8948196946c98acae6bc98c4991220001c223be9383ebe912f59a00aa6f96c7795b67f8abdbce16945ed1e5344335c961a44a675633544a290112579934c9ed916ffced3ea14c9322ffc8e36327ea9ef7dd9162c98e553d5cf0ff24d1ac33c3e6f20fe373f5c424815f947319e88f85095ff9d7d01a340f6b7d74eb8b148d0ebca52a34ca91c5037d73fa4bb7893772622e56bedc8b905a1307a65c3a1c689cf3f2767b40939f392816cc4104ed09f11e4b48ab3e27328c81dc4695eb67b0ef3d8b50a5d4f9490a100604c84a1506995c79b6a8c365990f455d855e5f4d372b76559e9e64ad9d9992c2c96397597d21bc4f6e96c505fe49ef557c386e827e8990d34c2fdbc008bf89a6a37483486181687f61b828e98decc75cab29fffe1a2ec937d1e368874c0e07baa60a9390c21d479e8e00c829ceba1e52b03fea8be3fd8e9902481873457beba7fcf63f965caccedd6881e57634d762bde1fb835ab970256ba25c835025b391b019821c56778dc16da10369333eb282d0955b23a1dbb0ffa972368cc84a673e2f49f53f8642b44388b083affe5eae747e7f2850b1994aa97e5c30deca625880bdf4bd451b0d0370981d635fdac4cdbdf5ce2dc40e928668d9d7d6fa2bb6bf7d5057bf8f3f2bd9077879a7c957d1607a2e51819a8d12482f121d559d122eb1d9e1b07338c0f2a5f49408b80db3012519816b6ab442696977e8dd9d230ae6792377812133bf1ceffe7e89408d6b025d09779bdfa1f11b326103d35d5b2fc49edeea87058e43ae6e03b35a4091ab31368eb7622af0abe1bc3c3dc6339dff8420c99af698b4003cb18633e4ced800f7075d041a806989fe09561b23a3032735d94a0c83df82591b674b05f8c87a79220713ead1935d3203b00d84cccc8d3f77e36f27f74c7ca4583c8e331d8eaf9835f33618f0c2d63fb7afd9b0b7c306a1d2e44dd2f83ef86538bb937eba6d446369f0ea61c82b904cac270ed300c8d34fe9b1e824b7c575f87f959431be1b79798a8cc92ec4e3207f1adc72782fc0e57026c96fe50f263bed1f7adfe937f01fe8150d754f3a3e8ffa305e1ed708e583e6f8991acb4e910f86398e1729b9bb7a330f933dae98b9af35ecb8aea1296a77fb943bac2db20508be89df1fb3c79363d08fd9190535dc14e55bc74afd8a34ca28142213f155ea2a5a277312910b2b0a8d1870c1f713e85a5019c7a58a4233f8b20620d3b06c93cc3f8e74fff815c0433abc937b21648fec73edf1a3e550695006d8bb6f3b2b998b85b7e04cf40da06316281f3b91108c3bbaaa7290b076c96b58fd4d83af1c40ae89ac28bc529c9617296120d75ad1c9b0f3fc98b70cd93c17207f7d5de6d52a926fa37bd2d88151a66221aa03be57f3e59685ccc2062895b7da24b677cd8b4cce69b2a6cd3d164c93b122b89b5c8f939bb58da73d75b4a49c4fe5301ba3b45951dbfbb0a2424218cca7b8feef7285410d993e7dcf000ce9b5855eee390a94ae2624ea3189dea4bc7a27ec6912c24db2812433ab54db139de1d952dc2ba20c236ed9255a4f6b56f2eb97c40f07b81433993e54453c63b087f020836a8555b5ccde87364a515870ddc7259acf18aa7b52d575acdf087451c65c3b91677a88376b79b96f4db47dc24373d1b6cd92397b1da261f02b5487c4d0a96c09560890f5b23e53ecbfd2ae84d21dcd3f906441058bea622008e5febc2468de39a4e569a82a79e12e922eb0ef5a1966394ac0ebd74148e564f1cc6ff18be51c14b6523babd76384863a94de6b665fbd1baa482318c89400f609780ca948fecb8e896a91bc7be5e33a4586f52bfee0349636cc3fdbc75523f7d5fb9eb93c22d5e78c97f7cda762e393a99ba057b0fc578d209124500ef794cd223de849d1767c37cbfa7e0e163be1ce2537336a4fa4eb1b0b871b27aa3b1c28180cdbf845f1ebeb8f889bda273d0df59f61472d0ba53a96455204eb56180bd999e11cbc7b3a23cc6816c57d65436934be1e2879e127da69dd6878b095171b1263c930acd6ea692566c738ed588f5c5803c048e528fd53040ce6513c50c4f80df7c79e7e162cc128eedf458d2b66797bdbd5a55448cf2296860e66bb6d4bfd63bfa2a12e8354b86d6a767085c6dde3a032ce9329a35b6ee0e22953508a4aa7166d352699e4ae049134034ae00204132c3c970dbb701eafb03290aa4e1924df8ddc37996ad8530b9303a73cff362eefe102f493d08307a382e777778d5a664dad1692f7b8577eb3a9caaeb149ac92af6c4db79176d2f2dfa512b182e46fc46ae3731b6852917d7a5c264b4bc77e07f1d40e0f0bc2b3a369d897333a6f52fef1f3bd53525f0f25afc4fcfe8002afcbf9ab7a529b0a3912fbd8d081d8b13ea04e0e3620f25e4e507448ec3ea58218f3a00f2af4cbf0ed1fb161f596340d341fcab8ae01d42a89a5115c95ea4e5606faefeca074c50c6c035f753f30e970a84e642b65d582f5848e13275b459d374759cb7deb210638d86d0c8638bec6477a897f1af509aecf2121ddcaf7a7f24c00eeda2f75c8688bfbbb0e897f900df079db70172add523ec8a7a3a04fd6a0086b723671c97b8b9f65952352db0bdd40bba76bbd1e2f3ee4bb2035a53555161dde5bdeeee7280481e0a74eea69e6d447de1516423881dd0ddd489d87f797a325f730b351e8727f986742d2398dd9c0954f8716c1dd8d531ab06a562e21bcc9a62fa29b7dbb467232c174760def7b6a5450c8fb885f795bec792117de4c073d2e172b720afbf981cdeb1f9ba8685e19e36c0bd1dffe04bad478d1e9d9a15e09cd628c546be2218e20e4d5ce3c39028d0b2c4a42101f3afc10b13f9e3df71d2d07f1f8d2e074cf93362f630befa82c8ebc344cf585b6a04182c82b05624ace2e58c815fe640daeae3600d38e4cb14f5048aac4d788af83a3fda61d87f6aebd2dcd63e5f6ee99cebfb36fc2500ce2ddf0775fe8c850ca0bf666133e51c04ae0ac13385c89e6c55c1cecf52a84add5dc738b48db3dadc866f11e4b8c78bdb3090b8d53ca7234999642fd62a93b28f993a4d6b9e226adb1b6d666660b117848401de21fafa7110611ead73bed98d85a8a3dda7b449ff29bb623447cca45cf463ef29baaadd60205e846bcb8f29e0e95e4445abd77c48c24fea1c98e6db923d1466e1ca3417ea5e53e21d16dbae7502753edede7c730dc51cae02404fc8b5d41d1be9361e6750a7012b2ba960b4a7e34b6c6ab8a5be62a807c4b3e00de9f896375b615a64201a7f19aa196cf52cb5e4fb5727310a27dc9391f2526860a1903da9406108d2d115cce500e7064adbaf293b04047ae9730e5b8c7a2d2cf9bfcd5d1c200c38af44da052482b3d6d16e29fcd278cbe2fe0d3d9fabdcc752e3c1d5863a5bb6c5120b7d71a2d137475c80dc5ef91e2801353714bc6200c420bd5229d5088c8b219dce8dca0e717ec8ddfe28d79272c15a357458769e7056ac58b1c493311d36caa94c72f49d72a129f61efdbde029aafb0a3c2ae410d23985dc0044c144dc4a81070ed31c7b0da72441b3b912e69d63d8917fb9557ccd365d7a9847c96037d41f346b3946976f330b5b9b63ea1fc17e68b72030a30b24629d4c82d7389c43af7c45fbeb2f67c00e405b15b3b4972e4529d83ed5d230f7ab977c5be31602d2336eb76160ce0181038f6a3ad47f948800b92a522cfa7e178fd9b2283da785bd9a04368dd48898b7dc9911cbfebc96099759765e0d75e39531757d1f1455c341f4ad608d536646de07b7554d270d4d575d9603500e90fde07d70bd204fc598d0645c60ed2c106d97b31f7cf14fe75fc2db5859ba2d2f7957a5c7c1f4cb8b6a6879cc035f5eb910208bab5358683ec76b48933571fec8d3af82b69f0572bdc899aaf6668d7d1d79b9a4a5cd3a0e3fe789ef8a0d6d25a10751f13c27eb3db1b5a57bc057d6b708f44c03a83178643bb8a0f7210ed4a29d9da6b78aaed0042c36bf4c028234c1a29501ce39dd09fb53fc8e1fa72d83f3c37e297c1aed06d888c0bd55956bc9d773732ddc21302d3c61d2ca50c3d95227d86eed29149ecb3281b42af29024e4a450d72553dd1dc7b763225c44be4b990190b1e4e059500f5c8af8978cff27928a87a5e81684eafb82b818bfe9b1e94fd8bd4312aa9fbcd0c0ac26f069d305b11e5aa82658ffc0c76f3a69b42fadab7b273d9f48ae865db3f0bee7ffdd0291eae8e6388518f8a9e75a9cacbbce19084ac34986571ea7956787c57c4de74aeb5fb9f9c6f014088f88d1b0d74df2f7a2613f1296b57068d7feda242722428b4fb5c6a0e21a93e44872f2538fb385ab159125c66147e3b0297c5c7d205f3bba560cdd80ea3c47296ad05c8699caf59407fb8d0e5aac5fa814748a67e9fe9e85cf611bb2bb572219ded405a9f9a785938f880f1b1344adee59354ef92c60136ba7165deac163486639560285d6c7dfa31c50df16e1d52ca1980f12a9a1c53b4927c4ab2cd95e1e57f1d3393056d675df5129b5c29078e6a415a76a2583ac3dbe14ca49d4adf668e3a4f71b66d7e0006cc37788e3d19bcb38f8894fe6fdbb380e501d0c474bd985b023e27ef707f6f2280b33aed4a31c1064a62cb10f2470d95442269e2211a3ae5b9e6ba15e6001c26471a6f8ed4f0a220a3d28a05a98d10f8be4dadc521d4944e30a87f6f94552f8267f48fe29c295ed930209a6c58462119e325f9312badf8cee5f6e52a43c4d063da7e3c514bfa1a9d5d6214b528a9ef7e8f2ce37d369ed5ce2b971b106ed4dead3f70ce6945fb6a03c6f919292aba266a11d80de2fc7ff77d19615c9adde904e7e1c6c565d7b27c8f1172cb1f3ed7342c43599719ec060130f628e0b876fcd7b3bfd7e4307e69f733de76c43d9e095c33d1dfa2d2d942da49c0b89e3cfbcfc180bbc56d7a958f6a6c5a6e39fa8e253d74e1605082243d40fdd2531f52f8d3c85f967c805be7f99cdfd6c61415cbfaee137bbc7d9abca996561d3de653515ea11a087eb1265789900995ca3d23e7bd4881baa7d4f251dfbc6fd5feea7c426c11263fc0929b5d73afb01975f2ea0b8f34591c5ffac3738a16d093d3880c183bde0ce2c9e7a56d358482b077db49efdb451f9d55f7e4f3e0eafa49fb42adf8ea816e96714d36450ec8f97664617b2fed785317382f8ca27be11bdde3f0628b35e81a6870bb6f9b6e62cf0083d01717df8974a56672abbb5c4eb140479d3539a4c06bc959b08869945c6c33c7141c6470cc25d9492c1abed7cf12313b74138718cf4ca5c0374cbf5a4412b95ae8ff5bca846bca39f5616d575401bf62ffe7cfcfd21a69e8710e3001afc2db8de7217872633de14246819851fa11814c53a719bbffde5c6f28000af91c75c56244615fd5cb8d55d0162c6cd2a3d3b64bb04eb5aec4736a4b0e193959edb950af5bc91ebd86c9519a24ca439a7aafa9b0ea2958f49678f1d525e335d0886ff5bed5228ec7fe76a8db4fd2a01ddee037de04132083595bdfef9f8f1bb54fe57801093cb5aeb567b0b8c5b58aaf7eeb83ae4ab2ac311f63e0b3a1f60baaa1c52df4108b441eddffed80155812baf55c8967dcedb91662bfaba88a1d96dea9c5a354ddaa32adba9c7373513d138104d64449733e2a7f601734ffb6ec0260db599b2acb8c5fccdba885d13df6b560fdd8175febe882ed02a90e5ce33fd65221af91b60db72097144ec4e73ba5b5208a23ccad54ef923f157525e46123c008280956615588a875a017d59a6e5d8fe09f0ef4e9be93db905025a09529892e4375e57d7f652c402309e11d9c461d76b7598a41d320b8eaa06d3fe1c1a335cb2ef428b67dd18914f90faa73c909e6262503026eaee96ca8b766c3a81cc928a2112e175315a52e6712e98879d76f5c45e6af7385e0481990a54a1ff2aa9fec9ab71c06b4dc0dbe4b4eb1e2c20b870be5c80d925780c4b0e86126a144e8a037dc844362d0b0cbab851234c80c86d1894ff01c11405156d8dd559e28f9567a579c0861282dcb7c6b7e698b8cbd2aa51b8044dbd9cd9da9aa9f80908e29061c824575f779544386edeb66fe6186711c80dfe0dbf2e4b707d686dd5d0747410cd80d99f85e38c477697f73daf09660d164df69f394faa69dc611d526e9f0a695602e60764424351b4827c0014674437e709d44e42827933ff422c8b15b2fbbd443981a037ccca13009841af754ac7d59987556dd3d25d8e30317f6f3150c4b391ad22b8ed389619292cdecf9d6887686fd66905a22142ad1b91d6a6c97129c91222c7ab5331dfd0514fdc1f771b9e47450149f5515a392fad79dab5e94a829202e30ed41a7afa46c8074e69ed93c06146e138befdf64679d69d9eed213f294a7ff8f7d60d6c6c77a02d49cced807642368520cc2242fbad5cf4b61a5d7865761e8a12b1cbdfbf5536979d0ae0f35275d6f6388162191033dc923da7e781792d3572749a0fb0575f7ceeaf6402d105f32fc41561084340658cd89c63d6d59089a426effbb5d8c87042bbb6b0615c33e173a3029ac05c9666acdae7224b4592df589259b8a3771561db0f842a5ad5d4a53b93c3089a548c1e40967dbf60ec95324fc98344b5ce896384fdfa45de009f68f32d108f5ec2922b5f60fed61a3b37fda427093be09f09ab798d73bdd20e98af872df86d62d5440a6ddfb919b0cf92bd1f1007b48419199d2eb3aefe87914411b05141ac8c25ce49a436669887a5deb0b9a6a7549d078e578f8353677208551276ea828a10594106b427e9cc7e77ac4f2ffa734d17c4ec2887e1881eaf79920e29135f7dcb167d37595ff3a92e9bc99abc6c4a03e07eb4dd44da348873128c67aac28d608ea3a6200e6df07162bc2f86be62b55841a39ec5a92a0a4974360b08717e1e765896261254acc3f99b910da9415354f0ad30872be322f382b21adacb5bdb824f260d002b422b95e615e6eeac64e00f2e10126b72b9f2d6bbe7ca8006f32082f296d4134aacaf9552f16a75a8e1c2fae0ed7e285dd0f36f37fd1685b1cc49d45ddde4b1df93b1da6fbeec8192c4ccc469f3525bcfa5a023a29808220595ac307e25b2327f6cc8f4a48ffc3728adcd400c6b519e9071ca5caee0cdd8165a3e090830381df752ecf9e422b8afad52e1793fb09f2edd3af1d427ca7a2989b4a33eb7051c7c540cefe88c78fff5ab78fe19ab5bcc6f4094628ecf746b50566729c8cf3c2254b6260a226cd8555ff95d6e9a39179d1a26adc22404369dfb7406d47d2361749bd046fd90c98cae6d806883f34b1c646e58a78addf89b16ce54c874526b62378d9b06d7ea0a630f4ef4a0073fb1d6bb3cc342038c656fae7850fbca193b36cd7a94b5285dcc2828e51470ee21d5e4adb9f842ebbfc0b1e196f3c4af15dcf1ccdbf49c0e5a13306db265c224f37e5fc5c581c217ef0fdd8a48ae9da5e1922ee4ba2c6ff6a55c4b87da065254c45657d258819d84c21a7c6a2dcac3bd7d71db14275e5e461ff8e05a6fa6c277a1d559e7f5f8c7d78d1a97b55f57df16a6f9b460e89efb07bc269d5b469d0ec502d6a9f19178f09c7343333f893eb0f0206bea1d5c688d931c0a45448cb2d42ec422aacf0ddfb935325557897de1bfd88ffbeecd2fed776767ea9872f93bae2eb7498150eaec14f5b294e96e9044831951aff6c03982efd57845eeb117d0ef142c409906818b667de02c5ffae34c34e560a3014f6ae47b1af509148d41234b6bcbe5664216320639bf45d48d45bd8587460b382c4ff13f843dac7850832ba94c786868de78d231f7fe93fc1cc89d27ad499aeaa2abe240be44472e656141ba7fea5cb2f1817c398f8c5c3ca33d14c69d7b28e4df76f0f0ee3183df05140f52523eda3c2d5f9a957552457e2748feaf4b7df6e6ac21bc018b8d1962250f63ae493714313eb4ebf457555e0c842b03721dc2685f9e6a40f38c5754e69802dee5c44c9ce1b863d3e01d6551c4187c857dd79490080c615d42efaf5abb5dc1da3a4c35ae6b9ecca07c58ad330f2048496bf57324b53312cf789baaf7e20a944a97b902425bacb4f6fd48994a4859a9c9640f64931f9568ab1b5dc1d7ba53d0f42b2d46c4a85b9d132ca697ea43bef5b6b21332a10ed6f731f9b205c55a0eb3cf241a4a365f6e138dd53012fa2545f3c1604c0753df8b71754f80ca9957223be81aeb7faf66497df2278f998c33c79774ff4a5bdd61bb8de974405547107426ed6848325603c2eac82c3d1c98a58ee77e2d3f15b9420394c9598c620f60e6104a632c97678283bf65483bd72f25eac4b9b283d572ca59af87a4b2d165998988bf3ffc7295715add74f93915b5be384e73890fcfd45b3c8f405d262d7703c0828f3f02972a4f007a0510919ff6f3919e5ac5304f10ed8ef828190224e6a2ee47074e5412caa6b59a2ed2a3da20aae3140cbd30378f150705278f5aa93d475a108eb56eed0eff6d1090251ba125225a0c18518debf10897d4c22d1a07f1ba943a24e972c746a63a5ceac756696bdbf4965ec6450b1bb22e2597ed4a64baff9ece497a9bf6b2818cbece37389dd5f32558c11f5258042a32a238e3d3936473541d6e0cead58b8dba6a2b92535e4a58517cae0a41360310c3789d79debceb9968d6b7e5b11f93db6136e4b3e87802af68e8f4a3f219749d6d0c8e9e39880f64e03b609b15964439295177ba4ee6707e66c91faf7a95cdf410c336659d98d5bb3eceeff40e5c2d3467b8ccfa4d1a5a361d1531e871a0aa767b3e817f0f74f30b7416e22e7092d58ec946db16970d5660b8734637805fc13bdd356dfe56370fd38dda26dff0d594cde79c357d66fdadbbad6487a4f26017af5d7a92be70bbd3816ccf1b239bcf2a3b630dfa787dfa97a5cbb1fc057c8f8e5dfa447166f676ab94f48396ea15a480da26d881b78c263c1a48b4b2aa7d6244de903e9adca1a23d7cc807b32f03b5ac455a8a1ded694f9e317f5118a4c8bf2d116e67bcd29a48846aa8b1c67c3ebe57692887950fce847c494b5518b627a2066ab0899ece343d4a297ce4efb3863fa6a6623c364c78bc9eb34e3bfc9e6b27ff0958229be6920dff2bed82350dfa53c82a255e3b210fca429cae9bda9b7180cbe0d8ad04949074fac1f1264f16f54a75dfdaae1fda983b7d046ba53b7fa489c07b152967f57bfb0b022281f519f52415f85cc3fbc9390feeb76ea90e78671d87561ccfbd5c868b54db884ef2c78dba0580097c3791bfa30f68bc73776a14d07b0d7efc40cedfab700997461345ea83351aec4a225f9b7cf03022e86181172ff6b79e7ddea2fdbcfef9b478956332045e32839635bbc125049ef28f3178bc01f6ed0af34b5c13b68850f6a609e8a08551ff8300123b2e4b4cc3f37f4cbd33acf4f80044997c796cee347560c4b24b678523c6de2f662a384a0fec18eedc14ec392f61e0f7e512a0eb61f365bfed32a4583d9abbda93f1b18ccb19833459220d58588918ad77e3e9df7c188968c69ad357fa6705812cc84751d794bd601fab85289a2c22f6d42a08e14a29112dd91c5bcd1264eaea9d623294973735f3b6321e19d23531fce1bb37a1b2c532c7500030117f10e684a1d4deb332ff0830ca289cdacc55e99d212b285178fab0b7e4c144ebf41e6bce52058bc75774c723ae61e1210bd629b38bf664eff2b0be673f8391b99a0163bd6b1e8eaccec3b107584f4a936da507cf29c71f1afd4e4bb5ebcbde2583c0c9f106c8197ba9378085ca0f221f9e358e9453b2abd58cec7daa4d184a60e1cd8bddf9cd105f6f2611f4dd6aaa726874c263cb560c75f270690eb80f55ef8f2d8aa234031bb71ab3857cf8e9e19558e9639ab849b34adf26a4ff0f8b3420e99463c5071b0eb989fc50625898b3e3309948ac49bc1eec06e934c6a26afab041fefe4a21f28fe77ce23bb7","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"e06b548b27a7e7d8dcac8c756dd3f2bc"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
